From apache@plt-scheme.org Fri Apr  7 10:12:30 2006
Received: from champlain.ccs.neu.edu (champlain.ccs.neu.edu [127.0.0.1])
	by champlain.ccs.neu.edu (8.12.10/8.12.10) with ESMTP id k37ECNZ4017474
	for <bugs@plt-scheme.org>; Fri, 7 Apr 2006 10:12:23 -0400
Message-Id: <200604071412.k37ECNRx017472@champlain.ccs.neu.edu>
Date: Fri, 7 Apr 2006 10:12:23 -0400
From: page@ou.edu
To: bugs@plt-scheme.org
Subject: update-struct operator not generated by defstructure

>Number:         8001
>Category:       acl2
>Synopsis:       update-struct operator not generated by defstructure
>Class:          doc-bug
>Responsible:    dalev
>Severity:       serious
>Priority:       medium
>State:          closed
>Confidential:   no
>Arrival-Date:   Fri Apr 07 10:15:01 -0400 2006
>Last-Modified:  Wed Jun 21 11:00:22 -0400 2006
>Originator:     Rex Page
>Organization:
plt
>Submitter-Id:   unknown
>Release:        301
>Environment:
windows "Windows NT 5.1 (Build 2600) Service Pack 2" (win32\i386) (get-display-depth) = 32
Docs Installed:
(#<path:C:\Program Files\PLT\collects\doc\web-server> #<path:C:\Program Files\PLT\collects\doc\tour> #<path:C:\Program Files\PLT\collects\doc\tools> #<path:C:\Program Files\PLT\collects\doc\tex2page> #<path:C:\Program Files\PLT\collects\doc\teachpack> #<path:C:\Program Files\PLT\collects\doc\t-y-scheme> #<path:C:\Program Files\PLT\collects\doc\swindle> #<path:C:\Program Files\PLT\collects\doc\srfi> #<path:C:\Program Files\PLT\collects\doc\r5rs> #<path:C:\Program Files\PLT\collects\doc\profj-intermediate> #<path:C:\Program Files\PLT\collects\doc\profj-beginner> #<path:C:\Program Files\PLT\collects\doc\profj-advanced> #<path:C:\Program Files\PLT\collects\doc\plot> #<path:C:\Program Files\PLT\collects\doc\mzscheme> #<path:C:\Program Files\PLT\collects\doc\mzlib> #<path:C:\Program Files\PLT\collects\doc\mzc> #<path:C:\Program Files\PLT\collects\doc\mrlib> #<path:C:\Program Files\PLT\collects\doc\mred> #<path:C:\Program Files\PLT\collects\doc\misclib> #<path:C:\Program Files\PLT\collects\doc\intermediate-lambda> #<path:C:\Program Files\PLT\collects\doc\intermediate> #<path:C:\Program Files\PLT\collects\doc\insidemz> #<path:C:\Program Files\PLT\collects\doc\help> #<path:C:\Program Files\PLT\collects\doc\framework> #<path:C:\Program Files\PLT\collects\doc\foreign> #<path:C:\Program Files\PLT\collects\doc\drscheme> #<path:C:\Program Files\PLT\collects\doc\beginning-abbr> #<path:C:\Program Files\PLT\collects\doc\beginning> #<path:C:\Program Files\PLT\collects\doc\advanced> #<path:C:\Program Files\PLT\collects\doc\acl2>)
Collections:
((#<path:C:\Documents and Settings\rex\Application Data\PLT Scheme\301\collects> "non-existent path") (#<path:C:\Program Files\PLT\collects> (#<path:acl2> #<path:afm> #<path:algol60> #<path:browser> #<path:compiler> #<path:defaults> #<path:doc> #<path:drscheme> #<path:dynext> #<path:embedded-gui> #<path:eopl> #<path:errortrace> #<path:ffi> #<path:framework> #<path:frtime> #<path:games> #<path:graphics> #<path:help> #<path:hierlist> #<path:htdch> #<path:htdp> #<path:html> #<path:icons> #<path:info-domain> #<path:lang> #<path:launcher> #<path:make> #<path:mred> #<path:mrlib> #<path:mysterx> #<path:mzcom> #<path:mzlib> #<path:mzscheme> #<path:mztake> #<path:net> #<path:openssl> #<path:parser-tools> #<path:planet> #<path:plot> #<path:preprocessor> #<path:profj> #<path:profjBoxes> #<path:r5rs> #<path:setup> #<path:sgl> #<path:slatex> #<path:slibinit> #<path:slideshow> #<path:srfi> #<path:ssax> #<path:stepper> #<path:string-constants> #<path:swindle> #<path:syntax> #<path:syntax-color> #<path:test-suite> #<path:tex2page> #<path:texpict> #<path:trace> #<path:version> #<path:web-server> #<path:xml>)))
Human Language: english
Teachpack filenames: ()
Computer Language: (("ACL2 Languages" "ACL2 Beginner (beta 8)") #6(#t write mixed-fraction-e #f #t debug))
>Description:
The Help Desk documentation for defstructure warns that
there are some restrictions on field-spec, but doesn't say
anythingabout restrictions on update-struct, which is one
of the operators that the official ACL2 documentation for
defstructure says will be defined automatically.

The Help Desk documentation for defmacro warns that
keyword arguments are not supported. Since update-struct
requires keyword arguments, one might guess that
update-struct would not be supported, but it's a bit on the
subtle side, especially since :assert and :rewrite are
supported in field-spec.

Probably there should be note about update-struct not
being supported alongside the restriction on the field-spec
grammar.
>How-To-Repeat:
(defstructure struct a b)
(defconst *s* (struct 1 2))
(defconst *s-mod* (update-struct *s* :a 3))
>Fix:
>Audit-Trail:
State changed from "open" to "closed" by dalev at Wed, 21 Jun 2006 11:00:22 -0400
Reason>>> Added update-struct forms to SVN version.  

