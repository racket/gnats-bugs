From bugs+caf_=bugs=bugs.plt-scheme.org@plt-scheme.org Tue Jan  7 21:58:44 2014
Received: from mail-oa0-f48.google.com (mail-oa0-f48.google.com [209.85.219.48])
	by winooski.ccs.neu.edu (8.14.7/8.14.7) with ESMTP id s082weAQ024817
	for <bugs@bugs.plt-scheme.org>; Tue, 7 Jan 2014 21:58:41 -0500
Message-Id: <201401080258.s082wcre024804@winooski.ccs.neu.edu>
Date: Tue, 7 Jan 2014 21:58:38 -0500
From: asumu@ccs.neu.edu
To: bugs@racket-lang.org
Subject: Docs for `pretty-print-newline` inaccurate/confusing

>Number:         14273
>Category:       all
>Synopsis:       Docs for `pretty-print-newline` inaccurate/confusing
>Class:          sw-bug
>Responsible:    nobody
>Severity:       serious
>Priority:       medium
>State:          open
>Confidential:   no
>Arrival-Date:   Tue Jan 07 22:00:01 -0500 2014
>Originator:     Asumu Takikawa
>Organization:
plt
>Submitter-Id:   unknown
>Release:        5.91--2013-12-07(f61b212/a)
>Environment:
windows "Windows NT 6.1 (Build 7601) Service Pack 1" (win32\x86_64\3m) (get-display-depth) = 32
Human Language: japanese
(current-memory-use) 550348248
Links: (links) = ("trace" "unstable" "icons" "profile" "syntax" "mrlib"); (links #:user? #f) = (); (links #:root? #t) = (#<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\xrepl-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\readline-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\scribble-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\scribble-text-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\macro-debugger-text-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\scheme-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\compatibility-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\racket-index> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\planet-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\net-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\rele!
 ase-snapshot\pkgs\at-exp-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\draw-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\syntax-color-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\sandbox-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\rackunit-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\parser-tools-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\unstable-list-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\srfi-lite-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\draw-win32-x86_64> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\unstable-options-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\errortrace-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\data-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\re!
 lease-snapshot\pkgs\drracket> #<path:C:\Users\asumu\AppData\Ro!
 aming\Racket\release-snapshot\pkgs\compiler-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\pconvert-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\pict-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\snip-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\string-constants-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\typed-racket-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\unstable-contract-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\wxme-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\gui-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\racket-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\html-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\images-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release!
 -snapshot\pkgs\typed-racket-more> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\macro-debugger> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\srfi-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\srfi-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\drracket-plugin-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\gui-pkg-manager-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\mzscheme-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\net-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\planet-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\compatibility-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\string-constants-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\draw-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-!
 snapshot\pkgs\errortrace-doc> #<path:C:\Users\asumu\AppData\Roaming\Rac!
 ket\release-snapshot\pkgs\gui-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\pict-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\profile-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\r5rs-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\unstable-2d> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\gui-win32-x86_64> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\rackunit-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\compatibility> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\typed-racket-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\web-server-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\gui> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\draw> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\pict> #<pat!
 h:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\parser-tools-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\slideshow-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\r6rs-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\xrepl> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\readline> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\syntax-color> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\scribble-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\future-visualizer> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\distributed-places> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\serialize-cstruct-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\cext-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\data-doc> #<path:C:\Users\asu!
 mu\AppData\Roaming\Racket\release-snapshot\pkgs\unstable-latent-contrac!
 t-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\unstable-parameter-group-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\rackunit-gui> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\images-gui-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\r6rs-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\slideshow-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\unstable-macro-testing-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\r5rs-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\web-server-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\syntax-color-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\db-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\db-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\xrep!
 l-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\readline-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\distributed-places-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\distributed-places-doc> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\unstable-debug-lib> #<path:C:\Users\asumu\AppData\Roaming\Racket\release-snapshot\pkgs\unstable-pretty-lib>); (links #:user? #f #:root? #t) = (#<path:C:\Users\asumu\Racket-5.91\share\pkgs\racket-lib> #<path:C:\Users\asumu\Racket-5.91\share\pkgs\racket-win32-x86_64> #<path:C:\Users\asumu\Racket-5.91\share\pkgs\db-win32-x86_64> #<path:C:\Users\asumu\Racket-5.91\share\pkgs\com-win32-x86_64> #<path:C:\Users\asumu\Racket-5.91\share\pkgs\base>)
raco pkg (show):
Installation-wide:
 Package       Checksum                                    Source
 racket-lib    9653afaa22763d418be6a4faeaa26285a3ccdf6a    (catalog racket-lib)
 [4 auto-installed packages not shown]
User-specific for installation "release-snapshot":
 Package      Checksum                                    Source
 drracket     866ad6550a8bde2b499588faf511469798d6ed0d    (catalog drracket)
 xrepl-lib    9f8e004278555dddac97361f824a49fa7b19eb63    (catalog xrepl-lib)
 [96 auto-installed packages not shown]



Collections:
("C:\\Users\\asumu\\AppData\\Roaming\\Racket\\release-snapshot\\collects"
 (non-existent-path))
("C:\\Users\\asumu\\Racket-5.91\\collects"
 (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))

Recent Internal Errors: 
Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((main) (test)) #t))
>Description:
The docs claim that the `pretty-print-newline`
function takes an output port, but most output ports
are not accepted:

  (pretty-print-newline (current-output-port) 3)
  ; ==>
  ; printing-port-info: contract violation
  ;   expected: printing-port?
  ;   given: #<output-port>

A more precise contract might help (it wasn't obvious to me from
the prose either).

It also doesn't return void like the docs claim:

  (pretty-print-newline (make-tentative-pretty-print-output-port (current-output-port) 3 values) 3)
  ; ==> 0
>How-To-Repeat:

>Fix:
