From bugs+caf_=bugs=bugs.plt-scheme.org@plt-scheme.org Sat Jun  1 19:20:03 2013
Received: from mail-ob0-f182.google.com (mail-ob0-f182.google.com [209.85.214.182])
	by champlain.ccs.neu.edu (8.14.4/8.14.4) with ESMTP id r51NK0KH027951
	for <bugs@bugs.plt-scheme.org>; Sat, 1 Jun 2013 19:20:00 -0400
Message-Id: <201306012319.r51NJvP4027944@champlain.ccs.neu.edu>
Date: Sat, 1 Jun 2013 19:19:57 -0400
From: jewillco@crest.iu.edu
To: bugs@racket-lang.org
Subject: Several forms are missing square bracket conversion

>Number:         13810
>Category:       all
>Synopsis:       Several forms are missing square bracket conversion
>Class:          sw-bug
>Responsible:    robby
>Severity:       non-critical
>Priority:       medium
>State:          closed
>Confidential:   no
>Arrival-Date:   Sat Jun 01 19:24:01 -0400 2013
>Closed-Date:    Tue Aug 20 01:20:46 -0400 2013
>Last-Modified:  Tue Aug 20 01:20:46 -0400 2013
>Originator:     Jeremiah Willcock
>Organization:
plt
>Submitter-Id:   unknown
>Release:        5.3.4.10
>Environment:
linux-fedora
>Description:
The match-lambda and match-lambda* forms do not cause square bracket conversion in their match clauses, even when that option is enabled and other match forms have the conversion.  Also, for/fold and similar forms do not add square brackets to their second arguments (list of for clauses), while they do for the first argument (folded variables and initializers).
>How-To-Repeat:
Enable automatic conversion to square brackets and enter an example of any of the listed forms in DrRacket's definition window.
>Fix:
>Audit-Trail:
From: Robby Findler <robby@eecs.northwestern.edu>
To: jewillco@crest.iu.edu, bugs <bugs@racket-lang.org>
Cc: nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13810: Several forms are missing square bracket conversion
Date: Sat, 1 Jun 2013 19:10:40 -0500

 --089e01184178a9de7304de20ad4f
 Content-Type: text/plain; charset=UTF-8
 
 How do you get match-lambda and match-lambda* to not work? I type
 
   (match-lambda ((
 
 and I see
 
   (match-lambda [(
 
 which looks right to me.
 
 Robby
 
 
 On Sat, Jun 1, 2013 at 6:24 PM, <jewillco@crest.iu.edu> wrote:
 
 > A new problem report is waiting at
 >   http://bugs.racket-lang.org/query/?cmd=view&pr=13810
 >
 > Reported by Jeremiah Willcock for release: 5.3.4.10
 >
 > *** Description:
 > The match-lambda and match-lambda* forms do not cause square bracket
 > conversion in their match clauses, even when that option is enabled and
 > other match forms have the conversion.  Also, for/fold and similar forms do
 > not add square brackets to their second arguments (list of for clauses),
 > while they do for the first argument (folded variables and initializers).
 >
 > *** How to repeat:
 > Enable automatic conversion to square brackets and enter an example of any
 > of the listed forms in DrRacket's definition window.
 >
 > *** Environment:
 > linux-fedora
 >
 >
 
 --089e01184178a9de7304de20ad4f
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 <div dir=3D"ltr">How do you get match-lambda and match-lambda* to not work?=
  I type<div><br></div><div style>=C2=A0 (match-lambda ((</div><div style><b=
 r></div><div style>and I see</div><div style><br></div><div style>=C2=A0=C2=
 =A0(match-lambda [(</div>
 <div style><br></div><div style>which looks right to me.</div><div style><b=
 r></div><div style>Robby<br></div></div><div class=3D"gmail_extra"><br><br>=
 <div class=3D"gmail_quote">On Sat, Jun 1, 2013 at 6:24 PM,  <span dir=3D"lt=
 r">&lt;<a href=3D"mailto:jewillco@crest.iu.edu" target=3D"_blank">jewillco@=
 crest.iu.edu</a>&gt;</span> wrote:<br>
 <blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
 x #ccc solid;padding-left:1ex">A new problem report is waiting at<br>
 =C2=A0 <a href=3D"http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=3D13=
 810" target=3D"_blank">http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=
 =3D13810</a><br>
 <br>
 Reported by Jeremiah Willcock for release: 5.3.4.10<br>
 <br>
 *** Description:<br>
 The match-lambda and match-lambda* forms do not cause square bracket conver=
 sion in their match clauses, even when that option is enabled and other mat=
 ch forms have the conversion. =C2=A0Also, for/fold and similar forms do not=
  add square brackets to their second arguments (list of for clauses), while=
  they do for the first argument (folded variables and initializers).<br>
 
 <br>
 *** How to repeat:<br>
 Enable automatic conversion to square brackets and enter an example of any =
 of the listed forms in DrRacket&#39;s definition window.<br>
 <br>
 *** Environment:<br>
 linux-fedora<br>
 <br>
 </blockquote></div><br></div>
 
 --089e01184178a9de7304de20ad4f--
From: Robby Findler <robby@eecs.northwestern.edu>
To: jewillco@crest.iu.edu, bugs <bugs@racket-lang.org>
Cc: nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13810: Several forms are missing square bracket conversion
Date: Sat, 1 Jun 2013 19:17:25 -0500

 --089e0117692dc940a904de20c5ca
 Content-Type: text/plain; charset=UTF-8
 
 (oh, sorry: I typed "[match-lambda [[".)
 
 
 On Sat, Jun 1, 2013 at 7:10 PM, Robby Findler
 <robby@eecs.northwestern.edu>wrote:
 
 > How do you get match-lambda and match-lambda* to not work? I type
 >
 >   (match-lambda ((
 >
 > and I see
 >
 >   (match-lambda [(
 >
 > which looks right to me.
 >
 > Robby
 >
 >
 > On Sat, Jun 1, 2013 at 6:24 PM, <jewillco@crest.iu.edu> wrote:
 >
 >> A new problem report is waiting at
 >>   http://bugs.racket-lang.org/query/?cmd=view&pr=13810
 >>
 >> Reported by Jeremiah Willcock for release: 5.3.4.10
 >>
 >> *** Description:
 >> The match-lambda and match-lambda* forms do not cause square bracket
 >> conversion in their match clauses, even when that option is enabled and
 >> other match forms have the conversion.  Also, for/fold and similar forms do
 >> not add square brackets to their second arguments (list of for clauses),
 >> while they do for the first argument (folded variables and initializers).
 >>
 >> *** How to repeat:
 >> Enable automatic conversion to square brackets and enter an example of
 >> any of the listed forms in DrRacket's definition window.
 >>
 >> *** Environment:
 >> linux-fedora
 >>
 >>
 >
 
 --089e0117692dc940a904de20c5ca
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 <div dir=3D"ltr">(oh, sorry: I typed &quot;[match-lambda [[&quot;.)</div><d=
 iv class=3D"gmail_extra"><br><br><div class=3D"gmail_quote">On Sat, Jun 1, =
 2013 at 7:10 PM, Robby Findler <span dir=3D"ltr">&lt;<a href=3D"mailto:robb=
 y@eecs.northwestern.edu" target=3D"_blank">robby@eecs.northwestern.edu</a>&=
 gt;</span> wrote:<br>
 <blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
 x #ccc solid;padding-left:1ex"><div dir=3D"ltr">How do you get match-lambda=
  and match-lambda* to not work? I type<div><br></div><div>=C2=A0 (match-lam=
 bda ((</div>
 <div><br></div><div>and I see</div><div><br></div><div>=C2=A0=C2=A0(match-l=
 ambda [(</div>
 <div><br></div><div>which looks right to me.</div><span class=3D"HOEnZb"><f=
 ont color=3D"#888888"><div><br></div><div>Robby<br></div></font></span></di=
 v><div class=3D"HOEnZb"><div class=3D"h5"><div class=3D"gmail_extra"><br><b=
 r><div class=3D"gmail_quote">
 On Sat, Jun 1, 2013 at 6:24 PM,  <span dir=3D"ltr">&lt;<a href=3D"mailto:je=
 willco@crest.iu.edu" target=3D"_blank">jewillco@crest.iu.edu</a>&gt;</span>=
  wrote:<br>
 <blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
 x #ccc solid;padding-left:1ex">A new problem report is waiting at<br>
 =C2=A0 <a href=3D"http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=3D13=
 810" target=3D"_blank">http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=
 =3D13810</a><br>
 <br>
 Reported by Jeremiah Willcock for release: 5.3.4.10<br>
 <br>
 *** Description:<br>
 The match-lambda and match-lambda* forms do not cause square bracket conver=
 sion in their match clauses, even when that option is enabled and other mat=
 ch forms have the conversion. =C2=A0Also, for/fold and similar forms do not=
  add square brackets to their second arguments (list of for clauses), while=
  they do for the first argument (folded variables and initializers).<br>
 
 
 <br>
 *** How to repeat:<br>
 Enable automatic conversion to square brackets and enter an example of any =
 of the listed forms in DrRacket&#39;s definition window.<br>
 <br>
 *** Environment:<br>
 linux-fedora<br>
 <br>
 </blockquote></div><br></div>
 </div></div></blockquote></div><br></div>
 
 --089e0117692dc940a904de20c5ca--
From: Jeremiah Willcock <jewillco@osl.iu.edu>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13810: Several forms are missing square bracket
 conversion
Date: Sat, 1 Jun 2013 21:17:30 -0400 (EDT)

   This message is in MIME format.  The first part should be readable text,
   while the remaining parts are likely unreadable without MIME-aware tools.
 
 --1333895666-245502401-1370135850=:10866
 Content-Type: TEXT/PLAIN; charset=UTF-8; format=flowed
 Content-Transfer-Encoding: 8BIT
 
 Here is a possibility of what is happening -- my racket-prefs.rktd file 
 did not have match-lambda (until I added it manually before) in it since 
 it was created with an older version of DrRacket, and removing that 
 section of the file fixed the problem.  Are preference files updated 
 automatically when new versions of DrRacket add to the square-bracket 
 list?
 
 -- Jeremiah Willcock
 
 On Sat, 1 Jun 2013, Robby Findler wrote:
 
 > (oh, sorry: I typed "[match-lambda [[".)
 > 
 > 
 > On Sat, Jun 1, 2013 at 7:10 PM, Robby Findler <robby@eecs.northwestern.edu> wrote:
 >       How do you get match-lambda and match-lambda* to not work? I type
 >   (match-lambda ((
 > 
 > and I see
 > 
 >   (match-lambda [(
 > 
 > which looks right to me.
 > 
 > Robby
 > 
 > 
 > On Sat, Jun 1, 2013 at 6:24 PM, <jewillco@crest.iu.edu> wrote:
 >       A new problem report is waiting at
 >         http://bugs.racket-lang.org/query/?cmd=view&pr=13810
 >
 >       Reported by Jeremiah Willcock for release: 5.3.4.10
 >
 >       *** Description:
 >       The match-lambda and match-lambda* forms do not cause square bracket conversion in their match
 >       clauses, even when that option is enabled and other match forms have the conversion.  Also,
 >       for/fold and similar forms do not add square brackets to their second arguments (list of for
 >       clauses), while they do for the first argument (folded variables and initializers).
 >
 >       *** How to repeat:
 >       Enable automatic conversion to square brackets and enter an example of any of the listed forms in
 >       DrRacket's definition window.
 >
 >       *** Environment:
 >       linux-fedora
 > 
 > 
 > 
 > 
 >
 --1333895666-245502401-1370135850=:10866--
From: Robby Findler <robby@eecs.northwestern.edu>
To: Jeremiah Willcock <jewillco@osl.iu.edu>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13810: Several forms are missing square bracket conversion
Date: Sat, 1 Jun 2013 20:44:09 -0500

 --089e01184178fcc35f04de21fbb2
 Content-Type: text/plain; charset=UTF-8
 
 No, they aren't. I've been thinking about how to do that, but I haven't had
 a chance to give something a try.
 
 Currently the preferences system behaves like a fancy hash table whose
 values are fixed the first time you start DrRacket (roughly, it is not
 exactly like that but close enough) and whose values are saved across
 invocations of DrRacket. The various tabbing/parenthesis related
 preferences are stored literally as what you see in the dialog. I should
 instead save something like a delta to the defaults so when the defaults
 change you get those changes.
 
 At least that's as far as I've thought about it. :)
 
 Robby
 
 
 On Sat, Jun 1, 2013 at 8:17 PM, Jeremiah Willcock <jewillco@osl.iu.edu>wrote:
 
 > Here is a possibility of what is happening -- my racket-prefs.rktd file
 > did not have match-lambda (until I added it manually before) in it since it
 > was created with an older version of DrRacket, and removing that section of
 > the file fixed the problem.  Are preference files updated automatically
 > when new versions of DrRacket add to the square-bracket list?
 >
 > -- Jeremiah Willcock
 >
 >
 > On Sat, 1 Jun 2013, Robby Findler wrote:
 >
 >  (oh, sorry: I typed "[match-lambda [[".)
 >>
 >>
 >> On Sat, Jun 1, 2013 at 7:10 PM, Robby Findler <
 >> robby@eecs.northwestern.edu> wrote:
 >>       How do you get match-lambda and match-lambda* to not work? I type
 >>   (match-lambda ((
 >>
 >> and I see
 >>
 >>   (match-lambda [(
 >>
 >> which looks right to me.
 >>
 >> Robby
 >>
 >>
 >> On Sat, Jun 1, 2013 at 6:24 PM, <jewillco@crest.iu.edu> wrote:
 >>       A new problem report is waiting at
 >>         http://bugs.racket-lang.org/**query/?cmd=view&pr=13810<http://bugs.racket-lang.org/query/?cmd=view&pr=13810>
 >>
 >>       Reported by Jeremiah Willcock for release: 5.3.4.10
 >>
 >>       *** Description:
 >>       The match-lambda and match-lambda* forms do not cause square
 >> bracket conversion in their match
 >>       clauses, even when that option is enabled and other match forms
 >> have the conversion.  Also,
 >>       for/fold and similar forms do not add square brackets to their
 >> second arguments (list of for
 >>       clauses), while they do for the first argument (folded variables
 >> and initializers).
 >>
 >>       *** How to repeat:
 >>       Enable automatic conversion to square brackets and enter an example
 >> of any of the listed forms in
 >>       DrRacket's definition window.
 >>
 >>       *** Environment:
 >>       linux-fedora
 >>
 >>
 >>
 >>
 >>
 
 --089e01184178fcc35f04de21fbb2
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 <div dir=3D"ltr">No, they aren&#39;t. I&#39;ve been thinking about how to d=
 o that, but I haven&#39;t had a chance to give something a try.<div><br></d=
 iv><div>Currently the preferences system behaves like a fancy hash table wh=
 ose values are fixed the first time you start DrRacket (roughly, it is not =
 exactly like that but close enough) and whose values are saved across invoc=
 ations of DrRacket. The various tabbing/parenthesis related preferences are=
  stored literally as what you see in the dialog. I should instead save some=
 thing like a delta to the defaults so when the defaults change you get thos=
 e changes.=C2=A0</div>
 <div><br></div><div>At least that&#39;s as far as I&#39;ve thought about it=
 . :)<br><div><br></div><div>Robby</div></div></div><div class=3D"gmail_extr=
 a"><br><br><div class=3D"gmail_quote">On Sat, Jun 1, 2013 at 8:17 PM, Jerem=
 iah Willcock <span dir=3D"ltr">&lt;<a href=3D"mailto:jewillco@osl.iu.edu" t=
 arget=3D"_blank">jewillco@osl.iu.edu</a>&gt;</span> wrote:<br>
 <blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
 x #ccc solid;padding-left:1ex">Here is a possibility of what is happening -=
 - my racket-prefs.rktd file did not have match-lambda (until I added it man=
 ually before) in it since it was created with an older version of DrRacket,=
  and removing that section of the file fixed the problem. =C2=A0Are prefere=
 nce files updated automatically when new versions of DrRacket add to the sq=
 uare-bracket list?<span class=3D"HOEnZb"><font color=3D"#888888"><br>
 
 <br>
 -- Jeremiah Willcock</font></span><div class=3D"HOEnZb"><div class=3D"h5"><=
 br>
 <br>
 On Sat, 1 Jun 2013, Robby Findler wrote:<br>
 <br>
 <blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
 x #ccc solid;padding-left:1ex">
 (oh, sorry: I typed &quot;[match-lambda [[&quot;.)<br>
 <br>
 <br>
 On Sat, Jun 1, 2013 at 7:10 PM, Robby Findler &lt;<a href=3D"mailto:robby@e=
 ecs.northwestern.edu" target=3D"_blank">robby@eecs.northwestern.edu</a>&gt;=
  wrote:<br>
 =C2=A0 =C2=A0 =C2=A0 How do you get match-lambda and match-lambda* to not w=
 ork? I type<br>
 =C2=A0 (match-lambda ((<br>
 <br>
 and I see<br>
 <br>
 =C2=A0=C2=A0(match-lambda [(<br>
 <br>
 which looks right to me.<br>
 <br>
 Robby<br>
 <br>
 <br>
 On Sat, Jun 1, 2013 at 6:24 PM, &lt;<a href=3D"mailto:jewillco@crest.iu.edu=
 " target=3D"_blank">jewillco@crest.iu.edu</a>&gt; wrote:<br>
 =C2=A0 =C2=A0 =C2=A0 A new problem report is waiting at<br>
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <a href=3D"http://bugs.racket-lang.org/query/?c=
 md=3Dview&amp;pr=3D13810" target=3D"_blank">http://bugs.racket-lang.org/<u>=
 </u>query/?cmd=3Dview&amp;pr=3D13810</a><br>
 <br>
 =C2=A0 =C2=A0 =C2=A0 Reported by Jeremiah Willcock for release: 5.3.4.10<br=
 >
 <br>
 =C2=A0 =C2=A0 =C2=A0 *** Description:<br>
 =C2=A0 =C2=A0 =C2=A0 The match-lambda and match-lambda* forms do not cause =
 square bracket conversion in their match<br>
 =C2=A0 =C2=A0 =C2=A0 clauses, even when that option is enabled and other ma=
 tch forms have the conversion. =C2=A0Also,<br>
 =C2=A0 =C2=A0 =C2=A0 for/fold and similar forms do not add square brackets =
 to their second arguments (list of for<br>
 =C2=A0 =C2=A0 =C2=A0 clauses), while they do for the first argument (folded=
  variables and initializers).<br>
 <br>
 =C2=A0 =C2=A0 =C2=A0 *** How to repeat:<br>
 =C2=A0 =C2=A0 =C2=A0 Enable automatic conversion to square brackets and ent=
 er an example of any of the listed forms in<br>
 =C2=A0 =C2=A0 =C2=A0 DrRacket&#39;s definition window.<br>
 <br>
 =C2=A0 =C2=A0 =C2=A0 *** Environment:<br>
 =C2=A0 =C2=A0 =C2=A0 linux-fedora<br>
 <br>
 <br>
 <br>
 <br>
 </blockquote>
 </div></div></blockquote></div><br></div>
 
 --089e01184178fcc35f04de21fbb2--
From: Eli Barzilay <eli@barzilay.org>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: Jeremiah Willcock <jewillco@osl.iu.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13810: Several forms are missing square bracket conversion
Date: Sun, 2 Jun 2013 00:20:25 -0400

 Three hours ago, Robby Findler wrote:
 > No, they aren't. I've been thinking about how to do that, but I
 > haven't had a chance to give something a try.
 > 
 > Currently the preferences system behaves like a fancy hash table
 > whose values are fixed the first time you start DrRacket (roughly,
 > it is not exactly like that but close enough) and whose values are
 > saved across invocations of DrRacket. The various
 > tabbing/parenthesis related preferences are stored literally as what
 > you see in the dialog. I should instead save something like a delta
 > to the defaults so when the defaults change you get those changes. 
 > 
 > At least that's as far as I've thought about it. :)
 
 How about this, as a specific way of dealing with both a
 representation of such options and with the existence of such broken
 preference files:
 
 * Represent these things as deltas from the default: additions and
   removals from the default built-in list.
 
 * This way, things that are added to the default list get added unless
   explicitly removed by a user.
 
 * Since existing preferences are in some cases (as in this PR) a
   representation of "remove some forms", and since usually people
   don't want to do this, then maybe have some new preference, and if
   drr sees only the old one, it converts it to the new one and alerts
   the user for disabled forms if there are any -- allowing most people
   to just click some "use the defaults" thing, which is in most of
   these cases the right thing.
 
 -- 
           ((lambda (x) (x x)) (lambda (x) (x x)))          Eli Barzilay:
                     http://barzilay.org/                   Maze is Life!
 
From: Robby Findler <robby@eecs.northwestern.edu>
To: Eli Barzilay <eli@barzilay.org>
Cc: Jeremiah Willcock <jewillco@osl.iu.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13810: Several forms are missing square bracket conversion
Date: Sun, 2 Jun 2013 07:49:27 -0500

 --047d7b5d2c0043389204de2b4739
 Content-Type: text/plain; charset=UTF-8
 
 This is basically what I have in mind (except not bullet point 3 -- if
 there were to be saved a "remove some form" preference that would have
 corresponded to someone clicking delete in the GUI and probably the best
 thing is to respect that click. But maybe the preferences dialog could show
 you the removed ones greyed out or something and make it easy to re-add
 them. (A dialog box seems too heavy.)).
 
 Robby
 
 
 On Sat, Jun 1, 2013 at 11:20 PM, Eli Barzilay <eli@barzilay.org> wrote:
 
 > Three hours ago, Robby Findler wrote:
 > > No, they aren't. I've been thinking about how to do that, but I
 > > haven't had a chance to give something a try.
 > >
 > > Currently the preferences system behaves like a fancy hash table
 > > whose values are fixed the first time you start DrRacket (roughly,
 > > it is not exactly like that but close enough) and whose values are
 > > saved across invocations of DrRacket. The various
 > > tabbing/parenthesis related preferences are stored literally as what
 > > you see in the dialog. I should instead save something like a delta
 > > to the defaults so when the defaults change you get those changes.
 > >
 > > At least that's as far as I've thought about it. :)
 >
 > How about this, as a specific way of dealing with both a
 > representation of such options and with the existence of such broken
 > preference files:
 >
 > * Represent these things as deltas from the default: additions and
 >   removals from the default built-in list.
 >
 > * This way, things that are added to the default list get added unless
 >   explicitly removed by a user.
 >
 > * Since existing preferences are in some cases (as in this PR) a
 >   representation of "remove some forms", and since usually people
 >   don't want to do this, then maybe have some new preference, and if
 >   drr sees only the old one, it converts it to the new one and alerts
 >   the user for disabled forms if there are any -- allowing most people
 >   to just click some "use the defaults" thing, which is in most of
 >   these cases the right thing.
 >
 > --
 >           ((lambda (x) (x x)) (lambda (x) (x x)))          Eli Barzilay:
 >                     http://barzilay.org/                   Maze is Life!
 >
 
 --047d7b5d2c0043389204de2b4739
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 <div dir=3D"ltr">This is basically what I have in mind (except not bullet p=
 oint 3 -- if there were to be saved a &quot;remove some form&quot; preferen=
 ce that would have corresponded to someone clicking delete in the GUI and p=
 robably the best thing is to respect that click. But maybe the preferences =
 dialog could show you the removed ones greyed out or something and make it =
 easy to re-add them. (A dialog box seems too heavy.)).<div>
 <br></div><div>Robby</div></div><div class=3D"gmail_extra"><br><br><div cla=
 ss=3D"gmail_quote">On Sat, Jun 1, 2013 at 11:20 PM, Eli Barzilay <span dir=
 =3D"ltr">&lt;<a href=3D"mailto:eli@barzilay.org" target=3D"_blank">eli@barz=
 ilay.org</a>&gt;</span> wrote:<br>
 <blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
 x #ccc solid;padding-left:1ex"><div class=3D"im">Three hours ago, Robby Fin=
 dler wrote:<br>
 &gt; No, they aren&#39;t. I&#39;ve been thinking about how to do that, but =
 I<br>
 &gt; haven&#39;t had a chance to give something a try.<br>
 &gt;<br>
 &gt; Currently the preferences system behaves like a fancy hash table<br>
 &gt; whose values are fixed the first time you start DrRacket (roughly,<br>
 &gt; it is not exactly like that but close enough) and whose values are<br>
 &gt; saved across invocations of DrRacket. The various<br>
 &gt; tabbing/parenthesis related preferences are stored literally as what<b=
 r>
 &gt; you see in the dialog. I should instead save something like a delta<br=
 >
 &gt; to the defaults so when the defaults change you get those changes.=C2=
 =A0<br>
 &gt;<br>
 &gt; At least that&#39;s as far as I&#39;ve thought about it. :)<br>
 <br>
 </div>How about this, as a specific way of dealing with both a<br>
 representation of such options and with the existence of such broken<br>
 preference files:<br>
 <br>
 * Represent these things as deltas from the default: additions and<br>
 =C2=A0 removals from the default built-in list.<br>
 <br>
 * This way, things that are added to the default list get added unless<br>
 =C2=A0 explicitly removed by a user.<br>
 <br>
 * Since existing preferences are in some cases (as in this PR) a<br>
 =C2=A0 representation of &quot;remove some forms&quot;, and since usually p=
 eople<br>
 =C2=A0 don&#39;t want to do this, then maybe have some new preference, and =
 if<br>
 =C2=A0 drr sees only the old one, it converts it to the new one and alerts<=
 br>
 =C2=A0 the user for disabled forms if there are any -- allowing most people=
 <br>
 =C2=A0 to just click some &quot;use the defaults&quot; thing, which is in m=
 ost of<br>
 =C2=A0 these cases the right thing.<br>
 <span class=3D"HOEnZb"><font color=3D"#888888"><br>
 --<br>
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 ((lambda (x) (x x)) (lambda (x) (x x))) =
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Eli Barzilay:<br>
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <a hr=
 ef=3D"http://barzilay.org/" target=3D"_blank">http://barzilay.org/</a> =C2=
 =A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Maze is Life!<b=
 r>
 </font></span></blockquote></div><br></div>
 
 --047d7b5d2c0043389204de2b4739--
From: Eli Barzilay <eli@barzilay.org>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: Jeremiah Willcock <jewillco@osl.iu.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13810: Several forms are missing square bracket conversion
Date: Mon, 3 Jun 2013 08:47:21 -0400

 Yesterday, Robby Findler wrote:
 > This is basically what I have in mind (except not bullet point 3 --
 > if there were to be saved a "remove some form" preference that would
 > have corresponded to someone clicking delete in the GUI and probably
 > the best thing is to respect that click. But maybe the preferences
 > dialog could show you the removed ones greyed out or something and
 > make it easy to re-add them. (A dialog box seems too heavy.)).
 
 The reason for that point #3 is that IIUC, a common situation is
 something like:
 
   * I wanted `match' to be handled properly when it wasn't, so I added
     it to my configuration and complained about it,
 
   * You added it to the default, and then added a bunch of additional
     things,
 
   * But since I made that change manually, I'm now disconnected from
     the default so I lose the other things that were added.
 
 I think that this is way more likely than someone who intentionally
 wanted to remove the configuration for some name.
 
 
 
 > On Sat, Jun 1, 2013 at 11:20 PM, Eli Barzilay <eli@barzilay.org> wrote:
 > 
 >     Three hours ago, Robby Findler wrote:
 >     > No, they aren't. I've been thinking about how to do that, but I
 >     > haven't had a chance to give something a try.
 >     >
 >     > Currently the preferences system behaves like a fancy hash table
 >     > whose values are fixed the first time you start DrRacket (roughly,
 >     > it is not exactly like that but close enough) and whose values are
 >     > saved across invocations of DrRacket. The various
 >     > tabbing/parenthesis related preferences are stored literally as what
 >     > you see in the dialog. I should instead save something like a delta
 >     > to the defaults so when the defaults change you get those changes. 
 >     >
 >     > At least that's as far as I've thought about it. :)
 >    
 >     How about this, as a specific way of dealing with both a
 >     representation of such options and with the existence of such broken
 >     preference files:
 >    
 >     * Represent these things as deltas from the default: additions and
 >       removals from the default built-in list.
 >    
 >     * This way, things that are added to the default list get added unless
 >       explicitly removed by a user.
 >    
 >     * Since existing preferences are in some cases (as in this PR) a
 >       representation of "remove some forms", and since usually people
 >       don't want to do this, then maybe have some new preference, and if
 >       drr sees only the old one, it converts it to the new one and alerts
 >       the user for disabled forms if there are any -- allowing most people
 >       to just click some "use the defaults" thing, which is in most of
 >       these cases the right thing.
 >    
 >     --
 >               ((lambda (x) (x x)) (lambda (x) (x x)))          Eli Barzilay:
 >                         http://barzilay.org/                   Maze is Life!
 > 
 
 -- 
           ((lambda (x) (x x)) (lambda (x) (x x)))          Eli Barzilay:
                     http://barzilay.org/                   Maze is Life!
 
From: Robby Findler <robby@eecs.northwestern.edu>
To: Eli Barzilay <eli@barzilay.org>
Cc: Robby Findler <robby@eecs.northwestern.edu>,
        Jeremiah Willcock <jewillco@osl.iu.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13810: Several forms are missing square bracket conversion
Date: Mon, 3 Jun 2013 09:27:19 -0500

 --089e0117686d16a91b04de40c36c
 Content-Type: text/plain; charset=UTF-8
 
 The way I imagine doing things would, in this case, disconnect you only
 from the match default, not all defaults. Ie the pref would be saved as
 "defaults + {match = ...your-pref-for-match...}" where that "+" is a kind
 of unioning operator on finite maps (preferring its right when conflicts,
 obviously).
 
 Robby
 
 On Monday, June 3, 2013, Eli Barzilay wrote:
 
 > Yesterday, Robby Findler wrote:
 > > This is basically what I have in mind (except not bullet point 3 --
 > > if there were to be saved a "remove some form" preference that would
 > > have corresponded to someone clicking delete in the GUI and probably
 > > the best thing is to respect that click. But maybe the preferences
 > > dialog could show you the removed ones greyed out or something and
 > > make it easy to re-add them. (A dialog box seems too heavy.)).
 >
 > The reason for that point #3 is that IIUC, a common situation is
 > something like:
 >
 >   * I wanted `match' to be handled properly when it wasn't, so I added
 >     it to my configuration and complained about it,
 >
 >   * You added it to the default, and then added a bunch of additional
 >     things,
 >
 >   * But since I made that change manually, I'm now disconnected from
 >     the default so I lose the other things that were added.
 >
 > I think that this is way more likely than someone who intentionally
 > wanted to remove the configuration for some name.
 >
 >
 >
 > > On Sat, Jun 1, 2013 at 11:20 PM, Eli Barzilay <eli@barzilay.org<javascript:;>>
 > wrote:
 > >
 > >     Three hours ago, Robby Findler wrote:
 > >     > No, they aren't. I've been thinking about how to do that, but I
 > >     > haven't had a chance to give something a try.
 > >     >
 > >     > Currently the preferences system behaves like a fancy hash table
 > >     > whose values are fixed the first time you start DrRacket (roughly,
 > >     > it is not exactly like that but close enough) and whose values are
 > >     > saved across invocations of DrRacket. The various
 > >     > tabbing/parenthesis related preferences are stored literally as
 > what
 > >     > you see in the dialog. I should instead save something like a delta
 > >     > to the defaults so when the defaults change you get those changes.
 > >     >
 > >     > At least that's as far as I've thought about it. :)
 > >
 > >     How about this, as a specific way of dealing with both a
 > >     representation of such options and with the existence of such broken
 > >     preference files:
 > >
 > >     * Represent these things as deltas from the default: additions and
 > >       removals from the default built-in list.
 > >
 > >     * This way, things that are added to the default list get added
 > unless
 > >       explicitly removed by a user.
 > >
 > >     * Since existing preferences are in some cases (as in this PR) a
 > >       representation of "remove some forms", and since usually people
 > >       don't want to do this, then maybe have some new preference, and if
 > >       drr sees only the old one, it converts it to the new one and alerts
 > >       the user for disabled forms if there are any -- allowing most
 > people
 > >       to just click some "use the defaults" thing, which is in most of
 > >       these cases the right thing.
 > >
 > >     --
 > >               ((lambda (x) (x x)) (lambda (x) (x x)))          Eli
 > Barzilay:
 > >                         http://barzilay.org/                   Maze is
 > Life!
 > >
 >
 > --
 >           ((lambda (x) (x x)) (lambda (x) (x x)))          Eli Barzilay:
 >                     http://barzilay.org/                   Maze is Life!
 >
 
 --089e0117686d16a91b04de40c36c
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 The way I imagine doing things would, in this case, disconnect you only fro=
 m the match default, not all defaults. Ie the pref would be saved as &quot;=
 defaults + {match =3D ...your-pref-for-match...}&quot; where that &quot;+&q=
 uot; is a kind of unioning operator on finite maps (preferring its right wh=
 en conflicts, obviously).<div>
 <br></div><div>Robby<br><br>On Monday, June 3, 2013, Eli Barzilay  wrote:<b=
 r><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:=
 1px #ccc solid;padding-left:1ex">Yesterday, Robby Findler wrote:<br>
 &gt; This is basically what I have in mind (except not bullet point 3 --<br=
 >
 &gt; if there were to be saved a &quot;remove some form&quot; preference th=
 at would<br>
 &gt; have corresponded to someone clicking delete in the GUI and probably<b=
 r>
 &gt; the best thing is to respect that click. But maybe the preferences<br>
 &gt; dialog could show you the removed ones greyed out or something and<br>
 &gt; make it easy to re-add them. (A dialog box seems too heavy.)).<br>
 <br>
 The reason for that point #3 is that IIUC, a common situation is<br>
 something like:<br>
 <br>
 =C2=A0 * I wanted `match&#39; to be handled properly when it wasn&#39;t, so=
  I added<br>
 =C2=A0 =C2=A0 it to my configuration and complained about it,<br>
 <br>
 =C2=A0 * You added it to the default, and then added a bunch of additional<=
 br>
 =C2=A0 =C2=A0 things,<br>
 <br>
 =C2=A0 * But since I made that change manually, I&#39;m now disconnected fr=
 om<br>
 =C2=A0 =C2=A0 the default so I lose the other things that were added.<br>
 <br>
 I think that this is way more likely than someone who intentionally<br>
 wanted to remove the configuration for some name.<br>
 <br>
 <br>
 <br>
 &gt; On Sat, Jun 1, 2013 at 11:20 PM, Eli Barzilay &lt;<a href=3D"javascrip=
 t:;" onclick=3D"_e(event, &#39;cvml&#39;, &#39;eli@barzilay.org&#39;)">eli@=
 barzilay.org</a>&gt; wrote:<br>
 &gt;<br>
 &gt; =C2=A0 =C2=A0 Three hours ago, Robby Findler wrote:<br>
 &gt; =C2=A0 =C2=A0 &gt; No, they aren&#39;t. I&#39;ve been thinking about h=
 ow to do that, but I<br>
 &gt; =C2=A0 =C2=A0 &gt; haven&#39;t had a chance to give something a try.<b=
 r>
 &gt; =C2=A0 =C2=A0 &gt;<br>
 &gt; =C2=A0 =C2=A0 &gt; Currently the preferences system behaves like a fan=
 cy hash table<br>
 &gt; =C2=A0 =C2=A0 &gt; whose values are fixed the first time you start DrR=
 acket (roughly,<br>
 &gt; =C2=A0 =C2=A0 &gt; it is not exactly like that but close enough) and w=
 hose values are<br>
 &gt; =C2=A0 =C2=A0 &gt; saved across invocations of DrRacket. The various<b=
 r>
 &gt; =C2=A0 =C2=A0 &gt; tabbing/parenthesis related preferences are stored =
 literally as what<br>
 &gt; =C2=A0 =C2=A0 &gt; you see in the dialog. I should instead save someth=
 ing like a delta<br>
 &gt; =C2=A0 =C2=A0 &gt; to the defaults so when the defaults change you get=
  those changes.=C2=A0<br>
 &gt; =C2=A0 =C2=A0 &gt;<br>
 &gt; =C2=A0 =C2=A0 &gt; At least that&#39;s as far as I&#39;ve thought abou=
 t it. :)<br>
 &gt;<br>
 &gt; =C2=A0 =C2=A0 How about this, as a specific way of dealing with both a=
 <br>
 &gt; =C2=A0 =C2=A0 representation of such options and with the existence of=
  such broken<br>
 &gt; =C2=A0 =C2=A0 preference files:<br>
 &gt;<br>
 &gt; =C2=A0 =C2=A0 * Represent these things as deltas from the default: add=
 itions and<br>
 &gt; =C2=A0 =C2=A0 =C2=A0 removals from the default built-in list.<br>
 &gt;<br>
 &gt; =C2=A0 =C2=A0 * This way, things that are added to the default list ge=
 t added unless<br>
 &gt; =C2=A0 =C2=A0 =C2=A0 explicitly removed by a user.<br>
 &gt;<br>
 &gt; =C2=A0 =C2=A0 * Since existing preferences are in some cases (as in th=
 is PR) a<br>
 &gt; =C2=A0 =C2=A0 =C2=A0 representation of &quot;remove some forms&quot;, =
 and since usually people<br>
 &gt; =C2=A0 =C2=A0 =C2=A0 don&#39;t want to do this, then maybe have some n=
 ew preference, and if<br>
 &gt; =C2=A0 =C2=A0 =C2=A0 drr sees only the old one, it converts it to the =
 new one and alerts<br>
 &gt; =C2=A0 =C2=A0 =C2=A0 the user for disabled forms if there are any -- a=
 llowing most people<br>
 &gt; =C2=A0 =C2=A0 =C2=A0 to just click some &quot;use the defaults&quot; t=
 hing, which is in most of<br>
 &gt; =C2=A0 =C2=A0 =C2=A0 these cases the right thing.<br>
 &gt;<br>
 &gt; =C2=A0 =C2=A0 --<br>
 &gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 ((lambda (x) (x x)) (=
 lambda (x) (x x))) =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Eli Barzilay:<br>
 &gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
 =C2=A0 =C2=A0 <a href=3D"http://barzilay.org/" target=3D"_blank">http://bar=
 zilay.org/</a> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
 =A0 Maze is Life!<br>
 &gt;<br>
 <br>
 --<br>
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 ((lambda (x) (x x)) (lambda (x) (x x))) =
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Eli Barzilay:<br>
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <a hr=
 ef=3D"http://barzilay.org/" target=3D"_blank">http://barzilay.org/</a> =C2=
 =A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Maze is Life!<b=
 r>
 </blockquote></div>
 
 --089e0117686d16a91b04de40c36c--
From: Eli Barzilay <eli@barzilay.org>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: Jeremiah Willcock <jewillco@osl.iu.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13810: Several forms are missing square bracket conversion
Date: Mon, 3 Jun 2013 10:38:27 -0400

 10 minutes ago, Robby Findler wrote:
 > The way I imagine doing things would, in this case, disconnect you
 > only from the match default, not all defaults. Ie the pref would be
 > saved as "defaults + {match = ...your-pref-for-match...}" where that
 > "+" is a kind of unioning operator on finite maps (preferring its
 > right when conflicts, obviously).
 
 Ah, you mean that you're changing the semantics of {x,y,z} from "I
 want these things" to "I want these things in addition to the
 defaults", right?  If so, this sounds good to me.
 
 -- 
           ((lambda (x) (x x)) (lambda (x) (x x)))          Eli Barzilay:
                     http://barzilay.org/                   Maze is Life!
From: Robby Findler <robby@eecs.northwestern.edu>
To: Eli Barzilay <eli@barzilay.org>
Cc: Jeremiah Willcock <jewillco@osl.iu.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13810: Several forms are missing square bracket conversion
Date: Mon, 3 Jun 2013 09:49:22 -0500

 --e89a8fb1fbfef9338a04de411197
 Content-Type: text/plain; charset=UTF-8
 
 Right.
 
 
 On Mon, Jun 3, 2013 at 9:38 AM, Eli Barzilay <eli@barzilay.org> wrote:
 
 > 10 minutes ago, Robby Findler wrote:
 > > The way I imagine doing things would, in this case, disconnect you
 > > only from the match default, not all defaults. Ie the pref would be
 > > saved as "defaults + {match = ...your-pref-for-match...}" where that
 > > "+" is a kind of unioning operator on finite maps (preferring its
 > > right when conflicts, obviously).
 >
 > Ah, you mean that you're changing the semantics of {x,y,z} from "I
 > want these things" to "I want these things in addition to the
 > defaults", right?  If so, this sounds good to me.
 >
 > --
 >           ((lambda (x) (x x)) (lambda (x) (x x)))          Eli Barzilay:
 >                     http://barzilay.org/                   Maze is Life!
 >
 
 --e89a8fb1fbfef9338a04de411197
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 <div dir=3D"ltr">Right.</div><div class=3D"gmail_extra"><br><br><div class=
 =3D"gmail_quote">On Mon, Jun 3, 2013 at 9:38 AM, Eli Barzilay <span dir=3D"=
 ltr">&lt;<a href=3D"mailto:eli@barzilay.org" target=3D"_blank">eli@barzilay=
 .org</a>&gt;</span> wrote:<br>
 <blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
 x #ccc solid;padding-left:1ex"><div class=3D"im">10 minutes ago, Robby Find=
 ler wrote:<br>
 &gt; The way I imagine doing things would, in this case, disconnect you<br>
 &gt; only from the match default, not all defaults. Ie the pref would be<br=
 >
 &gt; saved as &quot;defaults + {match =3D ...your-pref-for-match...}&quot; =
 where that<br>
 &gt; &quot;+&quot; is a kind of unioning operator on finite maps (preferrin=
 g its<br>
 &gt; right when conflicts, obviously).<br>
 <br>
 </div>Ah, you mean that you&#39;re changing the semantics of {x,y,z} from &=
 quot;I<br>
 want these things&quot; to &quot;I want these things in addition to the<br>
 defaults&quot;, right? =C2=A0If so, this sounds good to me.<br>
 <div class=3D"HOEnZb"><div class=3D"h5"><br>
 --<br>
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 ((lambda (x) (x x)) (lambda (x) (x x))) =
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Eli Barzilay:<br>
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 <a hr=
 ef=3D"http://barzilay.org/" target=3D"_blank">http://barzilay.org/</a> =C2=
 =A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Maze is Life!<b=
 r>
 </div></div></blockquote></div><br></div>
 
 --e89a8fb1fbfef9338a04de411197--
Responsible changed from "nobody" to "robby" by robby@racket-lang.org at Tue, 20 Aug 2013 00:39:11 -0400
Reason>>> A commit by robby@racket-lang.org was marked as relevant
  http://git.racket-lang.org/plt/commit/940ccc8b5c
  | adjust the way the tabify preferences are saved so that new
  | additions to the default preferences are seen by everyone
  | 
  | related to PR 13810

State changed from "open" to "closed" by robby@racket-lang.org at Tue, 20 Aug 2013 01:20:46 -0400
Reason>>> A commit by robby@racket-lang.org has resolved this report
  http://git.racket-lang.org/plt/commit/5f0c06956a
  | adjust the square-bracket prefs so they are saved
  | relative to some default settings instead of saving
  | the actual values
  | 
  | so changes to the default imply changes to everyone's actual
  | values for the prefs
  | 
  | closes PR 13810

