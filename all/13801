From bugs+caf_=bugs=bugs.plt-scheme.org@plt-scheme.org Fri May 31 12:44:03 2013
Received: from mail-ob0-f169.google.com (mail-ob0-f169.google.com [209.85.214.169])
	by champlain.ccs.neu.edu (8.14.4/8.14.4) with ESMTP id r4VGi0fP017536
	for <bugs@bugs.plt-scheme.org>; Fri, 31 May 2013 12:44:00 -0400
Message-Id: <201305311643.r4VGhvCF017530@champlain.ccs.neu.edu>
Date: Fri, 31 May 2013 12:43:57 -0400
From: samth@ccs.neu.edu
To: bugs@racket-lang.org
Subject: raco pkg update should automatically use the right scope

>Number:         13801
>Category:       all
>Synopsis:       raco pkg update should automatically use the right scope
>Class:          sw-bug
>Responsible:    nobody
>Severity:       serious
>Priority:       medium
>State:          open
>Confidential:   no
>Arrival-Date:   Fri May 31 12:48:01 -0400 2013
>Last-Modified:  Tue Jun 04 09:52:01 -0400 2013
>Originator:     Sam Tobin-Hochstadt
>Organization:
plt
>Submitter-Id:   unknown
>Release:        HEAD
>Environment:
Linux x86_64 / Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:22.0) Gecko/20130325 Firefox/22.0
>Description:
This error message: 

[samth@loki:~/work/gnats-parser (master) plt] raco pkg update marketplace
raco pkg update: could not remove package
 package installed in a different scope: installation
 consider using the --installation flag
  current scope: user
  package: marketplace
  currently installed: [none]

seems pointless.  Couldn't the package manager just use the correct scope when it's unambiguous (can it ever be ambiguous)?
>How-To-Repeat:

>Fix:
>Audit-Trail:
From: Jay McCarthy <jay.mccarthy@gmail.com>
To: Sam Tobin-Hochstadt <samth@ccs.neu.edu>, bugs <bugs@racket-lang.org>
Cc: nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13801: raco pkg update should automatically use
 the right scope
Date: Mon, 3 Jun 2013 10:39:20 -0600

 Just so I understand correctly...
 
 1. Your default scope is user.
 2. You installed marketplace as installation
 3. You tried to update (remove and install) marketplace as user
 4. You want the user scope request to turn into an installation scope request
 
 FWIW, my personal preference is to not do this, because I think it is
 important for command-line tools like this to do what you tell them to
 do. I like, for example, the message that "git statu" gives.
 
 I think the only good technical case to be made against it is that
 escalating from user to installation may require permissions you don't
 have.
 
 Finally, it can be ambiguous because many users could share the same
 installation.
 
 User A installs Pkg X user wide
 User B installs Pkg X install wide
 User A has Pkg X twice and un-scoped Xs are ambiguous.
 
 As far as scopes go, my personal taste is for everyone to pick a
 single scope and stick with it, since cross-scope conflict detection
 can't work. I prefer user-wide, unversioned.
 
 Jay
 
 On Fri, May 31, 2013 at 10:48 AM,  <samth@ccs.neu.edu> wrote:
 > A new problem report is waiting at
 >   http://bugs.racket-lang.org/query/?cmd=view&pr=13801
 >
 > Reported by Sam Tobin-Hochstadt for release: HEAD
 >
 > *** Description:
 > This error message:
 >
 > [samth@loki:~/work/gnats-parser (master) plt] raco pkg update marketplace
 > raco pkg update: could not remove package
 >  package installed in a different scope: installation
 >  consider using the --installation flag
 >   current scope: user
 >   package: marketplace
 >   currently installed: [none]
 >
 > seems pointless.  Couldn't the package manager just use the correct scope when it's unambiguous (can it ever be ambiguous)?
 >
 > *** How to repeat:
 >
 >
 > *** Environment:
 > Linux x86_64 / Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:22.0) Gecko/20130325 Firefox/22.0
 >
 
 
 
 -- 
 Jay McCarthy <jay@cs.byu.edu>
 Assistant Professor / Brigham Young University
 http://faculty.cs.byu.edu/~jay
 
 "The glory of God is Intelligence" - D&C 93
From: Sam Tobin-Hochstadt <samth@ccs.neu.edu>
To: Jay McCarthy <jay.mccarthy@gmail.com>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13801: raco pkg update should automatically use
 the right scope
Date: Mon, 3 Jun 2013 12:45:23 -0400

 On Mon, Jun 3, 2013 at 12:39 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 > Just so I understand correctly...
 >
 > 1. Your default scope is user.
 > 2. You installed marketplace as installation
 > 3. You tried to update (remove and install) marketplace as user
 > 4. You want the user scope request to turn into an installation scope request
 
 This is the wrong way to think about this.  You're assuming that I'm
 thinking about the semantics of the current implementation, but that's
 actually very unlikely for any user.
 
 1. I installed Racket, which makes the default scope `user` (something
 that I could read in the manual).
 2. I installed marketplace installation-wide.
 3. I ran `raco pkg update marketplace` because I wanted to update my
 installation of marketplace.
 
 The face that the current implementation of `raco pkg update`
 interprets that as 'use user scope to remove and install marketplace'
 is an implementation detail.  I had an installation of a package, and
 I wanted to update it.  I shouldn't have to think about scopes every
 time I interact with the package manager; instead, scopes should be
 something that I have to think about only when I explicitly want to
 use them, or when there's an ambiguity as in your example.
 
 Sam
From: Jay McCarthy <jay.mccarthy@gmail.com>
To: Sam Tobin-Hochstadt <samth@ccs.neu.edu>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13801: raco pkg update should automatically use
 the right scope
Date: Mon, 3 Jun 2013 10:48:07 -0600

 On Mon, Jun 3, 2013 at 10:45 AM, Sam Tobin-Hochstadt <samth@ccs.neu.edu> wrote:
 > On Mon, Jun 3, 2013 at 12:39 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >> Just so I understand correctly...
 >>
 >> 1. Your default scope is user.
 >> 2. You installed marketplace as installation
 >> 3. You tried to update (remove and install) marketplace as user
 >> 4. You want the user scope request to turn into an installation scope request
 >
 > This is the wrong way to think about this.  You're assuming that I'm
 > thinking about the semantics of the current implementation, but that's
 > actually very unlikely for any user.
 >
 > 1. I installed Racket, which makes the default scope `user` (something
 > that I could read in the manual).
 > 2. I installed marketplace installation-wide.
 
 You thought about scopes at this step and purposefully changed from
 the default, meaning that you know it's not the default for this and
 all future commands.
 
 > 3. I ran `raco pkg update marketplace` because I wanted to update my
 > installation of marketplace.
 >
 > The face that the current implementation of `raco pkg update`
 > interprets that as 'use user scope to remove and install marketplace'
 > is an implementation detail.  I had an installation of a package, and
 > I wanted to update it.  I shouldn't have to think about scopes every
 > time I interact with the package manager; instead, scopes should be
 > something that I have to think about only when I explicitly want to
 > use them, or when there's an ambiguity as in your example.
 >
 > Sam
 
 
 
 --
 Jay McCarthy <jay@cs.byu.edu>
 Assistant Professor / Brigham Young University
 http://faculty.cs.byu.edu/~jay
 
 "The glory of God is Intelligence" - D&C 93
From: Sam Tobin-Hochstadt <samth@ccs.neu.edu>
To: Jay McCarthy <jay.mccarthy@gmail.com>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13801: raco pkg update should automatically use
 the right scope
Date: Mon, 3 Jun 2013 13:00:27 -0400

 On Mon, Jun 3, 2013 at 12:48 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 > On Mon, Jun 3, 2013 at 10:45 AM, Sam Tobin-Hochstadt <samth@ccs.neu.edu> wrote:
 >> On Mon, Jun 3, 2013 at 12:39 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >>> Just so I understand correctly...
 >>>
 >>> 1. Your default scope is user.
 >>> 2. You installed marketplace as installation
 >>> 3. You tried to update (remove and install) marketplace as user
 >>> 4. You want the user scope request to turn into an installation scope request
 >>
 >> This is the wrong way to think about this.  You're assuming that I'm
 >> thinking about the semantics of the current implementation, but that's
 >> actually very unlikely for any user.
 >>
 >> 1. I installed Racket, which makes the default scope `user` (something
 >> that I could read in the manual).
 >> 2. I installed marketplace installation-wide.
 >
 > You thought about scopes at this step and purposefully changed from
 > the default, meaning that you know it's not the default for this and
 > all future commands.
 
 This is totally the wrong mental model for users. First, I had no idea
 that update had any knowledge of scopes, and I know a lot more about
 the package system than the average user.  Second, assuming that once
 I do one thing, I must understand all the aspects of the system that
 went into that one thing forever more is just incorrect and
 user-hostile.
 
 Sam
From: Jay McCarthy <jay.mccarthy@gmail.com>
To: Sam Tobin-Hochstadt <samth@ccs.neu.edu>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13801: raco pkg update should automatically use
 the right scope
Date: Mon, 3 Jun 2013 11:05:43 -0600

 On Mon, Jun 3, 2013 at 11:00 AM, Sam Tobin-Hochstadt <samth@ccs.neu.edu> wrote:
 > On Mon, Jun 3, 2013 at 12:48 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >> On Mon, Jun 3, 2013 at 10:45 AM, Sam Tobin-Hochstadt <samth@ccs.neu.edu> wrote:
 >>> On Mon, Jun 3, 2013 at 12:39 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >>>> Just so I understand correctly...
 >>>>
 >>>> 1. Your default scope is user.
 >>>> 2. You installed marketplace as installation
 >>>> 3. You tried to update (remove and install) marketplace as user
 >>>> 4. You want the user scope request to turn into an installation scope request
 >>>
 >>> This is the wrong way to think about this.  You're assuming that I'm
 >>> thinking about the semantics of the current implementation, but that's
 >>> actually very unlikely for any user.
 >>>
 >>> 1. I installed Racket, which makes the default scope `user` (something
 >>> that I could read in the manual).
 >>> 2. I installed marketplace installation-wide.
 >>
 >> You thought about scopes at this step and purposefully changed from
 >> the default, meaning that you know it's not the default for this and
 >> all future commands.
 >
 > This is totally the wrong mental model for users. First, I had no idea
 > that update had any knowledge of scopes, and I know a lot more about
 > the package system than the average user.  Second, assuming that once
 > I do one thing, I must understand all the aspects of the system that
 > went into that one thing forever more is just incorrect and
 > user-hostile.
 
 I assume that users of the package system know the concepts (section
 1, of which scope is one), particularly when they go explicitly
 changing the defaults.
 
 Can you think of a good way to improve the documentation to clarify
 that all pkg commands care about scope? Currently every command just
 lists the --scope option:
 http://docs.racket-lang.org/pkg/Managing_Packages.html#(raco-pkg-cmd._update)
 
 Do you have any opinion of the problems with guessing as mentioned before?
 
 Jay
 
 --
 Jay McCarthy <jay@cs.byu.edu>
 Assistant Professor / Brigham Young University
 http://faculty.cs.byu.edu/~jay
 
 "The glory of God is Intelligence" - D&C 93
From: Matthias Felleisen <matthias@ccs.neu.edu>
To: Jay McCarthy <jay.mccarthy@gmail.com>
Cc: Sam Tobin-Hochstadt <samth@ccs.neu.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13801: raco pkg update should automatically use the right scope
Date: Mon, 3 Jun 2013 13:13:36 -0400

 Jay, you're quite right that an informed user should know all the details of the package manager he chooses to use. Hey, for all he knows, the package manager may install some kind of facility to launch a nuclear war, fully specified in the long and detailed 'concepts' page of the docs. 
 
 BUT, if this is what an informed user has to know, I am a highly uninformed user of package systems -- dating back to my Linux days, and I have gotten by. Do we really want people who don't read as much as our concept page to experience failures due to implied natural (and wrong) understanding of command-line incantations? 
 
 Honestly, I find this approach completely, totally contrary to our group's spirit. The whole principle of our design has been 'errors matter' and its corollary 'try to make errors go away'. 
 
 I am not opposed to learning that there are deep technical issues that prevent us from providing implied natural meanings, but I haven't seen one yet in this thread. 
 
 We really need to think of our PL and its surroundings much more as a sociological and psychological construct as opposed to a pure technical set of commands. 
 
 -- Matthias
 
 
From: Sam Tobin-Hochstadt <samth@ccs.neu.edu>
To: Jay McCarthy <jay.mccarthy@gmail.com>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13801: raco pkg update should automatically use
 the right scope
Date: Mon, 3 Jun 2013 13:18:14 -0400

 On Mon, Jun 3, 2013 at 1:05 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 > On Mon, Jun 3, 2013 at 11:00 AM, Sam Tobin-Hochstadt <samth@ccs.neu.edu> wrote:
 >> On Mon, Jun 3, 2013 at 12:48 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >>> On Mon, Jun 3, 2013 at 10:45 AM, Sam Tobin-Hochstadt <samth@ccs.neu.edu> wrote:
 >>>> On Mon, Jun 3, 2013 at 12:39 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >>>>> Just so I understand correctly...
 >>>>>
 >>>>> 1. Your default scope is user.
 >>>>> 2. You installed marketplace as installation
 >>>>> 3. You tried to update (remove and install) marketplace as user
 >>>>> 4. You want the user scope request to turn into an installation scope request
 >>>>
 >>>> This is the wrong way to think about this.  You're assuming that I'm
 >>>> thinking about the semantics of the current implementation, but that's
 >>>> actually very unlikely for any user.
 >>>>
 >>>> 1. I installed Racket, which makes the default scope `user` (something
 >>>> that I could read in the manual).
 >>>> 2. I installed marketplace installation-wide.
 >>>
 >>> You thought about scopes at this step and purposefully changed from
 >>> the default, meaning that you know it's not the default for this and
 >>> all future commands.
 >>
 >> This is totally the wrong mental model for users. First, I had no idea
 >> that update had any knowledge of scopes, and I know a lot more about
 >> the package system than the average user.  Second, assuming that once
 >> I do one thing, I must understand all the aspects of the system that
 >> went into that one thing forever more is just incorrect and
 >> user-hostile.
 >
 > I assume that users of the package system know the concepts (section
 > 1, of which scope is one), particularly when they go explicitly
 > changing the defaults.
 
 I 100% endorse Matthias' comments on this topic.
 
 > Do you have any opinion of the problems with guessing as mentioned before?
 
 The two problems you mentioned were (a) permissions and (b) ambiguity.
 If the user doesn't have the desired permissions, then telling them
 they don't have the package installed instead doesn't help them at
 all.  If there is a genuine ambiguity, _then_ it's fine to say that a
 specification of which package should be upgrade is required.  But
 that's the 1% case, which sounds like it will only come up for
 multi-user Racket installations anyway, which are rare.
 
 Sam
From: Carl Eastlund <cce@ccs.neu.edu>
To: Jay McCarthy <jay.mccarthy@gmail.com>
Cc: Sam Tobin-Hochstadt <samth@ccs.neu.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13801: raco pkg update should automatically use
 the right scope
Date: Mon, 3 Jun 2013 13:16:55 -0400

 --089e0149d29004eddb04de432488
 Content-Type: text/plain; charset=UTF-8
 
 On Mon, Jun 3, 2013 at 1:05 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 
 > On Mon, Jun 3, 2013 at 11:00 AM, Sam Tobin-Hochstadt <samth@ccs.neu.edu>
 > wrote:
 > > On Mon, Jun 3, 2013 at 12:48 PM, Jay McCarthy <jay.mccarthy@gmail.com>
 > wrote:
 > >> On Mon, Jun 3, 2013 at 10:45 AM, Sam Tobin-Hochstadt <samth@ccs.neu.edu>
 > wrote:
 > >>> On Mon, Jun 3, 2013 at 12:39 PM, Jay McCarthy <jay.mccarthy@gmail.com>
 > wrote:
 > >>>> Just so I understand correctly...
 > >>>>
 > >>>> 1. Your default scope is user.
 > >>>> 2. You installed marketplace as installation
 > >>>> 3. You tried to update (remove and install) marketplace as user
 > >>>> 4. You want the user scope request to turn into an installation scope
 > request
 > >>>
 > >>> This is the wrong way to think about this.  You're assuming that I'm
 > >>> thinking about the semantics of the current implementation, but that's
 > >>> actually very unlikely for any user.
 > >>>
 > >>> 1. I installed Racket, which makes the default scope `user` (something
 > >>> that I could read in the manual).
 > >>> 2. I installed marketplace installation-wide.
 > >>
 > >> You thought about scopes at this step and purposefully changed from
 > >> the default, meaning that you know it's not the default for this and
 > >> all future commands.
 > >
 > > This is totally the wrong mental model for users. First, I had no idea
 > > that update had any knowledge of scopes, and I know a lot more about
 > > the package system than the average user.  Second, assuming that once
 > > I do one thing, I must understand all the aspects of the system that
 > > went into that one thing forever more is just incorrect and
 > > user-hostile.
 >
 > I assume that users of the package system know the concepts (section
 > 1, of which scope is one), particularly when they go explicitly
 > changing the defaults.
 >
 > Can you think of a good way to improve the documentation to clarify
 > that all pkg commands care about scope? Currently every command just
 > lists the --scope option:
 >
 > http://docs.racket-lang.org/pkg/Managing_Packages.html#(raco-pkg-cmd._update)
 >
 > Do you have any opinion of the problems with guessing as mentioned before?
 >
 > Jay
 >
 
 Even if I were to learn packages inside and out, and know every detail, I
 would not expect to have to specify a scope for update.  Whatever package
 the package system is using by that name, is the one it should update.  If
 there is ambiguity -- if two are installed at different scopes -- what are
 my programs compiled against?  Do I have to specify a scope for raco make?
 I doubt it.  So raco pkg update should look up a package the way raco make
 does, and update that one, unless told otherwise.  I shouldn't have to hold
 raco pkg's hand, it knows the rules at least as well as I do.
 
 --Carl
 
 --089e0149d29004eddb04de432488
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 <div dir=3D"ltr">On Mon, Jun 3, 2013 at 1:05 PM, Jay McCarthy <span dir=3D"=
 ltr">&lt;<a href=3D"mailto:jay.mccarthy@gmail.com" target=3D"_blank">jay.mc=
 carthy@gmail.com</a>&gt;</span> wrote:<br><div class=3D"gmail_extra"><div c=
 lass=3D"gmail_quote">
 
 <blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
 x #ccc solid;padding-left:1ex"><div class=3D"HOEnZb"><div class=3D"h5">On M=
 on, Jun 3, 2013 at 11:00 AM, Sam Tobin-Hochstadt &lt;<a href=3D"mailto:samt=
 h@ccs.neu.edu">samth@ccs.neu.edu</a>&gt; wrote:<br>
 
 
 &gt; On Mon, Jun 3, 2013 at 12:48 PM, Jay McCarthy &lt;<a href=3D"mailto:ja=
 y.mccarthy@gmail.com">jay.mccarthy@gmail.com</a>&gt; wrote:<br>
 &gt;&gt; On Mon, Jun 3, 2013 at 10:45 AM, Sam Tobin-Hochstadt &lt;<a href=
 =3D"mailto:samth@ccs.neu.edu">samth@ccs.neu.edu</a>&gt; wrote:<br>
 &gt;&gt;&gt; On Mon, Jun 3, 2013 at 12:39 PM, Jay McCarthy &lt;<a href=3D"m=
 ailto:jay.mccarthy@gmail.com">jay.mccarthy@gmail.com</a>&gt; wrote:<br>
 &gt;&gt;&gt;&gt; Just so I understand correctly...<br>
 &gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt; 1. Your default scope is user.<br>
 &gt;&gt;&gt;&gt; 2. You installed marketplace as installation<br>
 &gt;&gt;&gt;&gt; 3. You tried to update (remove and install) marketplace as=
  user<br>
 &gt;&gt;&gt;&gt; 4. You want the user scope request to turn into an install=
 ation scope request<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; This is the wrong way to think about this. =C2=A0You&#39;re as=
 suming that I&#39;m<br>
 &gt;&gt;&gt; thinking about the semantics of the current implementation, bu=
 t that&#39;s<br>
 &gt;&gt;&gt; actually very unlikely for any user.<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; 1. I installed Racket, which makes the default scope `user` (s=
 omething<br>
 &gt;&gt;&gt; that I could read in the manual).<br>
 &gt;&gt;&gt; 2. I installed marketplace installation-wide.<br>
 &gt;&gt;<br>
 &gt;&gt; You thought about scopes at this step and purposefully changed fro=
 m<br>
 &gt;&gt; the default, meaning that you know it&#39;s not the default for th=
 is and<br>
 &gt;&gt; all future commands.<br>
 &gt;<br>
 &gt; This is totally the wrong mental model for users. First, I had no idea=
 <br>
 &gt; that update had any knowledge of scopes, and I know a lot more about<b=
 r>
 &gt; the package system than the average user. =C2=A0Second, assuming that =
 once<br>
 &gt; I do one thing, I must understand all the aspects of the system that<b=
 r>
 &gt; went into that one thing forever more is just incorrect and<br>
 &gt; user-hostile.<br>
 <br>
 </div></div>I assume that users of the package system know the concepts (se=
 ction<br>
 1, of which scope is one), particularly when they go explicitly<br>
 changing the defaults.<br>
 <br>
 Can you think of a good way to improve the documentation to clarify<br>
 that all pkg commands care about scope? Currently every command just<br>
 lists the --scope option:<br>
 <a href=3D"http://docs.racket-lang.org/pkg/Managing_Packages.html#(raco-pkg=
 -cmd._update)" target=3D"_blank">http://docs.racket-lang.org/pkg/Managing_P=
 ackages.html#(raco-pkg-cmd._update)</a><br>
 <br>
 Do you have any opinion of the problems with guessing as mentioned before?<=
 br>
 <span class=3D"HOEnZb"><font color=3D"#888888"><br>
 Jay<br></font></span></blockquote><div><br></div><div>Even if I were to lea=
 rn packages inside and out, and know every detail, I would not expect to ha=
 ve to specify a scope for update.=C2=A0 Whatever package the package system=
  is using by that name, is the one it should update.=C2=A0 If there is ambi=
 guity -- if two are installed at different scopes -- what are my programs c=
 ompiled against?=C2=A0 Do I have to specify a scope for raco make?=C2=A0 I =
 doubt it.=C2=A0 So raco pkg update should look up a package the way raco ma=
 ke does, and update that one, unless told otherwise.=C2=A0 I shouldn&#39;t =
 have to hold raco pkg&#39;s hand, it knows the rules at least as well as I =
 do.<br>
 
 </div><div><br></div><div>--Carl<br></div><br></div></div></div>
 
 --089e0149d29004eddb04de432488--
From: Jay McCarthy <jay.mccarthy@gmail.com>
To: Carl Eastlund <cce@ccs.neu.edu>
Cc: Sam Tobin-Hochstadt <samth@ccs.neu.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13801: raco pkg update should automatically use
 the right scope
Date: Mon, 3 Jun 2013 11:23:50 -0600

 If you have ambiguity because of scope, then raco make, for instance,
 behaves non-deterministically (basically in what order the filesystem
 happens to be visited.) Using multiple scopes is equivalent to turning
 off conflict checking and all bets are off.
 
 Jay
 
 On Mon, Jun 3, 2013 at 11:16 AM, Carl Eastlund <cce@ccs.neu.edu> wrote:
 > On Mon, Jun 3, 2013 at 1:05 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >>
 >> On Mon, Jun 3, 2013 at 11:00 AM, Sam Tobin-Hochstadt <samth@ccs.neu.edu>
 >> wrote:
 >> > On Mon, Jun 3, 2013 at 12:48 PM, Jay McCarthy <jay.mccarthy@gmail.com>
 >> > wrote:
 >> >> On Mon, Jun 3, 2013 at 10:45 AM, Sam Tobin-Hochstadt
 >> >> <samth@ccs.neu.edu> wrote:
 >> >>> On Mon, Jun 3, 2013 at 12:39 PM, Jay McCarthy <jay.mccarthy@gmail.com>
 >> >>> wrote:
 >> >>>> Just so I understand correctly...
 >> >>>>
 >> >>>> 1. Your default scope is user.
 >> >>>> 2. You installed marketplace as installation
 >> >>>> 3. You tried to update (remove and install) marketplace as user
 >> >>>> 4. You want the user scope request to turn into an installation scope
 >> >>>> request
 >> >>>
 >> >>> This is the wrong way to think about this.  You're assuming that I'm
 >> >>> thinking about the semantics of the current implementation, but that's
 >> >>> actually very unlikely for any user.
 >> >>>
 >> >>> 1. I installed Racket, which makes the default scope `user` (something
 >> >>> that I could read in the manual).
 >> >>> 2. I installed marketplace installation-wide.
 >> >>
 >> >> You thought about scopes at this step and purposefully changed from
 >> >> the default, meaning that you know it's not the default for this and
 >> >> all future commands.
 >> >
 >> > This is totally the wrong mental model for users. First, I had no idea
 >> > that update had any knowledge of scopes, and I know a lot more about
 >> > the package system than the average user.  Second, assuming that once
 >> > I do one thing, I must understand all the aspects of the system that
 >> > went into that one thing forever more is just incorrect and
 >> > user-hostile.
 >>
 >> I assume that users of the package system know the concepts (section
 >> 1, of which scope is one), particularly when they go explicitly
 >> changing the defaults.
 >>
 >> Can you think of a good way to improve the documentation to clarify
 >> that all pkg commands care about scope? Currently every command just
 >> lists the --scope option:
 >>
 >> http://docs.racket-lang.org/pkg/Managing_Packages.html#(raco-pkg-cmd._update)
 >>
 >> Do you have any opinion of the problems with guessing as mentioned before?
 >>
 >> Jay
 >
 >
 > Even if I were to learn packages inside and out, and know every detail, I
 > would not expect to have to specify a scope for update.  Whatever package
 > the package system is using by that name, is the one it should update.  If
 > there is ambiguity -- if two are installed at different scopes -- what are
 > my programs compiled against?  Do I have to specify a scope for raco make?
 > I doubt it.  So raco pkg update should look up a package the way raco make
 > does, and update that one, unless told otherwise.  I shouldn't have to hold
 > raco pkg's hand, it knows the rules at least as well as I do.
 >
 > --Carl
 >
 
 
 
 -- 
 Jay McCarthy <jay@cs.byu.edu>
 Assistant Professor / Brigham Young University
 http://faculty.cs.byu.edu/~jay
 
 "The glory of God is Intelligence" - D&C 93
From: Jay McCarthy <jay.mccarthy@gmail.com>
To: Matthias Felleisen <matthias@ccs.neu.edu>
Cc: Sam Tobin-Hochstadt <samth@ccs.neu.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13801: raco pkg update should automatically use
 the right scope
Date: Mon, 3 Jun 2013 11:27:36 -0600

 I appreciate getting good error messages and am happy to improve the
 error message.
 
 I disagree very much with the rest of what you say. I consider this
 request equivalent to expecting (+ "one" 1) to equal 2 or maybe less
 severely (+ "hello" "world") to equal "helloworld".
 
 Would you expect your OS to do anything differently with its packages?
 
 $ chroot user-specific
 $ pkg install blah
 $ exit
 $ pkg update blah
 
 Of course not! When you explicitly subvert the defaults and choose to
 install something in a special place, I don't see why would expect it
 to track that.
 
 Jay
 
 
 On Mon, Jun 3, 2013 at 11:13 AM, Matthias Felleisen
 <matthias@ccs.neu.edu> wrote:
 >
 > Jay, you're quite right that an informed user should know all the details of the package manager he chooses to use. Hey, for all he knows, the package manager may install some kind of facility to launch a nuclear war, fully specified in the long and detailed 'concepts' page of the docs.
 >
 > BUT, if this is what an informed user has to know, I am a highly uninformed user of package systems -- dating back to my Linux days, and I have gotten by. Do we really want people who don't read as much as our concept page to experience failures due to implied natural (and wrong) understanding of command-line incantations?
 >
 > Honestly, I find this approach completely, totally contrary to our group's spirit. The whole principle of our design has been 'errors matter' and its corollary 'try to make errors go away'.
 >
 > I am not opposed to learning that there are deep technical issues that prevent us from providing implied natural meanings, but I haven't seen one yet in this thread.
 >
 > We really need to think of our PL and its surroundings much more as a sociological and psychological construct as opposed to a pure technical set of commands.
 >
 > -- Matthias
 >
 
 
 
 -- 
 Jay McCarthy <jay@cs.byu.edu>
 Assistant Professor / Brigham Young University
 http://faculty.cs.byu.edu/~jay
 
 "The glory of God is Intelligence" - D&C 93
 
From: Sam Tobin-Hochstadt <samth@ccs.neu.edu>
To: Jay McCarthy <jay.mccarthy@gmail.com>
Cc: Carl Eastlund <cce@ccs.neu.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13801: raco pkg update should automatically use
 the right scope
Date: Mon, 3 Jun 2013 13:29:30 -0400

 On Mon, Jun 3, 2013 at 1:23 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 > If you have ambiguity because of scope, then raco make, for instance,
 > behaves non-deterministically (basically in what order the filesystem
 > happens to be visited.) Using multiple scopes is equivalent to turning
 > off conflict checking and all bets are off.
 
 Wait, really?  Why do we have this feature then? Can we make this be
 an error instead?
 
 >
 > Jay
 >
 > On Mon, Jun 3, 2013 at 11:16 AM, Carl Eastlund <cce@ccs.neu.edu> wrote:
 >> On Mon, Jun 3, 2013 at 1:05 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >>>
 >>> On Mon, Jun 3, 2013 at 11:00 AM, Sam Tobin-Hochstadt <samth@ccs.neu.edu>
 >>> wrote:
 >>> > On Mon, Jun 3, 2013 at 12:48 PM, Jay McCarthy <jay.mccarthy@gmail.com>
 >>> > wrote:
 >>> >> On Mon, Jun 3, 2013 at 10:45 AM, Sam Tobin-Hochstadt
 >>> >> <samth@ccs.neu.edu> wrote:
 >>> >>> On Mon, Jun 3, 2013 at 12:39 PM, Jay McCarthy <jay.mccarthy@gmail.com>
 >>> >>> wrote:
 >>> >>>> Just so I understand correctly...
 >>> >>>>
 >>> >>>> 1. Your default scope is user.
 >>> >>>> 2. You installed marketplace as installation
 >>> >>>> 3. You tried to update (remove and install) marketplace as user
 >>> >>>> 4. You want the user scope request to turn into an installation scope
 >>> >>>> request
 >>> >>>
 >>> >>> This is the wrong way to think about this.  You're assuming that I'm
 >>> >>> thinking about the semantics of the current implementation, but that's
 >>> >>> actually very unlikely for any user.
 >>> >>>
 >>> >>> 1. I installed Racket, which makes the default scope `user` (something
 >>> >>> that I could read in the manual).
 >>> >>> 2. I installed marketplace installation-wide.
 >>> >>
 >>> >> You thought about scopes at this step and purposefully changed from
 >>> >> the default, meaning that you know it's not the default for this and
 >>> >> all future commands.
 >>> >
 >>> > This is totally the wrong mental model for users. First, I had no idea
 >>> > that update had any knowledge of scopes, and I know a lot more about
 >>> > the package system than the average user.  Second, assuming that once
 >>> > I do one thing, I must understand all the aspects of the system that
 >>> > went into that one thing forever more is just incorrect and
 >>> > user-hostile.
 >>>
 >>> I assume that users of the package system know the concepts (section
 >>> 1, of which scope is one), particularly when they go explicitly
 >>> changing the defaults.
 >>>
 >>> Can you think of a good way to improve the documentation to clarify
 >>> that all pkg commands care about scope? Currently every command just
 >>> lists the --scope option:
 >>>
 >>> http://docs.racket-lang.org/pkg/Managing_Packages.html#(raco-pkg-cmd._update)
 >>>
 >>> Do you have any opinion of the problems with guessing as mentioned before?
 >>>
 >>> Jay
 >>
 >>
 >> Even if I were to learn packages inside and out, and know every detail, I
 >> would not expect to have to specify a scope for update.  Whatever package
 >> the package system is using by that name, is the one it should update.  If
 >> there is ambiguity -- if two are installed at different scopes -- what are
 >> my programs compiled against?  Do I have to specify a scope for raco make?
 >> I doubt it.  So raco pkg update should look up a package the way raco make
 >> does, and update that one, unless told otherwise.  I shouldn't have to hold
 >> raco pkg's hand, it knows the rules at least as well as I do.
 >>
 >> --Carl
 >>
 >
 >
 >
 > --
 > Jay McCarthy <jay@cs.byu.edu>
 > Assistant Professor / Brigham Young University
 > http://faculty.cs.byu.edu/~jay
 >
 > "The glory of God is Intelligence" - D&C 93
From: Jay McCarthy <jay.mccarthy@gmail.com>
To: Sam Tobin-Hochstadt <samth@ccs.neu.edu>
Cc: Carl Eastlund <cce@ccs.neu.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13801: raco pkg update should automatically use
 the right scope
Date: Mon, 3 Jun 2013 11:34:59 -0600

 I argued against this feature and originally programmed it to be very
 hard to use anything other than one scope all the time. Many others
 disagreed with this because they thought it was important to have
 version specific scope and one of the other scopes simultaneously.
 Matthew agreed as well and implemented it. There is a FAQ explaining
 the dangers of using this:
 
 http://docs.racket-lang.org/pkg/FAQ.html#(part._.How_are_user-specific_and_installation-wide_package_scopes_related_for_conflict_checking_)
 
 Well, it says that conflict checking is now off and elsewhere it says
 that conflicts are "unsafe" but doesn't say precisely how.
 
 And, no, you can't really protect against this, because on a
 multi-user/version system, there's no way to find out about all the
 other versions/users.
 
 Jay
 
 
 On Mon, Jun 3, 2013 at 11:29 AM, Sam Tobin-Hochstadt <samth@ccs.neu.edu> wrote:
 > On Mon, Jun 3, 2013 at 1:23 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >> If you have ambiguity because of scope, then raco make, for instance,
 >> behaves non-deterministically (basically in what order the filesystem
 >> happens to be visited.) Using multiple scopes is equivalent to turning
 >> off conflict checking and all bets are off.
 >
 > Wait, really?  Why do we have this feature then? Can we make this be
 > an error instead?
 >
 >>
 >> Jay
 >>
 >> On Mon, Jun 3, 2013 at 11:16 AM, Carl Eastlund <cce@ccs.neu.edu> wrote:
 >>> On Mon, Jun 3, 2013 at 1:05 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >>>>
 >>>> On Mon, Jun 3, 2013 at 11:00 AM, Sam Tobin-Hochstadt <samth@ccs.neu.edu>
 >>>> wrote:
 >>>> > On Mon, Jun 3, 2013 at 12:48 PM, Jay McCarthy <jay.mccarthy@gmail.com>
 >>>> > wrote:
 >>>> >> On Mon, Jun 3, 2013 at 10:45 AM, Sam Tobin-Hochstadt
 >>>> >> <samth@ccs.neu.edu> wrote:
 >>>> >>> On Mon, Jun 3, 2013 at 12:39 PM, Jay McCarthy <jay.mccarthy@gmail.com>
 >>>> >>> wrote:
 >>>> >>>> Just so I understand correctly...
 >>>> >>>>
 >>>> >>>> 1. Your default scope is user.
 >>>> >>>> 2. You installed marketplace as installation
 >>>> >>>> 3. You tried to update (remove and install) marketplace as user
 >>>> >>>> 4. You want the user scope request to turn into an installation scope
 >>>> >>>> request
 >>>> >>>
 >>>> >>> This is the wrong way to think about this.  You're assuming that I'm
 >>>> >>> thinking about the semantics of the current implementation, but that's
 >>>> >>> actually very unlikely for any user.
 >>>> >>>
 >>>> >>> 1. I installed Racket, which makes the default scope `user` (something
 >>>> >>> that I could read in the manual).
 >>>> >>> 2. I installed marketplace installation-wide.
 >>>> >>
 >>>> >> You thought about scopes at this step and purposefully changed from
 >>>> >> the default, meaning that you know it's not the default for this and
 >>>> >> all future commands.
 >>>> >
 >>>> > This is totally the wrong mental model for users. First, I had no idea
 >>>> > that update had any knowledge of scopes, and I know a lot more about
 >>>> > the package system than the average user.  Second, assuming that once
 >>>> > I do one thing, I must understand all the aspects of the system that
 >>>> > went into that one thing forever more is just incorrect and
 >>>> > user-hostile.
 >>>>
 >>>> I assume that users of the package system know the concepts (section
 >>>> 1, of which scope is one), particularly when they go explicitly
 >>>> changing the defaults.
 >>>>
 >>>> Can you think of a good way to improve the documentation to clarify
 >>>> that all pkg commands care about scope? Currently every command just
 >>>> lists the --scope option:
 >>>>
 >>>> http://docs.racket-lang.org/pkg/Managing_Packages.html#(raco-pkg-cmd._update)
 >>>>
 >>>> Do you have any opinion of the problems with guessing as mentioned before?
 >>>>
 >>>> Jay
 >>>
 >>>
 >>> Even if I were to learn packages inside and out, and know every detail, I
 >>> would not expect to have to specify a scope for update.  Whatever package
 >>> the package system is using by that name, is the one it should update.  If
 >>> there is ambiguity -- if two are installed at different scopes -- what are
 >>> my programs compiled against?  Do I have to specify a scope for raco make?
 >>> I doubt it.  So raco pkg update should look up a package the way raco make
 >>> does, and update that one, unless told otherwise.  I shouldn't have to hold
 >>> raco pkg's hand, it knows the rules at least as well as I do.
 >>>
 >>> --Carl
 >>>
 >>
 >>
 >>
 >> --
 >> Jay McCarthy <jay@cs.byu.edu>
 >> Assistant Professor / Brigham Young University
 >> http://faculty.cs.byu.edu/~jay
 >>
 >> "The glory of God is Intelligence" - D&C 93
 
 
 
 -- 
 Jay McCarthy <jay@cs.byu.edu>
 Assistant Professor / Brigham Young University
 http://faculty.cs.byu.edu/~jay
 
 "The glory of God is Intelligence" - D&C 93
From: Carl Eastlund <cce@ccs.neu.edu>
To: Jay McCarthy <jay.mccarthy@gmail.com>
Cc: Sam Tobin-Hochstadt <samth@ccs.neu.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13801: raco pkg update should automatically use
 the right scope
Date: Mon, 3 Jun 2013 13:33:18 -0400

 --001a113343d2a2ab9704de435e15
 Content-Type: text/plain; charset=UTF-8
 
 Okay, then the ambiguous case should be an error for raco pkg update (and
 probably raco make, too).  But the unambiguous case still doesn't seem to
 need an explicit scope for any reason.
 
 Carl Eastlund
 
 On Mon, Jun 3, 2013 at 1:23 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 
 > If you have ambiguity because of scope, then raco make, for instance,
 > behaves non-deterministically (basically in what order the filesystem
 > happens to be visited.) Using multiple scopes is equivalent to turning
 > off conflict checking and all bets are off.
 >
 > Jay
 >
 > On Mon, Jun 3, 2013 at 11:16 AM, Carl Eastlund <cce@ccs.neu.edu> wrote:
 > > On Mon, Jun 3, 2013 at 1:05 PM, Jay McCarthy <jay.mccarthy@gmail.com>
 > wrote:
 > >>
 > >> On Mon, Jun 3, 2013 at 11:00 AM, Sam Tobin-Hochstadt <samth@ccs.neu.edu
 > >
 > >> wrote:
 > >> > On Mon, Jun 3, 2013 at 12:48 PM, Jay McCarthy <jay.mccarthy@gmail.com
 > >
 > >> > wrote:
 > >> >> On Mon, Jun 3, 2013 at 10:45 AM, Sam Tobin-Hochstadt
 > >> >> <samth@ccs.neu.edu> wrote:
 > >> >>> On Mon, Jun 3, 2013 at 12:39 PM, Jay McCarthy <
 > jay.mccarthy@gmail.com>
 > >> >>> wrote:
 > >> >>>> Just so I understand correctly...
 > >> >>>>
 > >> >>>> 1. Your default scope is user.
 > >> >>>> 2. You installed marketplace as installation
 > >> >>>> 3. You tried to update (remove and install) marketplace as user
 > >> >>>> 4. You want the user scope request to turn into an installation
 > scope
 > >> >>>> request
 > >> >>>
 > >> >>> This is the wrong way to think about this.  You're assuming that I'm
 > >> >>> thinking about the semantics of the current implementation, but
 > that's
 > >> >>> actually very unlikely for any user.
 > >> >>>
 > >> >>> 1. I installed Racket, which makes the default scope `user`
 > (something
 > >> >>> that I could read in the manual).
 > >> >>> 2. I installed marketplace installation-wide.
 > >> >>
 > >> >> You thought about scopes at this step and purposefully changed from
 > >> >> the default, meaning that you know it's not the default for this and
 > >> >> all future commands.
 > >> >
 > >> > This is totally the wrong mental model for users. First, I had no idea
 > >> > that update had any knowledge of scopes, and I know a lot more about
 > >> > the package system than the average user.  Second, assuming that once
 > >> > I do one thing, I must understand all the aspects of the system that
 > >> > went into that one thing forever more is just incorrect and
 > >> > user-hostile.
 > >>
 > >> I assume that users of the package system know the concepts (section
 > >> 1, of which scope is one), particularly when they go explicitly
 > >> changing the defaults.
 > >>
 > >> Can you think of a good way to improve the documentation to clarify
 > >> that all pkg commands care about scope? Currently every command just
 > >> lists the --scope option:
 > >>
 > >>
 > http://docs.racket-lang.org/pkg/Managing_Packages.html#(raco-pkg-cmd._update)
 > >>
 > >> Do you have any opinion of the problems with guessing as mentioned
 > before?
 > >>
 > >> Jay
 > >
 > >
 > > Even if I were to learn packages inside and out, and know every detail, I
 > > would not expect to have to specify a scope for update.  Whatever package
 > > the package system is using by that name, is the one it should update.
 >  If
 > > there is ambiguity -- if two are installed at different scopes -- what
 > are
 > > my programs compiled against?  Do I have to specify a scope for raco
 > make?
 > > I doubt it.  So raco pkg update should look up a package the way raco
 > make
 > > does, and update that one, unless told otherwise.  I shouldn't have to
 > hold
 > > raco pkg's hand, it knows the rules at least as well as I do.
 > >
 > > --Carl
 > >
 >
 >
 >
 > --
 > Jay McCarthy <jay@cs.byu.edu>
 > Assistant Professor / Brigham Young University
 > http://faculty.cs.byu.edu/~jay
 >
 > "The glory of God is Intelligence" - D&C 93
 >
 >
 
 --001a113343d2a2ab9704de435e15
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 <div dir=3D"ltr">Okay, then the ambiguous case should be an error for raco =
 pkg update (and probably raco make, too).=C2=A0 But the unambiguous case st=
 ill doesn&#39;t seem to need an explicit scope for any reason.<br><div><div=
  class=3D"gmail_extra">
 
 <br clear=3D"all"><div>Carl Eastlund</div>
 <br><div class=3D"gmail_quote">On Mon, Jun 3, 2013 at 1:23 PM, Jay McCarthy=
  <span dir=3D"ltr">&lt;<a href=3D"mailto:jay.mccarthy@gmail.com" target=3D"=
 _blank">jay.mccarthy@gmail.com</a>&gt;</span> wrote:<br><blockquote class=
 =3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padd=
 ing-left:1ex">
 
 If you have ambiguity because of scope, then raco make, for instance,<br>
 behaves non-deterministically (basically in what order the filesystem<br>
 happens to be visited.) Using multiple scopes is equivalent to turning<br>
 off conflict checking and all bets are off.<br>
 <span class=3D"HOEnZb"><font color=3D"#888888"><br>
 Jay<br>
 </font></span><div class=3D"HOEnZb"><div class=3D"h5"><br>
 On Mon, Jun 3, 2013 at 11:16 AM, Carl Eastlund &lt;<a href=3D"mailto:cce@cc=
 s.neu.edu">cce@ccs.neu.edu</a>&gt; wrote:<br>
 &gt; On Mon, Jun 3, 2013 at 1:05 PM, Jay McCarthy &lt;<a href=3D"mailto:jay=
 .mccarthy@gmail.com">jay.mccarthy@gmail.com</a>&gt; wrote:<br>
 &gt;&gt;<br>
 &gt;&gt; On Mon, Jun 3, 2013 at 11:00 AM, Sam Tobin-Hochstadt &lt;<a href=
 =3D"mailto:samth@ccs.neu.edu">samth@ccs.neu.edu</a>&gt;<br>
 &gt;&gt; wrote:<br>
 &gt;&gt; &gt; On Mon, Jun 3, 2013 at 12:48 PM, Jay McCarthy &lt;<a href=3D"=
 mailto:jay.mccarthy@gmail.com">jay.mccarthy@gmail.com</a>&gt;<br>
 &gt;&gt; &gt; wrote:<br>
 &gt;&gt; &gt;&gt; On Mon, Jun 3, 2013 at 10:45 AM, Sam Tobin-Hochstadt<br>
 &gt;&gt; &gt;&gt; &lt;<a href=3D"mailto:samth@ccs.neu.edu">samth@ccs.neu.ed=
 u</a>&gt; wrote:<br>
 &gt;&gt; &gt;&gt;&gt; On Mon, Jun 3, 2013 at 12:39 PM, Jay McCarthy &lt;<a =
 href=3D"mailto:jay.mccarthy@gmail.com">jay.mccarthy@gmail.com</a>&gt;<br>
 &gt;&gt; &gt;&gt;&gt; wrote:<br>
 &gt;&gt; &gt;&gt;&gt;&gt; Just so I understand correctly...<br>
 &gt;&gt; &gt;&gt;&gt;&gt;<br>
 &gt;&gt; &gt;&gt;&gt;&gt; 1. Your default scope is user.<br>
 &gt;&gt; &gt;&gt;&gt;&gt; 2. You installed marketplace as installation<br>
 &gt;&gt; &gt;&gt;&gt;&gt; 3. You tried to update (remove and install) marke=
 tplace as user<br>
 &gt;&gt; &gt;&gt;&gt;&gt; 4. You want the user scope request to turn into a=
 n installation scope<br>
 &gt;&gt; &gt;&gt;&gt;&gt; request<br>
 &gt;&gt; &gt;&gt;&gt;<br>
 &gt;&gt; &gt;&gt;&gt; This is the wrong way to think about this. =C2=A0You&=
 #39;re assuming that I&#39;m<br>
 &gt;&gt; &gt;&gt;&gt; thinking about the semantics of the current implement=
 ation, but that&#39;s<br>
 &gt;&gt; &gt;&gt;&gt; actually very unlikely for any user.<br>
 &gt;&gt; &gt;&gt;&gt;<br>
 &gt;&gt; &gt;&gt;&gt; 1. I installed Racket, which makes the default scope =
 `user` (something<br>
 &gt;&gt; &gt;&gt;&gt; that I could read in the manual).<br>
 &gt;&gt; &gt;&gt;&gt; 2. I installed marketplace installation-wide.<br>
 &gt;&gt; &gt;&gt;<br>
 &gt;&gt; &gt;&gt; You thought about scopes at this step and purposefully ch=
 anged from<br>
 &gt;&gt; &gt;&gt; the default, meaning that you know it&#39;s not the defau=
 lt for this and<br>
 &gt;&gt; &gt;&gt; all future commands.<br>
 &gt;&gt; &gt;<br>
 &gt;&gt; &gt; This is totally the wrong mental model for users. First, I ha=
 d no idea<br>
 &gt;&gt; &gt; that update had any knowledge of scopes, and I know a lot mor=
 e about<br>
 &gt;&gt; &gt; the package system than the average user. =C2=A0Second, assum=
 ing that once<br>
 &gt;&gt; &gt; I do one thing, I must understand all the aspects of the syst=
 em that<br>
 &gt;&gt; &gt; went into that one thing forever more is just incorrect and<b=
 r>
 &gt;&gt; &gt; user-hostile.<br>
 &gt;&gt;<br>
 &gt;&gt; I assume that users of the package system know the concepts (secti=
 on<br>
 &gt;&gt; 1, of which scope is one), particularly when they go explicitly<br=
 >
 &gt;&gt; changing the defaults.<br>
 &gt;&gt;<br>
 &gt;&gt; Can you think of a good way to improve the documentation to clarif=
 y<br>
 &gt;&gt; that all pkg commands care about scope? Currently every command ju=
 st<br>
 &gt;&gt; lists the --scope option:<br>
 &gt;&gt;<br>
 &gt;&gt; <a href=3D"http://docs.racket-lang.org/pkg/Managing_Packages.html#=
 (raco-pkg-cmd._update)" target=3D"_blank">http://docs.racket-lang.org/pkg/M=
 anaging_Packages.html#(raco-pkg-cmd._update)</a><br>
 &gt;&gt;<br>
 &gt;&gt; Do you have any opinion of the problems with guessing as mentioned=
  before?<br>
 &gt;&gt;<br>
 &gt;&gt; Jay<br>
 &gt;<br>
 &gt;<br>
 &gt; Even if I were to learn packages inside and out, and know every detail=
 , I<br>
 &gt; would not expect to have to specify a scope for update. =C2=A0Whatever=
  package<br>
 &gt; the package system is using by that name, is the one it should update.=
  =C2=A0If<br>
 &gt; there is ambiguity -- if two are installed at different scopes -- what=
  are<br>
 &gt; my programs compiled against? =C2=A0Do I have to specify a scope for r=
 aco make?<br>
 &gt; I doubt it. =C2=A0So raco pkg update should look up a package the way =
 raco make<br>
 &gt; does, and update that one, unless told otherwise. =C2=A0I shouldn&#39;=
 t have to hold<br>
 &gt; raco pkg&#39;s hand, it knows the rules at least as well as I do.<br>
 &gt;<br>
 &gt; --Carl<br>
 &gt;<br>
 <br>
 <br>
 <br>
 </div></div><div class=3D"HOEnZb"><div class=3D"h5">--<br>
 Jay McCarthy &lt;<a href=3D"mailto:jay@cs.byu.edu">jay@cs.byu.edu</a>&gt;<b=
 r>
 Assistant Professor / Brigham Young University<br>
 <a href=3D"http://faculty.cs.byu.edu/~jay" target=3D"_blank">http://faculty=
 .cs.byu.edu/~jay</a><br>
 <br>
 &quot;The glory of God is Intelligence&quot; - D&amp;C 93<br>
 <br>
 </div></div></blockquote></div><br></div></div></div>
 
 --001a113343d2a2ab9704de435e15--
From: Eli Barzilay <eli@barzilay.org>
To: Sam Tobin-Hochstadt <samth@ccs.neu.edu>,
        Jay McCarthy <jay.mccarthy@gmail.com>,
        Matthias Felleisen <matthias@ccs.neu.edu>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>,
        Carl Eastlund <cce@ccs.neu.edu>
Subject: Re: [racket-bug] all/13801: raco pkg update should automatically use the right scope
Date: Tue, 4 Jun 2013 06:28:56 -0400

 Yesterday, Matthias Felleisen wrote:
 > 
 > BUT, if this is what an informed user has to know, I am a highly
 > uninformed user of package systems -- dating back to my Linux days,
 > and I have gotten by. Do we really want people who don't read as
 > much as our concept page to experience failures due to implied
 > natural (and wrong) understanding of command-line incantations?
 
 +7 -- very often when I talk to people about `syntax-case' I mention
 the fact that I never go back and read the papers on it -- I have an
 intuitive understanding how things should work, and the fact that they
 work this way is IMO why it's a successful model.  This should apply
 to many other cases, and I think that it's very important to have a
 system that is natural enough to the point of working for people who
 didn't read the docs (and IMO there are much more people who are in
 this group).
 
 
 Yesterday, Jay McCarthy wrote:
 > Would you expect your OS to do anything differently with its packages?
 > 
 > $ chroot user-specific
 > $ pkg install blah
 > $ exit
 > $ pkg update blah
 > 
 > Of course not! When you explicitly subvert the defaults and choose
 > to install something in a special place, I don't see why would
 > expect it to track that.
 
 chroot is a very different thing -- it's a sandbox that allows you to
 subvert things in a way that could never be mistaken for a "scope".
 (You'd know that as soon as you run that command and get an error
 about having no shell to run.)
 
 
 Yesterday, Jay McCarthy wrote:
 > If you have ambiguity because of scope, then raco make, for
 > instance, behaves non-deterministically (basically in what order the
 > filesystem happens to be visited.) Using multiple scopes is
 > equivalent to turning off conflict checking and all bets are off.
 
 Yesterday, Sam Tobin-Hochstadt wrote:
 > 
 > Wait, really?  Why do we have this feature then? Can we make this be
 > an error instead?
 
 I'm also as surprised at this.  My understanding was that the
 existence of scopes is roughly the same as ordered search paths for
 installation files, then system files, then user files.  This is
 something that is very needed so that you can update some specific
 package for yourself even though it's on a system that has the same
 package installed system-wide.  (And IIRC, most if not all languages
 have this ability.)  Not having this possible is bad, and having it
 result in non-deterministic behavior is really bad...  (So I hope that
 I'm missing something here.)
 
 -- 
           ((lambda (x) (x x)) (lambda (x) (x x)))          Eli Barzilay:
                     http://barzilay.org/                   Maze is Life!
From: Matthew Flatt <mflatt@cs.utah.edu>
To: Eli Barzilay <eli@barzilay.org>
Cc: Sam Tobin-Hochstadt <samth@ccs.neu.edu>,
        Jay McCarthy <jay.mccarthy@gmail.com>,
        Matthias Felleisen <matthias@ccs.neu.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>,
        Carl Eastlund <cce@ccs.neu.edu>
Subject: Re: [racket-bug] all/13801: raco pkg update should automatically use the right scope
Date: Tue, 4 Jun 2013 07:36:11 -0600

 I think the original change request makes sense: `raco pkg update'
 could infer a scope from the set of explicitly provided packages (when
 it's unambiguous for each package and consistent across the packages).
 
 The inferred scope could have been provided via `--scope', so there
 isn't a new fundamental problem. It's just a question of whether
 inference is easy and whether it will surprise users. (Those points are
 generally true for inference, right?) I think it's easy (an opinion,
 but fairly well informed) and won't surprise users (pure opinion), so
 I'm in favor.
 
 
 In not replying to other points in detail because I find the tone of
 this thread unhelpful --- but that could just be me. If anyone happens
 to be interested in opinions on how they could have responded in a way
 that is more helpful to me, feel free to ask (offline). If, meanwhile,
 anyone is offended that I am not responding directly, I offer my
 apologies, and I am interested in your opinion on that point (offline).
 
From: Jay McCarthy <jay.mccarthy@gmail.com>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: Eli Barzilay <eli@barzilay.org>, Sam Tobin-Hochstadt <samth@ccs.neu.edu>,
        Matthias Felleisen <matthias@ccs.neu.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>,
        Carl Eastlund <cce@ccs.neu.edu>
Subject: Re: [racket-bug] all/13801: raco pkg update should automatically use
 the right scope
Date: Tue, 4 Jun 2013 07:46:55 -0600

 At the implementation level, I think it is important to add #f as a
 possible scope, rather than defaulting to 'user, because otherwise
 this inference would kick in even when the user explicitly provided a
 scope. That is, if Sam had written
 
 raco pkg update -u marketplace
 
 I don't think it should be rewritten to
 
 raco pkg update -i marketplace
 
 That's the main way I can imagine inference being surprising.
 
 Jay
 
 
 
 On Tue, Jun 4, 2013 at 7:36 AM, Matthew Flatt <mflatt@cs.utah.edu> wrote:
 > I think the original change request makes sense: `raco pkg update'
 > could infer a scope from the set of explicitly provided packages (when
 > it's unambiguous for each package and consistent across the packages).
 >
 > The inferred scope could have been provided via `--scope', so there
 > isn't a new fundamental problem. It's just a question of whether
 > inference is easy and whether it will surprise users. (Those points are
 > generally true for inference, right?) I think it's easy (an opinion,
 > but fairly well informed) and won't surprise users (pure opinion), so
 > I'm in favor.
 >
 >
 > In not replying to other points in detail because I find the tone of
 > this thread unhelpful --- but that could just be me. If anyone happens
 > to be interested in opinions on how they could have responded in a way
 > that is more helpful to me, feel free to ask (offline). If, meanwhile,
 > anyone is offended that I am not responding directly, I offer my
 > apologies, and I am interested in your opinion on that point (offline).
 >
 
 
 
 -- 
 Jay McCarthy <jay@cs.byu.edu>
 Assistant Professor / Brigham Young University
 http://faculty.cs.byu.edu/~jay
 
 "The glory of God is Intelligence" - D&C 93
From: Robby Findler <robby@eecs.northwestern.edu>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: Eli Barzilay <eli@barzilay.org>, Sam Tobin-Hochstadt <samth@ccs.neu.edu>,
        Jay McCarthy <jay.mccarthy@gmail.com>,
        Matthias Felleisen <matthias@ccs.neu.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>,
        Carl Eastlund <cce@ccs.neu.edu>
Subject: Re: [racket-bug] all/13801: raco pkg update should automatically use
 the right scope
Date: Tue, 4 Jun 2013 08:44:39 -0500

 --e89a8ff2511c5aa84f04de544861
 Content-Type: text/plain; charset=UTF-8
 
 FWIW, I agree with Matthew on both of these points (inference seems
 reasonable; tone: not so much).
 
 Robby
 
 On Tuesday, June 4, 2013, Matthew Flatt wrote:
 
 > I think the original change request makes sense: `raco pkg update'
 > could infer a scope from the set of explicitly provided packages (when
 > it's unambiguous for each package and consistent across the packages).
 >
 > The inferred scope could have been provided via `--scope', so there
 > isn't a new fundamental problem. It's just a question of whether
 > inference is easy and whether it will surprise users. (Those points are
 > generally true for inference, right?) I think it's easy (an opinion,
 > but fairly well informed) and won't surprise users (pure opinion), so
 > I'm in favor.
 >
 >
 > In not replying to other points in detail because I find the tone of
 > this thread unhelpful --- but that could just be me. If anyone happens
 > to be interested in opinions on how they could have responded in a way
 > that is more helpful to me, feel free to ask (offline). If, meanwhile,
 > anyone is offended that I am not responding directly, I offer my
 > apologies, and I am interested in your opinion on that point (offline).
 >
 >
 
 --e89a8ff2511c5aa84f04de544861
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 FWIW, I agree with Matthew on both of these points (inference seems reasona=
 ble; tone: not so much).<div><br></div><div>Robby<br><br>On Tuesday, June 4=
 , 2013, Matthew Flatt  wrote:<br><blockquote class=3D"gmail_quote" style=3D=
 "margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
 I think the original change request makes sense: `raco pkg update&#39;<br>
 could infer a scope from the set of explicitly provided packages (when<br>
 it&#39;s unambiguous for each package and consistent across the packages).<=
 br>
 <br>
 The inferred scope could have been provided via `--scope&#39;, so there<br>
 isn&#39;t a new fundamental problem. It&#39;s just a question of whether<br=
 >
 inference is easy and whether it will surprise users. (Those points are<br>
 generally true for inference, right?) I think it&#39;s easy (an opinion,<br=
 >
 but fairly well informed) and won&#39;t surprise users (pure opinion), so<b=
 r>
 I&#39;m in favor.<br>
 <br>
 <br>
 In not replying to other points in detail because I find the tone of<br>
 this thread unhelpful --- but that could just be me. If anyone happens<br>
 to be interested in opinions on how they could have responded in a way<br>
 that is more helpful to me, feel free to ask (offline). If, meanwhile,<br>
 anyone is offended that I am not responding directly, I offer my<br>
 apologies, and I am interested in your opinion on that point (offline).<br>
 <br>
 </blockquote></div>
 
 --e89a8ff2511c5aa84f04de544861--
From: Sam Tobin-Hochstadt <samth@ccs.neu.edu>
To: Jay McCarthy <jay.mccarthy@gmail.com>
Cc: Matthew Flatt <mflatt@cs.utah.edu>, Eli Barzilay <eli@barzilay.org>,
        Matthias Felleisen <matthias@ccs.neu.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>,
        Carl Eastlund <cce@ccs.neu.edu>
Subject: Re: [racket-bug] all/13801: raco pkg update should automatically use
 the right scope
Date: Tue, 4 Jun 2013 09:48:17 -0400

 On Tue, Jun 4, 2013 at 9:46 AM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 > That is, if Sam had written
 >
 > raco pkg update -u marketplace
 >
 > I don't think it should be rewritten to
 >
 > raco pkg update -i marketplace
 >
 > That's the main way I can imagine inference being surprising.
 
 Just for the record, I wouldn't have wanted that rewriting, so that
 sounds totally fine to me.
 
 Sam
