From bugs+caf_=bugs=bugs.plt-scheme.org@plt-scheme.org Wed Nov 19 20:17:56 2014
Received: from mail-ie0-f173.google.com (mail-ie0-f173.google.com [209.85.223.173])
	by winooski.ccs.neu.edu (8.14.7/8.14.7) with ESMTP id sAK1Hq1t026692
	for <bugs@bugs.plt-scheme.org>; Wed, 19 Nov 2014 20:17:52 -0500
Message-Id: <201411200117.sAK1HnQ1026685@winooski.ccs.neu.edu>
Date: Wed, 19 Nov 2014 20:17:49 -0500
From: rxg@cs.ubc.ca
To: bugs@racket-lang.org
Subject: Add support for struct-copy to the teaching languages

>Number:         14845
>Category:       all
>Synopsis:       Add support for struct-copy to the teaching languages
>Class:          change-request
>Responsible:    nobody
>Severity:       non-critical
>Priority:       medium
>State:          open
>Confidential:   no
>Arrival-Date:   Wed Nov 19 20:20:01 -0500 2014
>Last-Modified:  Sun Nov 23 20:32:01 -0500 2014
>Originator:     Ron Garcia
>Organization:
plt
>Submitter-Id:   unknown
>Release:        6.1
>Environment:
macosx "Darwin dhcp-206-87-158-193.ubcsecure.wireless.ubc.ca 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
Human Language: english
(current-memory-use) 308711124
raco pkg (show):
Installation-wide:
 Package              Checksum                                    Source
 main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 [178 auto-installed packages not shown]
User-specific for installation "6.1":
 [none]



Collections:
("/Users/Ron/Library/Racket/6.1/collects"
 (non-existent-path))
("/Applications/Racket v6.1/collects"
 (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))

Recent Internal Errors: Saved 1 internal error:

list-ref: contract violation
  expected: pair?
  given: '()
  argument position: 1st
  other arguments...:
   -1
  context...:
   /Applications/Racket v6.1/share/pkgs/htdp-lib/stepper/private/view-controller.rkt:341:2: update-view/existing
   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:451:6
   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:502:32
   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:650:3

Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((test) (main)) #t))
>Description:
It would be great if support for struct-copy were available in the teaching languages.  I have students who are excited about programming, but use ASL and mutate structs because it's more convenient to type.
>How-To-Repeat:

>Fix:
>Audit-Trail:
From: Matthias Felleisen <matthias@ccs.neu.edu>
To: rxg@cs.ubc.ca, bugs@racket-lang.org
Cc: nobody@racket-lang.org, bug-notification@racket-lang.org
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the teaching languages
Date: Wed, 19 Nov 2014 21:07:54 -0500

 You shouldn't accept their programs if ASL isn't their language level. 
 
 What do you think about 
 
  (update position x 4) 
  
 and 
 
  (update world ufo position x (lambda (x) (+ x 4)))
 
 and 
 
  (check-expect (lookup world ufo position x) 1)
 
 for 
 
  (define world (make-world (make-ufo (make-position 1 2) (make-velocity -1 +2)) (make-tank ...) ...)))
 
 
 
 
 
 
 On Nov 19, 2014, at 8:20 PM, rxg@cs.ubc.ca wrote:
 
 > A new problem report is waiting at
 >  http://bugs.racket-lang.org/query/?cmd=view&pr=14845
 > 
 > Reported by Ron Garcia for release: 6.1
 > 
 > *** Description:
 > It would be great if support for struct-copy were available in the teaching languages.  I have students who are excited about programming, but use ASL and mutate structs because it's more convenient to type.
 > 
 > *** How to repeat:
 > 
 > 
 > *** Environment:
 > macosx "Darwin dhcp-206-87-158-193.ubcsecure.wireless.ubc.ca 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 > Human Language: english
 > (current-memory-use) 308711124
 > raco pkg (show):
 > Installation-wide:
 > Package              Checksum                                    Source
 > main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 > racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 > [178 auto-installed packages not shown]
 > User-specific for installation "6.1":
 > [none]
 > 
 > 
 > 
 > Collections:
 > ("/Users/Ron/Library/Racket/6.1/collects"
 > (non-existent-path))
 > ("/Applications/Racket v6.1/collects"
 > (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 > 
 > Recent Internal Errors: Saved 1 internal error:
 > 
 > list-ref: contract violation
 >  expected: pair?
 >  given: '()
 >  argument position: 1st
 >  other arguments...:
 >   -1
 >  context...:
 >   /Applications/Racket v6.1/share/pkgs/htdp-lib/stepper/private/view-controller.rkt:341:2: update-view/existing
 >   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:451:6
 >   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:502:32
 >   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:650:3
 > 
 > Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((test) (main)) #t))
 > 
 
 
From: Ron Garcia <rxg@cs.ubc.ca>
To: Matthias Felleisen <matthias@ccs.neu.edu>
Cc: bugs@racket-lang.org, nobody@racket-lang.org,
        bug-notification@racket-lang.org
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the teaching languages
Date: Wed, 19 Nov 2014 18:39:41 -0800

 That works for me!  I especially like the ability to specify paths inline.  
 It would be nice to be able to use update to place a procedure in a slot as well as use a procedure to perform an update.
 
 
 
 
 On 2014-11-19, at 6:07 PM, Matthias Felleisen <matthias@ccs.neu.edu> wrote:
 
 > 
 > You shouldn't accept their programs if ASL isn't their language level. 
 > 
 > What do you think about 
 > 
 > (update position x 4) 
 > 
 > and 
 > 
 > (update world ufo position x (lambda (x) (+ x 4)))
 > 
 > and 
 > 
 > (check-expect (lookup world ufo position x) 1)
 > 
 > for 
 > 
 > (define world (make-world (make-ufo (make-position 1 2) (make-velocity -1 +2)) (make-tank ...) ...)))
 > 
 > 
 > 
 > 
 > 
 > 
 > On Nov 19, 2014, at 8:20 PM, rxg@cs.ubc.ca wrote:
 > 
 >> A new problem report is waiting at
 >> http://bugs.racket-lang.org/query/?cmd=view&pr=14845
 >> 
 >> Reported by Ron Garcia for release: 6.1
 >> 
 >> *** Description:
 >> It would be great if support for struct-copy were available in the teaching languages.  I have students who are excited about programming, but use ASL and mutate structs because it's more convenient to type.
 >> 
 >> *** How to repeat:
 >> 
 >> 
 >> *** Environment:
 >> macosx "Darwin dhcp-206-87-158-193.ubcsecure.wireless.ubc.ca 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 >> Human Language: english
 >> (current-memory-use) 308711124
 >> raco pkg (show):
 >> Installation-wide:
 >> Package              Checksum                                    Source
 >> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 >> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 >> [178 auto-installed packages not shown]
 >> User-specific for installation "6.1":
 >> [none]
 >> 
 >> 
 >> 
 >> Collections:
 >> ("/Users/Ron/Library/Racket/6.1/collects"
 >> (non-existent-path))
 >> ("/Applications/Racket v6.1/collects"
 >> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 >> 
 >> Recent Internal Errors: Saved 1 internal error:
 >> 
 >> list-ref: contract violation
 >> expected: pair?
 >> given: '()
 >> argument position: 1st
 >> other arguments...:
 >>  -1
 >> context...:
 >>  /Applications/Racket v6.1/share/pkgs/htdp-lib/stepper/private/view-controller.rkt:341:2: update-view/existing
 >>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:451:6
 >>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:502:32
 >>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:650:3
 >> 
 >> Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((test) (main)) #t))
 >> 
 > 
 
 
From: John Clements <clements@brinckerhoff.org>
To: rxg@cs.ubc.ca, bugs@racket-lang.org
Cc: nobody@racket-lang.org, bug-notification@racket-lang.org
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the teaching languages
Date: Thu, 20 Nov 2014 09:23:23 -0500

 An automatically-submitted part of your bug report, below, suggests that you managed to generate an internal error using the stepper. If so, can you give me any hints on how to reproduce that?
 
 Many thanks (and also to Robby for noticing the stepper connection),
 
 John
 
 On Nov 19, 2014, at 8:20 PM, rxg@cs.ubc.ca wrote:
 > 
 > Recent Internal Errors: Saved 1 internal error:
 > 
 > list-ref: contract violation
 >  expected: pair?
 >  given: '()
 >  argument position: 1st
 >  other arguments...:
 >   -1
 >  context...:
 >   /Applications/Racket v6.1/share/pkgs/htdp-lib/stepper/private/view-controller.rkt:341:2: update-view/existing
 >   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:451:6
 >   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:502:32
 >   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:650:3
 > 
 > Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((test) (main)) #t))
 > 
 
 
From: Ron Garcia <rxg@cs.ubc.ca>
To: John Clements <clements@brinckerhoff.org>
Cc: bugs@racket-lang.org, nobody@racket-lang.org,
        bug-notification@racket-lang.org
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the teaching languages
Date: Thu, 20 Nov 2014 06:52:34 -0800

 Hi John,
 
 I didn't realize that I submitted a bug report!  I guess that's what makes it automated.  Hmm…My best guess of what happened is this:
 
 I was teaching my students about tail recursion, and I wrote the code:
 
 (define (recurse f) 
  (recurse f))
 
 (recurse 7)
 
 And I brought it up in the stepper in Intermediate Student Language.  Didn't work so well.  I think it worked when I switched to Intermediate Student Language with Lambda, since the expression would step to a lambda and then back to (recurse 7), though I would have preferred showing it step to itself right away each time.
 
 Could this be where the bug report came from?
 
 Cheers,
 Ron
 
 
 On 2014-11-20, at 6:23 AM, John Clements <clements@brinckerhoff.org> wrote:
 
 > An automatically-submitted part of your bug report, below, suggests that you managed to generate an internal error using the stepper. If so, can you give me any hints on how to reproduce that?
 > 
 > Many thanks (and also to Robby for noticing the stepper connection),
 > 
 > John
 > 
 > On Nov 19, 2014, at 8:20 PM, rxg@cs.ubc.ca wrote:
 >> 
 >> Recent Internal Errors: Saved 1 internal error:
 >> 
 >> list-ref: contract violation
 >> expected: pair?
 >> given: '()
 >> argument position: 1st
 >> other arguments...:
 >>  -1
 >> context...:
 >>  /Applications/Racket v6.1/share/pkgs/htdp-lib/stepper/private/view-controller.rkt:341:2: update-view/existing
 >>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:451:6
 >>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:502:32
 >>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:650:3
 >> 
 >> Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((test) (main)) #t))
 >> 
 > 
 
 
From: Matthias Felleisen <matthias@ccs.neu.edu>
To: Ron Garcia <rxg@cs.ubc.ca>
Cc: John Clements <clements@brinckerhoff.org>, bugs@racket-lang.org,
        nobody@racket-lang.org, bug-notification@racket-lang.org
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the teaching languages
Date: Thu, 20 Nov 2014 09:59:52 -0500

 1. I didn't realize you like to curse over and over and over again :-) 
 	[It's recur not recurse.]
 
 2. I hope you brought up this infinite loop after gen rec was introduced. 
 	Otherwise you can't blame the 'customer' for having triggered such things. 
 
 3. I never ever explain tail recursion. What's the point? 
 
 
 
 
 
 On Nov 20, 2014, at 9:52 AM, Ron Garcia <rxg@cs.ubc.ca> wrote:
 
 > Hi John,
 > 
 > I didn't realize that I submitted a bug report!  I guess that's what makes it automated.  Hmm…My best guess of what happened is this:
 > 
 > I was teaching my students about tail recursion, and I wrote the code:
 > 
 > (define (recurse f) 
 > (recurse f))
 > 
 > (recurse 7)
 > 
 > And I brought it up in the stepper in Intermediate Student Language.  Didn't work so well.  I think it worked when I switched to Intermediate Student Language with Lambda, since the expression would step to a lambda and then back to (recurse 7), though I would have preferred showing it step to itself right away each time.
 > 
 > Could this be where the bug report came from?
 > 
 > Cheers,
 > Ron
 > 
 > 
 > On 2014-11-20, at 6:23 AM, John Clements <clements@brinckerhoff.org> wrote:
 > 
 >> An automatically-submitted part of your bug report, below, suggests that you managed to generate an internal error using the stepper. If so, can you give me any hints on how to reproduce that?
 >> 
 >> Many thanks (and also to Robby for noticing the stepper connection),
 >> 
 >> John
 >> 
 >> On Nov 19, 2014, at 8:20 PM, rxg@cs.ubc.ca wrote:
 >>> 
 >>> Recent Internal Errors: Saved 1 internal error:
 >>> 
 >>> list-ref: contract violation
 >>> expected: pair?
 >>> given: '()
 >>> argument position: 1st
 >>> other arguments...:
 >>> -1
 >>> context...:
 >>> /Applications/Racket v6.1/share/pkgs/htdp-lib/stepper/private/view-controller.rkt:341:2: update-view/existing
 >>> /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:451:6
 >>> /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:502:32
 >>> /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:650:3
 >>> 
 >>> Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((test) (main)) #t))
 >>> 
 >> 
 > 
 
 
From: Matthias Felleisen <matthias@ccs.neu.edu>
To: Ron Garcia <rxg@cs.ubc.ca>
Cc: John Clements <clements@brinckerhoff.org>, bugs@racket-lang.org,
        nobody@racket-lang.org, bug-notification@racket-lang.org
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the teaching languages
Date: Thu, 20 Nov 2014 10:05:22 -0500

 On Nov 20, 2014, at 10:01 AM, Ron Garcia <rxg@cs.ubc.ca> wrote:
 
 > Because I get to use one of my favorite lines w.r.t. proper tail calls: "I never call it tail call optimization, because failing to do something stupid isn't an optimization…" :)
 
 
 We use this line in the second course when we expose Java for what the fraud that it is. 
 
 But in my world you are not allowed to call it 'optimization' anyway. It's PITCH ~ proper implementation of tail calls, with a random H added at the end. 
From: Ron Garcia <rxg@cs.ubc.ca>
To: Matthias Felleisen <matthias@ccs.neu.edu>
Cc: John Clements <clements@brinckerhoff.org>, bugs@racket-lang.org,
        nobody@racket-lang.org, bug-notification@racket-lang.org
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the teaching languages
Date: Thu, 20 Nov 2014 07:01:21 -0800

 On 2014-11-20, at 6:59 AM, Matthias Felleisen <matthias@ccs.neu.edu> wrote:
 
 > 
 > 1. I didn't realize you like to curse over and over and over again :-) 
 > 	[It's recur not recurse.]
 > 
 Hah!  I wanted to use the word "recur" but it was a reserved word in ISL with Lambda (where I ended up after the ISL fail)  so I started cursing… ;)
 
 
 > 2. I hope you brought up this infinite loop after gen rec was introduced. 
 > 	Otherwise you can't blame the 'customer' for having triggered such things. 
 
 Oh most definitely!  Genrec was last week.
 
 > 
 > 3. I never ever explain tail recursion. What's the point? 
 > 
 
 Because I get to use one of my favorite lines w.r.t. proper tail calls: "I never call it tail call optimization, because failing to do something stupid isn't an optimization…" :)
 
 Ron
 
 
 
 > 
 > 
 > 
 > On Nov 20, 2014, at 9:52 AM, Ron Garcia <rxg@cs.ubc.ca> wrote:
 > 
 >> Hi John,
 >> 
 >> I didn't realize that I submitted a bug report!  I guess that's what makes it automated.  Hmm…My best guess of what happened is this:
 >> 
 >> I was teaching my students about tail recursion, and I wrote the code:
 >> 
 >> (define (recurse f) 
 >> (recurse f))
 >> 
 >> (recurse 7)
 >> 
 >> And I brought it up in the stepper in Intermediate Student Language.  Didn't work so well.  I think it worked when I switched to Intermediate Student Language with Lambda, since the expression would step to a lambda and then back to (recurse 7), though I would have preferred showing it step to itself right away each time.
 >> 
 >> Could this be where the bug report came from?
 >> 
 >> Cheers,
 >> Ron
 >> 
 >> 
 >> On 2014-11-20, at 6:23 AM, John Clements <clements@brinckerhoff.org> wrote:
 >> 
 >>> An automatically-submitted part of your bug report, below, suggests that you managed to generate an internal error using the stepper. If so, can you give me any hints on how to reproduce that?
 >>> 
 >>> Many thanks (and also to Robby for noticing the stepper connection),
 >>> 
 >>> John
 >>> 
 >>> On Nov 19, 2014, at 8:20 PM, rxg@cs.ubc.ca wrote:
 >>>> 
 >>>> Recent Internal Errors: Saved 1 internal error:
 >>>> 
 >>>> list-ref: contract violation
 >>>> expected: pair?
 >>>> given: '()
 >>>> argument position: 1st
 >>>> other arguments...:
 >>>> -1
 >>>> context...:
 >>>> /Applications/Racket v6.1/share/pkgs/htdp-lib/stepper/private/view-controller.rkt:341:2: update-view/existing
 >>>> /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:451:6
 >>>> /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:502:32
 >>>> /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:650:3
 >>>> 
 >>>> Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((test) (main)) #t))
 >>>> 
 >>> 
 >> 
 > 
 
 
From: Stephen Chang <stchang@ccs.neu.edu>
To: Ron Garcia <rxg@cs.ubc.ca>
Cc: John Clements <clements@brinckerhoff.org>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the
 teaching languages
Date: Thu, 20 Nov 2014 10:10:31 -0500

 > I was teaching my students about tail recursion, and I wrote the code:
 >
 > (define (recurse f)
 >  (recurse f))
 >
 > (recurse 7)
 >
 > And I brought it up in the stepper in Intermediate Student Language.  Didn't work so well.  I think it worked when I switched to Intermediate Student Language with Lambda, since the expression would step to a lambda and then back to (recurse 7), though I would have preferred showing it step to itself right away each time.
 
 This is due to the lazy stepper, which needs to collapse syntactically
 identical consecutive steps. Since I don't know of anyone using the
 lazy stepper, should I remove this behavior?
 
 (Btw, there is at least one existing bug report that also reports
 this, pr 13637).
 
 
 
 
 >
 > Cheers,
 > Ron
 >
 >
 > On 2014-11-20, at 6:23 AM, John Clements <clements@brinckerhoff.org> wrote:
 >
 >> An automatically-submitted part of your bug report, below, suggests that you managed to generate an internal error using the stepper. If so, can you give me any hints on how to reproduce that?
 >>
 >> Many thanks (and also to Robby for noticing the stepper connection),
 >>
 >> John
 >>
 >> On Nov 19, 2014, at 8:20 PM, rxg@cs.ubc.ca wrote:
 >>>
 >>> Recent Internal Errors: Saved 1 internal error:
 >>>
 >>> list-ref: contract violation
 >>> expected: pair?
 >>> given: '()
 >>> argument position: 1st
 >>> other arguments...:
 >>>  -1
 >>> context...:
 >>>  /Applications/Racket v6.1/share/pkgs/htdp-lib/stepper/private/view-controller.rkt:341:2: update-view/existing
 >>>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:451:6
 >>>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:502:32
 >>>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:650:3
 >>>
 >>> Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((test) (main)) #t))
 >>>
 >>
 >
 
From: Robby Findler <robby@eecs.northwestern.edu>
To: Stephen Chang <stchang@ccs.neu.edu>
Cc: Ron Garcia <rxg@cs.ubc.ca>, John Clements <clements@brinckerhoff.org>,
        bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the
 teaching languages
Date: Thu, 20 Nov 2014 09:12:40 -0600

 Can you make it work only when it is appropriate and don't enable it
 in the teaching languages somehow?
 
 Robby
 
 
 On Thu, Nov 20, 2014 at 9:10 AM, Stephen Chang <stchang@ccs.neu.edu> wrote:
 >> I was teaching my students about tail recursion, and I wrote the code:
 >>
 >> (define (recurse f)
 >>  (recurse f))
 >>
 >> (recurse 7)
 >>
 >> And I brought it up in the stepper in Intermediate Student Language.  Didn't work so well.  I think it worked when I switched to Intermediate Student Language with Lambda, since the expression would step to a lambda and then back to (recurse 7), though I would have preferred showing it step to itself right away each time.
 >
 > This is due to the lazy stepper, which needs to collapse syntactically
 > identical consecutive steps. Since I don't know of anyone using the
 > lazy stepper, should I remove this behavior?
 >
 > (Btw, there is at least one existing bug report that also reports
 > this, pr 13637).
 >
 >
 >
 >
 >>
 >> Cheers,
 >> Ron
 >>
 >>
 >> On 2014-11-20, at 6:23 AM, John Clements <clements@brinckerhoff.org> wrote:
 >>
 >>> An automatically-submitted part of your bug report, below, suggests that you managed to generate an internal error using the stepper. If so, can you give me any hints on how to reproduce that?
 >>>
 >>> Many thanks (and also to Robby for noticing the stepper connection),
 >>>
 >>> John
 >>>
 >>> On Nov 19, 2014, at 8:20 PM, rxg@cs.ubc.ca wrote:
 >>>>
 >>>> Recent Internal Errors: Saved 1 internal error:
 >>>>
 >>>> list-ref: contract violation
 >>>> expected: pair?
 >>>> given: '()
 >>>> argument position: 1st
 >>>> other arguments...:
 >>>>  -1
 >>>> context...:
 >>>>  /Applications/Racket v6.1/share/pkgs/htdp-lib/stepper/private/view-controller.rkt:341:2: update-view/existing
 >>>>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:451:6
 >>>>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:502:32
 >>>>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:650:3
 >>>>
 >>>> Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((test) (main)) #t))
 >>>>
 >>>
 >>
 
From: Stephen Chang <stchang@ccs.neu.edu>
To: Ronald Garcia <rxg@cs.ubc.ca>, bugs <bugs@racket-lang.org>
Cc: nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the
 teaching languages
Date: Thu, 20 Nov 2014 12:22:32 -0500

 >  I have students who are excited about programming, but use ASL and
 > mutate structs because it's more convenient to type.
 
 I 100% agree that something needs to be done about the struct
 accessors that often pile up and obfuscate the program. I don't think
 we can claim to be teaching students to write beautiful, readable
 code, when the end is result is often neither.
 
 I'm teaching an htdp course next semester and I am planning on
 experimenting with letting students use a (restricted) pattern
 matching form like in the following:
 
 (define (ball-tick b)
   (decompose
    ([(ball x y vel) <= b])
      (if (hits-ground? (coord-tick y vel))
          (ball-bounce x y vel)
          (make-ball x (coord-tick y vel) (vel-tick vel))))))
 
 Anyone have experience with something like this?
 
 
 
 On Wed, Nov 19, 2014 at 8:20 PM,  <rxg@cs.ubc.ca> wrote:
 > A new problem report is waiting at
 >   http://bugs.racket-lang.org/query/?cmd=view&pr=14845
 >
 > Reported by Ron Garcia for release: 6.1
 >
 > *** Description:
 > It would be great if support for struct-copy were available in the teaching languages.  I have students who are excited about programming, but use ASL and mutate structs because it's more convenient to type.
 >
 > *** How to repeat:
 >
 >
 > *** Environment:
 > macosx "Darwin dhcp-206-87-158-193.ubcsecure.wireless.ubc.ca 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 > Human Language: english
 > (current-memory-use) 308711124
 > raco pkg (show):
 > Installation-wide:
 >  Package              Checksum                                    Source
 >  main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 >  racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 >  [178 auto-installed packages not shown]
 > User-specific for installation "6.1":
 >  [none]
 >
 >
 >
 > Collections:
 > ("/Users/Ron/Library/Racket/6.1/collects"
 >  (non-existent-path))
 > ("/Applications/Racket v6.1/collects"
 >  (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 >
 > Recent Internal Errors: Saved 1 internal error:
 >
 > list-ref: contract violation
 >   expected: pair?
 >   given: '()
 >   argument position: 1st
 >   other arguments...:
 >    -1
 >   context...:
 >    /Applications/Racket v6.1/share/pkgs/htdp-lib/stepper/private/view-controller.rkt:341:2: update-view/existing
 >    /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:451:6
 >    /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:502:32
 >    /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:650:3
 >
 > Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((test) (main)) #t))
 >
From: Matthias Felleisen <matthias@ccs.neu.edu>
To: Stephen Chang <stchang@ccs.neu.edu>
Cc: Ronald Garcia <rxg@cs.ubc.ca>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the teaching languages
Date: Thu, 20 Nov 2014 12:57:03 -0500

 Pattern-matching is available in ASL. 
 
 
 
 
 On Nov 20, 2014, at 12:22 PM, Stephen Chang <stchang@ccs.neu.edu> wrote:
 
 >> I have students who are excited about programming, but use ASL and
 >> mutate structs because it's more convenient to type.
 > 
 > I 100% agree that something needs to be done about the struct
 > accessors that often pile up and obfuscate the program. I don't think
 > we can claim to be teaching students to write beautiful, readable
 > code, when the end is result is often neither.
 > 
 > I'm teaching an htdp course next semester and I am planning on
 > experimenting with letting students use a (restricted) pattern
 > matching form like in the following:
 > 
 > (define (ball-tick b)
 >  (decompose
 >   ([(ball x y vel) <= b])
 >     (if (hits-ground? (coord-tick y vel))
 >         (ball-bounce x y vel)
 >         (make-ball x (coord-tick y vel) (vel-tick vel))))))
 > 
 > Anyone have experience with something like this?
 > 
 > 
 > 
 > On Wed, Nov 19, 2014 at 8:20 PM,  <rxg@cs.ubc.ca> wrote:
 >> A new problem report is waiting at
 >>  http://bugs.racket-lang.org/query/?cmd=view&pr=14845
 >> 
 >> Reported by Ron Garcia for release: 6.1
 >> 
 >> *** Description:
 >> It would be great if support for struct-copy were available in the teaching languages.  I have students who are excited about programming, but use ASL and mutate structs because it's more convenient to type.
 >> 
 >> *** How to repeat:
 >> 
 >> 
 >> *** Environment:
 >> macosx "Darwin dhcp-206-87-158-193.ubcsecure.wireless.ubc.ca 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 >> Human Language: english
 >> (current-memory-use) 308711124
 >> raco pkg (show):
 >> Installation-wide:
 >> Package              Checksum                                    Source
 >> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 >> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 >> [178 auto-installed packages not shown]
 >> User-specific for installation "6.1":
 >> [none]
 >> 
 >> 
 >> 
 >> Collections:
 >> ("/Users/Ron/Library/Racket/6.1/collects"
 >> (non-existent-path))
 >> ("/Applications/Racket v6.1/collects"
 >> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 >> 
 >> Recent Internal Errors: Saved 1 internal error:
 >> 
 >> list-ref: contract violation
 >>  expected: pair?
 >>  given: '()
 >>  argument position: 1st
 >>  other arguments...:
 >>   -1
 >>  context...:
 >>   /Applications/Racket v6.1/share/pkgs/htdp-lib/stepper/private/view-controller.rkt:341:2: update-view/existing
 >>   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:451:6
 >>   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:502:32
 >>   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:650:3
 >> 
 >> Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((test) (main)) #t))
 >> 
 
 
From: Matthias Felleisen <matthias@ccs.neu.edu>
To: Stephen Chang <stchang@ccs.neu.edu>
Cc: Ronald Garcia <rxg@cs.ubc.ca>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the teaching languages
Date: Thu, 20 Nov 2014 13:00:15 -0500

 http://www.ccs.neu.edu/home/matthias/OnHtDP/_SL__Not_Racket.html
 
 
 
 On Nov 20, 2014, at 12:56 PM, Stephen Chang <stchang@ccs.neu.edu> wrote:
 
 >> Pattern-matching is available in ASL.
 > 
 > Why not the other *SLs?
 > 
 > 
 > 
 > 
 >> 
 >> 
 >> 
 >> 
 >> On Nov 20, 2014, at 12:22 PM, Stephen Chang <stchang@ccs.neu.edu> wrote:
 >> 
 >>>> I have students who are excited about programming, but use ASL and
 >>>> mutate structs because it's more convenient to type.
 >>> 
 >>> I 100% agree that something needs to be done about the struct
 >>> accessors that often pile up and obfuscate the program. I don't think
 >>> we can claim to be teaching students to write beautiful, readable
 >>> code, when the end is result is often neither.
 >>> 
 >>> I'm teaching an htdp course next semester and I am planning on
 >>> experimenting with letting students use a (restricted) pattern
 >>> matching form like in the following:
 >>> 
 >>> (define (ball-tick b)
 >>> (decompose
 >>>  ([(ball x y vel) <= b])
 >>>    (if (hits-ground? (coord-tick y vel))
 >>>        (ball-bounce x y vel)
 >>>        (make-ball x (coord-tick y vel) (vel-tick vel))))))
 >>> 
 >>> Anyone have experience with something like this?
 >>> 
 >>> 
 >>> 
 >>> On Wed, Nov 19, 2014 at 8:20 PM,  <rxg@cs.ubc.ca> wrote:
 >>>> A new problem report is waiting at
 >>>> http://bugs.racket-lang.org/query/?cmd=view&pr=14845
 >>>> 
 >>>> Reported by Ron Garcia for release: 6.1
 >>>> 
 >>>> *** Description:
 >>>> It would be great if support for struct-copy were available in the teaching languages.  I have students who are excited about programming, but use ASL and mutate structs because it's more convenient to type.
 >>>> 
 >>>> *** How to repeat:
 >>>> 
 >>>> 
 >>>> *** Environment:
 >>>> macosx "Darwin dhcp-206-87-158-193.ubcsecure.wireless.ubc.ca 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 >>>> Human Language: english
 >>>> (current-memory-use) 308711124
 >>>> raco pkg (show):
 >>>> Installation-wide:
 >>>> Package              Checksum                                    Source
 >>>> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 >>>> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 >>>> [178 auto-installed packages not shown]
 >>>> User-specific for installation "6.1":
 >>>> [none]
 >>>> 
 >>>> 
 >>>> 
 >>>> Collections:
 >>>> ("/Users/Ron/Library/Racket/6.1/collects"
 >>>> (non-existent-path))
 >>>> ("/Applications/Racket v6.1/collects"
 >>>> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 >>>> 
 >>>> Recent Internal Errors: Saved 1 internal error:
 >>>> 
 >>>> list-ref: contract violation
 >>>> expected: pair?
 >>>> given: '()
 >>>> argument position: 1st
 >>>> other arguments...:
 >>>>  -1
 >>>> context...:
 >>>>  /Applications/Racket v6.1/share/pkgs/htdp-lib/stepper/private/view-controller.rkt:341:2: update-view/existing
 >>>>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:451:6
 >>>>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:502:32
 >>>>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:650:3
 >>>> 
 >>>> Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((test) (main)) #t))
 >>>> 
 >> 
 
 
From: Stephen Chang <stchang@ccs.neu.edu>
To: Matthias Felleisen <matthias@ccs.neu.edu>
Cc: Ronald Garcia <rxg@cs.ubc.ca>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the
 teaching languages
Date: Thu, 20 Nov 2014 12:56:23 -0500

 > Pattern-matching is available in ASL.
 
 Why not the other *SLs?
 
 
 
 
 >
 >
 >
 >
 > On Nov 20, 2014, at 12:22 PM, Stephen Chang <stchang@ccs.neu.edu> wrote:
 >
 >>> I have students who are excited about programming, but use ASL and
 >>> mutate structs because it's more convenient to type.
 >>
 >> I 100% agree that something needs to be done about the struct
 >> accessors that often pile up and obfuscate the program. I don't think
 >> we can claim to be teaching students to write beautiful, readable
 >> code, when the end is result is often neither.
 >>
 >> I'm teaching an htdp course next semester and I am planning on
 >> experimenting with letting students use a (restricted) pattern
 >> matching form like in the following:
 >>
 >> (define (ball-tick b)
 >>  (decompose
 >>   ([(ball x y vel) <= b])
 >>     (if (hits-ground? (coord-tick y vel))
 >>         (ball-bounce x y vel)
 >>         (make-ball x (coord-tick y vel) (vel-tick vel))))))
 >>
 >> Anyone have experience with something like this?
 >>
 >>
 >>
 >> On Wed, Nov 19, 2014 at 8:20 PM,  <rxg@cs.ubc.ca> wrote:
 >>> A new problem report is waiting at
 >>>  http://bugs.racket-lang.org/query/?cmd=view&pr=14845
 >>>
 >>> Reported by Ron Garcia for release: 6.1
 >>>
 >>> *** Description:
 >>> It would be great if support for struct-copy were available in the teaching languages.  I have students who are excited about programming, but use ASL and mutate structs because it's more convenient to type.
 >>>
 >>> *** How to repeat:
 >>>
 >>>
 >>> *** Environment:
 >>> macosx "Darwin dhcp-206-87-158-193.ubcsecure.wireless.ubc.ca 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 >>> Human Language: english
 >>> (current-memory-use) 308711124
 >>> raco pkg (show):
 >>> Installation-wide:
 >>> Package              Checksum                                    Source
 >>> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 >>> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 >>> [178 auto-installed packages not shown]
 >>> User-specific for installation "6.1":
 >>> [none]
 >>>
 >>>
 >>>
 >>> Collections:
 >>> ("/Users/Ron/Library/Racket/6.1/collects"
 >>> (non-existent-path))
 >>> ("/Applications/Racket v6.1/collects"
 >>> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 >>>
 >>> Recent Internal Errors: Saved 1 internal error:
 >>>
 >>> list-ref: contract violation
 >>>  expected: pair?
 >>>  given: '()
 >>>  argument position: 1st
 >>>  other arguments...:
 >>>   -1
 >>>  context...:
 >>>   /Applications/Racket v6.1/share/pkgs/htdp-lib/stepper/private/view-controller.rkt:341:2: update-view/existing
 >>>   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:451:6
 >>>   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:502:32
 >>>   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:650:3
 >>>
 >>> Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((test) (main)) #t))
 >>>
 >
From: Stephen Chang <stchang@ccs.neu.edu>
To: Matthias Felleisen <matthias@ccs.neu.edu>
Cc: Ronald Garcia <rxg@cs.ubc.ca>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the
 teaching languages
Date: Thu, 20 Nov 2014 13:03:20 -0500

 Ok, good note, thanks.
 
 On Thu, Nov 20, 2014 at 1:00 PM, Matthias Felleisen
 <matthias@ccs.neu.edu> wrote:
 >
 > http://www.ccs.neu.edu/home/matthias/OnHtDP/_SL__Not_Racket.html
 >
 >
 >
 > On Nov 20, 2014, at 12:56 PM, Stephen Chang <stchang@ccs.neu.edu> wrote:
 >
 >>> Pattern-matching is available in ASL.
 >>
 >> Why not the other *SLs?
 >>
 >>
 >>
 >>
 >>>
 >>>
 >>>
 >>>
 >>> On Nov 20, 2014, at 12:22 PM, Stephen Chang <stchang@ccs.neu.edu> wrote:
 >>>
 >>>>> I have students who are excited about programming, but use ASL and
 >>>>> mutate structs because it's more convenient to type.
 >>>>
 >>>> I 100% agree that something needs to be done about the struct
 >>>> accessors that often pile up and obfuscate the program. I don't think
 >>>> we can claim to be teaching students to write beautiful, readable
 >>>> code, when the end is result is often neither.
 >>>>
 >>>> I'm teaching an htdp course next semester and I am planning on
 >>>> experimenting with letting students use a (restricted) pattern
 >>>> matching form like in the following:
 >>>>
 >>>> (define (ball-tick b)
 >>>> (decompose
 >>>>  ([(ball x y vel) <= b])
 >>>>    (if (hits-ground? (coord-tick y vel))
 >>>>        (ball-bounce x y vel)
 >>>>        (make-ball x (coord-tick y vel) (vel-tick vel))))))
 >>>>
 >>>> Anyone have experience with something like this?
 >>>>
 >>>>
 >>>>
 >>>> On Wed, Nov 19, 2014 at 8:20 PM,  <rxg@cs.ubc.ca> wrote:
 >>>>> A new problem report is waiting at
 >>>>> http://bugs.racket-lang.org/query/?cmd=view&pr=14845
 >>>>>
 >>>>> Reported by Ron Garcia for release: 6.1
 >>>>>
 >>>>> *** Description:
 >>>>> It would be great if support for struct-copy were available in the teaching languages.  I have students who are excited about programming, but use ASL and mutate structs because it's more convenient to type.
 >>>>>
 >>>>> *** How to repeat:
 >>>>>
 >>>>>
 >>>>> *** Environment:
 >>>>> macosx "Darwin dhcp-206-87-158-193.ubcsecure.wireless.ubc.ca 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 >>>>> Human Language: english
 >>>>> (current-memory-use) 308711124
 >>>>> raco pkg (show):
 >>>>> Installation-wide:
 >>>>> Package              Checksum                                    Source
 >>>>> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 >>>>> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 >>>>> [178 auto-installed packages not shown]
 >>>>> User-specific for installation "6.1":
 >>>>> [none]
 >>>>>
 >>>>>
 >>>>>
 >>>>> Collections:
 >>>>> ("/Users/Ron/Library/Racket/6.1/collects"
 >>>>> (non-existent-path))
 >>>>> ("/Applications/Racket v6.1/collects"
 >>>>> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 >>>>>
 >>>>> Recent Internal Errors: Saved 1 internal error:
 >>>>>
 >>>>> list-ref: contract violation
 >>>>> expected: pair?
 >>>>> given: '()
 >>>>> argument position: 1st
 >>>>> other arguments...:
 >>>>>  -1
 >>>>> context...:
 >>>>>  /Applications/Racket v6.1/share/pkgs/htdp-lib/stepper/private/view-controller.rkt:341:2: update-view/existing
 >>>>>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:451:6
 >>>>>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:502:32
 >>>>>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:650:3
 >>>>>
 >>>>> Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((test) (main)) #t))
 >>>>>
 >>>
 >
From: Ron Garcia <rxg@cs.ubc.ca>
To: Matthias Felleisen <matthias@ccs.neu.edu>
Cc: John Clements <clements@brinckerhoff.org>, bugs@racket-lang.org,
        nobody@racket-lang.org, bug-notification@racket-lang.org
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the teaching languages
Date: Thu, 20 Nov 2014 11:02:38 -0800

 On 2014-11-20, at 7:05 AM, Matthias Felleisen <matthias@ccs.neu.edu> wrote:
 
 > 
 > On Nov 20, 2014, at 10:01 AM, Ron Garcia <rxg@cs.ubc.ca> wrote:
 > 
 >> Because I get to use one of my favorite lines w.r.t. proper tail calls: "I never call it tail call optimization, because failing to do something stupid isn't an optimization…" :)
 > 
 > 
 > We use this line in the second course when we expose Java for what the fraud that it is. 
 > 
 I wish!  Our second course is very much NOT an HtDC course at this point.  If they're going to hear this story, it has to happen in the first course :(.
 
 > But in my world you are not allowed to call it 'optimization' anyway. It's PITCH ~ proper implementation of tail calls, with a random H added at the end. 
 
 I like that!  Thanks for sharing!
 
 Ron
 
 
From: Ron Garcia <rxg@cs.ubc.ca>
To: Stephen Chang <stchang@ccs.neu.edu>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the teaching languages
Date: Thu, 20 Nov 2014 11:00:28 -0800

 Hi Stephen!
 
 That's an interesting request, though on the pattern-matching front, I see it more as an instance of 
 learning to walk before you drive to the basket and slam a layup :).  I see what I was asking for as slightly different, and indeed less powerful:  just a feature that says "build me a compound data JUST LIKE this other one that I already have, but with one change".   In the meantime, I've shown students how to build their own rudimentary pattern matching on compound data by defining a fold function for their particular compound data:
 
 (define-struct cpd (a b c))
 ;; …
 
 (define (fold-cpd f c)
   (f (cpd-a c) (cpd-b c) (cpd-c c)))
 
 Then if they really want, they can write:
 
 (fold-cpd (lambda (a b c) (… a b c)) c)
 
 So it's just another instance of foldr, but for compound data instead of arbitrary-arity.  Of course I only 
 introduced this at the point that they were comfortable with designing complex folds..it didn't occur to them that
 they could also design simple ones.  I might eventually say that in some languages they just won't have to (woohoo!)
 
 :)
 
 Oh, tying back to the beginning, I showed them how to use this fold to build the feature that I'm asking for themselves,
 though it's a bit tedious if you have to repeat this pattern over and over.  I can share a corresponding Racket file with you if you are interested.
 
 
 Ron
 
 
 
 On 2014-11-20, at 9:22 AM, Stephen Chang <stchang@ccs.neu.edu> wrote:
 
 >> I have students who are excited about programming, but use ASL and
 >> mutate structs because it's more convenient to type.
 > 
 > I 100% agree that something needs to be done about the struct
 > accessors that often pile up and obfuscate the program. I don't think
 > we can claim to be teaching students to write beautiful, readable
 > code, when the end is result is often neither.
 > 
 > I'm teaching an htdp course next semester and I am planning on
 > experimenting with letting students use a (restricted) pattern
 > matching form like in the following:
 > 
 > (define (ball-tick b)
 >  (decompose
 >   ([(ball x y vel) <= b])
 >     (if (hits-ground? (coord-tick y vel))
 >         (ball-bounce x y vel)
 >         (make-ball x (coord-tick y vel) (vel-tick vel))))))
 > 
 > Anyone have experience with something like this?
 > 
 > 
 > 
 > On Wed, Nov 19, 2014 at 8:20 PM,  <rxg@cs.ubc.ca> wrote:
 >> A new problem report is waiting at
 >>  http://bugs.racket-lang.org/query/?cmd=view&pr=14845
 >> 
 >> Reported by Ron Garcia for release: 6.1
 >> 
 >> *** Description:
 >> It would be great if support for struct-copy were available in the teaching languages.  I have students who are excited about programming, but use ASL and mutate structs because it's more convenient to type.
 >> 
 >> *** How to repeat:
 >> 
 >> 
 >> *** Environment:
 >> macosx "Darwin dhcp-206-87-158-193.ubcsecure.wireless.ubc.ca 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 >> Human Language: english
 >> (current-memory-use) 308711124
 >> raco pkg (show):
 >> Installation-wide:
 >> Package              Checksum                                    Source
 >> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 >> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 >> [178 auto-installed packages not shown]
 >> User-specific for installation "6.1":
 >> [none]
 >> 
 >> 
 >> 
 >> Collections:
 >> ("/Users/Ron/Library/Racket/6.1/collects"
 >> (non-existent-path))
 >> ("/Applications/Racket v6.1/collects"
 >> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 >> 
 >> Recent Internal Errors: Saved 1 internal error:
 >> 
 >> list-ref: contract violation
 >>  expected: pair?
 >>  given: '()
 >>  argument position: 1st
 >>  other arguments...:
 >>   -1
 >>  context...:
 >>   /Applications/Racket v6.1/share/pkgs/htdp-lib/stepper/private/view-controller.rkt:341:2: update-view/existing
 >>   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:451:6
 >>   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:502:32
 >>   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:650:3
 >> 
 >> Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((test) (main)) #t))
 >> 
 
 
From: Stephen Chang <stchang@ccs.neu.edu>
To: Ron Garcia <rxg@cs.ubc.ca>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the
 teaching languages
Date: Fri, 21 Nov 2014 23:57:12 -0500

 Hi Ron,
 
 Thanks for the suggestions. I find myself frequently writing a similar
 "update" function. And yes maybe the right approach is to let students
 struggle with the basics for a while before introducing more powerful
 features.
 
 Oh and if you wouldnt mind sharing the code you mentioned, I'd love to
 take a look. Thanks!
 
 Steve
 
 On Thu, Nov 20, 2014 at 2:00 PM, Ron Garcia <rxg@cs.ubc.ca> wrote:
 > Hi Stephen!
 >
 > That's an interesting request, though on the pattern-matching front, I see it more as an instance of
 > learning to walk before you drive to the basket and slam a layup :).  I see what I was asking for as slightly different, and indeed less powerful:  just a feature that says "build me a compound data JUST LIKE this other one that I already have, but with one change".   In the meantime, I've shown students how to build their own rudimentary pattern matching on compound data by defining a fold function for their particular compound data:
 >
 > (define-struct cpd (a b c))
 > ;; â€¦
 >
 > (define (fold-cpd f c)
 >   (f (cpd-a c) (cpd-b c) (cpd-c c)))
 >
 > Then if they really want, they can write:
 >
 > (fold-cpd (lambda (a b c) (â€¦ a b c)) c)
 >
 > So it's just another instance of foldr, but for compound data instead of arbitrary-arity.  Of course I only
 > introduced this at the point that they were comfortable with designing complex folds..it didn't occur to them that
 > they could also design simple ones.  I might eventually say that in some languages they just won't have to (woohoo!)
 >
 > :)
 >
 > Oh, tying back to the beginning, I showed them how to use this fold to build the feature that I'm asking for themselves,
 > though it's a bit tedious if you have to repeat this pattern over and over.  I can share a corresponding Racket file with you if you are interested.
 >
 >
 > Ron
 >
 >
 >
 > On 2014-11-20, at 9:22 AM, Stephen Chang <stchang@ccs.neu.edu> wrote:
 >
 >>> I have students who are excited about programming, but use ASL and
 >>> mutate structs because it's more convenient to type.
 >>
 >> I 100% agree that something needs to be done about the struct
 >> accessors that often pile up and obfuscate the program. I don't think
 >> we can claim to be teaching students to write beautiful, readable
 >> code, when the end is result is often neither.
 >>
 >> I'm teaching an htdp course next semester and I am planning on
 >> experimenting with letting students use a (restricted) pattern
 >> matching form like in the following:
 >>
 >> (define (ball-tick b)
 >>  (decompose
 >>   ([(ball x y vel) <= b])
 >>     (if (hits-ground? (coord-tick y vel))
 >>         (ball-bounce x y vel)
 >>         (make-ball x (coord-tick y vel) (vel-tick vel))))))
 >>
 >> Anyone have experience with something like this?
 >>
 >>
 >>
 >> On Wed, Nov 19, 2014 at 8:20 PM,  <rxg@cs.ubc.ca> wrote:
 >>> A new problem report is waiting at
 >>>  http://bugs.racket-lang.org/query/?cmd=view&pr=14845
 >>>
 >>> Reported by Ron Garcia for release: 6.1
 >>>
 >>> *** Description:
 >>> It would be great if support for struct-copy were available in the teaching languages.  I have students who are excited about programming, but use ASL and mutate structs because it's more convenient to type.
 >>>
 >>> *** How to repeat:
 >>>
 >>>
 >>> *** Environment:
 >>> macosx "Darwin dhcp-206-87-158-193.ubcsecure.wireless.ubc.ca 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 >>> Human Language: english
 >>> (current-memory-use) 308711124
 >>> raco pkg (show):
 >>> Installation-wide:
 >>> Package              Checksum                                    Source
 >>> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 >>> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 >>> [178 auto-installed packages not shown]
 >>> User-specific for installation "6.1":
 >>> [none]
 >>>
 >>>
 >>>
 >>> Collections:
 >>> ("/Users/Ron/Library/Racket/6.1/collects"
 >>> (non-existent-path))
 >>> ("/Applications/Racket v6.1/collects"
 >>> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 >>>
 >>> Recent Internal Errors: Saved 1 internal error:
 >>>
 >>> list-ref: contract violation
 >>>  expected: pair?
 >>>  given: '()
 >>>  argument position: 1st
 >>>  other arguments...:
 >>>   -1
 >>>  context...:
 >>>   /Applications/Racket v6.1/share/pkgs/htdp-lib/stepper/private/view-controller.rkt:341:2: update-view/existing
 >>>   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:451:6
 >>>   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:502:32
 >>>   /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:650:3
 >>>
 >>> Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((test) (main)) #t))
 >>>
 >
 
From: Ron Garcia <rxg@cs.ubc.ca>
To: Stephen Chang <stchang@ccs.neu.edu>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the teaching languages
Date: Sun, 23 Nov 2014 17:26:33 -0800

 --Apple-Mail=_D305B9C7-2348-42B8-9D3A-1F61E06C8E27
 Content-Transfer-Encoding: 7bit
 Content-Type: text/plain;
 	charset=us-ascii
 
 Sure, here it is.
 
 
 --Apple-Mail=_D305B9C7-2348-42B8-9D3A-1F61E06C8E27
 Content-Disposition: attachment;
 	filename=update.rkt
 Content-Type: application/octet-stream;
 	name="update.rkt"
 Content-Transfer-Encoding: quoted-printable
 
 ;;=20The=20first=20three=20lines=20of=20this=20file=20were=20inserted=20=
 by=20DrRacket.=20They=20record=20metadata=0A;;=20about=20the=20language=20=
 level=20of=20this=20file=20in=20a=20form=20that=20our=20tools=20can=20=
 easily=20process.=0A#reader(lib=20"htdp-intermediate-lambda-reader.ss"=20=
 "lang")((modname=20update)=20(read-case-sensitive=20#t)=20(teachpacks=20=
 ())=20(htdp-settings=20#(#t=20constructor=20repeating-decimal=20#f=20#t=20=
 none=20#f=20())))=0A=0A(define-struct=20cd=20(f1=20f2=20f3=20f4))=0A;;=20=
 CompoundData=20is=20(make-cd=20Natural=20Natural=20Natural=20Natural)=0A=
 ;;=20interp.=20=20some=20compound=20data=0A=0A#;=0A(define=20(fn-for-cd=20=
 c)=0A=20=20(...=20(cd-f1=20c)=20(cd-f2=20c)=20(cd-f3=20c)=20(cd-f4=20=
 c)))=0A=0A=0A;;=20Update=20is=20CompoundData=20->=20CompoundData=0A;;=20=
 interp.=20function=20that=20updates=20a=20compound=20data.=0A=0A=0A;;=20=
 (Natural=20Natural=20Natural=20Natural=20->=20X)=20CompoundData=20->=20X=0A=
 ;;=20fold=20function=20for=20CompoundData=0A(check-expect=20(fold-cd=20=
 make-cd=20(make-cd=201=202=203=204))=20(make-cd=201=202=203=204))=0A=0A=
 (define=20(fold-cd=20f=20c)=0A=20=20(f=20(cd-f1=20c)=20(cd-f2=20c)=20=
 (cd-f3=20c)=20(cd-f4=20c)))=20=20=20=20=20=0A=0A=0A=0A;;=20Natural=20->=20=
 Update=0A;;=20produce=20an=20updater=20that=20given=20a=20compound=20=
 data=20updates=20its=20field=0A(check-expect=20((f1=209)=20(make-cd=201=20=
 2=203=204))=20=0A=20=20=20=20=20=20=20=20=20=20=20=20=20=20(make-cd=209=20=
 2=203=204))=0A=0A(define=20(f1=20v)=0A=20=20(=CE=BB=20(c)=20(fold-cd=20=
 (=CE=BB=20(f1=20f2=20f3=20f4)=20(make-cd=20v=20f2=20f3=20f4))=20c)))=0A=0A=
 (check-expect=20((f2=209)=20(make-cd=201=202=203=204))=20=0A=20=20=20=20=20=
 =20=20=20=20=20=20=20=20=20(make-cd=201=209=203=204))=0A(define=20(f2=20=
 v)=0A=20=20(=CE=BB=20(c)=20(fold-cd=20(=CE=BB=20(f1=20f2=20f3=20f4)=20=
 (make-cd=20f1=20v=20f3=20f4))=20c)))=0A=0A(check-expect=20((f3=209)=20=
 (make-cd=201=202=203=204))=20=0A=20=20=20=20=20=20=20=20=20=20=20=20=20=20=
 (make-cd=201=202=209=204))=0A(define=20(f3=20v)=0A=20=20(=CE=BB=20(c)=20=
 (fold-cd=20(=CE=BB=20(f1=20f2=20f3=20f4)=20(make-cd=20f1=20f2=20v=20f4))=20=
 c)))=0A=0A(check-expect=20((f4=209)=20(make-cd=201=202=203=204))=20=0A=20=
 =20=20=20=20=20=20=20=20=20=20=20=20=20(make-cd=201=202=203=209))=0A=
 (define=20(f4=20v)=0A=20=20(=CE=BB=20(c)=20(fold-cd=20(=CE=BB=20(f1=20f2=20=
 f3=20f4)=20(make-cd=20f1=20f2=20f3=20v))=20c)))=0A=0A=0A;;=20=
 CompoundData=20(listof=20Update)=20->=20CompoundData=0A;;=20apply=20the=20=
 given=20update=20to=20the=20compound=20data=0A(check-expect=20(updates=20=
 (make-cd=201=202=203=204)=20=0A=20=20=20=20=20=20=20=20=20=20=20=20=20=20=
 =20=20=20=20=20=20=20=20=20(list=20(f1=202)=0A=20=20=20=20=20=20=20=20=20=
 =20=20=20=20=20=20=20=20=20=20=20=20=20=20=20=20=20=20=20=20(f3=208)))=0A=
 =20=20=20=20=20=20=20=20=20=20=20=20=20=20(make-cd=202=202=208=204))=0A=0A=
 =0A(define=20(updates=20c=20us)=0A=20=20(foldr=20(=CE=BB=20(u=20rc)=20(u=20=
 rc))=20c=20us))=
 
 --Apple-Mail=_D305B9C7-2348-42B8-9D3A-1F61E06C8E27
 Content-Transfer-Encoding: quoted-printable
 Content-Type: text/plain;
 	charset=windows-1252
 
 
 
 Ron
 
 On 2014-11-21, at 8:57 PM, Stephen Chang <stchang@ccs.neu.edu> wrote:
 
 > Hi Ron,
 >=20
 > Thanks for the suggestions. I find myself frequently writing a similar
 > "update" function. And yes maybe the right approach is to let students
 > struggle with the basics for a while before introducing more powerful
 > features.
 >=20
 > Oh and if you wouldnt mind sharing the code you mentioned, I'd love to
 > take a look. Thanks!
 >=20
 > Steve
 >=20
 > On Thu, Nov 20, 2014 at 2:00 PM, Ron Garcia <rxg@cs.ubc.ca> wrote:
 >> Hi Stephen!
 >>=20
 >> That's an interesting request, though on the pattern-matching front, =
 I see it more as an instance of
 >> learning to walk before you drive to the basket and slam a layup :).  =
 I see what I was asking for as slightly different, and indeed less =
 powerful:  just a feature that says "build me a compound data JUST LIKE =
 this other one that I already have, but with one change".   In the =
 meantime, I've shown students how to build their own rudimentary pattern =
 matching on compound data by defining a fold function for their =
 particular compound data:
 >>=20
 >> (define-struct cpd (a b c))
 >> ;; =85
 >>=20
 >> (define (fold-cpd f c)
 >>  (f (cpd-a c) (cpd-b c) (cpd-c c)))
 >>=20
 >> Then if they really want, they can write:
 >>=20
 >> (fold-cpd (lambda (a b c) (=85 a b c)) c)
 >>=20
 >> So it's just another instance of foldr, but for compound data instead =
 of arbitrary-arity.  Of course I only
 >> introduced this at the point that they were comfortable with =
 designing complex folds..it didn't occur to them that
 >> they could also design simple ones.  I might eventually say that in =
 some languages they just won't have to (woohoo!)
 >>=20
 >> :)
 >>=20
 >> Oh, tying back to the beginning, I showed them how to use this fold =
 to build the feature that I'm asking for themselves,
 >> though it's a bit tedious if you have to repeat this pattern over and =
 over.  I can share a corresponding Racket file with you if you are =
 interested.
 >>=20
 >>=20
 >> Ron
 >>=20
 >>=20
 >>=20
 >> On 2014-11-20, at 9:22 AM, Stephen Chang <stchang@ccs.neu.edu> wrote:
 >>=20
 >>>> I have students who are excited about programming, but use ASL and
 >>>> mutate structs because it's more convenient to type.
 >>>=20
 >>> I 100% agree that something needs to be done about the struct
 >>> accessors that often pile up and obfuscate the program. I don't =
 think
 >>> we can claim to be teaching students to write beautiful, readable
 >>> code, when the end is result is often neither.
 >>>=20
 >>> I'm teaching an htdp course next semester and I am planning on
 >>> experimenting with letting students use a (restricted) pattern
 >>> matching form like in the following:
 >>>=20
 >>> (define (ball-tick b)
 >>> (decompose
 >>>  ([(ball x y vel) <=3D b])
 >>>    (if (hits-ground? (coord-tick y vel))
 >>>        (ball-bounce x y vel)
 >>>        (make-ball x (coord-tick y vel) (vel-tick vel))))))
 >>>=20
 >>> Anyone have experience with something like this?
 >>>=20
 >>>=20
 >>>=20
 >>> On Wed, Nov 19, 2014 at 8:20 PM,  <rxg@cs.ubc.ca> wrote:
 >>>> A new problem report is waiting at
 >>>> http://bugs.racket-lang.org/query/?cmd=3Dview&pr=3D14845
 >>>>=20
 >>>> Reported by Ron Garcia for release: 6.1
 >>>>=20
 >>>> *** Description:
 >>>> It would be great if support for struct-copy were available in the =
 teaching languages.  I have students who are excited about programming, =
 but use ASL and mutate structs because it's more convenient to type.
 >>>>=20
 >>>> *** How to repeat:
 >>>>=20
 >>>>=20
 >>>> *** Environment:
 >>>> macosx "Darwin dhcp-206-87-158-193.ubcsecure.wireless.ubc.ca 12.5.0 =
 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; =
 root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) =
 (get-display-depth) =3D 32
 >>>> Human Language: english
 >>>> (current-memory-use) 308711124
 >>>> raco pkg (show):
 >>>> Installation-wide:
 >>>> Package              Checksum                                    =
 Source
 >>>> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    =
 (catalog main-distribution)
 >>>> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    =
 (catalog racket-lib)
 >>>> [178 auto-installed packages not shown]
 >>>> User-specific for installation "6.1":
 >>>> [none]
 >>>>=20
 >>>>=20
 >>>>=20
 >>>> Collections:
 >>>> ("/Users/Ron/Library/Racket/6.1/collects"
 >>>> (non-existent-path))
 >>>> ("/Applications/Racket v6.1/collects"
 >>>> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" =
 "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" =
 "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" =
 "version" "xml"))
 >>>>=20
 >>>> Recent Internal Errors: Saved 1 internal error:
 >>>>=20
 >>>> list-ref: contract violation
 >>>> expected: pair?
 >>>> given: '()
 >>>> argument position: 1st
 >>>> other arguments...:
 >>>>  -1
 >>>> context...:
 >>>>  /Applications/Racket =
 v6.1/share/pkgs/htdp-lib/stepper/private/view-controller.rkt:341:2: =
 update-view/existing
 >>>>  /Applications/Racket =
 v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:451:6
 >>>>  /Applications/Racket =
 v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:502:32
 >>>>  /Applications/Racket =
 v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:650:3
 >>>>=20
 >>>> Computer Language: (("Determine language from source") (#(#t print =
 mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t =
 ((test) (main)) #t))
 >>>>=20
 >>=20
 
 
 --Apple-Mail=_D305B9C7-2348-42B8-9D3A-1F61E06C8E27--
From: Stephen Chang <stchang@ccs.neu.edu>
To: Ron Garcia <rxg@cs.ubc.ca>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14845: Add support for struct-copy to the
 teaching languages
Date: Sun, 23 Nov 2014 20:28:10 -0500

 Thanks Ron!
 
 On Sun, Nov 23, 2014 at 8:26 PM, Ron Garcia <rxg@cs.ubc.ca> wrote:
 > Sure, here it is.
 >
 >
 >
 >
 > Ron
 >
 > On 2014-11-21, at 8:57 PM, Stephen Chang <stchang@ccs.neu.edu> wrote:
 >
 >> Hi Ron,
 >>
 >> Thanks for the suggestions. I find myself frequently writing a similar
 >> "update" function. And yes maybe the right approach is to let students
 >> struggle with the basics for a while before introducing more powerful
 >> features.
 >>
 >> Oh and if you wouldnt mind sharing the code you mentioned, I'd love to
 >> take a look. Thanks!
 >>
 >> Steve
 >>
 >> On Thu, Nov 20, 2014 at 2:00 PM, Ron Garcia <rxg@cs.ubc.ca> wrote:
 >>> Hi Stephen!
 >>>
 >>> That's an interesting request, though on the pattern-matching front, I see it more as an instance of
 >>> learning to walk before you drive to the basket and slam a layup :).  I see what I was asking for as slightly different, and indeed less powerful:  just a feature that says "build me a compound data JUST LIKE this other one that I already have, but with one change".   In the meantime, I've shown students how to build their own rudimentary pattern matching on compound data by defining a fold function for their particular compound data:
 >>>
 >>> (define-struct cpd (a b c))
 >>> ;; â€¦
 >>>
 >>> (define (fold-cpd f c)
 >>>  (f (cpd-a c) (cpd-b c) (cpd-c c)))
 >>>
 >>> Then if they really want, they can write:
 >>>
 >>> (fold-cpd (lambda (a b c) (â€¦ a b c)) c)
 >>>
 >>> So it's just another instance of foldr, but for compound data instead of arbitrary-arity.  Of course I only
 >>> introduced this at the point that they were comfortable with designing complex folds..it didn't occur to them that
 >>> they could also design simple ones.  I might eventually say that in some languages they just won't have to (woohoo!)
 >>>
 >>> :)
 >>>
 >>> Oh, tying back to the beginning, I showed them how to use this fold to build the feature that I'm asking for themselves,
 >>> though it's a bit tedious if you have to repeat this pattern over and over.  I can share a corresponding Racket file with you if you are interested.
 >>>
 >>>
 >>> Ron
 >>>
 >>>
 >>>
 >>> On 2014-11-20, at 9:22 AM, Stephen Chang <stchang@ccs.neu.edu> wrote:
 >>>
 >>>>> I have students who are excited about programming, but use ASL and
 >>>>> mutate structs because it's more convenient to type.
 >>>>
 >>>> I 100% agree that something needs to be done about the struct
 >>>> accessors that often pile up and obfuscate the program. I don't think
 >>>> we can claim to be teaching students to write beautiful, readable
 >>>> code, when the end is result is often neither.
 >>>>
 >>>> I'm teaching an htdp course next semester and I am planning on
 >>>> experimenting with letting students use a (restricted) pattern
 >>>> matching form like in the following:
 >>>>
 >>>> (define (ball-tick b)
 >>>> (decompose
 >>>>  ([(ball x y vel) <= b])
 >>>>    (if (hits-ground? (coord-tick y vel))
 >>>>        (ball-bounce x y vel)
 >>>>        (make-ball x (coord-tick y vel) (vel-tick vel))))))
 >>>>
 >>>> Anyone have experience with something like this?
 >>>>
 >>>>
 >>>>
 >>>> On Wed, Nov 19, 2014 at 8:20 PM,  <rxg@cs.ubc.ca> wrote:
 >>>>> A new problem report is waiting at
 >>>>> http://bugs.racket-lang.org/query/?cmd=view&pr=14845
 >>>>>
 >>>>> Reported by Ron Garcia for release: 6.1
 >>>>>
 >>>>> *** Description:
 >>>>> It would be great if support for struct-copy were available in the teaching languages.  I have students who are excited about programming, but use ASL and mutate structs because it's more convenient to type.
 >>>>>
 >>>>> *** How to repeat:
 >>>>>
 >>>>>
 >>>>> *** Environment:
 >>>>> macosx "Darwin dhcp-206-87-158-193.ubcsecure.wireless.ubc.ca 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 >>>>> Human Language: english
 >>>>> (current-memory-use) 308711124
 >>>>> raco pkg (show):
 >>>>> Installation-wide:
 >>>>> Package              Checksum                                    Source
 >>>>> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 >>>>> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 >>>>> [178 auto-installed packages not shown]
 >>>>> User-specific for installation "6.1":
 >>>>> [none]
 >>>>>
 >>>>>
 >>>>>
 >>>>> Collections:
 >>>>> ("/Users/Ron/Library/Racket/6.1/collects"
 >>>>> (non-existent-path))
 >>>>> ("/Applications/Racket v6.1/collects"
 >>>>> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 >>>>>
 >>>>> Recent Internal Errors: Saved 1 internal error:
 >>>>>
 >>>>> list-ref: contract violation
 >>>>> expected: pair?
 >>>>> given: '()
 >>>>> argument position: 1st
 >>>>> other arguments...:
 >>>>>  -1
 >>>>> context...:
 >>>>>  /Applications/Racket v6.1/share/pkgs/htdp-lib/stepper/private/view-controller.rkt:341:2: update-view/existing
 >>>>>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:451:6
 >>>>>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:502:32
 >>>>>  /Applications/Racket v6.1/share/pkgs/gui-lib/mred/private/wx/common/queue.rkt:650:3
 >>>>>
 >>>>> Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((test) (main)) #t))
 >>>>>
 >>>
 >
 >
 
