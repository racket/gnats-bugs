From bugs+caf_=bugs=bugs.plt-scheme.org@plt-scheme.org Sat Mar 15 23:10:31 2014
Received: from mail-ob0-f175.google.com (mail-ob0-f175.google.com [209.85.214.175])
	by winooski.ccs.neu.edu (8.14.7/8.14.7) with ESMTP id s2G3AT1U001812
	for <bugs@bugs.plt-scheme.org>; Sat, 15 Mar 2014 23:10:29 -0400
Message-Id: <201403160310.s2G3ARkd001805@winooski.ccs.neu.edu>
Date: Sat, 15 Mar 2014 23:10:27 -0400
From: eric.hanchrow@gmail.com
To: bugs@racket-lang.org
Subject: "profile" would be more useful if it returned the result(s) of evaluating its body

>Number:         14404
>Category:       all
>Synopsis:       "profile" would be more useful if it returned the result(s) of evaluating its body
>Class:          change-request
>Responsible:    stamourv
>Severity:       non-critical
>Priority:       medium
>State:          closed
>Confidential:   no
>Arrival-Date:   Sat Mar 15 23:12:04 -0400 2014
>Closed-Date:    Thu Mar 27 16:28:17 -0400 2014
>Last-Modified:  Thu Mar 27 16:28:17 -0400 2014
>Originator:     Eric Hanchrow
>Organization:
plt
>Submitter-Id:   unknown
>Release:        6.0.0.1--2013-12-13(1f1550a/a)
>Environment:
macosx "Darwin Eric-Hanchrows-MacBook-Pro.local 13.1.0 Darwin Kernel Version 13.1.0: Thu Jan 16 19:40:37 PST 2014; root:xnu-2422.90.20~2/RELEASE_X86_64 x86_64" (x86_64-macosx/3m) (get-display-depth) = 32
Human Language: english
(current-memory-use) 287758760
Links: (links) = (); (links #:user? #f) = ("contract-profile" "syntax" "mysterx" "sgl" "datalog" "shell-completion" "algol60" "icons" "ds-store" "slatex" "realm" "games" "make" "trace" "plai" "eopl" "lazy" "preprocessor" "profile" "racklog" "mzcom" "schemeunit" "unstable" "frtime" "mrlib" "swindle"); (links #:root? #t) = (#<path:/Users/erichanchrow/Library/Racket/snapshot/pkgs/throw> #<path:/Users/erichanchrow/Library/Racket/snapshot/pkgs/zeromq> #<path:/Users/erichanchrow/Library/Racket/snapshot/pkgs/zmq>); (links #:user? #f #:root? #t) = (#<path:/Applications/Racket v6.0.0.1/share/pkgs/racket-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/main-distribution> #<path:/Applications/Racket v6.0.0.1/share/pkgs/at-exp-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/compatibility> #<path:/Applications/Racket v6.0.0.1/share/pkgs/compiler> #<path:/Applications/Racket v6.0.0.1/share/pkgs/data> #<path:/Applications/Racket v6.0.0.1/share/pkgs/db> #<path:/Applications/Racket !
 v6.0.0.1/share/pkgs/deinprogramm> #<path:/Applications/Racket v6.0.0.1/share/pkgs/draw> #<path:/Applications/Racket v6.0.0.1/share/pkgs/draw-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/draw-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/drracket> #<path:/Applications/Racket v6.0.0.1/share/pkgs/errortrace> #<path:/Applications/Racket v6.0.0.1/share/pkgs/future-visualizer> #<path:/Applications/Racket v6.0.0.1/share/pkgs/future-visualizer-typed> #<path:/Applications/Racket v6.0.0.1/share/pkgs/gui> #<path:/Applications/Racket v6.0.0.1/share/pkgs/htdp> #<path:/Applications/Racket v6.0.0.1/share/pkgs/html> #<path:/Applications/Racket v6.0.0.1/share/pkgs/images> #<path:/Applications/Racket v6.0.0.1/share/pkgs/macro-debugger> #<path:/Applications/Racket v6.0.0.1/share/pkgs/macro-debugger-text-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/math> #<path:/Applications/Racket v6.0.0.1/share/pkgs/mzscheme> #<path:/Applications/Racket v6.0.0.1/share/pkgs/net> #<path:!
 /Applications/Racket v6.0.0.1/share/pkgs/parser-tools> #<path:!
 /Applications/Racket v6.0.0.1/share/pkgs/pconvert-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/pict> #<path:/Applications/Racket v6.0.0.1/share/pkgs/picturing-programs> #<path:/Applications/Racket v6.0.0.1/share/pkgs/planet> #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot> #<path:/Applications/Racket v6.0.0.1/share/pkgs/profile> #<path:/Applications/Racket v6.0.0.1/share/pkgs/r5rs> #<path:/Applications/Racket v6.0.0.1/share/pkgs/r6rs> #<path:/Applications/Racket v6.0.0.1/share/pkgs/racket-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/distributed-places> #<path:/Applications/Racket v6.0.0.1/share/pkgs/racket-index> #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit> #<path:/Applications/Racket v6.0.0.1/share/pkgs/readline> #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex> #<path:/Applications/Racket v6.0.0.1/share/pkgs/sandbox-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/scribble> #<path:/Applications/Racket v6.0.0.1/share/pkgs/serializ!
 e-cstruct-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow> #<path:/Applications/Racket v6.0.0.1/share/pkgs/snip> #<path:/Applications/Racket v6.0.0.1/share/pkgs/srfi> #<path:/Applications/Racket v6.0.0.1/share/pkgs/string-constants> #<path:/Applications/Racket v6.0.0.1/share/pkgs/syntax-color> #<path:/Applications/Racket v6.0.0.1/share/pkgs/typed-racket> #<path:/Applications/Racket v6.0.0.1/share/pkgs/typed-racket-more> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-contract-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-latent-contract-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-list-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-options-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-parameter-group-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-2d> #<path:/Applications/Racket v6.0.0.1/share/pkgs/web-server> #<path!
 :/Applications/Racket v6.0.0.1/share/pkgs/wxme> #<path:/Applications/Ra!
 cket v6.0.0.1/share/pkgs/xrepl> #<path:/Applications/Racket v6.0.0.1/share/pkgs/base> #<path:/Applications/Racket v6.0.0.1/share/pkgs/compatibility-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/drracket-plugin-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/errortrace-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/gui-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/parser-tools-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/string-constants-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/scribble-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/scribble-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/compatibility-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/math-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/compiler-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/data-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/data-doc> #<path:/Applications!
 /Racket v6.0.0.1/share/pkgs/db-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/db-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/scheme-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/srfi-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/wxme-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/gui-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/pict-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/pict-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/draw-x86_64-macosx> #<path:/Applications/Racket v6.0.0.1/share/pkgs/planet-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/snip-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/typed-racket-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/html-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/images-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/net-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/srfi-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/gui-pkg-manage!
 r-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/mzscheme-doc> #<!
 path:/Applications/Racket v6.0.0.1/share/pkgs/net-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/planet-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/string-constants-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/errortrace-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/profile-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/r5rs-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/srfi-lite-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/htdp-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/htdp-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/html-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/images-gui-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/images-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/eli-tester> #<path:/Applications/Racket v6.0.0.1/share/pkgs/cext-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/math-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/mzscheme-lib> #<path:/Applications/!
 Racket v6.0.0.1/share/pkgs/parser-tools-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/web-server-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/web-server-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot-gui-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/r5rs-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/r6rs-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/r6rs-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/typed-racket-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/distributed-places-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/distributed-places-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit-gui> #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit-plugin-li!
 b> #<path:/Applications/Racket v6.0.0.1/share/pkgs/readline-lib> #<path!
 :/Applications/Racket v6.0.0.1/share/pkgs/readline-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-examples> #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-gui-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-exe> #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-plugin> #<path:/Applications/Racket v6.0.0.1/share/pkgs/syntax-color-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/syntax-color-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-flonum-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/xrepl-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/xrepl-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/gui-x86_64-macosx> #<path:/Applications/Racket v6.0.0.1/share/pkgs/scribble-text-lib> #<path:/Applications/Racket v6.0.0.1/share!
 /pkgs/math-x86_64-macosx> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-macro-testing-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-debug-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-pretty-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot-compat> #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-pict-lib>)
raco pkg (show):
Installation-wide:
 Package              Checksum                                    Source
 main-distribution    009c289657b86ab25f320828841fa61a5425a257    (catalog main-distribution)
 racket-lib           15de3807106727eeb46c7df35153b8ab29bd6f1f    (catalog racket-lib)
 [175 auto-installed packages not shown]
User-specific for installation "snapshot":
 Package    Checksum                                    Source
 zeromq     e603d945685aa2bde34243ead5044bfc15dc563f    (catalog zeromq)
 zmq        10b634599296a142711138dab6b620db80f67738    (catalog zmq)
 [1 auto-installed package not shown]



Collections:
("/Users/erichanchrow/Library/Racket/snapshot/collects"
 (non-existent-path))
("/Applications/Racket v6.0.0.1/collects"
 (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "rackunit" "raco" "reader" "realm" "s-exp" "scheme" "setup" "srfi" "syntax" "unstable" "version" "xml"))

Recent Internal Errors: 
Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((main) (test)) #t))
>Description:
I recently tried to use profile, and didn't closely read its documentation.  I naively assumed that it would work similarly to "time" -- namely that I could simply wrap (profile ...) around my code, and my code would continue to run, but would also emit profiling information.  But of course profile returns void, so I had to tediously capture my thunk's value myself, and then arrange to have that value passed "outside" of the profile call.  Anyway ... I'd like the below snippet to print 9 not just once (from the call to "time"), but twice.
>How-To-Repeat:
#lang racket

(require profile)

(displayln (profile (+ 2 3 4)))
(displayln (time (+ 2 3 4)))
>Fix:
>Audit-Trail:
From: Vincent St-Amour <stamourv@ccs.neu.edu>
To: eric.hanchrow@gmail.com, bugs@racket-lang.org
Cc: dev@racket-lang.org, nobody@racket-lang.org,
        bug-notification@racket-lang.org
Subject: Re: [racket-bug] all/14404: "profile" would be more useful if it returned the result(s) of evaluating its body
Date: Thu, 27 Mar 2014 14:42:16 -0400

 [ccing dev]
 
 I agree. That would also make adding profiling less intrusive than it is
 now. Consistency with `time' would also be nice. FWIW, `contract-profile'
 behaves like `time'.
 
 Currently `profile' and `profile-thunk' return whatever the profile
 renderer returns. Most renderers print their report and return void.
 But, as the documentation mentions, `values' can be used as a renderer
 in which case `profile' returns the pre-rendering analyzed profile
 data. Returning the result of the profiled expression would break that
 behavior.
 
 On the other hand, it's already possible to get the analyzed data by
 invoking the sampler and the analyzer directly. Changing the behavior of
 `profile' wouldn't remove that functionality, just make it less
 convenient.
 
 Does anyone rely on that behavior from `profile' and `profile-thunk'?
 If not, I think we should change it.
 
 Vincent
 
 
 
 At Sat, 15 Mar 2014 23:12:11 -0400,
 eric.hanchrow@gmail.com wrote:
 > 
 > A new problem report is waiting at
 >   http://bugs.racket-lang.org/query/?cmd=view&pr=14404
 > 
 > Reported by Eric Hanchrow for release: 6.0.0.1--2013-12-13(1f1550a/a)
 > 
 > *** Description:
 > I recently tried to use profile, and didn't closely read its documentation.  I naively assumed that it would work similarly to "time" -- namely that I could simply wrap (profile ...) around my code, and my code would continue to run, but would also emit profiling information.  But of course profile returns void, so I had to tediously capture my thunk's value myself, and then arrange to have that value passed "outside" of the profile call.  Anyway ... I'd like the below snippet to print 9 not just once (from the call to "time"), but twice.
 > 
 > *** How to repeat:
 > #lang racket
 > 
 > (require profile)
 > 
 > (displayln (profile (+ 2 3 4)))
 > (displayln (time (+ 2 3 4)))
 > 
 > *** Environment:
 > macosx "Darwin Eric-Hanchrows-MacBook-Pro.local 13.1.0 Darwin Kernel Version 13.1.0: Thu Jan 16 19:40:37 PST 2014; root:xnu-2422.90.20~2/RELEASE_X86_64 x86_64" (x86_64-macosx/3m) (get-display-depth) = 32
 > Human Language: english
 > (current-memory-use) 287758760
 > Links: (links) = (); (links #:user? #f) = ("contract-profile" "syntax" "mysterx" "sgl" "datalog" "shell-completion" "algol60" "icons" "ds-store" "slatex" "realm" "games" "make" "trace" "plai" "eopl" "lazy" "preprocessor" "profile" "racklog" "mzcom" "schemeunit" "unstable" "frtime" "mrlib" "swindle"); (links #:root? #t) = (#<path:/Users/erichanchrow/Library/Racket/snapshot/pkgs/throw> #<path:/Users/erichanchrow/Library/Racket/snapshot/pkgs/zeromq> #<path:/Users/erichanchrow/Library/Racket/snapshot/pkgs/zmq>); (links #:user? #f #:root? #t) = (#<path:/Applications/Racket v6.0.0.1/share/pkgs/racket-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/main-distribution> #<path:/Applications/Racket v6.0.0.1/share/pkgs/at-exp-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/compatibility> #<path:/Applications/Racket v6.0.0.1/share/pkgs/compiler> #<path:/Applications/Racket v6.0.0.1/share/pkgs/data> #<path:/Applications/Racket v6.0.0.1/share/pkgs/db> #<path:/Applications/Racket
   !
 >  v6.0.0.1/share/pkgs/deinprogramm> #<path:/Applications/Racket v6.0.0.1/share/pkgs/draw> #<path:/Applications/Racket v6.0.0.1/share/pkgs/draw-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/draw-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/drracket> #<path:/Applications/Racket v6.0.0.1/share/pkgs/errortrace> #<path:/Applications/Racket v6.0.0.1/share/pkgs/future-visualizer> #<path:/Applications/Racket v6.0.0.1/share/pkgs/future-visualizer-typed> #<path:/Applications/Racket v6.0.0.1/share/pkgs/gui> #<path:/Applications/Racket v6.0.0.1/share/pkgs/htdp> #<path:/Applications/Racket v6.0.0.1/share/pkgs/html> #<path:/Applications/Racket v6.0.0.1/share/pkgs/images> #<path:/Applications/Racket v6.0.0.1/share/pkgs/macro-debugger> #<path:/Applications/Racket v6.0.0.1/share/pkgs/macro-debugger-text-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/math> #<path:/Applications/Racket v6.0.0.1/share/pkgs/mzscheme> #<path:/Applications/Racket v6.0.0.1/share/pkgs/net> #<path
  :!
 >  /Applications/Racket v6.0.0.1/share/pkgs/parser-tools> #<path:!
 >  /Applications/Racket v6.0.0.1/share/pkgs/pconvert-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/pict> #<path:/Applications/Racket v6.0.0.1/share/pkgs/picturing-programs> #<path:/Applications/Racket v6.0.0.1/share/pkgs/planet> #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot> #<path:/Applications/Racket v6.0.0.1/share/pkgs/profile> #<path:/Applications/Racket v6.0.0.1/share/pkgs/r5rs> #<path:/Applications/Racket v6.0.0.1/share/pkgs/r6rs> #<path:/Applications/Racket v6.0.0.1/share/pkgs/racket-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/distributed-places> #<path:/Applications/Racket v6.0.0.1/share/pkgs/racket-index> #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit> #<path:/Applications/Racket v6.0.0.1/share/pkgs/readline> #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex> #<path:/Applications/Racket v6.0.0.1/share/pkgs/sandbox-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/scribble> #<path:/Applications/Racket v6.0.0.1/share/pkgs/seriali
  z!
 >  e-cstruct-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow> #<path:/Applications/Racket v6.0.0.1/share/pkgs/snip> #<path:/Applications/Racket v6.0.0.1/share/pkgs/srfi> #<path:/Applications/Racket v6.0.0.1/share/pkgs/string-constants> #<path:/Applications/Racket v6.0.0.1/share/pkgs/syntax-color> #<path:/Applications/Racket v6.0.0.1/share/pkgs/typed-racket> #<path:/Applications/Racket v6.0.0.1/share/pkgs/typed-racket-more> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-contract-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-latent-contract-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-list-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-options-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-parameter-group-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-2d> #<path:/Applications/Racket v6.0.0.1/share/pkgs/web-server> #<pat
  h!
 >  :/Applications/Racket v6.0.0.1/share/pkgs/wxme> #<path:/Applications/Ra!
 >  cket v6.0.0.1/share/pkgs/xrepl> #<path:/Applications/Racket v6.0.0.1/share/pkgs/base> #<path:/Applications/Racket v6.0.0.1/share/pkgs/compatibility-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/drracket-plugin-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/errortrace-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/gui-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/parser-tools-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/string-constants-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/scribble-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/scribble-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/compatibility-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/math-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/compiler-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/data-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/data-doc> #<path:/Application
  s!
 >  /Racket v6.0.0.1/share/pkgs/db-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/db-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/scheme-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/srfi-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/wxme-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/gui-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/pict-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/pict-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/draw-x86_64-macosx> #<path:/Applications/Racket v6.0.0.1/share/pkgs/planet-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/snip-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/typed-racket-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/html-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/images-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/net-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/srfi-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/gui-pkg-manag
  e!
 >  r-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/mzscheme-doc> #<!
 >  path:/Applications/Racket v6.0.0.1/share/pkgs/net-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/planet-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/string-constants-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/errortrace-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/profile-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/r5rs-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/srfi-lite-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/htdp-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/htdp-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/html-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/images-gui-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/images-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/eli-tester> #<path:/Applications/Racket v6.0.0.1/share/pkgs/cext-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/math-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/mzscheme-lib> #<path:/Applications
  /!
 >  Racket v6.0.0.1/share/pkgs/parser-tools-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/web-server-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/web-server-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot-gui-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/r5rs-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/r6rs-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/r6rs-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/typed-racket-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/distributed-places-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/distributed-places-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit-gui> #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit-plugin-l
  i!
 >  b> #<path:/Applications/Racket v6.0.0.1/share/pkgs/readline-lib> #<path!
 >  :/Applications/Racket v6.0.0.1/share/pkgs/readline-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-examples> #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-gui-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-exe> #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-plugin> #<path:/Applications/Racket v6.0.0.1/share/pkgs/syntax-color-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/syntax-color-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-flonum-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/xrepl-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/xrepl-doc> #<path:/Applications/Racket v6.0.0.1/share/pkgs/gui-x86_64-macosx> #<path:/Applications/Racket v6.0.0.1/share/pkgs/scribble-text-lib> #<path:/Applications/Racket v6.0.0.1/shar
  e!
 >  /pkgs/math-x86_64-macosx> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-macro-testing-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-debug-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-pretty-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot-compat> #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-pict-lib>)
 > raco pkg (show):
 > Installation-wide:
 >  Package              Checksum                                    Source
 >  main-distribution    009c289657b86ab25f320828841fa61a5425a257    (catalog main-distribution)
 >  racket-lib           15de3807106727eeb46c7df35153b8ab29bd6f1f    (catalog racket-lib)
 >  [175 auto-installed packages not shown]
 > User-specific for installation "snapshot":
 >  Package    Checksum                                    Source
 >  zeromq     e603d945685aa2bde34243ead5044bfc15dc563f    (catalog zeromq)
 >  zmq        10b634599296a142711138dab6b620db80f67738    (catalog zmq)
 >  [1 auto-installed package not shown]
 > 
 > 
 > 
 > Collections:
 > ("/Users/erichanchrow/Library/Racket/snapshot/collects"
 >  (non-existent-path))
 > ("/Applications/Racket v6.0.0.1/collects"
 >  (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "rackunit" "raco" "reader" "realm" "s-exp" "scheme" "setup" "srfi" "syntax" "unstable" "version" "xml"))
 > 
 > Recent Internal Errors: 
 > Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((main) (test)) #t))
 > 
From: Robby Findler <robby@eecs.northwestern.edu>
To: Vincent St-Amour <stamourv@ccs.neu.edu>
Cc: Eric Hanchrow <eric.hanchrow@gmail.com>, bugs <bugs@racket-lang.org>,
        "dev@racket-lang.org" <dev@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14404: "profile" would be more useful if it
 returned the result(s) of evaluating its body
Date: Thu, 27 Mar 2014 14:20:01 -0500

 --001a11c30a04beb9bb04f59b7881
 Content-Type: text/plain; charset=UTF-8
 
 It seems unlikely that anyone does, but could you look at the code on the
 pkg server to check?
 
 Robby
 
 
 On Thu, Mar 27, 2014 at 1:42 PM, Vincent St-Amour <stamourv@ccs.neu.edu>wrote:
 
 > [ccing dev]
 >
 > I agree. That would also make adding profiling less intrusive than it is
 > now. Consistency with `time' would also be nice. FWIW, `contract-profile'
 > behaves like `time'.
 >
 > Currently `profile' and `profile-thunk' return whatever the profile
 > renderer returns. Most renderers print their report and return void.
 > But, as the documentation mentions, `values' can be used as a renderer
 > in which case `profile' returns the pre-rendering analyzed profile
 > data. Returning the result of the profiled expression would break that
 > behavior.
 >
 > On the other hand, it's already possible to get the analyzed data by
 > invoking the sampler and the analyzer directly. Changing the behavior of
 > `profile' wouldn't remove that functionality, just make it less
 > convenient.
 >
 > Does anyone rely on that behavior from `profile' and `profile-thunk'?
 > If not, I think we should change it.
 >
 > Vincent
 >
 >
 >
 > At Sat, 15 Mar 2014 23:12:11 -0400,
 > eric.hanchrow@gmail.com wrote:
 > >
 > > A new problem report is waiting at
 > >   http://bugs.racket-lang.org/query/?cmd=view&pr=14404
 > >
 > > Reported by Eric Hanchrow for release: 6.0.0.1--2013-12-13(1f1550a/a)
 > >
 > > *** Description:
 > > I recently tried to use profile, and didn't closely read its
 > documentation.  I naively assumed that it would work similarly to "time" --
 > namely that I could simply wrap (profile ...) around my code, and my code
 > would continue to run, but would also emit profiling information.  But of
 > course profile returns void, so I had to tediously capture my thunk's value
 > myself, and then arrange to have that value passed "outside" of the profile
 > call.  Anyway ... I'd like the below snippet to print 9 not just once (from
 > the call to "time"), but twice.
 > >
 > > *** How to repeat:
 > > #lang racket
 > >
 > > (require profile)
 > >
 > > (displayln (profile (+ 2 3 4)))
 > > (displayln (time (+ 2 3 4)))
 > >
 > > *** Environment:
 > > macosx "Darwin Eric-Hanchrows-MacBook-Pro.local 13.1.0 Darwin Kernel
 > Version 13.1.0: Thu Jan 16 19:40:37 PST 2014;
 > root:xnu-2422.90.20~2/RELEASE_X86_64 x86_64" (x86_64-macosx/3m)
 > (get-display-depth) = 32
 > > Human Language: english
 > > (current-memory-use) 287758760
 > > Links: (links) = (); (links #:user? #f) = ("contract-profile" "syntax"
 > "mysterx" "sgl" "datalog" "shell-completion" "algol60" "icons" "ds-store"
 > "slatex" "realm" "games" "make" "trace" "plai" "eopl" "lazy" "preprocessor"
 > "profile" "racklog" "mzcom" "schemeunit" "unstable" "frtime" "mrlib"
 > "swindle"); (links #:root? #t) =
 > (#<path:/Users/erichanchrow/Library/Racket/snapshot/pkgs/throw>
 > #<path:/Users/erichanchrow/Library/Racket/snapshot/pkgs/zeromq>
 > #<path:/Users/erichanchrow/Library/Racket/snapshot/pkgs/zmq>); (links
 > #:user? #f #:root? #t) = (#<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/racket-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/main-distribution> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/at-exp-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/compatibility> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/compiler> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/data> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/db> #<path:/Applications/Racket
 >   !
 > >  v6.0.0.1/share/pkgs/deinprogramm> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/draw> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/draw-doc> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/draw-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/drracket> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/errortrace> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/future-visualizer> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/future-visualizer-typed> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/gui> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/htdp> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/html> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/images> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/macro-debugger> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/macro-debugger-text-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/math> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/mzscheme> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/net> #<path
 >  :!
 > >  /Applications/Racket v6.0.0.1/share/pkgs/parser-tools> #<path:!
 > >  /Applications/Racket v6.0.0.1/share/pkgs/pconvert-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/pict>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/picturing-programs>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/planet>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/profile>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/r5rs>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/r6rs>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/racket-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/distributed-places>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/racket-index>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/readline>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/sandbox-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/scribble>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/seriali
 >  z!
 > >  e-cstruct-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/slideshow> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/snip> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/srfi> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/string-constants> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/syntax-color> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/typed-racket> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/typed-racket-more> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/unstable> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/unstable-contract-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/unstable-latent-contract-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-list-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-options-lib>
 > #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/unstable-parameter-group-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-2d>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/web-server> #<pat
 >  h!
 > >  :/Applications/Racket v6.0.0.1/share/pkgs/wxme> #<path:/Applications/Ra!
 > >  cket v6.0.0.1/share/pkgs/xrepl> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/base> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/compatibility-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/drracket-plugin-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/errortrace-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/gui-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/parser-tools-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/string-constants-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/rackunit-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/scribble-doc> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/scribble-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/compatibility-doc> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/math-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/compiler-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/data-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/data-doc> #<path:/Application
 >  s!
 > >  /Racket v6.0.0.1/share/pkgs/db-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/db-doc> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/scheme-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/srfi-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/wxme-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/gui-doc> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/pict-doc> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/pict-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/draw-x86_64-macosx> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/planet-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/snip-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/typed-racket-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/html-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/images-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/net-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/srfi-doc> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/gui-pkg-manag
 >  e!
 > >  r-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/mzscheme-doc> #<!
 > >  path:/Applications/Racket v6.0.0.1/share/pkgs/net-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/planet-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/string-constants-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/errortrace-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/profile-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/r5rs-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/srfi-lite-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/htdp-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/htdp-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/html-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/images-gui-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/images-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/eli-tester>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/cext-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/math-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/mzscheme-lib>
 > #<path:/Applications
 >  /!
 > >  Racket v6.0.0.1/share/pkgs/parser-tools-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/web-server-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/web-server-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot-gui-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/r5rs-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/r6rs-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/r6rs-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/typed-racket-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/distributed-places-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/distributed-places-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit-gui>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit-plugin-l
 >  i!
 > >  b> #<path:/Applications/Racket v6.0.0.1/share/pkgs/readline-lib> #<path!
 > >  :/Applications/Racket v6.0.0.1/share/pkgs/readline-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-examples>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-gui-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-exe>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-plugin>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/syntax-color-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/syntax-color-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-flonum-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/xrepl-lib>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/xrepl-doc>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/gui-x86_64-macosx>
 > #<path:/Applications/Racket v6.0.0.1/share/pkgs/scribble-text-lib>
 > #<path:/Applications/Racket v6.0.0.1/shar
 >  e!
 > >  /pkgs/math-x86_64-macosx> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/unstable-macro-testing-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/unstable-debug-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/unstable-pretty-lib> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/plot-compat> #<path:/Applications/Racket
 > v6.0.0.1/share/pkgs/redex-pict-lib>)
 > > raco pkg (show):
 > > Installation-wide:
 > >  Package              Checksum                                    Source
 > >  main-distribution    009c289657b86ab25f320828841fa61a5425a257
 >  (catalog main-distribution)
 > >  racket-lib           15de3807106727eeb46c7df35153b8ab29bd6f1f
 >  (catalog racket-lib)
 > >  [175 auto-installed packages not shown]
 > > User-specific for installation "snapshot":
 > >  Package    Checksum                                    Source
 > >  zeromq     e603d945685aa2bde34243ead5044bfc15dc563f    (catalog zeromq)
 > >  zmq        10b634599296a142711138dab6b620db80f67738    (catalog zmq)
 > >  [1 auto-installed package not shown]
 > >
 > >
 > >
 > > Collections:
 > > ("/Users/erichanchrow/Library/Racket/snapshot/collects"
 > >  (non-existent-path))
 > > ("/Applications/Racket v6.0.0.1/collects"
 > >  (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file"
 > "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet"
 > "racket" "rackunit" "raco" "reader" "realm" "s-exp" "scheme" "setup" "srfi"
 > "syntax" "unstable" "version" "xml"))
 > >
 > > Recent Internal Errors:
 > > Computer Language: (("Determine language from source") (#(#t print
 > mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((main)
 > (test)) #t))
 > >
 >
 
 --001a11c30a04beb9bb04f59b7881
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 <div dir=3D"ltr">It seems unlikely that anyone does, but could you look at =
 the code on the pkg server to check?<div><br>Robby</div></div><div class=3D=
 "gmail_extra"><br><br><div class=3D"gmail_quote">On Thu, Mar 27, 2014 at 1:=
 42 PM, Vincent St-Amour <span dir=3D"ltr">&lt;<a href=3D"mailto:stamourv@cc=
 s.neu.edu" target=3D"_blank">stamourv@ccs.neu.edu</a>&gt;</span> wrote:<br>
 <blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
 x #ccc solid;padding-left:1ex">[ccing dev]<br>
 <br>
 I agree. That would also make adding profiling less intrusive than it is<br=
 >
 now. Consistency with `time&#39; would also be nice. FWIW, `contract-profil=
 e&#39;<br>
 behaves like `time&#39;.<br>
 <br>
 Currently `profile&#39; and `profile-thunk&#39; return whatever the profile=
 <br>
 renderer returns. Most renderers print their report and return void.<br>
 But, as the documentation mentions, `values&#39; can be used as a renderer<=
 br>
 in which case `profile&#39; returns the pre-rendering analyzed profile<br>
 data. Returning the result of the profiled expression would break that<br>
 behavior.<br>
 <br>
 On the other hand, it&#39;s already possible to get the analyzed data by<br=
 >
 invoking the sampler and the analyzer directly. Changing the behavior of<br=
 >
 `profile&#39; wouldn&#39;t remove that functionality, just make it less<br>
 convenient.<br>
 <br>
 Does anyone rely on that behavior from `profile&#39; and `profile-thunk&#39=
 ;?<br>
 If not, I think we should change it.<br>
 <br>
 Vincent<br>
 <br>
 <br>
 <br>
 At Sat, 15 Mar 2014 23:12:11 -0400,<br>
 <div class=3D"HOEnZb"><div class=3D"h5"><a href=3D"mailto:eric.hanchrow@gma=
 il.com">eric.hanchrow@gmail.com</a> wrote:<br>
 &gt;<br>
 &gt; A new problem report is waiting at<br>
 &gt; =C2=A0 <a href=3D"http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=
 =3D14404" target=3D"_blank">http://bugs.racket-lang.org/query/?cmd=3Dview&a=
 mp;pr=3D14404</a><br>
 &gt;<br>
 &gt; Reported by Eric Hanchrow for release: 6.0.0.1--2013-12-13(1f1550a/a)<=
 br>
 &gt;<br>
 &gt; *** Description:<br>
 &gt; I recently tried to use profile, and didn&#39;t closely read its docum=
 entation. =C2=A0I naively assumed that it would work similarly to &quot;tim=
 e&quot; -- namely that I could simply wrap (profile ...) around my code, an=
 d my code would continue to run, but would also emit profiling information.=
  =C2=A0But of course profile returns void, so I had to tediously capture my=
  thunk&#39;s value myself, and then arrange to have that value passed &quot=
 ;outside&quot; of the profile call. =C2=A0Anyway ... I&#39;d like the below=
  snippet to print 9 not just once (from the call to &quot;time&quot;), but =
 twice.<br>
 
 &gt;<br>
 &gt; *** How to repeat:<br>
 &gt; #lang racket<br>
 &gt;<br>
 &gt; (require profile)<br>
 &gt;<br>
 &gt; (displayln (profile (+ 2 3 4)))<br>
 &gt; (displayln (time (+ 2 3 4)))<br>
 &gt;<br>
 &gt; *** Environment:<br>
 &gt; macosx &quot;Darwin Eric-Hanchrows-MacBook-Pro.local 13.1.0 Darwin Ker=
 nel Version 13.1.0: Thu Jan 16 19:40:37 PST 2014; root:xnu-2422.90.20~2/REL=
 EASE_X86_64 x86_64&quot; (x86_64-macosx/3m) (get-display-depth) =3D 32<br>
 
 &gt; Human Language: english<br>
 &gt; (current-memory-use) 287758760<br>
 &gt; Links: (links) =3D (); (links #:user? #f) =3D (&quot;contract-profile&=
 quot; &quot;syntax&quot; &quot;mysterx&quot; &quot;sgl&quot; &quot;datalog&=
 quot; &quot;shell-completion&quot; &quot;algol60&quot; &quot;icons&quot; &q=
 uot;ds-store&quot; &quot;slatex&quot; &quot;realm&quot; &quot;games&quot; &=
 quot;make&quot; &quot;trace&quot; &quot;plai&quot; &quot;eopl&quot; &quot;l=
 azy&quot; &quot;preprocessor&quot; &quot;profile&quot; &quot;racklog&quot; =
 &quot;mzcom&quot; &quot;schemeunit&quot; &quot;unstable&quot; &quot;frtime&=
 quot; &quot;mrlib&quot; &quot;swindle&quot;); (links #:root? #t) =3D (#&lt;=
 path:/Users/erichanchrow/Library/Racket/snapshot/pkgs/throw&gt; #&lt;path:/=
 Users/erichanchrow/Library/Racket/snapshot/pkgs/zeromq&gt; #&lt;path:/Users=
 /erichanchrow/Library/Racket/snapshot/pkgs/zmq&gt;); (links #:user? #f #:ro=
 ot? #t) =3D (#&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/racket-lib&=
 gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/main-distribution&gt=
 ; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/at-exp-lib&gt; #&lt;pa=
 th:/Applications/Racket v6.0.0.1/share/pkgs/compatibility&gt; #&lt;path:/Ap=
 plications/Racket v6.0.0.1/share/pkgs/compiler&gt; #&lt;path:/Applications/=
 Racket v6.0.0.1/share/pkgs/data&gt; #&lt;path:/Applications/Racket v6.0.0.1=
 /share/pkgs/db&gt; #&lt;path:/Applications/Racket<br>
 
 =C2=A0 !<br>
 &gt; =C2=A0v6.0.0.1/share/pkgs/deinprogramm&gt; #&lt;path:/Applications/Rac=
 ket v6.0.0.1/share/pkgs/draw&gt; #&lt;path:/Applications/Racket v6.0.0.1/sh=
 are/pkgs/draw-doc&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/dr=
 aw-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/drracket&gt; =
 #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/errortrace&gt; #&lt;path=
 :/Applications/Racket v6.0.0.1/share/pkgs/future-visualizer&gt; #&lt;path:/=
 Applications/Racket v6.0.0.1/share/pkgs/future-visualizer-typed&gt; #&lt;pa=
 th:/Applications/Racket v6.0.0.1/share/pkgs/gui&gt; #&lt;path:/Applications=
 /Racket v6.0.0.1/share/pkgs/htdp&gt; #&lt;path:/Applications/Racket v6.0.0.=
 1/share/pkgs/html&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/im=
 ages&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/macro-debugger&=
 gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/macro-debugger-text-=
 lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/math&gt; #&lt;pa=
 th:/Applications/Racket v6.0.0.1/share/pkgs/mzscheme&gt; #&lt;path:/Applica=
 tions/Racket v6.0.0.1/share/pkgs/net&gt; #&lt;path<br>
 
 =C2=A0:!<br>
 &gt; =C2=A0/Applications/Racket v6.0.0.1/share/pkgs/parser-tools&gt; #&lt;p=
 ath:!<br>
 &gt; =C2=A0/Applications/Racket v6.0.0.1/share/pkgs/pconvert-lib&gt; #&lt;p=
 ath:/Applications/Racket v6.0.0.1/share/pkgs/pict&gt; #&lt;path:/Applicatio=
 ns/Racket v6.0.0.1/share/pkgs/picturing-programs&gt; #&lt;path:/Application=
 s/Racket v6.0.0.1/share/pkgs/planet&gt; #&lt;path:/Applications/Racket v6.0=
 .0.1/share/pkgs/plot&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs=
 /profile&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/r5rs&gt; #&=
 lt;path:/Applications/Racket v6.0.0.1/share/pkgs/r6rs&gt; #&lt;path:/Applic=
 ations/Racket v6.0.0.1/share/pkgs/racket-doc&gt; #&lt;path:/Applications/Ra=
 cket v6.0.0.1/share/pkgs/distributed-places&gt; #&lt;path:/Applications/Rac=
 ket v6.0.0.1/share/pkgs/racket-index&gt; #&lt;path:/Applications/Racket v6.=
 0.0.1/share/pkgs/rackunit&gt; #&lt;path:/Applications/Racket v6.0.0.1/share=
 /pkgs/readline&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/redex=
 &gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/sandbox-lib&gt; #&l=
 t;path:/Applications/Racket v6.0.0.1/share/pkgs/scribble&gt; #&lt;path:/App=
 lications/Racket v6.0.0.1/share/pkgs/seriali<br>
 
 =C2=A0z!<br>
 &gt; =C2=A0e-cstruct-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/=
 pkgs/slideshow&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/snip&=
 gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/srfi&gt; #&lt;path:/=
 Applications/Racket v6.0.0.1/share/pkgs/string-constants&gt; #&lt;path:/App=
 lications/Racket v6.0.0.1/share/pkgs/syntax-color&gt; #&lt;path:/Applicatio=
 ns/Racket v6.0.0.1/share/pkgs/typed-racket&gt; #&lt;path:/Applications/Rack=
 et v6.0.0.1/share/pkgs/typed-racket-more&gt; #&lt;path:/Applications/Racket=
  v6.0.0.1/share/pkgs/unstable&gt; #&lt;path:/Applications/Racket v6.0.0.1/s=
 hare/pkgs/unstable-contract-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1=
 /share/pkgs/unstable-latent-contract-lib&gt; #&lt;path:/Applications/Racket=
  v6.0.0.1/share/pkgs/unstable-list-lib&gt; #&lt;path:/Applications/Racket v=
 6.0.0.1/share/pkgs/unstable-options-lib&gt; #&lt;path:/Applications/Racket =
 v6.0.0.1/share/pkgs/unstable-parameter-group-lib&gt; #&lt;path:/Application=
 s/Racket v6.0.0.1/share/pkgs/unstable-2d&gt; #&lt;path:/Applications/Racket=
  v6.0.0.1/share/pkgs/web-server&gt; #&lt;pat<br>
 
 =C2=A0h!<br>
 &gt; =C2=A0:/Applications/Racket v6.0.0.1/share/pkgs/wxme&gt; #&lt;path:/Ap=
 plications/Ra!<br>
 &gt; =C2=A0cket v6.0.0.1/share/pkgs/xrepl&gt; #&lt;path:/Applications/Racke=
 t v6.0.0.1/share/pkgs/base&gt; #&lt;path:/Applications/Racket v6.0.0.1/shar=
 e/pkgs/compatibility-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/=
 pkgs/drracket-plugin-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/=
 pkgs/errortrace-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/=
 gui-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/parser-tools=
 -lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/string-constant=
 s-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit-lib&g=
 t; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/scribble-doc&gt; #&lt=
 ;path:/Applications/Racket v6.0.0.1/share/pkgs/scribble-lib&gt; #&lt;path:/=
 Applications/Racket v6.0.0.1/share/pkgs/compatibility-doc&gt; #&lt;path:/Ap=
 plications/Racket v6.0.0.1/share/pkgs/math-lib&gt; #&lt;path:/Applications/=
 Racket v6.0.0.1/share/pkgs/compiler-lib&gt; #&lt;path:/Applications/Racket =
 v6.0.0.1/share/pkgs/data-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/sh=
 are/pkgs/data-doc&gt; #&lt;path:/Application<br>
 
 =C2=A0s!<br>
 &gt; =C2=A0/Racket v6.0.0.1/share/pkgs/db-lib&gt; #&lt;path:/Applications/R=
 acket v6.0.0.1/share/pkgs/db-doc&gt; #&lt;path:/Applications/Racket v6.0.0.=
 1/share/pkgs/scheme-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/p=
 kgs/srfi-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/wxme-li=
 b&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/gui-doc&gt; #&lt;p=
 ath:/Applications/Racket v6.0.0.1/share/pkgs/pict-doc&gt; #&lt;path:/Applic=
 ations/Racket v6.0.0.1/share/pkgs/pict-lib&gt; #&lt;path:/Applications/Rack=
 et v6.0.0.1/share/pkgs/draw-x86_64-macosx&gt; #&lt;path:/Applications/Racke=
 t v6.0.0.1/share/pkgs/planet-lib&gt; #&lt;path:/Applications/Racket v6.0.0.=
 1/share/pkgs/snip-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkg=
 s/typed-racket-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/h=
 tml-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/images-lib&g=
 t; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/net-lib&gt; #&lt;path=
 :/Applications/Racket v6.0.0.1/share/pkgs/srfi-doc&gt; #&lt;path:/Applicati=
 ons/Racket v6.0.0.1/share/pkgs/gui-pkg-manag<br>
 
 =C2=A0e!<br>
 &gt; =C2=A0r-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/mzs=
 cheme-doc&gt; #&lt;!<br>
 &gt; =C2=A0path:/Applications/Racket v6.0.0.1/share/pkgs/net-doc&gt; #&lt;p=
 ath:/Applications/Racket v6.0.0.1/share/pkgs/planet-doc&gt; #&lt;path:/Appl=
 ications/Racket v6.0.0.1/share/pkgs/string-constants-doc&gt; #&lt;path:/App=
 lications/Racket v6.0.0.1/share/pkgs/errortrace-doc&gt; #&lt;path:/Applicat=
 ions/Racket v6.0.0.1/share/pkgs/profile-doc&gt; #&lt;path:/Applications/Rac=
 ket v6.0.0.1/share/pkgs/r5rs-doc&gt; #&lt;path:/Applications/Racket v6.0.0.=
 1/share/pkgs/srfi-lite-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/shar=
 e/pkgs/htdp-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/htdp=
 -doc&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/html-doc&gt; #&=
 lt;path:/Applications/Racket v6.0.0.1/share/pkgs/images-gui-lib&gt; #&lt;pa=
 th:/Applications/Racket v6.0.0.1/share/pkgs/images-doc&gt; #&lt;path:/Appli=
 cations/Racket v6.0.0.1/share/pkgs/eli-tester&gt; #&lt;path:/Applications/R=
 acket v6.0.0.1/share/pkgs/cext-lib&gt; #&lt;path:/Applications/Racket v6.0.=
 0.1/share/pkgs/math-doc&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/p=
 kgs/mzscheme-lib&gt; #&lt;path:/Applications<br>
 
 =C2=A0/!<br>
 &gt; =C2=A0Racket v6.0.0.1/share/pkgs/parser-tools-doc&gt; #&lt;path:/Appli=
 cations/Racket v6.0.0.1/share/pkgs/web-server-lib&gt; #&lt;path:/Applicatio=
 ns/Racket v6.0.0.1/share/pkgs/web-server-doc&gt; #&lt;path:/Applications/Ra=
 cket v6.0.0.1/share/pkgs/plot-lib&gt; #&lt;path:/Applications/Racket v6.0.0=
 .1/share/pkgs/plot-gui-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/shar=
 e/pkgs/plot-doc&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/r5rs=
 -lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/r6rs-lib&gt; #&=
 lt;path:/Applications/Racket v6.0.0.1/share/pkgs/r6rs-doc&gt; #&lt;path:/Ap=
 plications/Racket v6.0.0.1/share/pkgs/rackunit-doc&gt; #&lt;path:/Applicati=
 ons/Racket v6.0.0.1/share/pkgs/typed-racket-doc&gt; #&lt;path:/Applications=
 /Racket v6.0.0.1/share/pkgs/slideshow-doc&gt; #&lt;path:/Applications/Racke=
 t v6.0.0.1/share/pkgs/distributed-places-lib&gt; #&lt;path:/Applications/Ra=
 cket v6.0.0.1/share/pkgs/distributed-places-doc&gt; #&lt;path:/Applications=
 /Racket v6.0.0.1/share/pkgs/rackunit-gui&gt; #&lt;path:/Applications/Racket=
  v6.0.0.1/share/pkgs/rackunit-plugin-l<br>
 
 =C2=A0i!<br>
 &gt; =C2=A0b&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/readlin=
 e-lib&gt; #&lt;path!<br>
 &gt; =C2=A0:/Applications/Racket v6.0.0.1/share/pkgs/readline-doc&gt; #&lt;=
 path:/Applications/Racket v6.0.0.1/share/pkgs/redex-doc&gt; #&lt;path:/Appl=
 ications/Racket v6.0.0.1/share/pkgs/redex-examples&gt; #&lt;path:/Applicati=
 ons/Racket v6.0.0.1/share/pkgs/redex-lib&gt; #&lt;path:/Applications/Racket=
  v6.0.0.1/share/pkgs/redex-gui-lib&gt; #&lt;path:/Applications/Racket v6.0.=
 0.1/share/pkgs/slideshow-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/sh=
 are/pkgs/slideshow-exe&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pk=
 gs/slideshow-plugin&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/=
 syntax-color-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/syn=
 tax-color-doc&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/unstab=
 le-flonum-lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/xrepl-=
 lib&gt; #&lt;path:/Applications/Racket v6.0.0.1/share/pkgs/xrepl-doc&gt; #&=
 lt;path:/Applications/Racket v6.0.0.1/share/pkgs/gui-x86_64-macosx&gt; #&lt=
 ;path:/Applications/Racket v6.0.0.1/share/pkgs/scribble-text-lib&gt; #&lt;p=
 ath:/Applications/Racket v6.0.0.1/shar<br>
 
 =C2=A0e!<br>
 &gt; =C2=A0/pkgs/math-x86_64-macosx&gt; #&lt;path:/Applications/Racket v6.0=
 .0.1/share/pkgs/unstable-macro-testing-lib&gt; #&lt;path:/Applications/Rack=
 et v6.0.0.1/share/pkgs/unstable-debug-lib&gt; #&lt;path:/Applications/Racke=
 t v6.0.0.1/share/pkgs/unstable-pretty-lib&gt; #&lt;path:/Applications/Racke=
 t v6.0.0.1/share/pkgs/plot-compat&gt; #&lt;path:/Applications/Racket v6.0.0=
 .1/share/pkgs/redex-pict-lib&gt;)<br>
 
 &gt; raco pkg (show):<br>
 &gt; Installation-wide:<br>
 &gt; =C2=A0Package =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Checksum=
  =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
 =A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Source<br>
 &gt; =C2=A0main-distribution =C2=A0 =C2=A0009c289657b86ab25f320828841fa61a5=
 425a257 =C2=A0 =C2=A0(catalog main-distribution)<br>
 &gt; =C2=A0racket-lib =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 15de3807106727eeb4=
 6c7df35153b8ab29bd6f1f =C2=A0 =C2=A0(catalog racket-lib)<br>
 &gt; =C2=A0[175 auto-installed packages not shown]<br>
 &gt; User-specific for installation &quot;snapshot&quot;:<br>
 &gt; =C2=A0Package =C2=A0 =C2=A0Checksum =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
  =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
 =A0 =C2=A0 =C2=A0Source<br>
 &gt; =C2=A0zeromq =C2=A0 =C2=A0 e603d945685aa2bde34243ead5044bfc15dc563f =
 =C2=A0 =C2=A0(catalog zeromq)<br>
 &gt; =C2=A0zmq =C2=A0 =C2=A0 =C2=A0 =C2=A010b634599296a142711138dab6b620db8=
 0f67738 =C2=A0 =C2=A0(catalog zmq)<br>
 &gt; =C2=A0[1 auto-installed package not shown]<br>
 &gt;<br>
 &gt;<br>
 &gt;<br>
 &gt; Collections:<br>
 &gt; (&quot;/Users/erichanchrow/Library/Racket/snapshot/collects&quot;<br>
 &gt; =C2=A0(non-existent-path))<br>
 &gt; (&quot;/Applications/Racket v6.0.0.1/collects&quot;<br>
 &gt; =C2=A0(&quot;.gitignore&quot; &quot;acks&quot; &quot;compiler&quot; &q=
 uot;data&quot; &quot;db&quot; &quot;dynext&quot; &quot;ffi&quot; &quot;file=
 &quot; &quot;info&quot; &quot;info-domain&quot; &quot;json&quot; &quot;laun=
 cher&quot; &quot;net&quot; &quot;openssl&quot; &quot;pkg&quot; &quot;planet=
 &quot; &quot;racket&quot; &quot;rackunit&quot; &quot;raco&quot; &quot;reade=
 r&quot; &quot;realm&quot; &quot;s-exp&quot; &quot;scheme&quot; &quot;setup&=
 quot; &quot;srfi&quot; &quot;syntax&quot; &quot;unstable&quot; &quot;versio=
 n&quot; &quot;xml&quot;))<br>
 
 &gt;<br>
 &gt; Recent Internal Errors:<br>
 &gt; Computer Language: ((&quot;Determine language from source&quot;) (#(#t=
  print mixed-fraction-e #f #t debug) (default) #() &quot;#lang racket\n&quo=
 t; #t #t ((main) (test)) #t))<br>
 &gt;<br>
 </div></div></blockquote></div><br></div>
 
 --001a11c30a04beb9bb04f59b7881--
From: Vincent St-Amour <stamourv@ccs.neu.edu>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: Vincent St-Amour <stamourv@ccs.neu.edu>,
        Eric Hanchrow <eric.hanchrow@gmail.com>, bugs <bugs@racket-lang.org>,
        "dev@racket-lang.org" <dev@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14404: "profile" would be more useful if it returned the result(s) of evaluating its body
Date: Thu, 27 Mar 2014 15:33:48 -0400

 Will do.
 
 Is there a convenient way to grep through packages without installing them?
 
 Vincent
 
 
 At Thu, 27 Mar 2014 14:20:01 -0500,
 Robby Findler wrote:
 > 
 > [1  <text/plain; UTF-8 (7bit)>]
 > It seems unlikely that anyone does, but could you look at the code on the
 > pkg server to check?
 > 
 > Robby
 > 
 > 
 > On Thu, Mar 27, 2014 at 1:42 PM, Vincent St-Amour <stamourv@ccs.neu.edu>wrote:
 > 
 > > [ccing dev]
 > >
 > > I agree. That would also make adding profiling less intrusive than it is
 > > now. Consistency with `time' would also be nice. FWIW, `contract-profile'
 > > behaves like `time'.
 > >
 > > Currently `profile' and `profile-thunk' return whatever the profile
 > > renderer returns. Most renderers print their report and return void.
 > > But, as the documentation mentions, `values' can be used as a renderer
 > > in which case `profile' returns the pre-rendering analyzed profile
 > > data. Returning the result of the profiled expression would break that
 > > behavior.
 > >
 > > On the other hand, it's already possible to get the analyzed data by
 > > invoking the sampler and the analyzer directly. Changing the behavior of
 > > `profile' wouldn't remove that functionality, just make it less
 > > convenient.
 > >
 > > Does anyone rely on that behavior from `profile' and `profile-thunk'?
 > > If not, I think we should change it.
 > >
 > > Vincent
 > >
 > >
 > >
 > > At Sat, 15 Mar 2014 23:12:11 -0400,
 > > eric.hanchrow@gmail.com wrote:
 > > >
 > > > A new problem report is waiting at
 > > >   http://bugs.racket-lang.org/query/?cmd=view&pr=14404
 > > >
 > > > Reported by Eric Hanchrow for release: 6.0.0.1--2013-12-13(1f1550a/a)
 > > >
 > > > *** Description:
 > > > I recently tried to use profile, and didn't closely read its
 > > documentation.  I naively assumed that it would work similarly to "time" --
 > > namely that I could simply wrap (profile ...) around my code, and my code
 > > would continue to run, but would also emit profiling information.  But of
 > > course profile returns void, so I had to tediously capture my thunk's value
 > > myself, and then arrange to have that value passed "outside" of the profile
 > > call.  Anyway ... I'd like the below snippet to print 9 not just once (from
 > > the call to "time"), but twice.
 > > >
 > > > *** How to repeat:
 > > > #lang racket
 > > >
 > > > (require profile)
 > > >
 > > > (displayln (profile (+ 2 3 4)))
 > > > (displayln (time (+ 2 3 4)))
 > > >
 > > > *** Environment:
 > > > macosx "Darwin Eric-Hanchrows-MacBook-Pro.local 13.1.0 Darwin Kernel
 > > Version 13.1.0: Thu Jan 16 19:40:37 PST 2014;
 > > root:xnu-2422.90.20~2/RELEASE_X86_64 x86_64" (x86_64-macosx/3m)
 > > (get-display-depth) = 32
 > > > Human Language: english
 > > > (current-memory-use) 287758760
 > > > Links: (links) = (); (links #:user? #f) = ("contract-profile" "syntax"
 > > "mysterx" "sgl" "datalog" "shell-completion" "algol60" "icons" "ds-store"
 > > "slatex" "realm" "games" "make" "trace" "plai" "eopl" "lazy" "preprocessor"
 > > "profile" "racklog" "mzcom" "schemeunit" "unstable" "frtime" "mrlib"
 > > "swindle"); (links #:root? #t) =
 > > (#<path:/Users/erichanchrow/Library/Racket/snapshot/pkgs/throw>
 > > #<path:/Users/erichanchrow/Library/Racket/snapshot/pkgs/zeromq>
 > > #<path:/Users/erichanchrow/Library/Racket/snapshot/pkgs/zmq>); (links
 > > #:user? #f #:root? #t) = (#<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/racket-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/main-distribution> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/at-exp-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/compatibility> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/compiler> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/data> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/db> #<path:/Applications/Racket
 > >   !
 > > >  v6.0.0.1/share/pkgs/deinprogramm> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/draw> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/draw-doc> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/draw-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/drracket> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/errortrace> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/future-visualizer> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/future-visualizer-typed> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/gui> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/htdp> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/html> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/images> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/macro-debugger> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/macro-debugger-text-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/math> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/mzscheme> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/net> #<path
 > >  :!
 > > >  /Applications/Racket v6.0.0.1/share/pkgs/parser-tools> #<path:!
 > > >  /Applications/Racket v6.0.0.1/share/pkgs/pconvert-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/pict>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/picturing-programs>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/planet>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/profile>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/r5rs>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/r6rs>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/racket-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/distributed-places>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/racket-index>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/readline>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/sandbox-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/scribble>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/seriali
 > >  z!
 > > >  e-cstruct-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/slideshow> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/snip> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/srfi> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/string-constants> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/syntax-color> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/typed-racket> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/typed-racket-more> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/unstable> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/unstable-contract-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/unstable-latent-contract-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-list-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-options-lib>
 > > #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/unstable-parameter-group-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-2d>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/web-server> #<pat
 > >  h!
 > > >  :/Applications/Racket v6.0.0.1/share/pkgs/wxme> #<path:/Applications/Ra!
 > > >  cket v6.0.0.1/share/pkgs/xrepl> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/base> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/compatibility-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/drracket-plugin-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/errortrace-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/gui-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/parser-tools-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/string-constants-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/rackunit-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/scribble-doc> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/scribble-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/compatibility-doc> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/math-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/compiler-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/data-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/data-doc> #<path:/Application
 > >  s!
 > > >  /Racket v6.0.0.1/share/pkgs/db-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/db-doc> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/scheme-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/srfi-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/wxme-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/gui-doc> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/pict-doc> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/pict-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/draw-x86_64-macosx> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/planet-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/snip-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/typed-racket-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/html-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/images-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/net-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/srfi-doc> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/gui-pkg-manag
 > >  e!
 > > >  r-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/mzscheme-doc> #<!
 > > >  path:/Applications/Racket v6.0.0.1/share/pkgs/net-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/planet-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/string-constants-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/errortrace-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/profile-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/r5rs-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/srfi-lite-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/htdp-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/htdp-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/html-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/images-gui-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/images-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/eli-tester>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/cext-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/math-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/mzscheme-lib>
 > > #<path:/Applications
 > >  /!
 > > >  Racket v6.0.0.1/share/pkgs/parser-tools-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/web-server-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/web-server-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot-gui-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/r5rs-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/r6rs-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/r6rs-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/typed-racket-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/distributed-places-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/distributed-places-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit-gui>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit-plugin-l
 > >  i!
 > > >  b> #<path:/Applications/Racket v6.0.0.1/share/pkgs/readline-lib> #<path!
 > > >  :/Applications/Racket v6.0.0.1/share/pkgs/readline-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-examples>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-gui-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-exe>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-plugin>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/syntax-color-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/syntax-color-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-flonum-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/xrepl-lib>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/xrepl-doc>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/gui-x86_64-macosx>
 > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/scribble-text-lib>
 > > #<path:/Applications/Racket v6.0.0.1/shar
 > >  e!
 > > >  /pkgs/math-x86_64-macosx> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/unstable-macro-testing-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/unstable-debug-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/unstable-pretty-lib> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/plot-compat> #<path:/Applications/Racket
 > > v6.0.0.1/share/pkgs/redex-pict-lib>)
 > > > raco pkg (show):
 > > > Installation-wide:
 > > >  Package              Checksum                                    Source
 > > >  main-distribution    009c289657b86ab25f320828841fa61a5425a257
 > >  (catalog main-distribution)
 > > >  racket-lib           15de3807106727eeb46c7df35153b8ab29bd6f1f
 > >  (catalog racket-lib)
 > > >  [175 auto-installed packages not shown]
 > > > User-specific for installation "snapshot":
 > > >  Package    Checksum                                    Source
 > > >  zeromq     e603d945685aa2bde34243ead5044bfc15dc563f    (catalog zeromq)
 > > >  zmq        10b634599296a142711138dab6b620db80f67738    (catalog zmq)
 > > >  [1 auto-installed package not shown]
 > > >
 > > >
 > > >
 > > > Collections:
 > > > ("/Users/erichanchrow/Library/Racket/snapshot/collects"
 > > >  (non-existent-path))
 > > > ("/Applications/Racket v6.0.0.1/collects"
 > > >  (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file"
 > > "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet"
 > > "racket" "rackunit" "raco" "reader" "realm" "s-exp" "scheme" "setup" "srfi"
 > > "syntax" "unstable" "version" "xml"))
 > > >
 > > > Recent Internal Errors:
 > > > Computer Language: (("Determine language from source") (#(#t print
 > > mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((main)
 > > (test)) #t))
 > > >
 > >
 > [2  <text/html; UTF-8 (quoted-printable)>]
 > 
From: Vincent St-Amour <stamourv@ccs.neu.edu>
To: Vincent St-Amour <stamourv@ccs.neu.edu>
Cc: Robby Findler <robby@eecs.northwestern.edu>,
        Eric Hanchrow <eric.hanchrow@gmail.com>, bugs <bugs@racket-lang.org>,
        "dev@racket-lang.org" <dev@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14404: "profile" would be more useful if it returned the result(s) of evaluating its body
Date: Thu, 27 Mar 2014 16:02:33 -0400

 I looked through the package descriptions, and it doesn't look like any
 of them would use the profiler.
 
 I'll do the change.
 
 Vincent
 
 
 
 At Thu, 27 Mar 2014 15:33:48 -0400,
 Vincent St-Amour wrote:
 > 
 > Will do.
 > 
 > Is there a convenient way to grep through packages without installing them?
 > 
 > Vincent
 > 
 > 
 > At Thu, 27 Mar 2014 14:20:01 -0500,
 > Robby Findler wrote:
 > > 
 > > [1  <text/plain; UTF-8 (7bit)>]
 > > It seems unlikely that anyone does, but could you look at the code on the
 > > pkg server to check?
 > > 
 > > Robby
 > > 
 > > 
 > > On Thu, Mar 27, 2014 at 1:42 PM, Vincent St-Amour <stamourv@ccs.neu.edu>wrote:
 > > 
 > > > [ccing dev]
 > > >
 > > > I agree. That would also make adding profiling less intrusive than it is
 > > > now. Consistency with `time' would also be nice. FWIW, `contract-profile'
 > > > behaves like `time'.
 > > >
 > > > Currently `profile' and `profile-thunk' return whatever the profile
 > > > renderer returns. Most renderers print their report and return void.
 > > > But, as the documentation mentions, `values' can be used as a renderer
 > > > in which case `profile' returns the pre-rendering analyzed profile
 > > > data. Returning the result of the profiled expression would break that
 > > > behavior.
 > > >
 > > > On the other hand, it's already possible to get the analyzed data by
 > > > invoking the sampler and the analyzer directly. Changing the behavior of
 > > > `profile' wouldn't remove that functionality, just make it less
 > > > convenient.
 > > >
 > > > Does anyone rely on that behavior from `profile' and `profile-thunk'?
 > > > If not, I think we should change it.
 > > >
 > > > Vincent
 > > >
 > > >
 > > >
 > > > At Sat, 15 Mar 2014 23:12:11 -0400,
 > > > eric.hanchrow@gmail.com wrote:
 > > > >
 > > > > A new problem report is waiting at
 > > > >   http://bugs.racket-lang.org/query/?cmd=view&pr=14404
 > > > >
 > > > > Reported by Eric Hanchrow for release: 6.0.0.1--2013-12-13(1f1550a/a)
 > > > >
 > > > > *** Description:
 > > > > I recently tried to use profile, and didn't closely read its
 > > > documentation.  I naively assumed that it would work similarly to "time" --
 > > > namely that I could simply wrap (profile ...) around my code, and my code
 > > > would continue to run, but would also emit profiling information.  But of
 > > > course profile returns void, so I had to tediously capture my thunk's value
 > > > myself, and then arrange to have that value passed "outside" of the profile
 > > > call.  Anyway ... I'd like the below snippet to print 9 not just once (from
 > > > the call to "time"), but twice.
 > > > >
 > > > > *** How to repeat:
 > > > > #lang racket
 > > > >
 > > > > (require profile)
 > > > >
 > > > > (displayln (profile (+ 2 3 4)))
 > > > > (displayln (time (+ 2 3 4)))
 > > > >
 > > > > *** Environment:
 > > > > macosx "Darwin Eric-Hanchrows-MacBook-Pro.local 13.1.0 Darwin Kernel
 > > > Version 13.1.0: Thu Jan 16 19:40:37 PST 2014;
 > > > root:xnu-2422.90.20~2/RELEASE_X86_64 x86_64" (x86_64-macosx/3m)
 > > > (get-display-depth) = 32
 > > > > Human Language: english
 > > > > (current-memory-use) 287758760
 > > > > Links: (links) = (); (links #:user? #f) = ("contract-profile" "syntax"
 > > > "mysterx" "sgl" "datalog" "shell-completion" "algol60" "icons" "ds-store"
 > > > "slatex" "realm" "games" "make" "trace" "plai" "eopl" "lazy" "preprocessor"
 > > > "profile" "racklog" "mzcom" "schemeunit" "unstable" "frtime" "mrlib"
 > > > "swindle"); (links #:root? #t) =
 > > > (#<path:/Users/erichanchrow/Library/Racket/snapshot/pkgs/throw>
 > > > #<path:/Users/erichanchrow/Library/Racket/snapshot/pkgs/zeromq>
 > > > #<path:/Users/erichanchrow/Library/Racket/snapshot/pkgs/zmq>); (links
 > > > #:user? #f #:root? #t) = (#<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/racket-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/main-distribution> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/at-exp-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/compatibility> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/compiler> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/data> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/db> #<path:/Applications/Racket
 > > >   !
 > > > >  v6.0.0.1/share/pkgs/deinprogramm> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/draw> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/draw-doc> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/draw-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/drracket> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/errortrace> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/future-visualizer> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/future-visualizer-typed> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/gui> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/htdp> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/html> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/images> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/macro-debugger> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/macro-debugger-text-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/math> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/mzscheme> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/net> #<path
 > > >  :!
 > > > >  /Applications/Racket v6.0.0.1/share/pkgs/parser-tools> #<path:!
 > > > >  /Applications/Racket v6.0.0.1/share/pkgs/pconvert-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/pict>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/picturing-programs>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/planet>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/profile>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/r5rs>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/r6rs>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/racket-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/distributed-places>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/racket-index>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/readline>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/sandbox-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/scribble>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/seriali
 > > >  z!
 > > > >  e-cstruct-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/slideshow> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/snip> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/srfi> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/string-constants> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/syntax-color> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/typed-racket> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/typed-racket-more> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/unstable> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/unstable-contract-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/unstable-latent-contract-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-list-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-options-lib>
 > > > #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/unstable-parameter-group-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-2d>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/web-server> #<pat
 > > >  h!
 > > > >  :/Applications/Racket v6.0.0.1/share/pkgs/wxme> #<path:/Applications/Ra!
 > > > >  cket v6.0.0.1/share/pkgs/xrepl> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/base> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/compatibility-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/drracket-plugin-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/errortrace-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/gui-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/parser-tools-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/string-constants-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/rackunit-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/scribble-doc> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/scribble-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/compatibility-doc> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/math-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/compiler-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/data-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/data-doc> #<path:/Application
 > > >  s!
 > > > >  /Racket v6.0.0.1/share/pkgs/db-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/db-doc> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/scheme-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/srfi-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/wxme-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/gui-doc> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/pict-doc> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/pict-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/draw-x86_64-macosx> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/planet-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/snip-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/typed-racket-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/html-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/images-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/net-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/srfi-doc> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/gui-pkg-manag
 > > >  e!
 > > > >  r-lib> #<path:/Applications/Racket v6.0.0.1/share/pkgs/mzscheme-doc> #<!
 > > > >  path:/Applications/Racket v6.0.0.1/share/pkgs/net-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/planet-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/string-constants-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/errortrace-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/profile-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/r5rs-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/srfi-lite-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/htdp-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/htdp-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/html-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/images-gui-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/images-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/eli-tester>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/cext-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/math-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/mzscheme-lib>
 > > > #<path:/Applications
 > > >  /!
 > > > >  Racket v6.0.0.1/share/pkgs/parser-tools-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/web-server-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/web-server-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot-gui-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/plot-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/r5rs-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/r6rs-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/r6rs-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/typed-racket-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/distributed-places-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/distributed-places-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit-gui>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/rackunit-plugin-l
 > > >  i!
 > > > >  b> #<path:/Applications/Racket v6.0.0.1/share/pkgs/readline-lib> #<path!
 > > > >  :/Applications/Racket v6.0.0.1/share/pkgs/readline-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-examples>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/redex-gui-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-exe>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/slideshow-plugin>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/syntax-color-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/syntax-color-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/unstable-flonum-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/xrepl-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/xrepl-doc>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/gui-x86_64-macosx>
 > > > #<path:/Applications/Racket v6.0.0.1/share/pkgs/scribble-text-lib>
 > > > #<path:/Applications/Racket v6.0.0.1/shar
 > > >  e!
 > > > >  /pkgs/math-x86_64-macosx> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/unstable-macro-testing-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/unstable-debug-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/unstable-pretty-lib> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/plot-compat> #<path:/Applications/Racket
 > > > v6.0.0.1/share/pkgs/redex-pict-lib>)
 > > > > raco pkg (show):
 > > > > Installation-wide:
 > > > >  Package              Checksum                                    Source
 > > > >  main-distribution    009c289657b86ab25f320828841fa61a5425a257
 > > >  (catalog main-distribution)
 > > > >  racket-lib           15de3807106727eeb46c7df35153b8ab29bd6f1f
 > > >  (catalog racket-lib)
 > > > >  [175 auto-installed packages not shown]
 > > > > User-specific for installation "snapshot":
 > > > >  Package    Checksum                                    Source
 > > > >  zeromq     e603d945685aa2bde34243ead5044bfc15dc563f    (catalog zeromq)
 > > > >  zmq        10b634599296a142711138dab6b620db80f67738    (catalog zmq)
 > > > >  [1 auto-installed package not shown]
 > > > >
 > > > >
 > > > >
 > > > > Collections:
 > > > > ("/Users/erichanchrow/Library/Racket/snapshot/collects"
 > > > >  (non-existent-path))
 > > > > ("/Applications/Racket v6.0.0.1/collects"
 > > > >  (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file"
 > > > "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet"
 > > > "racket" "rackunit" "raco" "reader" "realm" "s-exp" "scheme" "setup" "srfi"
 > > > "syntax" "unstable" "version" "xml"))
 > > > >
 > > > > Recent Internal Errors:
 > > > > Computer Language: (("Determine language from source") (#(#t print
 > > > mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t #t ((main)
 > > > (test)) #t))
 > > > >
 > > >
 > > [2  <text/html; UTF-8 (quoted-printable)>]
 > > 
Responsible changed from "nobody" to "stamourv" by stamourv@racket-lang.org at Thu, 27 Mar 2014 16:28:17 -0400
Reason>>> A commit by stamourv@racket-lang.org has resolved this report
  http://git.racket-lang.org/plt/commit/3a273bd2b0
State changed from "open" to "closed" by stamourv@racket-lang.org at Thu, 27 Mar 2014 16:28:17 -0400
Reason>>> A commit by stamourv@racket-lang.org has resolved this report
  http://git.racket-lang.org/plt/commit/3a273bd2b0
  | Make profile and profile-thunk return the value of the profiled expression.
  | 
  | Closes PR14404.

