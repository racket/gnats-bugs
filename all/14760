From bugs+caf_=bugs=bugs.plt-scheme.org@plt-scheme.org Thu Oct  2 23:29:18 2014
Received: from mail-ig0-f176.google.com (mail-ig0-f176.google.com [209.85.213.176])
	by winooski.ccs.neu.edu (8.14.7/8.14.7) with ESMTP id s933TEBd007863
	for <bugs@bugs.plt-scheme.org>; Thu, 2 Oct 2014 23:29:14 -0400
Message-Id: <201410030329.s933TBtW007856@winooski.ccs.neu.edu>
Date: Thu, 2 Oct 2014 23:29:11 -0400
From: rxg@cs.ubc.ca
To: bugs@racket-lang.org
Subject: beside/align notices empty-image

>Number:         14760
>Category:       all
>Synopsis:       beside/align notices empty-image
>Class:          sw-bug
>Responsible:    robby
>Severity:       serious
>Priority:       medium
>State:          closed
>Confidential:   no
>Arrival-Date:   Thu Oct 02 23:32:01 -0400 2014
>Closed-Date:    Fri Oct 03 16:54:12 -0400 2014
>Last-Modified:  Fri Oct 10 21:44:01 -0400 2014
>Originator:     Ron Garcia
>Organization:
plt
>Submitter-Id:   unknown
>Release:        6.1
>Environment:
macosx "Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
Human Language: english
(current-memory-use) 176906352
raco pkg (show):
Installation-wide:
 Package              Checksum                                    Source
 main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 [178 auto-installed packages not shown]
User-specific for installation "6.1":
 [none]



Collections:
("/Users/Ron/Library/Racket/6.1/collects"
 (non-existent-path))
("/Applications/Racket v6.1/collects"
 (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))

Recent Internal Errors: 
Computer Language: (("Teaching Languages" "How to Design Programs" "Beginning Student") (#(#t constructor repeating-decimal #f #t none) #f ()))
>Description:
empty-image is not an identity object for the beside/align function
>How-To-Repeat:
(require 2htdp/image)

(image=? (beside/align "bottom"
                            (text "feed me " 18 "red")
                            (text "please?" 12 "green") empty-image)
           (beside/align "bottom"
                            (text "feed me " 18 "red")
                            (text "please?" 12 "green")))
>Fix:
>Audit-Trail:
From: Robby Findler <robby@eecs.northwestern.edu>
To: Ronald Garcia <rxg@cs.ubc.ca>, bugs <bugs@racket-lang.org>
Cc: nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Fri, 3 Oct 2014 10:37:51 -0500

 I'm not very happy with this response I'm about to give, but I think
 that this is not a bug. See if you have any ideas.
 
 Here's the issue: 2htdp/image images have local coordinate systems
 (the "bounding box") that consists of two vertical lines (one on the
 left and one on the right) and *three* horizontal lines. The one on
 the top and bottom that you expect, but also one called the "baseline"
 that is right underneath the bottom of a "u" (and so the descenders in
 "q" and "y", etc don't mess up the alignment of text on a line).
 
 So, when you align at the bottom these three images:
 
 (beside/align
  "bottom"
  (text "feed me " 18 "red")
  (text "please?" 12 "green")
  empty-image)
 
 then the question is "what is the right baseline for the resulting
 image?". (The images are otherwise identical.)
 
 The current code picks a line at the same place as the bottom of the
 image. The general rule it is using is to pick the baseline that is
 furthest away from the top of the image. In this case, that's the
 empty-image's baseline, which is right at the bottom.
 
 If we change this to use the baseline that's closest to the top of the
 image (which would work for this example), then we lose a lot more
 interesting identities, eg this one:
 
 (equal?
  (above empty-image (rectangle 10 10 "solid" "red"))
  (beside empty-image (rectangle 10 10 "solid" "red")))
 
 So I am currently thinking that the right thing to do in this case is
 to use "baseline" as the first argument to beside/align. Does that
 work for your larger context?
 
 Robby
 
 
 
 On Thu, Oct 2, 2014 at 10:32 PM,  <rxg@cs.ubc.ca> wrote:
 > A new problem report is waiting at
 >   http://bugs.racket-lang.org/query/?cmd=view&pr=14760
 >
 > Reported by Ron Garcia for release: 6.1
 >
 > *** Description:
 > empty-image is not an identity object for the beside/align function
 >
 > *** How to repeat:
 > (require 2htdp/image)
 >
 > (image=? (beside/align "bottom"
 >                             (text "feed me " 18 "red")
 >                             (text "please?" 12 "green") empty-image)
 >            (beside/align "bottom"
 >                             (text "feed me " 18 "red")
 >                             (text "please?" 12 "green")))
 >
 > *** Environment:
 > macosx "Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 > Human Language: english
 > (current-memory-use) 176906352
 > raco pkg (show):
 > Installation-wide:
 >  Package              Checksum                                    Source
 >  main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 >  racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 >  [178 auto-installed packages not shown]
 > User-specific for installation "6.1":
 >  [none]
 >
 >
 >
 > Collections:
 > ("/Users/Ron/Library/Racket/6.1/collects"
 >  (non-existent-path))
 > ("/Applications/Racket v6.1/collects"
 >  (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 >
 > Recent Internal Errors:
 > Computer Language: (("Teaching Languages" "How to Design Programs" "Beginning Student") (#(#t constructor repeating-decimal #f #t none) #f ()))
 >
From: Ron Garcia <rxg@cs.ubc.ca>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Fri, 3 Oct 2014 11:37:57 -0700

 Hi Robby,
 
 Thanks for the thorough response!  I don't completely understand though.  Why does empty-image actually have coordinates?  I would have expected them to be something like "undefined" that acts as an identity on every other coordinate system?   Maybe something like that doesn't work, or maybe I'm totally confused…
 
 Thanks!
 Ron
 
 
 
 On 2014-10-03, at 8:37 AM, Robby Findler <robby@eecs.northwestern.edu> wrote:
 
 > I'm not very happy with this response I'm about to give, but I think
 > that this is not a bug. See if you have any ideas.
 > 
 > Here's the issue: 2htdp/image images have local coordinate systems
 > (the "bounding box") that consists of two vertical lines (one on the
 > left and one on the right) and *three* horizontal lines. The one on
 > the top and bottom that you expect, but also one called the "baseline"
 > that is right underneath the bottom of a "u" (and so the descenders in
 > "q" and "y", etc don't mess up the alignment of text on a line).
 > 
 > So, when you align at the bottom these three images:
 > 
 > (beside/align
 > "bottom"
 > (text "feed me " 18 "red")
 > (text "please?" 12 "green")
 > empty-image)
 > 
 > then the question is "what is the right baseline for the resulting
 > image?". (The images are otherwise identical.)
 > 
 > The current code picks a line at the same place as the bottom of the
 > image. The general rule it is using is to pick the baseline that is
 > furthest away from the top of the image. In this case, that's the
 > empty-image's baseline, which is right at the bottom.
 > 
 > If we change this to use the baseline that's closest to the top of the
 > image (which would work for this example), then we lose a lot more
 > interesting identities, eg this one:
 > 
 > (equal?
 > (above empty-image (rectangle 10 10 "solid" "red"))
 > (beside empty-image (rectangle 10 10 "solid" "red")))
 > 
 > So I am currently thinking that the right thing to do in this case is
 > to use "baseline" as the first argument to beside/align. Does that
 > work for your larger context?
 > 
 > Robby
 > 
 > 
 > 
 > On Thu, Oct 2, 2014 at 10:32 PM,  <rxg@cs.ubc.ca> wrote:
 >> A new problem report is waiting at
 >>  http://bugs.racket-lang.org/query/?cmd=view&pr=14760
 >> 
 >> Reported by Ron Garcia for release: 6.1
 >> 
 >> *** Description:
 >> empty-image is not an identity object for the beside/align function
 >> 
 >> *** How to repeat:
 >> (require 2htdp/image)
 >> 
 >> (image=? (beside/align "bottom"
 >>                            (text "feed me " 18 "red")
 >>                            (text "please?" 12 "green") empty-image)
 >>           (beside/align "bottom"
 >>                            (text "feed me " 18 "red")
 >>                            (text "please?" 12 "green")))
 >> 
 >> *** Environment:
 >> macosx "Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 >> Human Language: english
 >> (current-memory-use) 176906352
 >> raco pkg (show):
 >> Installation-wide:
 >> Package              Checksum                                    Source
 >> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 >> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 >> [178 auto-installed packages not shown]
 >> User-specific for installation "6.1":
 >> [none]
 >> 
 >> 
 >> 
 >> Collections:
 >> ("/Users/Ron/Library/Racket/6.1/collects"
 >> (non-existent-path))
 >> ("/Applications/Racket v6.1/collects"
 >> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 >> 
 >> Recent Internal Errors:
 >> Computer Language: (("Teaching Languages" "How to Design Programs" "Beginning Student") (#(#t constructor repeating-decimal #f #t none) #f ()))
 >> 
 
 
From: Robby Findler <robby@eecs.northwestern.edu>
To: Ron Garcia <rxg@cs.ubc.ca>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Fri, 3 Oct 2014 13:50:09 -0500

 Internally, an image is this information about the bounding box and a
 drawing procedure (and maybe a few other things, but that's what's
 important here).
 
 So the empty image is a 0x0 bounding box and a drawing procedure that
 does no drawing.
 
 Robby
 
 
 On Fri, Oct 3, 2014 at 1:37 PM, Ron Garcia <rxg@cs.ubc.ca> wrote:
 > Hi Robby,
 >
 > Thanks for the thorough response!  I don't completely understand though.  Why does empty-image actually have coordinates?  I would have expected them to be something like "undefined" that acts as an identity on every other coordinate system?   Maybe something like that doesn't work, or maybe I'm totally confusedâ€¦
 >
 > Thanks!
 > Ron
 >
 >
 >
 > On 2014-10-03, at 8:37 AM, Robby Findler <robby@eecs.northwestern.edu> wrote:
 >
 >> I'm not very happy with this response I'm about to give, but I think
 >> that this is not a bug. See if you have any ideas.
 >>
 >> Here's the issue: 2htdp/image images have local coordinate systems
 >> (the "bounding box") that consists of two vertical lines (one on the
 >> left and one on the right) and *three* horizontal lines. The one on
 >> the top and bottom that you expect, but also one called the "baseline"
 >> that is right underneath the bottom of a "u" (and so the descenders in
 >> "q" and "y", etc don't mess up the alignment of text on a line).
 >>
 >> So, when you align at the bottom these three images:
 >>
 >> (beside/align
 >> "bottom"
 >> (text "feed me " 18 "red")
 >> (text "please?" 12 "green")
 >> empty-image)
 >>
 >> then the question is "what is the right baseline for the resulting
 >> image?". (The images are otherwise identical.)
 >>
 >> The current code picks a line at the same place as the bottom of the
 >> image. The general rule it is using is to pick the baseline that is
 >> furthest away from the top of the image. In this case, that's the
 >> empty-image's baseline, which is right at the bottom.
 >>
 >> If we change this to use the baseline that's closest to the top of the
 >> image (which would work for this example), then we lose a lot more
 >> interesting identities, eg this one:
 >>
 >> (equal?
 >> (above empty-image (rectangle 10 10 "solid" "red"))
 >> (beside empty-image (rectangle 10 10 "solid" "red")))
 >>
 >> So I am currently thinking that the right thing to do in this case is
 >> to use "baseline" as the first argument to beside/align. Does that
 >> work for your larger context?
 >>
 >> Robby
 >>
 >>
 >>
 >> On Thu, Oct 2, 2014 at 10:32 PM,  <rxg@cs.ubc.ca> wrote:
 >>> A new problem report is waiting at
 >>>  http://bugs.racket-lang.org/query/?cmd=view&pr=14760
 >>>
 >>> Reported by Ron Garcia for release: 6.1
 >>>
 >>> *** Description:
 >>> empty-image is not an identity object for the beside/align function
 >>>
 >>> *** How to repeat:
 >>> (require 2htdp/image)
 >>>
 >>> (image=? (beside/align "bottom"
 >>>                            (text "feed me " 18 "red")
 >>>                            (text "please?" 12 "green") empty-image)
 >>>           (beside/align "bottom"
 >>>                            (text "feed me " 18 "red")
 >>>                            (text "please?" 12 "green")))
 >>>
 >>> *** Environment:
 >>> macosx "Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 >>> Human Language: english
 >>> (current-memory-use) 176906352
 >>> raco pkg (show):
 >>> Installation-wide:
 >>> Package              Checksum                                    Source
 >>> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 >>> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 >>> [178 auto-installed packages not shown]
 >>> User-specific for installation "6.1":
 >>> [none]
 >>>
 >>>
 >>>
 >>> Collections:
 >>> ("/Users/Ron/Library/Racket/6.1/collects"
 >>> (non-existent-path))
 >>> ("/Applications/Racket v6.1/collects"
 >>> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 >>>
 >>> Recent Internal Errors:
 >>> Computer Language: (("Teaching Languages" "How to Design Programs" "Beginning Student") (#(#t constructor repeating-decimal #f #t none) #f ()))
 >>>
 >
 
From: Ronald Garcia <rxg@cs.ubc.ca>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Fri, 3 Oct 2014 12:48:01 -0700

 Okay, I think I'm starting to get it.  And furthermore, having RTFM I see that this is made quite clear there.  But (just to be a pain in the pinkie) is it what you really want?  I had this mental model of empty-image really being the identity object on the "image algebra", but in a sense empty-image isn't really empty, it just has empty dimensions.
 
 I could totally imagine that having an identity object on images could be a technical headache to implement, or even a change that would be problematic because of existing code that would break.  Perhaps I'm wrong but is the current empty-image really what you want?  I'm not seeing its beneficial conceptual attributes.
 
 I should give context:  we're teaching about self-reference now, and the two examples I gave you:  one was a check-expect, and one is what the function design really produces (I never bake the function design into my check-expects because in principle I don't know what it's going to look like yet).  I was caught by surprise while working on this design and finding that it was so not going to work, so I switched to using beside because I don't want to require a non-empty list of text as my starting point.
 
 Anyway, thanks for reading my blather,
 Ron
 
 
 
 On Oct 3, 2014, at 11:50 AM, Robby Findler wrote:
 
 > Internally, an image is this information about the bounding box and a
 > drawing procedure (and maybe a few other things, but that's what's
 > important here).
 > 
 > So the empty image is a 0x0 bounding box and a drawing procedure that
 > does no drawing.
 > 
 > Robby
 > 
 > 
 > On Fri, Oct 3, 2014 at 1:37 PM, Ron Garcia <rxg@cs.ubc.ca> wrote:
 >> Hi Robby,
 >> 
 >> Thanks for the thorough response!  I don't completely understand though.  Why does empty-image actually have coordinates?  I would have expected them to be something like "undefined" that acts as an identity on every other coordinate system?   Maybe something like that doesn't work, or maybe I'm totally confused…
 >> 
 >> Thanks!
 >> Ron
 >> 
 >> 
 >> 
 >> On 2014-10-03, at 8:37 AM, Robby Findler <robby@eecs.northwestern.edu> wrote:
 >> 
 >>> I'm not very happy with this response I'm about to give, but I think
 >>> that this is not a bug. See if you have any ideas.
 >>> 
 >>> Here's the issue: 2htdp/image images have local coordinate systems
 >>> (the "bounding box") that consists of two vertical lines (one on the
 >>> left and one on the right) and *three* horizontal lines. The one on
 >>> the top and bottom that you expect, but also one called the "baseline"
 >>> that is right underneath the bottom of a "u" (and so the descenders in
 >>> "q" and "y", etc don't mess up the alignment of text on a line).
 >>> 
 >>> So, when you align at the bottom these three images:
 >>> 
 >>> (beside/align
 >>> "bottom"
 >>> (text "feed me " 18 "red")
 >>> (text "please?" 12 "green")
 >>> empty-image)
 >>> 
 >>> then the question is "what is the right baseline for the resulting
 >>> image?". (The images are otherwise identical.)
 >>> 
 >>> The current code picks a line at the same place as the bottom of the
 >>> image. The general rule it is using is to pick the baseline that is
 >>> furthest away from the top of the image. In this case, that's the
 >>> empty-image's baseline, which is right at the bottom.
 >>> 
 >>> If we change this to use the baseline that's closest to the top of the
 >>> image (which would work for this example), then we lose a lot more
 >>> interesting identities, eg this one:
 >>> 
 >>> (equal?
 >>> (above empty-image (rectangle 10 10 "solid" "red"))
 >>> (beside empty-image (rectangle 10 10 "solid" "red")))
 >>> 
 >>> So I am currently thinking that the right thing to do in this case is
 >>> to use "baseline" as the first argument to beside/align. Does that
 >>> work for your larger context?
 >>> 
 >>> Robby
 >>> 
 >>> 
 >>> 
 >>> On Thu, Oct 2, 2014 at 10:32 PM,  <rxg@cs.ubc.ca> wrote:
 >>>> A new problem report is waiting at
 >>>> http://bugs.racket-lang.org/query/?cmd=view&pr=14760
 >>>> 
 >>>> Reported by Ron Garcia for release: 6.1
 >>>> 
 >>>> *** Description:
 >>>> empty-image is not an identity object for the beside/align function
 >>>> 
 >>>> *** How to repeat:
 >>>> (require 2htdp/image)
 >>>> 
 >>>> (image=? (beside/align "bottom"
 >>>>                           (text "feed me " 18 "red")
 >>>>                           (text "please?" 12 "green") empty-image)
 >>>>          (beside/align "bottom"
 >>>>                           (text "feed me " 18 "red")
 >>>>                           (text "please?" 12 "green")))
 >>>> 
 >>>> *** Environment:
 >>>> macosx "Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 >>>> Human Language: english
 >>>> (current-memory-use) 176906352
 >>>> raco pkg (show):
 >>>> Installation-wide:
 >>>> Package              Checksum                                    Source
 >>>> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 >>>> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 >>>> [178 auto-installed packages not shown]
 >>>> User-specific for installation "6.1":
 >>>> [none]
 >>>> 
 >>>> 
 >>>> 
 >>>> Collections:
 >>>> ("/Users/Ron/Library/Racket/6.1/collects"
 >>>> (non-existent-path))
 >>>> ("/Applications/Racket v6.1/collects"
 >>>> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 >>>> 
 >>>> Recent Internal Errors:
 >>>> Computer Language: (("Teaching Languages" "How to Design Programs" "Beginning Student") (#(#t constructor repeating-decimal #f #t none) #f ()))
 >>>> 
 >> 
 
 
From: Robby Findler <robby@eecs.northwestern.edu>
To: Ronald Garcia <rxg@cs.ubc.ca>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Fri, 3 Oct 2014 14:55:22 -0500

 I agree that this is not optimal. I feel like there must be a better
 way than making the internal datatype representing images include a
 explicit, different thing that is the identity in that sense. It is
 certainly possible, of course.
 
 I'll keep thinking about the problem. Maybe there's another way to
 define beside that will work better.
 
 Robby
 
 On Fri, Oct 3, 2014 at 2:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 > Okay, I think I'm starting to get it.  And furthermore, having RTFM I see that this is made quite clear there.  But (just to be a pain in the pinkie) is it what you really want?  I had this mental model of empty-image really being the identity object on the "image algebra", but in a sense empty-image isn't really empty, it just has empty dimensions.
 >
 > I could totally imagine that having an identity object on images could be a technical headache to implement, or even a change that would be problematic because of existing code that would break.  Perhaps I'm wrong but is the current empty-image really what you want?  I'm not seeing its beneficial conceptual attributes.
 >
 > I should give context:  we're teaching about self-reference now, and the two examples I gave you:  one was a check-expect, and one is what the function design really produces (I never bake the function design into my check-expects because in principle I don't know what it's going to look like yet).  I was caught by surprise while working on this design and finding that it was so not going to work, so I switched to using beside because I don't want to require a non-empty list of text as my starting point.
 >
 > Anyway, thanks for reading my blather,
 > Ron
 >
 >
 >
 > On Oct 3, 2014, at 11:50 AM, Robby Findler wrote:
 >
 >> Internally, an image is this information about the bounding box and a
 >> drawing procedure (and maybe a few other things, but that's what's
 >> important here).
 >>
 >> So the empty image is a 0x0 bounding box and a drawing procedure that
 >> does no drawing.
 >>
 >> Robby
 >>
 >>
 >> On Fri, Oct 3, 2014 at 1:37 PM, Ron Garcia <rxg@cs.ubc.ca> wrote:
 >>> Hi Robby,
 >>>
 >>> Thanks for the thorough response!  I don't completely understand though.  Why does empty-image actually have coordinates?  I would have expected them to be something like "undefined" that acts as an identity on every other coordinate system?   Maybe something like that doesn't work, or maybe I'm totally confusedâ€¦
 >>>
 >>> Thanks!
 >>> Ron
 >>>
 >>>
 >>>
 >>> On 2014-10-03, at 8:37 AM, Robby Findler <robby@eecs.northwestern.edu> wrote:
 >>>
 >>>> I'm not very happy with this response I'm about to give, but I think
 >>>> that this is not a bug. See if you have any ideas.
 >>>>
 >>>> Here's the issue: 2htdp/image images have local coordinate systems
 >>>> (the "bounding box") that consists of two vertical lines (one on the
 >>>> left and one on the right) and *three* horizontal lines. The one on
 >>>> the top and bottom that you expect, but also one called the "baseline"
 >>>> that is right underneath the bottom of a "u" (and so the descenders in
 >>>> "q" and "y", etc don't mess up the alignment of text on a line).
 >>>>
 >>>> So, when you align at the bottom these three images:
 >>>>
 >>>> (beside/align
 >>>> "bottom"
 >>>> (text "feed me " 18 "red")
 >>>> (text "please?" 12 "green")
 >>>> empty-image)
 >>>>
 >>>> then the question is "what is the right baseline for the resulting
 >>>> image?". (The images are otherwise identical.)
 >>>>
 >>>> The current code picks a line at the same place as the bottom of the
 >>>> image. The general rule it is using is to pick the baseline that is
 >>>> furthest away from the top of the image. In this case, that's the
 >>>> empty-image's baseline, which is right at the bottom.
 >>>>
 >>>> If we change this to use the baseline that's closest to the top of the
 >>>> image (which would work for this example), then we lose a lot more
 >>>> interesting identities, eg this one:
 >>>>
 >>>> (equal?
 >>>> (above empty-image (rectangle 10 10 "solid" "red"))
 >>>> (beside empty-image (rectangle 10 10 "solid" "red")))
 >>>>
 >>>> So I am currently thinking that the right thing to do in this case is
 >>>> to use "baseline" as the first argument to beside/align. Does that
 >>>> work for your larger context?
 >>>>
 >>>> Robby
 >>>>
 >>>>
 >>>>
 >>>> On Thu, Oct 2, 2014 at 10:32 PM,  <rxg@cs.ubc.ca> wrote:
 >>>>> A new problem report is waiting at
 >>>>> http://bugs.racket-lang.org/query/?cmd=view&pr=14760
 >>>>>
 >>>>> Reported by Ron Garcia for release: 6.1
 >>>>>
 >>>>> *** Description:
 >>>>> empty-image is not an identity object for the beside/align function
 >>>>>
 >>>>> *** How to repeat:
 >>>>> (require 2htdp/image)
 >>>>>
 >>>>> (image=? (beside/align "bottom"
 >>>>>                           (text "feed me " 18 "red")
 >>>>>                           (text "please?" 12 "green") empty-image)
 >>>>>          (beside/align "bottom"
 >>>>>                           (text "feed me " 18 "red")
 >>>>>                           (text "please?" 12 "green")))
 >>>>>
 >>>>> *** Environment:
 >>>>> macosx "Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 >>>>> Human Language: english
 >>>>> (current-memory-use) 176906352
 >>>>> raco pkg (show):
 >>>>> Installation-wide:
 >>>>> Package              Checksum                                    Source
 >>>>> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 >>>>> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 >>>>> [178 auto-installed packages not shown]
 >>>>> User-specific for installation "6.1":
 >>>>> [none]
 >>>>>
 >>>>>
 >>>>>
 >>>>> Collections:
 >>>>> ("/Users/Ron/Library/Racket/6.1/collects"
 >>>>> (non-existent-path))
 >>>>> ("/Applications/Racket v6.1/collects"
 >>>>> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 >>>>>
 >>>>> Recent Internal Errors:
 >>>>> Computer Language: (("Teaching Languages" "How to Design Programs" "Beginning Student") (#(#t constructor repeating-decimal #f #t none) #f ()))
 >>>>>
 >>>
 >
 
From: Robby Findler <robby@eecs.northwestern.edu>
To: Ronald Garcia <rxg@cs.ubc.ca>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Fri, 3 Oct 2014 15:00:05 -0500

 One more point, however: if you are aligning multiple horizontally and
 those images have different sized text (as in your example from the
 PR) you really do want to be using "baseline" not "bottom".
 
 (Not that this helps with the point of the PR, of course.)
 
 Robby
 
 
 On Fri, Oct 3, 2014 at 2:55 PM, Robby Findler
 <robby@eecs.northwestern.edu> wrote:
 > I agree that this is not optimal. I feel like there must be a better
 > way than making the internal datatype representing images include a
 > explicit, different thing that is the identity in that sense. It is
 > certainly possible, of course.
 >
 > I'll keep thinking about the problem. Maybe there's another way to
 > define beside that will work better.
 >
 > Robby
 >
 > On Fri, Oct 3, 2014 at 2:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 >> Okay, I think I'm starting to get it.  And furthermore, having RTFM I see that this is made quite clear there.  But (just to be a pain in the pinkie) is it what you really want?  I had this mental model of empty-image really being the identity object on the "image algebra", but in a sense empty-image isn't really empty, it just has empty dimensions.
 >>
 >> I could totally imagine that having an identity object on images could be a technical headache to implement, or even a change that would be problematic because of existing code that would break.  Perhaps I'm wrong but is the current empty-image really what you want?  I'm not seeing its beneficial conceptual attributes.
 >>
 >> I should give context:  we're teaching about self-reference now, and the two examples I gave you:  one was a check-expect, and one is what the function design really produces (I never bake the function design into my check-expects because in principle I don't know what it's going to look like yet).  I was caught by surprise while working on this design and finding that it was so not going to work, so I switched to using beside because I don't want to require a non-empty list of text as my starting point.
 >>
 >> Anyway, thanks for reading my blather,
 >> Ron
 >>
 >>
 >>
 >> On Oct 3, 2014, at 11:50 AM, Robby Findler wrote:
 >>
 >>> Internally, an image is this information about the bounding box and a
 >>> drawing procedure (and maybe a few other things, but that's what's
 >>> important here).
 >>>
 >>> So the empty image is a 0x0 bounding box and a drawing procedure that
 >>> does no drawing.
 >>>
 >>> Robby
 >>>
 >>>
 >>> On Fri, Oct 3, 2014 at 1:37 PM, Ron Garcia <rxg@cs.ubc.ca> wrote:
 >>>> Hi Robby,
 >>>>
 >>>> Thanks for the thorough response!  I don't completely understand though.  Why does empty-image actually have coordinates?  I would have expected them to be something like "undefined" that acts as an identity on every other coordinate system?   Maybe something like that doesn't work, or maybe I'm totally confusedâ€¦
 >>>>
 >>>> Thanks!
 >>>> Ron
 >>>>
 >>>>
 >>>>
 >>>> On 2014-10-03, at 8:37 AM, Robby Findler <robby@eecs.northwestern.edu> wrote:
 >>>>
 >>>>> I'm not very happy with this response I'm about to give, but I think
 >>>>> that this is not a bug. See if you have any ideas.
 >>>>>
 >>>>> Here's the issue: 2htdp/image images have local coordinate systems
 >>>>> (the "bounding box") that consists of two vertical lines (one on the
 >>>>> left and one on the right) and *three* horizontal lines. The one on
 >>>>> the top and bottom that you expect, but also one called the "baseline"
 >>>>> that is right underneath the bottom of a "u" (and so the descenders in
 >>>>> "q" and "y", etc don't mess up the alignment of text on a line).
 >>>>>
 >>>>> So, when you align at the bottom these three images:
 >>>>>
 >>>>> (beside/align
 >>>>> "bottom"
 >>>>> (text "feed me " 18 "red")
 >>>>> (text "please?" 12 "green")
 >>>>> empty-image)
 >>>>>
 >>>>> then the question is "what is the right baseline for the resulting
 >>>>> image?". (The images are otherwise identical.)
 >>>>>
 >>>>> The current code picks a line at the same place as the bottom of the
 >>>>> image. The general rule it is using is to pick the baseline that is
 >>>>> furthest away from the top of the image. In this case, that's the
 >>>>> empty-image's baseline, which is right at the bottom.
 >>>>>
 >>>>> If we change this to use the baseline that's closest to the top of the
 >>>>> image (which would work for this example), then we lose a lot more
 >>>>> interesting identities, eg this one:
 >>>>>
 >>>>> (equal?
 >>>>> (above empty-image (rectangle 10 10 "solid" "red"))
 >>>>> (beside empty-image (rectangle 10 10 "solid" "red")))
 >>>>>
 >>>>> So I am currently thinking that the right thing to do in this case is
 >>>>> to use "baseline" as the first argument to beside/align. Does that
 >>>>> work for your larger context?
 >>>>>
 >>>>> Robby
 >>>>>
 >>>>>
 >>>>>
 >>>>> On Thu, Oct 2, 2014 at 10:32 PM,  <rxg@cs.ubc.ca> wrote:
 >>>>>> A new problem report is waiting at
 >>>>>> http://bugs.racket-lang.org/query/?cmd=view&pr=14760
 >>>>>>
 >>>>>> Reported by Ron Garcia for release: 6.1
 >>>>>>
 >>>>>> *** Description:
 >>>>>> empty-image is not an identity object for the beside/align function
 >>>>>>
 >>>>>> *** How to repeat:
 >>>>>> (require 2htdp/image)
 >>>>>>
 >>>>>> (image=? (beside/align "bottom"
 >>>>>>                           (text "feed me " 18 "red")
 >>>>>>                           (text "please?" 12 "green") empty-image)
 >>>>>>          (beside/align "bottom"
 >>>>>>                           (text "feed me " 18 "red")
 >>>>>>                           (text "please?" 12 "green")))
 >>>>>>
 >>>>>> *** Environment:
 >>>>>> macosx "Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 >>>>>> Human Language: english
 >>>>>> (current-memory-use) 176906352
 >>>>>> raco pkg (show):
 >>>>>> Installation-wide:
 >>>>>> Package              Checksum                                    Source
 >>>>>> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 >>>>>> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 >>>>>> [178 auto-installed packages not shown]
 >>>>>> User-specific for installation "6.1":
 >>>>>> [none]
 >>>>>>
 >>>>>>
 >>>>>>
 >>>>>> Collections:
 >>>>>> ("/Users/Ron/Library/Racket/6.1/collects"
 >>>>>> (non-existent-path))
 >>>>>> ("/Applications/Racket v6.1/collects"
 >>>>>> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 >>>>>>
 >>>>>> Recent Internal Errors:
 >>>>>> Computer Language: (("Teaching Languages" "How to Design Programs" "Beginning Student") (#(#t constructor repeating-decimal #f #t none) #f ()))
 >>>>>>
 >>>>
 >>
 
From: Ronald Garcia <rxg@cs.ubc.ca>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Fri, 3 Oct 2014 13:11:31 -0700

 That's good to know, I didn't know about "baseline" when I wrote the code (note to self: RTFM!!!!).  Thanks!
 
 
 On Oct 3, 2014, at 1:00 PM, Robby Findler wrote:
 
 > One more point, however: if you are aligning multiple horizontally and
 > those images have different sized text (as in your example from the
 > PR) you really do want to be using "baseline" not "bottom".
 > 
 > (Not that this helps with the point of the PR, of course.)
 > 
 > Robby
 > 
 > 
 > On Fri, Oct 3, 2014 at 2:55 PM, Robby Findler
 > <robby@eecs.northwestern.edu> wrote:
 >> I agree that this is not optimal. I feel like there must be a better
 >> way than making the internal datatype representing images include a
 >> explicit, different thing that is the identity in that sense. It is
 >> certainly possible, of course.
 >> 
 >> I'll keep thinking about the problem. Maybe there's another way to
 >> define beside that will work better.
 >> 
 >> Robby
 >> 
 >> On Fri, Oct 3, 2014 at 2:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 >>> Okay, I think I'm starting to get it.  And furthermore, having RTFM I see that this is made quite clear there.  But (just to be a pain in the pinkie) is it what you really want?  I had this mental model of empty-image really being the identity object on the "image algebra", but in a sense empty-image isn't really empty, it just has empty dimensions.
 >>> 
 >>> I could totally imagine that having an identity object on images could be a technical headache to implement, or even a change that would be problematic because of existing code that would break.  Perhaps I'm wrong but is the current empty-image really what you want?  I'm not seeing its beneficial conceptual attributes.
 >>> 
 >>> I should give context:  we're teaching about self-reference now, and the two examples I gave you:  one was a check-expect, and one is what the function design really produces (I never bake the function design into my check-expects because in principle I don't know what it's going to look like yet).  I was caught by surprise while working on this design and finding that it was so not going to work, so I switched to using beside because I don't want to require a non-empty list of text as my starting point.
 >>> 
 >>> Anyway, thanks for reading my blather,
 >>> Ron
 >>> 
 >>> 
 >>> 
 >>> On Oct 3, 2014, at 11:50 AM, Robby Findler wrote:
 >>> 
 >>>> Internally, an image is this information about the bounding box and a
 >>>> drawing procedure (and maybe a few other things, but that's what's
 >>>> important here).
 >>>> 
 >>>> So the empty image is a 0x0 bounding box and a drawing procedure that
 >>>> does no drawing.
 >>>> 
 >>>> Robby
 >>>> 
 >>>> 
 >>>> On Fri, Oct 3, 2014 at 1:37 PM, Ron Garcia <rxg@cs.ubc.ca> wrote:
 >>>>> Hi Robby,
 >>>>> 
 >>>>> Thanks for the thorough response!  I don't completely understand though.  Why does empty-image actually have coordinates?  I would have expected them to be something like "undefined" that acts as an identity on every other coordinate system?   Maybe something like that doesn't work, or maybe I'm totally confused…
 >>>>> 
 >>>>> Thanks!
 >>>>> Ron
 >>>>> 
 >>>>> 
 >>>>> 
 >>>>> On 2014-10-03, at 8:37 AM, Robby Findler <robby@eecs.northwestern.edu> wrote:
 >>>>> 
 >>>>>> I'm not very happy with this response I'm about to give, but I think
 >>>>>> that this is not a bug. See if you have any ideas.
 >>>>>> 
 >>>>>> Here's the issue: 2htdp/image images have local coordinate systems
 >>>>>> (the "bounding box") that consists of two vertical lines (one on the
 >>>>>> left and one on the right) and *three* horizontal lines. The one on
 >>>>>> the top and bottom that you expect, but also one called the "baseline"
 >>>>>> that is right underneath the bottom of a "u" (and so the descenders in
 >>>>>> "q" and "y", etc don't mess up the alignment of text on a line).
 >>>>>> 
 >>>>>> So, when you align at the bottom these three images:
 >>>>>> 
 >>>>>> (beside/align
 >>>>>> "bottom"
 >>>>>> (text "feed me " 18 "red")
 >>>>>> (text "please?" 12 "green")
 >>>>>> empty-image)
 >>>>>> 
 >>>>>> then the question is "what is the right baseline for the resulting
 >>>>>> image?". (The images are otherwise identical.)
 >>>>>> 
 >>>>>> The current code picks a line at the same place as the bottom of the
 >>>>>> image. The general rule it is using is to pick the baseline that is
 >>>>>> furthest away from the top of the image. In this case, that's the
 >>>>>> empty-image's baseline, which is right at the bottom.
 >>>>>> 
 >>>>>> If we change this to use the baseline that's closest to the top of the
 >>>>>> image (which would work for this example), then we lose a lot more
 >>>>>> interesting identities, eg this one:
 >>>>>> 
 >>>>>> (equal?
 >>>>>> (above empty-image (rectangle 10 10 "solid" "red"))
 >>>>>> (beside empty-image (rectangle 10 10 "solid" "red")))
 >>>>>> 
 >>>>>> So I am currently thinking that the right thing to do in this case is
 >>>>>> to use "baseline" as the first argument to beside/align. Does that
 >>>>>> work for your larger context?
 >>>>>> 
 >>>>>> Robby
 >>>>>> 
 >>>>>> 
 >>>>>> 
 >>>>>> On Thu, Oct 2, 2014 at 10:32 PM,  <rxg@cs.ubc.ca> wrote:
 >>>>>>> A new problem report is waiting at
 >>>>>>> http://bugs.racket-lang.org/query/?cmd=view&pr=14760
 >>>>>>> 
 >>>>>>> Reported by Ron Garcia for release: 6.1
 >>>>>>> 
 >>>>>>> *** Description:
 >>>>>>> empty-image is not an identity object for the beside/align function
 >>>>>>> 
 >>>>>>> *** How to repeat:
 >>>>>>> (require 2htdp/image)
 >>>>>>> 
 >>>>>>> (image=? (beside/align "bottom"
 >>>>>>>                          (text "feed me " 18 "red")
 >>>>>>>                          (text "please?" 12 "green") empty-image)
 >>>>>>>         (beside/align "bottom"
 >>>>>>>                          (text "feed me " 18 "red")
 >>>>>>>                          (text "please?" 12 "green")))
 >>>>>>> 
 >>>>>>> *** Environment:
 >>>>>>> macosx "Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 >>>>>>> Human Language: english
 >>>>>>> (current-memory-use) 176906352
 >>>>>>> raco pkg (show):
 >>>>>>> Installation-wide:
 >>>>>>> Package              Checksum                                    Source
 >>>>>>> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 >>>>>>> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 >>>>>>> [178 auto-installed packages not shown]
 >>>>>>> User-specific for installation "6.1":
 >>>>>>> [none]
 >>>>>>> 
 >>>>>>> 
 >>>>>>> 
 >>>>>>> Collections:
 >>>>>>> ("/Users/Ron/Library/Racket/6.1/collects"
 >>>>>>> (non-existent-path))
 >>>>>>> ("/Applications/Racket v6.1/collects"
 >>>>>>> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 >>>>>>> 
 >>>>>>> Recent Internal Errors:
 >>>>>>> Computer Language: (("Teaching Languages" "How to Design Programs" "Beginning Student") (#(#t constructor repeating-decimal #f #t none) #f ()))
 >>>>>>> 
 >>>>> 
 >>> 
 
 
From: Ronald Garcia <rxg@cs.ubc.ca>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Fri, 3 Oct 2014 13:30:33 -0700

 On Oct 3, 2014, at 12:55 PM, Robby Findler wrote:
 
 > I agree that this is not optimal. I feel like there must be a better
 > way than making the internal datatype representing images include a
 > explicit, different thing that is the identity in that sense. It is
 > certainly possible, of course.
 
 Just curious:  what's so bad about the internal datatype having an explicit other thing?  Is it that all of the other image code would then need to check for an empty image instead of something uniform?  That does sound kind of like the joy of null pointers :).   
 
 > 
 > I'll keep thinking about the problem. Maybe there's another way to
 > define beside that will work better.
 
 Sure I understand.  BTW, is there any difference between equal? and image=? on images?
 
 Ron
 
 
 > 
 > Robby
 > 
 > On Fri, Oct 3, 2014 at 2:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 >> Okay, I think I'm starting to get it.  And furthermore, having RTFM I see that this is made quite clear there.  But (just to be a pain in the pinkie) is it what you really want?  I had this mental model of empty-image really being the identity object on the "image algebra", but in a sense empty-image isn't really empty, it just has empty dimensions.
 >> 
 >> I could totally imagine that having an identity object on images could be a technical headache to implement, or even a change that would be problematic because of existing code that would break.  Perhaps I'm wrong but is the current empty-image really what you want?  I'm not seeing its beneficial conceptual attributes.
 >> 
 >> I should give context:  we're teaching about self-reference now, and the two examples I gave you:  one was a check-expect, and one is what the function design really produces (I never bake the function design into my check-expects because in principle I don't know what it's going to look like yet).  I was caught by surprise while working on this design and finding that it was so not going to work, so I switched to using beside because I don't want to require a non-empty list of text as my starting point.
 >> 
 >> Anyway, thanks for reading my blather,
 >> Ron
 >> 
 >> 
 >> 
 >> On Oct 3, 2014, at 11:50 AM, Robby Findler wrote:
 >> 
 >>> Internally, an image is this information about the bounding box and a
 >>> drawing procedure (and maybe a few other things, but that's what's
 >>> important here).
 >>> 
 >>> So the empty image is a 0x0 bounding box and a drawing procedure that
 >>> does no drawing.
 >>> 
 >>> Robby
 >>> 
 >>> 
 >>> On Fri, Oct 3, 2014 at 1:37 PM, Ron Garcia <rxg@cs.ubc.ca> wrote:
 >>>> Hi Robby,
 >>>> 
 >>>> Thanks for the thorough response!  I don't completely understand though.  Why does empty-image actually have coordinates?  I would have expected them to be something like "undefined" that acts as an identity on every other coordinate system?   Maybe something like that doesn't work, or maybe I'm totally confused…
 >>>> 
 >>>> Thanks!
 >>>> Ron
 >>>> 
 >>>> 
 >>>> 
 >>>> On 2014-10-03, at 8:37 AM, Robby Findler <robby@eecs.northwestern.edu> wrote:
 >>>> 
 >>>>> I'm not very happy with this response I'm about to give, but I think
 >>>>> that this is not a bug. See if you have any ideas.
 >>>>> 
 >>>>> Here's the issue: 2htdp/image images have local coordinate systems
 >>>>> (the "bounding box") that consists of two vertical lines (one on the
 >>>>> left and one on the right) and *three* horizontal lines. The one on
 >>>>> the top and bottom that you expect, but also one called the "baseline"
 >>>>> that is right underneath the bottom of a "u" (and so the descenders in
 >>>>> "q" and "y", etc don't mess up the alignment of text on a line).
 >>>>> 
 >>>>> So, when you align at the bottom these three images:
 >>>>> 
 >>>>> (beside/align
 >>>>> "bottom"
 >>>>> (text "feed me " 18 "red")
 >>>>> (text "please?" 12 "green")
 >>>>> empty-image)
 >>>>> 
 >>>>> then the question is "what is the right baseline for the resulting
 >>>>> image?". (The images are otherwise identical.)
 >>>>> 
 >>>>> The current code picks a line at the same place as the bottom of the
 >>>>> image. The general rule it is using is to pick the baseline that is
 >>>>> furthest away from the top of the image. In this case, that's the
 >>>>> empty-image's baseline, which is right at the bottom.
 >>>>> 
 >>>>> If we change this to use the baseline that's closest to the top of the
 >>>>> image (which would work for this example), then we lose a lot more
 >>>>> interesting identities, eg this one:
 >>>>> 
 >>>>> (equal?
 >>>>> (above empty-image (rectangle 10 10 "solid" "red"))
 >>>>> (beside empty-image (rectangle 10 10 "solid" "red")))
 >>>>> 
 >>>>> So I am currently thinking that the right thing to do in this case is
 >>>>> to use "baseline" as the first argument to beside/align. Does that
 >>>>> work for your larger context?
 >>>>> 
 >>>>> Robby
 >>>>> 
 >>>>> 
 >>>>> 
 >>>>> On Thu, Oct 2, 2014 at 10:32 PM,  <rxg@cs.ubc.ca> wrote:
 >>>>>> A new problem report is waiting at
 >>>>>> http://bugs.racket-lang.org/query/?cmd=view&pr=14760
 >>>>>> 
 >>>>>> Reported by Ron Garcia for release: 6.1
 >>>>>> 
 >>>>>> *** Description:
 >>>>>> empty-image is not an identity object for the beside/align function
 >>>>>> 
 >>>>>> *** How to repeat:
 >>>>>> (require 2htdp/image)
 >>>>>> 
 >>>>>> (image=? (beside/align "bottom"
 >>>>>>                          (text "feed me " 18 "red")
 >>>>>>                          (text "please?" 12 "green") empty-image)
 >>>>>>         (beside/align "bottom"
 >>>>>>                          (text "feed me " 18 "red")
 >>>>>>                          (text "please?" 12 "green")))
 >>>>>> 
 >>>>>> *** Environment:
 >>>>>> macosx "Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 >>>>>> Human Language: english
 >>>>>> (current-memory-use) 176906352
 >>>>>> raco pkg (show):
 >>>>>> Installation-wide:
 >>>>>> Package              Checksum                                    Source
 >>>>>> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 >>>>>> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 >>>>>> [178 auto-installed packages not shown]
 >>>>>> User-specific for installation "6.1":
 >>>>>> [none]
 >>>>>> 
 >>>>>> 
 >>>>>> 
 >>>>>> Collections:
 >>>>>> ("/Users/Ron/Library/Racket/6.1/collects"
 >>>>>> (non-existent-path))
 >>>>>> ("/Applications/Racket v6.1/collects"
 >>>>>> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 >>>>>> 
 >>>>>> Recent Internal Errors:
 >>>>>> Computer Language: (("Teaching Languages" "How to Design Programs" "Beginning Student") (#(#t constructor repeating-decimal #f #t none) #f ()))
 >>>>>> 
 >>>> 
 >> 
 
 
Responsible changed from "nobody" to "robby" by robby@racket-lang.org at Fri, 03 Oct 2014 16:54:12 -0400
Reason>>> A commit by robby@racket-lang.org has resolved this report
  http://git.racket-lang.org/plt/commit/868140d91c
State changed from "open" to "closed" by robby@racket-lang.org at Fri, 03 Oct 2014 16:54:12 -0400
Reason>>> A commit by robby@racket-lang.org has resolved this report
  http://git.racket-lang.org/plt/commit/868140d91c
  | use a new strategy for computing the baseline for the various beside functions
  | 
  | Instead of just taking the maximum  value of any of the baselines in the
  | beside case, look for the largest difference between the bottom and
  | the baseline and take the location of that image's baseline as the combined
  | baseline. If the differences are equal, take the one that is furthest away
  | from the top
  | 
  | closes PR 14760

From: Robby Findler <robby@eecs.northwestern.edu>
To: Ronald Garcia <rxg@cs.ubc.ca>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Fri, 3 Oct 2014 15:54:53 -0500

 Okay, I found a different way to think about the computation of the
 baseline when using beside that makes this example work better and
 isn't a complete hack and doesn't seem to break anything else.
 
 Robby
From: Ronald Garcia <rxg@cs.ubc.ca>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Fri, 3 Oct 2014 14:30:55 -0700

 That's awesome!  And that was fast.  Thanks Robby!
 
 Ron
 
 On Oct 3, 2014, at 1:54 PM, Robby Findler wrote:
 
 > Okay, I found a different way to think about the computation of the
 > baseline when using beside that makes this example work better and
 > isn't a complete hack and doesn't seem to break anything else.
 > 
 > Robby
 
From: Robby Findler <robby@eecs.northwestern.edu>
To: Ronald Garcia <rxg@cs.ubc.ca>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Fri, 3 Oct 2014 16:39:16 -0500

 On Fri, Oct 3, 2014 at 3:30 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 >
 > On Oct 3, 2014, at 12:55 PM, Robby Findler wrote:
 >
 >> I agree that this is not optimal. I feel like there must be a better
 >> way than making the internal datatype representing images include a
 >> explicit, different thing that is the identity in that sense. It is
 >> certainly possible, of course.
 >
 > Just curious:  what's so bad about the internal datatype having an explicit other thing?  Is it that all of the other image code would then need to check for an empty image instead of something uniform?  That does sound kind of like the joy of null pointers :).
 
 Yes, exactly.
 
 >> I'll keep thinking about the problem. Maybe there's another way to
 >> define beside that will work better.
 >
 > Sure I understand.  BTW, is there any difference between equal? and image=? on images?
 
 Only that image=? checks that it gets images (and isn't in #lang racket).
 
 Robby
 
From: Stephen Bloch <bloch@adelphi.edu>
To: Ronald Garcia <rxg@cs.ubc.ca>
Cc: Robby Findler <robby@eecs.northwestern.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sat, 4 Oct 2014 00:06:11 -0400

 --Apple-Mail=_A0E25C25-434F-4E88-BD7D-933E815A64F4
 Content-Transfer-Encoding: quoted-printable
 Content-Type: text/plain;
 	charset=windows-1252
 
 
 On Oct 3, 2014, at 3:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 
 > Okay, I think I'm starting to get it.  And furthermore, having RTFM I =
 see that this is made quite clear there.  But (just to be a pain in the =
 pinkie) is it what you really want?  I had this mental model of =
 empty-image really being the identity object on the "image algebra=94
 
 Yes, that=92s the way it=92s most commonly used.  But there=92s no such =
 thing as =93the identity object=94 on an entire algebra, only =93the =
 identity object=94 for a particular operator.  (0 is the identity for =
 addition, 1 for multiplication, true for OR, false for AND, etc.)
 
 In fact, the empty image works pretty well as an identity for a variety =
 of image operators, as long as you only pay attention to what=92s =
 visible.  Unfortunately (but necessarily), the image data type also has =
 some invisible fields like baseline and pinhole, and there=92s no good =
 way to define operations like =93beside=94 and =93above=94 so that
 (a) the operation is associative, and
 (b) the empty image is a perfect identity for it.
 
 I wonder if there should be a =93visibly-equal?=94 function on images =
 that only compares whether they look the same in their present forms.  =
 Note that (visibly-equal? X Y) does NOT imply that X can be substituted =
 for Y in expressions and the results will be visibly-equal?, whereas =
 (image=3D? X Y) DOES imply that (AFAIK).
 
 
 Stephen Bloch
 sbloch@adelphi.edu
 GPG key at http://home.adelphi.edu/sbloch/sbloch.pubkey.asc
 
 
 --Apple-Mail=_A0E25C25-434F-4E88-BD7D-933E815A64F4
 Content-Transfer-Encoding: 7bit
 Content-Disposition: attachment;
 	filename=signature.asc
 Content-Type: application/pgp-signature;
 	name=signature.asc
 Content-Description: Message signed with OpenPGP using GPGMail
 
 -----BEGIN PGP SIGNATURE-----
 Comment: GPGTools - https://gpgtools.org
 
 iQEcBAEBCgAGBQJUL3IzAAoJEFpYErlTRMKOX/0IAJf3fuDw+gOG0U6//qKaWzvo
 S10PPdenTCbzupu/D1SeK+1FdGizxsk8yOm2tcBzivYMmPHMS7mfCBQxfWx92YXp
 A6jqsd6fBEDDeUTfxXaoSdYJUvMltlczTvLkGqqanM3Tz4XYiiQJTokLm8wZx+3m
 FfAaIjjp7uvoMCvNxiTLw6KdyV6IVrqVQAIX9v+QH1V7Hmhjfu3GO32s3vHpFC9X
 2LBGsSyLC5nq5lxQQf0jezHr+Yxgqzi4yhgqF2bxhddDo/ZHxtc5c+Lc8VpPuZhJ
 iyr8fPMJZnpFKbaxPG0S9DM+v2rf5s+2qPN7nXslmLgxjC+5ZIVT0q232Q7DWR0=
 =Or0L
 -----END PGP SIGNATURE-----
 
 --Apple-Mail=_A0E25C25-434F-4E88-BD7D-933E815A64F4--
From: Ronald Garcia <rxg@cs.ubc.ca>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sat, 4 Oct 2014 08:37:35 -0700

 Thanks for both pieces of info Robby!
 
 Ron
 
 On Oct 3, 2014, at 2:39 PM, Robby Findler wrote:
 
 > On Fri, Oct 3, 2014 at 3:30 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 >> 
 >> On Oct 3, 2014, at 12:55 PM, Robby Findler wrote:
 >> 
 >>> I agree that this is not optimal. I feel like there must be a better
 >>> way than making the internal datatype representing images include a
 >>> explicit, different thing that is the identity in that sense. It is
 >>> certainly possible, of course.
 >> 
 >> Just curious:  what's so bad about the internal datatype having an explicit other thing?  Is it that all of the other image code would then need to check for an empty image instead of something uniform?  That does sound kind of like the joy of null pointers :).
 > 
 > Yes, exactly.
 > 
 >>> I'll keep thinking about the problem. Maybe there's another way to
 >>> define beside that will work better.
 >> 
 >> Sure I understand.  BTW, is there any difference between equal? and image=? on images?
 > 
 > Only that image=? checks that it gets images (and isn't in #lang racket).
 > 
 > Robby
 
 
From: Robby Findler <robby@eecs.northwestern.edu>
To: Ronald Garcia <rxg@cs.ubc.ca>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sat, 4 Oct 2014 10:40:44 -0500

 Thanks for pointing out the bug!
 
 Robby
 
 On Sat, Oct 4, 2014 at 10:37 AM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 > Thanks for both pieces of info Robby!
 >
 > Ron
 >
 > On Oct 3, 2014, at 2:39 PM, Robby Findler wrote:
 >
 >> On Fri, Oct 3, 2014 at 3:30 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 >>>
 >>> On Oct 3, 2014, at 12:55 PM, Robby Findler wrote:
 >>>
 >>>> I agree that this is not optimal. I feel like there must be a better
 >>>> way than making the internal datatype representing images include a
 >>>> explicit, different thing that is the identity in that sense. It is
 >>>> certainly possible, of course.
 >>>
 >>> Just curious:  what's so bad about the internal datatype having an explicit other thing?  Is it that all of the other image code would then need to check for an empty image instead of something uniform?  That does sound kind of like the joy of null pointers :).
 >>
 >> Yes, exactly.
 >>
 >>>> I'll keep thinking about the problem. Maybe there's another way to
 >>>> define beside that will work better.
 >>>
 >>> Sure I understand.  BTW, is there any difference between equal? and image=? on images?
 >>
 >> Only that image=? checks that it gets images (and isn't in #lang racket).
 >>
 >> Robby
 >
 
From: Matthias Felleisen <matthias@ccs.neu.edu>
To: Stephen Bloch <bloch@adelphi.edu>
Cc: Ronald Garcia <rxg@cs.ubc.ca>, Robby Findler <robby@eecs.northwestern.edu>,
        bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sat, 4 Oct 2014 20:49:15 -0400

 Catching up late with this thread. I like Stephen's idea a lot. I think adding 
 
  visibly=? 
 
 could help a lot of people and even better, it's sheer presence might warn people that there's more to image representations than visible stuff. 
 
 Indeed, it could be a great point for HtDC -- Matthias
 
 
 
 
 
 On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:
 
 > 
 > On Oct 3, 2014, at 3:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 > 
 >> Okay, I think I'm starting to get it.  And furthermore, having RTFM I see that this is made quite clear there.  But (just to be a pain in the pinkie) is it what you really want?  I had this mental model of empty-image really being the identity object on the "image algebra”
 > 
 > Yes, that’s the way it’s most commonly used.  But there’s no such thing as “the identity object” on an entire algebra, only “the identity object” for a particular operator.  (0 is the identity for addition, 1 for multiplication, true for OR, false for AND, etc.)
 > 
 > In fact, the empty image works pretty well as an identity for a variety of image operators, as long as you only pay attention to what’s visible.  Unfortunately (but necessarily), the image data type also has some invisible fields like baseline and pinhole, and there’s no good way to define operations like “beside” and “above” so that
 > (a) the operation is associative, and
 > (b) the empty image is a perfect identity for it.
 > 
 > I wonder if there should be a “visibly-equal?” function on images that only compares whether they look the same in their present forms.  Note that (visibly-equal? X Y) does NOT imply that X can be substituted for Y in expressions and the results will be visibly-equal?, whereas (image=? X Y) DOES imply that (AFAIK).
 > 
 > 
 > Stephen Bloch
 > sbloch@adelphi.edu
 > GPG key at http://home.adelphi.edu/sbloch/sbloch.pubkey.asc
 > 
 
 
From: Robby Findler <robby@eecs.northwestern.edu>
To: Matthias Felleisen <matthias@ccs.neu.edu>
Cc: Stephen Bloch <bloch@adelphi.edu>, Ronald Garcia <rxg@cs.ubc.ca>,
        bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sat, 4 Oct 2014 20:31:39 -0500

 I think we'd need to figure out how it interacts with check-expect.
 Just an additional equality predicate isn't going to make much
 difference in the day-to-day use of BSL programmers, I don't think.
 
 Robby
 
 On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen <matthias@ccs.neu.edu> wrote:
 >
 > Catching up late with this thread. I like Stephen's idea a lot. I think adding
 >
 >  visibly=?
 >
 > could help a lot of people and even better, it's sheer presence might warn people that there's more to image representations than visible stuff.
 >
 > Indeed, it could be a great point for HtDC -- Matthias
 >
 >
 >
 >
 >
 > On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:
 >
 >>
 >> On Oct 3, 2014, at 3:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 >>
 >>> Okay, I think I'm starting to get it.  And furthermore, having RTFM I see that this is made quite clear there.  But (just to be a pain in the pinkie) is it what you really want?  I had this mental model of empty-image really being the identity object on the "image algebraâ€
 >>
 >> Yes, thatâ€™s the way itâ€™s most commonly used.  But thereâ€™s no such thing as â€œthe identity objectâ€ on an entire algebra, only â€œthe identity objectâ€ for a particular operator.  (0 is the identity for addition, 1 for multiplication, true for OR, false for AND, etc.)
 >>
 >> In fact, the empty image works pretty well as an identity for a variety of image operators, as long as you only pay attention to whatâ€™s visible.  Unfortunately (but necessarily), the image data type also has some invisible fields like baseline and pinhole, and thereâ€™s no good way to define operations like â€œbesideâ€ and â€œaboveâ€ so that
 >> (a) the operation is associative, and
 >> (b) the empty image is a perfect identity for it.
 >>
 >> I wonder if there should be a â€œvisibly-equal?â€ function on images that only compares whether they look the same in their present forms.  Note that (visibly-equal? X Y) does NOT imply that X can be substituted for Y in expressions and the results will be visibly-equal?, whereas (image=? X Y) DOES imply that (AFAIK).
 >>
 >>
 >> Stephen Bloch
 >> sbloch@adelphi.edu
 >> GPG key at http://home.adelphi.edu/sbloch/sbloch.pubkey.asc
 >>
 >
 
From: Matthias Felleisen <matthias@ccs.neu.edu>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: Stephen Bloch <bloch@adelphi.edu>, Ronald Garcia <rxg@cs.ubc.ca>,
        bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sat, 4 Oct 2014 21:47:28 -0400

 Yes, check-expect and friends should probably use visibly=? instead of image=? 
 
 
 
 On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:
 
 > I think we'd need to figure out how it interacts with check-expect.
 > Just an additional equality predicate isn't going to make much
 > difference in the day-to-day use of BSL programmers, I don't think.
 > 
 > Robby
 > 
 > On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen <matthias@ccs.neu.edu> wrote:
 >> 
 >> Catching up late with this thread. I like Stephen's idea a lot. I think adding
 >> 
 >> visibly=?
 >> 
 >> could help a lot of people and even better, it's sheer presence might warn people that there's more to image representations than visible stuff.
 >> 
 >> Indeed, it could be a great point for HtDC -- Matthias
 >> 
 >> 
 >> 
 >> 
 >> 
 >> On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:
 >> 
 >>> 
 >>> On Oct 3, 2014, at 3:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 >>> 
 >>>> Okay, I think I'm starting to get it.  And furthermore, having RTFM I see that this is made quite clear there.  But (just to be a pain in the pinkie) is it what you really want?  I had this mental model of empty-image really being the identity object on the "image algebra”
 >>> 
 >>> Yes, that’s the way it’s most commonly used.  But there’s no such thing as “the identity object” on an entire algebra, only “the identity object” for a particular operator.  (0 is the identity for addition, 1 for multiplication, true for OR, false for AND, etc.)
 >>> 
 >>> In fact, the empty image works pretty well as an identity for a variety of image operators, as long as you only pay attention to what’s visible.  Unfortunately (but necessarily), the image data type also has some invisible fields like baseline and pinhole, and there’s no good way to define operations like “beside” and “above” so that
 >>> (a) the operation is associative, and
 >>> (b) the empty image is a perfect identity for it.
 >>> 
 >>> I wonder if there should be a “visibly-equal?” function on images that only compares whether they look the same in their present forms.  Note that (visibly-equal? X Y) does NOT imply that X can be substituted for Y in expressions and the results will be visibly-equal?, whereas (image=? X Y) DOES imply that (AFAIK).
 >>> 
 >>> 
 >>> Stephen Bloch
 >>> sbloch@adelphi.edu
 >>> GPG key at http://home.adelphi.edu/sbloch/sbloch.pubkey.asc
 >>> 
 >> 
 
 
From: Robby Findler <robby@eecs.northwestern.edu>
To: Matthias Felleisen <matthias@ccs.neu.edu>
Cc: Stephen Bloch <bloch@adelphi.edu>, Ronald Garcia <rxg@cs.ubc.ca>,
        bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sat, 4 Oct 2014 20:53:07 -0500

 --001a11c201c64bb7480504a33a44
 Content-Type: text/plain; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 You mean equal? should ignore the baseline? It cannot ignore the width and
 height, or at least I don't see how it can because it is defined in terms
 of drawing pixels and you need to stop drawing somewhere.
 
 Robby
 
 On Saturday, October 4, 2014, Matthias Felleisen <matthias@ccs.neu.edu>
 wrote:
 
 >
 > Yes, check-expect and friends should probably use visibly=3D? instead of
 > image=3D?
 >
 >
 >
 > On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:
 >
 > > I think we'd need to figure out how it interacts with check-expect.
 > > Just an additional equality predicate isn't going to make much
 > > difference in the day-to-day use of BSL programmers, I don't think.
 > >
 > > Robby
 > >
 > > On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen <matthias@ccs.neu.ed=
 u
 > <javascript:;>> wrote:
 > >>
 > >> Catching up late with this thread. I like Stephen's idea a lot. I thin=
 k
 > adding
 > >>
 > >> visibly=3D?
 > >>
 > >> could help a lot of people and even better, it's sheer presence might
 > warn people that there's more to image representations than visible stuff=
 .
 > >>
 > >> Indeed, it could be a great point for HtDC -- Matthias
 > >>
 > >>
 > >>
 > >>
 > >>
 > >> On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:
 > >>
 > >>>
 > >>> On Oct 3, 2014, at 3:48 PM, Ronald Garcia <rxg@cs.ubc.ca
 > <javascript:;>> wrote:
 > >>>
 > >>>> Okay, I think I'm starting to get it.  And furthermore, having RTFM =
 I
 > see that this is made quite clear there.  But (just to be a pain in the
 > pinkie) is it what you really want?  I had this mental model of empty-ima=
 ge
 > really being the identity object on the "image algebra=E2=80=9D
 > >>>
 > >>> Yes, that=E2=80=99s the way it=E2=80=99s most commonly used.  But the=
 re=E2=80=99s no such
 > thing as =E2=80=9Cthe identity object=E2=80=9D on an entire algebra, only=
  =E2=80=9Cthe identity
 > object=E2=80=9D for a particular operator.  (0 is the identity for additi=
 on, 1 for
 > multiplication, true for OR, false for AND, etc.)
 > >>>
 > >>> In fact, the empty image works pretty well as an identity for a
 > variety of image operators, as long as you only pay attention to what=E2=
 =80=99s
 > visible.  Unfortunately (but necessarily), the image data type also has
 > some invisible fields like baseline and pinhole, and there=E2=80=99s no g=
 ood way to
 > define operations like =E2=80=9Cbeside=E2=80=9D and =E2=80=9Cabove=E2=80=
 =9D so that
 > >>> (a) the operation is associative, and
 > >>> (b) the empty image is a perfect identity for it.
 > >>>
 > >>> I wonder if there should be a =E2=80=9Cvisibly-equal?=E2=80=9D functi=
 on on images that
 > only compares whether they look the same in their present forms.  Note th=
 at
 > (visibly-equal? X Y) does NOT imply that X can be substituted for Y in
 > expressions and the results will be visibly-equal?, whereas (image=3D? X =
 Y)
 > DOES imply that (AFAIK).
 > >>>
 > >>>
 > >>> Stephen Bloch
 > >>> sbloch@adelphi.edu <javascript:;>
 > >>> GPG key at http://home.adelphi.edu/sbloch/sbloch.pubkey.asc
 > >>>
 > >>
 >
 >
 
 --001a11c201c64bb7480504a33a44
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 You mean equal? should ignore the baseline? It cannot ignore the width and =
 height, or at least I don&#39;t see how it can because it is defined in ter=
 ms of drawing pixels and you need to stop drawing somewhere.=C2=A0<div><br>=
 </div><div>Robby<span></span><br><br>On Saturday, October 4, 2014, Matthias=
  Felleisen &lt;<a href=3D"mailto:matthias@ccs.neu.edu">matthias@ccs.neu.edu=
 </a>&gt; wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 =
 .8ex;border-left:1px #ccc solid;padding-left:1ex"><br>
 Yes, check-expect and friends should probably use visibly=3D? instead of im=
 age=3D?<br>
 <br>
 <br>
 <br>
 On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:<br>
 <br>
 &gt; I think we&#39;d need to figure out how it interacts with check-expect=
 .<br>
 &gt; Just an additional equality predicate isn&#39;t going to make much<br>
 &gt; difference in the day-to-day use of BSL programmers, I don&#39;t think=
 .<br>
 &gt;<br>
 &gt; Robby<br>
 &gt;<br>
 &gt; On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen &lt;<a href=3D"java=
 script:;" onclick=3D"_e(event, &#39;cvml&#39;, &#39;matthias@ccs.neu.edu&#3=
 9;)">matthias@ccs.neu.edu</a>&gt; wrote:<br>
 &gt;&gt;<br>
 &gt;&gt; Catching up late with this thread. I like Stephen&#39;s idea a lot=
 . I think adding<br>
 &gt;&gt;<br>
 &gt;&gt; visibly=3D?<br>
 &gt;&gt;<br>
 &gt;&gt; could help a lot of people and even better, it&#39;s sheer presenc=
 e might warn people that there&#39;s more to image representations than vis=
 ible stuff.<br>
 &gt;&gt;<br>
 &gt;&gt; Indeed, it could be a great point for HtDC -- Matthias<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt; On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:<br>
 &gt;&gt;<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; On Oct 3, 2014, at 3:48 PM, Ronald Garcia &lt;<a href=3D"javas=
 cript:;" onclick=3D"_e(event, &#39;cvml&#39;, &#39;rxg@cs.ubc.ca&#39;)">rxg=
 @cs.ubc.ca</a>&gt; wrote:<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt; Okay, I think I&#39;m starting to get it.=C2=A0 And furthe=
 rmore, having RTFM I see that this is made quite clear there.=C2=A0 But (ju=
 st to be a pain in the pinkie) is it what you really want?=C2=A0 I had this=
  mental model of empty-image really being the identity object on the &quot;=
 image algebra=E2=80=9D<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; Yes, that=E2=80=99s the way it=E2=80=99s most commonly used.=
 =C2=A0 But there=E2=80=99s no such thing as =E2=80=9Cthe identity object=E2=
 =80=9D on an entire algebra, only =E2=80=9Cthe identity object=E2=80=9D for=
  a particular operator.=C2=A0 (0 is the identity for addition, 1 for multip=
 lication, true for OR, false for AND, etc.)<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; In fact, the empty image works pretty well as an identity for =
 a variety of image operators, as long as you only pay attention to what=E2=
 =80=99s visible.=C2=A0 Unfortunately (but necessarily), the image data type=
  also has some invisible fields like baseline and pinhole, and there=E2=80=
 =99s no good way to define operations like =E2=80=9Cbeside=E2=80=9D and =E2=
 =80=9Cabove=E2=80=9D so that<br>
 &gt;&gt;&gt; (a) the operation is associative, and<br>
 &gt;&gt;&gt; (b) the empty image is a perfect identity for it.<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; I wonder if there should be a =E2=80=9Cvisibly-equal?=E2=80=9D=
  function on images that only compares whether they look the same in their =
 present forms.=C2=A0 Note that (visibly-equal? X Y) does NOT imply that X c=
 an be substituted for Y in expressions and the results will be visibly-equa=
 l?, whereas (image=3D? X Y) DOES imply that (AFAIK).<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; Stephen Bloch<br>
 &gt;&gt;&gt; <a href=3D"javascript:;" onclick=3D"_e(event, &#39;cvml&#39;, =
 &#39;sbloch@adelphi.edu&#39;)">sbloch@adelphi.edu</a><br>
 &gt;&gt;&gt; GPG key at <a href=3D"http://home.adelphi.edu/sbloch/sbloch.pu=
 bkey.asc" target=3D"_blank">http://home.adelphi.edu/sbloch/sbloch.pubkey.as=
 c</a><br>
 &gt;&gt;&gt;<br>
 &gt;&gt;<br>
 <br>
 </blockquote></div>
 
 --001a11c201c64bb7480504a33a44--
From: Ron Garcia <rxg@cs.ubc.ca>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: Matthias Felleisen <matthias@ccs.neu.edu>,
        Stephen Bloch <bloch@adelphi.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sat, 4 Oct 2014 19:00:10 -0700

 --Apple-Mail=_8B42EEC3-40ED-4F4F-9087-76BB61E7F71C
 Content-Transfer-Encoding: quoted-printable
 Content-Type: text/plain;
 	charset=windows-1252
 
 
 Does equal? imply observational equivalence in BSL?  If it does, then =
 I'm guessing that equal? should not ignore baseline.
 
 On 2014-10-04, at 6:53 PM, Robby Findler <robby@eecs.northwestern.edu> =
 wrote:
 
 > You mean equal? should ignore the baseline? It cannot ignore the width =
 and height, or at least I don't see how it can because it is defined in =
 terms of drawing pixels and you need to stop drawing somewhere.=20
 >=20
 > Robby
 >=20
 > On Saturday, October 4, 2014, Matthias Felleisen =
 <matthias@ccs.neu.edu> wrote:
 >=20
 > Yes, check-expect and friends should probably use visibly=3D? instead =
 of image=3D?
 >=20
 >=20
 >=20
 > On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:
 >=20
 > > I think we'd need to figure out how it interacts with check-expect.
 > > Just an additional equality predicate isn't going to make much
 > > difference in the day-to-day use of BSL programmers, I don't think.
 > >
 > > Robby
 > >
 > > On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen =
 <matthias@ccs.neu.edu> wrote:
 > >>
 > >> Catching up late with this thread. I like Stephen's idea a lot. I =
 think adding
 > >>
 > >> visibly=3D?
 > >>
 > >> could help a lot of people and even better, it's sheer presence =
 might warn people that there's more to image representations than =
 visible stuff.
 > >>
 > >> Indeed, it could be a great point for HtDC -- Matthias
 > >>
 > >>
 > >>
 > >>
 > >>
 > >> On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:
 > >>
 > >>>
 > >>> On Oct 3, 2014, at 3:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 > >>>
 > >>>> Okay, I think I'm starting to get it.  And furthermore, having =
 RTFM I see that this is made quite clear there.  But (just to be a pain =
 in the pinkie) is it what you really want?  I had this mental model of =
 empty-image really being the identity object on the "image algebra=94
 > >>>
 > >>> Yes, that=92s the way it=92s most commonly used.  But there=92s no =
 such thing as =93the identity object=94 on an entire algebra, only =93the =
 identity object=94 for a particular operator.  (0 is the identity for =
 addition, 1 for multiplication, true for OR, false for AND, etc.)
 > >>>
 > >>> In fact, the empty image works pretty well as an identity for a =
 variety of image operators, as long as you only pay attention to what=92s =
 visible.  Unfortunately (but necessarily), the image data type also has =
 some invisible fields like baseline and pinhole, and there=92s no good =
 way to define operations like =93beside=94 and =93above=94 so that
 > >>> (a) the operation is associative, and
 > >>> (b) the empty image is a perfect identity for it.
 > >>>
 > >>> I wonder if there should be a =93visibly-equal?=94 function on =
 images that only compares whether they look the same in their present =
 forms.  Note that (visibly-equal? X Y) does NOT imply that X can be =
 substituted for Y in expressions and the results will be visibly-equal?, =
 whereas (image=3D? X Y) DOES imply that (AFAIK).
 > >>>
 > >>>
 > >>> Stephen Bloch
 > >>> sbloch@adelphi.edu
 > >>> GPG key at http://home.adelphi.edu/sbloch/sbloch.pubkey.asc
 > >>>
 > >>
 >=20
 
 
 --Apple-Mail=_8B42EEC3-40ED-4F4F-9087-76BB61E7F71C
 Content-Transfer-Encoding: quoted-printable
 Content-Type: text/html;
 	charset=windows-1252
 
 <html><head><meta http-equiv=3D"Content-Type" content=3D"text/html =
 charset=3Dwindows-1252"></head><body style=3D"word-wrap: break-word; =
 -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; =
 "><div><br></div>Does equal? imply observational equivalence in BSL? =
 &nbsp;If it does, then I'm guessing that equal? should not ignore =
 baseline.<div><br><div><div>On 2014-10-04, at 6:53 PM, Robby Findler =
 &lt;<a =
 href=3D"mailto:robby@eecs.northwestern.edu">robby@eecs.northwestern.edu</a=
 >&gt; wrote:</div><br class=3D"Apple-interchange-newline"><blockquote =
 type=3D"cite">You mean equal? should ignore the baseline? It cannot =
 ignore the width and height, or at least I don't see how it can because =
 it is defined in terms of drawing pixels and you need to stop drawing =
 somewhere.&nbsp;<div><br></div><div>Robby<span></span><br><br>On =
 Saturday, October 4, 2014, Matthias Felleisen &lt;<a =
 href=3D"mailto:matthias@ccs.neu.edu">matthias@ccs.neu.edu</a>&gt; =
 wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 =
 .8ex;border-left:1px #ccc solid;padding-left:1ex"><br>
 Yes, check-expect and friends should probably use visibly=3D? instead of =
 image=3D?<br>
 <br>
 <br>
 <br>
 On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:<br>
 <br>
 &gt; I think we'd need to figure out how it interacts with =
 check-expect.<br>
 &gt; Just an additional equality predicate isn't going to make much<br>
 &gt; difference in the day-to-day use of BSL programmers, I don't =
 think.<br>
 &gt;<br>
 &gt; Robby<br>
 &gt;<br>
 &gt; On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen &lt;<a =
 href=3D"javascript:;" onclick=3D"_e(event, 'cvml', =
 'matthias@ccs.neu.edu')">matthias@ccs.neu.edu</a>&gt; wrote:<br>
 &gt;&gt;<br>
 &gt;&gt; Catching up late with this thread. I like Stephen's idea a lot. =
 I think adding<br>
 &gt;&gt;<br>
 &gt;&gt; visibly=3D?<br>
 &gt;&gt;<br>
 &gt;&gt; could help a lot of people and even better, it's sheer presence =
 might warn people that there's more to image representations than =
 visible stuff.<br>
 &gt;&gt;<br>
 &gt;&gt; Indeed, it could be a great point for HtDC -- Matthias<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt; On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:<br>
 &gt;&gt;<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; On Oct 3, 2014, at 3:48 PM, Ronald Garcia &lt;<a =
 href=3D"javascript:;" onclick=3D"_e(event, 'cvml', =
 'rxg@cs.ubc.ca')">rxg@cs.ubc.ca</a>&gt; wrote:<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt; Okay, I think I'm starting to get it.&nbsp; And =
 furthermore, having RTFM I see that this is made quite clear =
 there.&nbsp; But (just to be a pain in the pinkie) is it what you really =
 want?&nbsp; I had this mental model of empty-image really being the =
 identity object on the "image algebra=94<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; Yes, that=92s the way it=92s most commonly used.&nbsp; But =
 there=92s no such thing as =93the identity object=94 on an entire =
 algebra, only =93the identity object=94 for a particular operator.&nbsp; =
 (0 is the identity for addition, 1 for multiplication, true for OR, =
 false for AND, etc.)<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; In fact, the empty image works pretty well as an identity =
 for a variety of image operators, as long as you only pay attention to =
 what=92s visible.&nbsp; Unfortunately (but necessarily), the image data =
 type also has some invisible fields like baseline and pinhole, and =
 there=92s no good way to define operations like =93beside=94 and =93above=94=
  so that<br>
 &gt;&gt;&gt; (a) the operation is associative, and<br>
 &gt;&gt;&gt; (b) the empty image is a perfect identity for it.<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; I wonder if there should be a =93visibly-equal?=94 function =
 on images that only compares whether they look the same in their present =
 forms.&nbsp; Note that (visibly-equal? X Y) does NOT imply that X can be =
 substituted for Y in expressions and the results will be visibly-equal?, =
 whereas (image=3D? X Y) DOES imply that (AFAIK).<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; Stephen Bloch<br>
 &gt;&gt;&gt; <a href=3D"javascript:;" onclick=3D"_e(event, 'cvml', =
 'sbloch@adelphi.edu')">sbloch@adelphi.edu</a><br>
 &gt;&gt;&gt; GPG key at <a =
 href=3D"http://home.adelphi.edu/sbloch/sbloch.pubkey.asc" =
 target=3D"_blank">http://home.adelphi.edu/sbloch/sbloch.pubkey.asc</a><br>=
 
 &gt;&gt;&gt;<br>
 &gt;&gt;<br>
 <br>
 </blockquote></div>
 </blockquote></div><br></div></body></html>=
 
 --Apple-Mail=_8B42EEC3-40ED-4F4F-9087-76BB61E7F71C--
From: Robby Findler <robby@eecs.northwestern.edu>
To: Ron Garcia <rxg@cs.ubc.ca>
Cc: Matthias Felleisen <matthias@ccs.neu.edu>,
        Stephen Bloch <bloch@adelphi.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sat, 4 Oct 2014 21:14:55 -0500

 --001a11c2fad03eb5550504a388fb
 Content-Type: text/plain; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 No. It means they draw the same inside their bounding box (using pixel
 equality) and have the same baseline (and thus the same bounding box).
 
 So if you scale two shapes small enough they will be equal but they will
 scale back up again to look different.
 
 Robby
 
 On Saturday, October 4, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 
 >
 > Does equal? imply observational equivalence in BSL?  If it does, then I'm
 > guessing that equal? should not ignore baseline.
 >
 > On 2014-10-04, at 6:53 PM, Robby Findler <robby@eecs.northwestern.edu
 > <javascript:_e(%7B%7D,'cvml','robby@eecs.northwestern.edu');>> wrote:
 >
 > You mean equal? should ignore the baseline? It cannot ignore the width an=
 d
 > height, or at least I don't see how it can because it is defined in terms
 > of drawing pixels and you need to stop drawing somewhere.
 >
 > Robby
 >
 > On Saturday, October 4, 2014, Matthias Felleisen <matthias@ccs.neu.edu
 > <javascript:_e(%7B%7D,'cvml','matthias@ccs.neu.edu');>> wrote:
 >
 >>
 >> Yes, check-expect and friends should probably use visibly=3D? instead of
 >> image=3D?
 >>
 >>
 >>
 >> On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:
 >>
 >> > I think we'd need to figure out how it interacts with check-expect.
 >> > Just an additional equality predicate isn't going to make much
 >> > difference in the day-to-day use of BSL programmers, I don't think.
 >> >
 >> > Robby
 >> >
 >> > On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen <
 >> matthias@ccs.neu.edu> wrote:
 >> >>
 >> >> Catching up late with this thread. I like Stephen's idea a lot. I
 >> think adding
 >> >>
 >> >> visibly=3D?
 >> >>
 >> >> could help a lot of people and even better, it's sheer presence might
 >> warn people that there's more to image representations than visible stuf=
 f.
 >> >>
 >> >> Indeed, it could be a great point for HtDC -- Matthias
 >> >>
 >> >>
 >> >>
 >> >>
 >> >>
 >> >> On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:
 >> >>
 >> >>>
 >> >>> On Oct 3, 2014, at 3:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 >> >>>
 >> >>>> Okay, I think I'm starting to get it.  And furthermore, having RTFM
 >> I see that this is made quite clear there.  But (just to be a pain in th=
 e
 >> pinkie) is it what you really want?  I had this mental model of empty-im=
 age
 >> really being the identity object on the "image algebra=E2=80=9D
 >> >>>
 >> >>> Yes, that=E2=80=99s the way it=E2=80=99s most commonly used.  But th=
 ere=E2=80=99s no such
 >> thing as =E2=80=9Cthe identity object=E2=80=9D on an entire algebra, onl=
 y =E2=80=9Cthe identity
 >> object=E2=80=9D for a particular operator.  (0 is the identity for addit=
 ion, 1 for
 >> multiplication, true for OR, false for AND, etc.)
 >> >>>
 >> >>> In fact, the empty image works pretty well as an identity for a
 >> variety of image operators, as long as you only pay attention to what=E2=
 =80=99s
 >> visible.  Unfortunately (but necessarily), the image data type also has
 >> some invisible fields like baseline and pinhole, and there=E2=80=99s no =
 good way to
 >> define operations like =E2=80=9Cbeside=E2=80=9D and =E2=80=9Cabove=E2=80=
 =9D so that
 >> >>> (a) the operation is associative, and
 >> >>> (b) the empty image is a perfect identity for it.
 >> >>>
 >> >>> I wonder if there should be a =E2=80=9Cvisibly-equal?=E2=80=9D funct=
 ion on images
 >> that only compares whether they look the same in their present forms.  N=
 ote
 >> that (visibly-equal? X Y) does NOT imply that X can be substituted for Y=
  in
 >> expressions and the results will be visibly-equal?, whereas (image=3D? X=
  Y)
 >> DOES imply that (AFAIK).
 >> >>>
 >> >>>
 >> >>> Stephen Bloch
 >> >>> sbloch@adelphi.edu
 >> >>> GPG key at http://home.adelphi.edu/sbloch/sbloch.pubkey.asc
 >> >>>
 >> >>
 >>
 >>
 >
 
 --001a11c2fad03eb5550504a388fb
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 No. It means they draw the same inside their bounding box (using pixel equa=
 lity) and have the same baseline (and thus the same bounding box).<div><br>=
 </div><div>So if you scale two shapes small enough they will be equal but t=
 hey=C2=A0<span></span>will scale back up again to look different.=C2=A0<br>=
 <div><br></div><div>Robby<br><br>On Saturday, October 4, 2014, Ron Garcia &=
 lt;<a href=3D"mailto:rxg@cs.ubc.ca">rxg@cs.ubc.ca</a>&gt; wrote:<br><blockq=
 uote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc =
 solid;padding-left:1ex"><div style=3D"word-wrap:break-word"><div><br></div>=
 Does equal? imply observational equivalence in BSL?=C2=A0 If it does, then =
 I&#39;m guessing that equal? should not ignore baseline.<div><br><div><div>=
 On 2014-10-04, at 6:53 PM, Robby Findler &lt;<a href=3D"javascript:_e(%7B%7=
 D,&#39;cvml&#39;,&#39;robby@eecs.northwestern.edu&#39;);" target=3D"_blank"=
 >robby@eecs.northwestern.edu</a>&gt; wrote:</div><br><blockquote type=3D"ci=
 te">You mean equal? should ignore the baseline? It cannot ignore the width =
 and height, or at least I don&#39;t see how it can because it is defined in=
  terms of drawing pixels and you need to stop drawing somewhere.=C2=A0<div>=
 <br></div><div>Robby<span></span><br><br>On Saturday, October 4, 2014, Matt=
 hias Felleisen &lt;<a href=3D"javascript:_e(%7B%7D,&#39;cvml&#39;,&#39;matt=
 hias@ccs.neu.edu&#39;);" target=3D"_blank">matthias@ccs.neu.edu</a>&gt; wro=
 te:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-=
 left:1px #ccc solid;padding-left:1ex"><br>
 Yes, check-expect and friends should probably use visibly=3D? instead of im=
 age=3D?<br>
 <br>
 <br>
 <br>
 On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:<br>
 <br>
 &gt; I think we&#39;d need to figure out how it interacts with check-expect=
 .<br>
 &gt; Just an additional equality predicate isn&#39;t going to make much<br>
 &gt; difference in the day-to-day use of BSL programmers, I don&#39;t think=
 .<br>
 &gt;<br>
 &gt; Robby<br>
 &gt;<br>
 &gt; On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen &lt;<a>matthias@ccs=
 .neu.edu</a>&gt; wrote:<br>
 &gt;&gt;<br>
 &gt;&gt; Catching up late with this thread. I like Stephen&#39;s idea a lot=
 . I think adding<br>
 &gt;&gt;<br>
 &gt;&gt; visibly=3D?<br>
 &gt;&gt;<br>
 &gt;&gt; could help a lot of people and even better, it&#39;s sheer presenc=
 e might warn people that there&#39;s more to image representations than vis=
 ible stuff.<br>
 &gt;&gt;<br>
 &gt;&gt; Indeed, it could be a great point for HtDC -- Matthias<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt; On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:<br>
 &gt;&gt;<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; On Oct 3, 2014, at 3:48 PM, Ronald Garcia &lt;<a>rxg@cs.ubc.ca=
 </a>&gt; wrote:<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt; Okay, I think I&#39;m starting to get it.=C2=A0 And furthe=
 rmore, having RTFM I see that this is made quite clear there.=C2=A0 But (ju=
 st to be a pain in the pinkie) is it what you really want?=C2=A0 I had this=
  mental model of empty-image really being the identity object on the &quot;=
 image algebra=E2=80=9D<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; Yes, that=E2=80=99s the way it=E2=80=99s most commonly used.=
 =C2=A0 But there=E2=80=99s no such thing as =E2=80=9Cthe identity object=E2=
 =80=9D on an entire algebra, only =E2=80=9Cthe identity object=E2=80=9D for=
  a particular operator.=C2=A0 (0 is the identity for addition, 1 for multip=
 lication, true for OR, false for AND, etc.)<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; In fact, the empty image works pretty well as an identity for =
 a variety of image operators, as long as you only pay attention to what=E2=
 =80=99s visible.=C2=A0 Unfortunately (but necessarily), the image data type=
  also has some invisible fields like baseline and pinhole, and there=E2=80=
 =99s no good way to define operations like =E2=80=9Cbeside=E2=80=9D and =E2=
 =80=9Cabove=E2=80=9D so that<br>
 &gt;&gt;&gt; (a) the operation is associative, and<br>
 &gt;&gt;&gt; (b) the empty image is a perfect identity for it.<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; I wonder if there should be a =E2=80=9Cvisibly-equal?=E2=80=9D=
  function on images that only compares whether they look the same in their =
 present forms.=C2=A0 Note that (visibly-equal? X Y) does NOT imply that X c=
 an be substituted for Y in expressions and the results will be visibly-equa=
 l?, whereas (image=3D? X Y) DOES imply that (AFAIK).<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; Stephen Bloch<br>
 &gt;&gt;&gt; <a>sbloch@adelphi.edu</a><br>
 &gt;&gt;&gt; GPG key at <a href=3D"http://home.adelphi.edu/sbloch/sbloch.pu=
 bkey.asc" target=3D"_blank">http://home.adelphi.edu/sbloch/sbloch.pubkey.as=
 c</a><br>
 &gt;&gt;&gt;<br>
 &gt;&gt;<br>
 <br>
 </blockquote></div>
 </blockquote></div><br></div></div></blockquote></div></div>
 
 --001a11c2fad03eb5550504a388fb--
From: Robby Findler <robby@eecs.northwestern.edu>
To: Ron Garcia <rxg@cs.ubc.ca>
Cc: Matthias Felleisen <matthias@ccs.neu.edu>,
        Stephen Bloch <bloch@adelphi.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sat, 4 Oct 2014 22:40:37 -0500

 Oh, and it also checks that either they both don't have pinholes or,
 if they do, that the pinholes are in the same places.
 
 Robby
 
 On Sat, Oct 4, 2014 at 9:14 PM, Robby Findler
 <robby@eecs.northwestern.edu> wrote:
 > No. It means they draw the same inside their bounding box (using pixel
 > equality) and have the same baseline (and thus the same bounding box).
 >
 > So if you scale two shapes small enough they will be equal but they will
 > scale back up again to look different.
 >
 > Robby
 >
 >
 > On Saturday, October 4, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 >>
 >>
 >> Does equal? imply observational equivalence in BSL?  If it does, then I'm
 >> guessing that equal? should not ignore baseline.
 >>
 >> On 2014-10-04, at 6:53 PM, Robby Findler <robby@eecs.northwestern.edu>
 >> wrote:
 >>
 >> You mean equal? should ignore the baseline? It cannot ignore the width and
 >> height, or at least I don't see how it can because it is defined in terms of
 >> drawing pixels and you need to stop drawing somewhere.
 >>
 >> Robby
 >>
 >> On Saturday, October 4, 2014, Matthias Felleisen <matthias@ccs.neu.edu>
 >> wrote:
 >>>
 >>>
 >>> Yes, check-expect and friends should probably use visibly=? instead of
 >>> image=?
 >>>
 >>>
 >>>
 >>> On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:
 >>>
 >>> > I think we'd need to figure out how it interacts with check-expect.
 >>> > Just an additional equality predicate isn't going to make much
 >>> > difference in the day-to-day use of BSL programmers, I don't think.
 >>> >
 >>> > Robby
 >>> >
 >>> > On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen
 >>> > <matthias@ccs.neu.edu> wrote:
 >>> >>
 >>> >> Catching up late with this thread. I like Stephen's idea a lot. I
 >>> >> think adding
 >>> >>
 >>> >> visibly=?
 >>> >>
 >>> >> could help a lot of people and even better, it's sheer presence might
 >>> >> warn people that there's more to image representations than visible stuff.
 >>> >>
 >>> >> Indeed, it could be a great point for HtDC -- Matthias
 >>> >>
 >>> >>
 >>> >>
 >>> >>
 >>> >>
 >>> >> On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:
 >>> >>
 >>> >>>
 >>> >>> On Oct 3, 2014, at 3:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 >>> >>>
 >>> >>>> Okay, I think I'm starting to get it.  And furthermore, having RTFM
 >>> >>>> I see that this is made quite clear there.  But (just to be a pain in the
 >>> >>>> pinkie) is it what you really want?  I had this mental model of empty-image
 >>> >>>> really being the identity object on the "image algebraâ€
 >>> >>>
 >>> >>> Yes, thatâ€™s the way itâ€™s most commonly used.  But thereâ€™s no such
 >>> >>> thing as â€œthe identity objectâ€ on an entire algebra, only â€œthe identity
 >>> >>> objectâ€ for a particular operator.  (0 is the identity for addition, 1 for
 >>> >>> multiplication, true for OR, false for AND, etc.)
 >>> >>>
 >>> >>> In fact, the empty image works pretty well as an identity for a
 >>> >>> variety of image operators, as long as you only pay attention to whatâ€™s
 >>> >>> visible.  Unfortunately (but necessarily), the image data type also has some
 >>> >>> invisible fields like baseline and pinhole, and thereâ€™s no good way to
 >>> >>> define operations like â€œbesideâ€ and â€œaboveâ€ so that
 >>> >>> (a) the operation is associative, and
 >>> >>> (b) the empty image is a perfect identity for it.
 >>> >>>
 >>> >>> I wonder if there should be a â€œvisibly-equal?â€ function on images
 >>> >>> that only compares whether they look the same in their present forms.  Note
 >>> >>> that (visibly-equal? X Y) does NOT imply that X can be substituted for Y in
 >>> >>> expressions and the results will be visibly-equal?, whereas (image=? X Y)
 >>> >>> DOES imply that (AFAIK).
 >>> >>>
 >>> >>>
 >>> >>> Stephen Bloch
 >>> >>> sbloch@adelphi.edu
 >>> >>> GPG key at http://home.adelphi.edu/sbloch/sbloch.pubkey.asc
 >>> >>>
 >>> >>
 >>>
 >>
 >
 

----------
A commit by robby@racket-lang.org was marked as relevant
  http://git.racket-lang.org/plt/commit/0c8834d567
  | make 2htdp/image's equality function ignore baselines
  | 
  | also some Rackety and spelling
  | 
  | related to PR 14760

From: Robby Findler <robby@eecs.northwestern.edu>
To: Ron Garcia <rxg@cs.ubc.ca>
Cc: Matthias Felleisen <matthias@ccs.neu.edu>,
        Stephen Bloch <bloch@adelphi.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sun, 5 Oct 2014 07:18:46 -0500

 Okay, I've pushed a change that makes equal? ignore the baselines.
 Lets see how it goes.
 
 Robby
 
 
 On Sat, Oct 4, 2014 at 10:40 PM, Robby Findler
 <robby@eecs.northwestern.edu> wrote:
 > Oh, and it also checks that either they both don't have pinholes or,
 > if they do, that the pinholes are in the same places.
 >
 > Robby
 >
 > On Sat, Oct 4, 2014 at 9:14 PM, Robby Findler
 > <robby@eecs.northwestern.edu> wrote:
 >> No. It means they draw the same inside their bounding box (using pixel
 >> equality) and have the same baseline (and thus the same bounding box).
 >>
 >> So if you scale two shapes small enough they will be equal but they will
 >> scale back up again to look different.
 >>
 >> Robby
 >>
 >>
 >> On Saturday, October 4, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 >>>
 >>>
 >>> Does equal? imply observational equivalence in BSL?  If it does, then I'm
 >>> guessing that equal? should not ignore baseline.
 >>>
 >>> On 2014-10-04, at 6:53 PM, Robby Findler <robby@eecs.northwestern.edu>
 >>> wrote:
 >>>
 >>> You mean equal? should ignore the baseline? It cannot ignore the width and
 >>> height, or at least I don't see how it can because it is defined in terms of
 >>> drawing pixels and you need to stop drawing somewhere.
 >>>
 >>> Robby
 >>>
 >>> On Saturday, October 4, 2014, Matthias Felleisen <matthias@ccs.neu.edu>
 >>> wrote:
 >>>>
 >>>>
 >>>> Yes, check-expect and friends should probably use visibly=? instead of
 >>>> image=?
 >>>>
 >>>>
 >>>>
 >>>> On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:
 >>>>
 >>>> > I think we'd need to figure out how it interacts with check-expect.
 >>>> > Just an additional equality predicate isn't going to make much
 >>>> > difference in the day-to-day use of BSL programmers, I don't think.
 >>>> >
 >>>> > Robby
 >>>> >
 >>>> > On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen
 >>>> > <matthias@ccs.neu.edu> wrote:
 >>>> >>
 >>>> >> Catching up late with this thread. I like Stephen's idea a lot. I
 >>>> >> think adding
 >>>> >>
 >>>> >> visibly=?
 >>>> >>
 >>>> >> could help a lot of people and even better, it's sheer presence might
 >>>> >> warn people that there's more to image representations than visible stuff.
 >>>> >>
 >>>> >> Indeed, it could be a great point for HtDC -- Matthias
 >>>> >>
 >>>> >>
 >>>> >>
 >>>> >>
 >>>> >>
 >>>> >> On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:
 >>>> >>
 >>>> >>>
 >>>> >>> On Oct 3, 2014, at 3:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 >>>> >>>
 >>>> >>>> Okay, I think I'm starting to get it.  And furthermore, having RTFM
 >>>> >>>> I see that this is made quite clear there.  But (just to be a pain in the
 >>>> >>>> pinkie) is it what you really want?  I had this mental model of empty-image
 >>>> >>>> really being the identity object on the "image algebraâ€
 >>>> >>>
 >>>> >>> Yes, thatâ€™s the way itâ€™s most commonly used.  But thereâ€™s no such
 >>>> >>> thing as â€œthe identity objectâ€ on an entire algebra, only â€œthe identity
 >>>> >>> objectâ€ for a particular operator.  (0 is the identity for addition, 1 for
 >>>> >>> multiplication, true for OR, false for AND, etc.)
 >>>> >>>
 >>>> >>> In fact, the empty image works pretty well as an identity for a
 >>>> >>> variety of image operators, as long as you only pay attention to whatâ€™s
 >>>> >>> visible.  Unfortunately (but necessarily), the image data type also has some
 >>>> >>> invisible fields like baseline and pinhole, and thereâ€™s no good way to
 >>>> >>> define operations like â€œbesideâ€ and â€œaboveâ€ so that
 >>>> >>> (a) the operation is associative, and
 >>>> >>> (b) the empty image is a perfect identity for it.
 >>>> >>>
 >>>> >>> I wonder if there should be a â€œvisibly-equal?â€ function on images
 >>>> >>> that only compares whether they look the same in their present forms.  Note
 >>>> >>> that (visibly-equal? X Y) does NOT imply that X can be substituted for Y in
 >>>> >>> expressions and the results will be visibly-equal?, whereas (image=? X Y)
 >>>> >>> DOES imply that (AFAIK).
 >>>> >>>
 >>>> >>>
 >>>> >>> Stephen Bloch
 >>>> >>> sbloch@adelphi.edu
 >>>> >>> GPG key at http://home.adelphi.edu/sbloch/sbloch.pubkey.asc
 >>>> >>>
 >>>> >>
 >>>>
 >>>
 >>
 
From: Ron Garcia <rxg@cs.ubc.ca>
To: Stephen Bloch <bloch@adelphi.edu>
Cc: Robby Findler <robby@eecs.northwestern.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sun, 5 Oct 2014 07:17:20 -0700

 On 2014-10-03, at 9:06 PM, Stephen Bloch <bloch@adelphi.edu> wrote:
 
 > 
 > On Oct 3, 2014, at 3:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 > 
 >> Okay, I think I'm starting to get it.  And furthermore, having RTFM I see that this is made quite clear there.  But (just to be a pain in the pinkie) is it what you really want?  I had this mental model of empty-image really being the identity object on the "image algebra”
 > 
 > Yes, that’s the way it’s most commonly used.  But there’s no such thing as “the identity object” on an entire algebra, only “the identity object” for a particular operator.  (0 is the identity for addition, 1 for multiplication, true for OR, false for AND, etc.)
 
 There's nothing wrong with having an algebra where a single object is identity for multiple operations.  That's an algebra design issue: it just so happens that the classic algebras from mathematics don't have this property.  It's analogous to having an operator where the left- and right-identity are the same (as in your examples above) but extended to multiple operations with the same signature.
 
 > 
 > In fact, the empty image works pretty well as an identity for a variety of image operators, as long as you only pay attention to what’s visible.  Unfortunately (but necessarily), the image data type also has some invisible fields like baseline and pinhole, and there’s no good way to define operations like “beside” and “above” so that
 > (a) the operation is associative, and
 > (b) the empty image is a perfect identity for it.
 
 I can believe that, but I thought that Robby had come up with a new approach to baseline calculation that works for beside?
 
 > 
 > I wonder if there should be a “visibly-equal?” function on images that only compares whether they look the same in their present forms.  Note that (visibly-equal? X Y) does NOT imply that X can be substituted for Y in expressions and the results will be visibly-equal?, whereas (image=? X Y) DOES imply that (AFAIK).
 
 I see what you mean.  This does give me a bit of pause though, at least for the teaching languages.   I worry about getting students confused about the various possible equivalences early on.   How would this distinction get worked into the curriculum (e.g. check-expects)?
 
 Ron
 
 
 > 
 > 
 > Stephen Bloch
 > sbloch@adelphi.edu
 > GPG key at http://home.adelphi.edu/sbloch/sbloch.pubkey.asc
 > 
 
 
From: Ron Garcia <rxg@cs.ubc.ca>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: Matthias Felleisen <matthias@ccs.neu.edu>,
        Stephen Bloch <bloch@adelphi.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sun, 5 Oct 2014 07:22:10 -0700

 --Apple-Mail=_42FA53D4-21AE-4051-8246-16A1F945A62C
 Content-Transfer-Encoding: quoted-printable
 Content-Type: text/plain;
 	charset=windows-1252
 
 Oh!  Are there other objects in BSL besides images for which equal? does =
 not imply observational equality?  I had been making that wrong =
 assumption for a while now.
 
 
 On 2014-10-04, at 7:14 PM, Robby Findler <robby@eecs.northwestern.edu> =
 wrote:
 
 > No. It means they draw the same inside their bounding box (using pixel =
 equality) and have the same baseline (and thus the same bounding box).
 >=20
 > So if you scale two shapes small enough they will be equal but they =
 will scale back up again to look different.=20
 >=20
 > Robby
 >=20
 > On Saturday, October 4, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 >=20
 > Does equal? imply observational equivalence in BSL?  If it does, then =
 I'm guessing that equal? should not ignore baseline.
 >=20
 > On 2014-10-04, at 6:53 PM, Robby Findler <robby@eecs.northwestern.edu> =
 wrote:
 >=20
 >> You mean equal? should ignore the baseline? It cannot ignore the =
 width and height, or at least I don't see how it can because it is =
 defined in terms of drawing pixels and you need to stop drawing =
 somewhere.=20
 >>=20
 >> Robby
 >>=20
 >> On Saturday, October 4, 2014, Matthias Felleisen =
 <matthias@ccs.neu.edu> wrote:
 >>=20
 >> Yes, check-expect and friends should probably use visibly=3D? instead =
 of image=3D?
 >>=20
 >>=20
 >>=20
 >> On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:
 >>=20
 >> > I think we'd need to figure out how it interacts with check-expect.
 >> > Just an additional equality predicate isn't going to make much
 >> > difference in the day-to-day use of BSL programmers, I don't think.
 >> >
 >> > Robby
 >> >
 >> > On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen =
 <matthias@ccs.neu.edu> wrote:
 >> >>
 >> >> Catching up late with this thread. I like Stephen's idea a lot. I =
 think adding
 >> >>
 >> >> visibly=3D?
 >> >>
 >> >> could help a lot of people and even better, it's sheer presence =
 might warn people that there's more to image representations than =
 visible stuff.
 >> >>
 >> >> Indeed, it could be a great point for HtDC -- Matthias
 >> >>
 >> >>
 >> >>
 >> >>
 >> >>
 >> >> On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:
 >> >>
 >> >>>
 >> >>> On Oct 3, 2014, at 3:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 >> >>>
 >> >>>> Okay, I think I'm starting to get it.  And furthermore, having =
 RTFM I see that this is made quite clear there.  But (just to be a pain =
 in the pinkie) is it what you really want?  I had this mental model of =
 empty-image really being the identity object on the "image algebra=94
 >> >>>
 >> >>> Yes, that=92s the way it=92s most commonly used.  But there=92s =
 no such thing as =93the identity object=94 on an entire algebra, only =
 =93the identity object=94 for a particular operator.  (0 is the identity =
 for addition, 1 for multiplication, true for OR, false for AND, etc.)
 >> >>>
 >> >>> In fact, the empty image works pretty well as an identity for a =
 variety of image operators, as long as you only pay attention to what=92s =
 visible.  Unfortunately (but necessarily), the image data type also has =
 some invisible fields like baseline and pinhole, and there=92s no good =
 way to define operations like =93beside=94 and =93above=94 so that
 >> >>> (a) the operation is associative, and
 >> >>> (b) the empty image is a perfect identity for it.
 >> >>>
 >> >>> I wonder if there should be a =93visibly-equal?=94 function on =
 images that only compares whether they look the same in their present =
 forms.  Note that (visibly-equal? X Y) does NOT imply that X can be =
 substituted for Y in expressions and the results will be visibly-equal?, =
 whereas (image=3D? X Y) DOES imply that (AFAIK).
 >> >>>
 >> >>>
 >> >>> Stephen Bloch
 >> >>> sbloch@adelphi.edu
 >> >>> GPG key at http://home.adelphi.edu/sbloch/sbloch.pubkey.asc
 >> >>>
 >> >>
 >>=20
 >=20
 
 
 --Apple-Mail=_42FA53D4-21AE-4051-8246-16A1F945A62C
 Content-Transfer-Encoding: quoted-printable
 Content-Type: text/html;
 	charset=windows-1252
 
 <html><head><meta http-equiv=3D"Content-Type" content=3D"text/html =
 charset=3Dwindows-1252"></head><body style=3D"word-wrap: break-word; =
 -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Oh! =
 &nbsp;Are there other objects in BSL besides images for which equal? =
 does not imply observational equality? &nbsp;I had been making that =
 wrong assumption for a while now.<div><br></div><div><br><div><div>On =
 2014-10-04, at 7:14 PM, Robby Findler &lt;<a =
 href=3D"mailto:robby@eecs.northwestern.edu">robby@eecs.northwestern.edu</a=
 >&gt; wrote:</div><br class=3D"Apple-interchange-newline"><blockquote =
 type=3D"cite">No. It means they draw the same inside their bounding box =
 (using pixel equality) and have the same baseline (and thus the same =
 bounding box).<div><br></div><div>So if you scale two shapes small =
 enough they will be equal but they&nbsp;<span></span>will scale back up =
 again to look different.&nbsp;<br><div><br></div><div>Robby<br><br>On =
 Saturday, October 4, 2014, Ron Garcia &lt;<a =
 href=3D"mailto:rxg@cs.ubc.ca">rxg@cs.ubc.ca</a>&gt; =
 wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 =
 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div =
 style=3D"word-wrap:break-word"><div><br></div>Does equal? imply =
 observational equivalence in BSL?&nbsp; If it does, then I'm guessing =
 that equal? should not ignore baseline.<div><br><div><div>On 2014-10-04, =
 at 6:53 PM, Robby Findler &lt;<a =
 href=3D"javascript:_e(%7B%7D,'cvml','robby@eecs.northwestern.edu');" =
 target=3D"_blank">robby@eecs.northwestern.edu</a>&gt; =
 wrote:</div><br><blockquote type=3D"cite">You mean equal? should ignore =
 the baseline? It cannot ignore the width and height, or at least I don't =
 see how it can because it is defined in terms of drawing pixels and you =
 need to stop drawing =
 somewhere.&nbsp;<div><br></div><div>Robby<span></span><br><br>On =
 Saturday, October 4, 2014, Matthias Felleisen &lt;<a =
 href=3D"javascript:_e(%7B%7D,'cvml','matthias@ccs.neu.edu');" =
 target=3D"_blank">matthias@ccs.neu.edu</a>&gt; wrote:<br><blockquote =
 class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc =
 solid;padding-left:1ex"><br>
 Yes, check-expect and friends should probably use visibly=3D? instead of =
 image=3D?<br>
 <br>
 <br>
 <br>
 On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:<br>
 <br>
 &gt; I think we'd need to figure out how it interacts with =
 check-expect.<br>
 &gt; Just an additional equality predicate isn't going to make much<br>
 &gt; difference in the day-to-day use of BSL programmers, I don't =
 think.<br>
 &gt;<br>
 &gt; Robby<br>
 &gt;<br>
 &gt; On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen =
 &lt;<a>matthias@ccs.neu.edu</a>&gt; wrote:<br>
 &gt;&gt;<br>
 &gt;&gt; Catching up late with this thread. I like Stephen's idea a lot. =
 I think adding<br>
 &gt;&gt;<br>
 &gt;&gt; visibly=3D?<br>
 &gt;&gt;<br>
 &gt;&gt; could help a lot of people and even better, it's sheer presence =
 might warn people that there's more to image representations than =
 visible stuff.<br>
 &gt;&gt;<br>
 &gt;&gt; Indeed, it could be a great point for HtDC -- Matthias<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt; On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:<br>
 &gt;&gt;<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; On Oct 3, 2014, at 3:48 PM, Ronald Garcia =
 &lt;<a>rxg@cs.ubc.ca</a>&gt; wrote:<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt; Okay, I think I'm starting to get it.&nbsp; And =
 furthermore, having RTFM I see that this is made quite clear =
 there.&nbsp; But (just to be a pain in the pinkie) is it what you really =
 want?&nbsp; I had this mental model of empty-image really being the =
 identity object on the "image algebra=94<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; Yes, that=92s the way it=92s most commonly used.&nbsp; But =
 there=92s no such thing as =93the identity object=94 on an entire =
 algebra, only =93the identity object=94 for a particular operator.&nbsp; =
 (0 is the identity for addition, 1 for multiplication, true for OR, =
 false for AND, etc.)<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; In fact, the empty image works pretty well as an identity =
 for a variety of image operators, as long as you only pay attention to =
 what=92s visible.&nbsp; Unfortunately (but necessarily), the image data =
 type also has some invisible fields like baseline and pinhole, and =
 there=92s no good way to define operations like =93beside=94 and =93above=94=
  so that<br>
 &gt;&gt;&gt; (a) the operation is associative, and<br>
 &gt;&gt;&gt; (b) the empty image is a perfect identity for it.<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; I wonder if there should be a =93visibly-equal?=94 function =
 on images that only compares whether they look the same in their present =
 forms.&nbsp; Note that (visibly-equal? X Y) does NOT imply that X can be =
 substituted for Y in expressions and the results will be visibly-equal?, =
 whereas (image=3D? X Y) DOES imply that (AFAIK).<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; Stephen Bloch<br>
 &gt;&gt;&gt; <a>sbloch@adelphi.edu</a><br>
 &gt;&gt;&gt; GPG key at <a =
 href=3D"http://home.adelphi.edu/sbloch/sbloch.pubkey.asc" =
 target=3D"_blank">http://home.adelphi.edu/sbloch/sbloch.pubkey.asc</a><br>=
 
 &gt;&gt;&gt;<br>
 &gt;&gt;<br>
 <br>
 </blockquote></div>
 </blockquote></div><br></div></div></blockquote></div></div>
 </blockquote></div><br></div></body></html>=
 
 --Apple-Mail=_42FA53D4-21AE-4051-8246-16A1F945A62C--
From: Ron Garcia <rxg@cs.ubc.ca>
To: Matthias Felleisen <matthias@ccs.neu.edu>
Cc: Stephen Bloch <bloch@adelphi.edu>,
        Robby Findler <robby@eecs.northwestern.edu>,
        bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sun, 5 Oct 2014 07:20:16 -0700

 On 2014-10-04, at 5:49 PM, Matthias Felleisen <matthias@ccs.neu.edu> wrote:
 
 > 
 > Catching up late with this thread. I like Stephen's idea a lot. I think adding 
 > 
 > visibly=? 
 > 
 > could help a lot of people and even better, it's sheer presence might warn people that there's more to image representations than visible stuff. 
 > 
 > Indeed, it could be a great point for HtDC -- Matthias
 > 
 
 I'm guessing that HtDC is How to Design Classes…ok google confirms.  That's an interesting point.  It reminds me of the "proxies" conversation from Dagstuhl, and the common assumption that object identity can only be pointer identity in an OO language.  Excuse me for straying form the conversation at hand.
 
 Ron
 
 
 > 
 > 
 > 
 > 
 > On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:
 > 
 >> 
 >> On Oct 3, 2014, at 3:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 >> 
 >>> Okay, I think I'm starting to get it.  And furthermore, having RTFM I see that this is made quite clear there.  But (just to be a pain in the pinkie) is it what you really want?  I had this mental model of empty-image really being the identity object on the "image algebra”
 >> 
 >> Yes, that’s the way it’s most commonly used.  But there’s no such thing as “the identity object” on an entire algebra, only “the identity object” for a particular operator.  (0 is the identity for addition, 1 for multiplication, true for OR, false for AND, etc.)
 >> 
 >> In fact, the empty image works pretty well as an identity for a variety of image operators, as long as you only pay attention to what’s visible.  Unfortunately (but necessarily), the image data type also has some invisible fields like baseline and pinhole, and there’s no good way to define operations like “beside” and “above” so that
 >> (a) the operation is associative, and
 >> (b) the empty image is a perfect identity for it.
 >> 
 >> I wonder if there should be a “visibly-equal?” function on images that only compares whether they look the same in their present forms.  Note that (visibly-equal? X Y) does NOT imply that X can be substituted for Y in expressions and the results will be visibly-equal?, whereas (image=? X Y) DOES imply that (AFAIK).
 >> 
 >> 
 >> Stephen Bloch
 >> sbloch@adelphi.edu
 >> GPG key at http://home.adelphi.edu/sbloch/sbloch.pubkey.asc
 >> 
 > 
 
 
From: Robby Findler <robby@eecs.northwestern.edu>
To: Ron Garcia <rxg@cs.ubc.ca>
Cc: Matthias Felleisen <matthias@ccs.neu.edu>,
        Stephen Bloch <bloch@adelphi.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sun, 5 Oct 2014 09:33:00 -0500

 --089e01538baadc5ddd0504add7af
 Content-Type: text/plain; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 Lots. Thanks to eq?, equal? Rarely implies obs eqv.
 
 On Sunday, October 5, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 
 > Oh!  Are there other objects in BSL besides images for which equal? does
 > not imply observational equality?  I had been making that wrong assumptio=
 n
 > for a while now.
 >
 >
 > On 2014-10-04, at 7:14 PM, Robby Findler <robby@eecs.northwestern.edu
 > <javascript:_e(%7B%7D,'cvml','robby@eecs.northwestern.edu');>> wrote:
 >
 > No. It means they draw the same inside their bounding box (using pixel
 > equality) and have the same baseline (and thus the same bounding box).
 >
 > So if you scale two shapes small enough they will be equal but they will
 > scale back up again to look different.
 >
 > Robby
 >
 > On Saturday, October 4, 2014, Ron Garcia <rxg@cs.ubc.ca
 > <javascript:_e(%7B%7D,'cvml','rxg@cs.ubc.ca');>> wrote:
 >
 >>
 >> Does equal? imply observational equivalence in BSL?  If it does, then I'=
 m
 >> guessing that equal? should not ignore baseline.
 >>
 >> On 2014-10-04, at 6:53 PM, Robby Findler <robby@eecs.northwestern.edu>
 >> wrote:
 >>
 >> You mean equal? should ignore the baseline? It cannot ignore the width
 >> and height, or at least I don't see how it can because it is defined in
 >> terms of drawing pixels and you need to stop drawing somewhere.
 >>
 >> Robby
 >>
 >> On Saturday, October 4, 2014, Matthias Felleisen <matthias@ccs.neu.edu>
 >> wrote:
 >>
 >>>
 >>> Yes, check-expect and friends should probably use visibly=3D? instead o=
 f
 >>> image=3D?
 >>>
 >>>
 >>>
 >>> On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:
 >>>
 >>> > I think we'd need to figure out how it interacts with check-expect.
 >>> > Just an additional equality predicate isn't going to make much
 >>> > difference in the day-to-day use of BSL programmers, I don't think.
 >>> >
 >>> > Robby
 >>> >
 >>> > On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen <
 >>> matthias@ccs.neu.edu> wrote:
 >>> >>
 >>> >> Catching up late with this thread. I like Stephen's idea a lot. I
 >>> think adding
 >>> >>
 >>> >> visibly=3D?
 >>> >>
 >>> >> could help a lot of people and even better, it's sheer presence migh=
 t
 >>> warn people that there's more to image representations than visible stu=
 ff.
 >>> >>
 >>> >> Indeed, it could be a great point for HtDC -- Matthias
 >>> >>
 >>> >>
 >>> >>
 >>> >>
 >>> >>
 >>> >> On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:
 >>> >>
 >>> >>>
 >>> >>> On Oct 3, 2014, at 3:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 >>> >>>
 >>> >>>> Okay, I think I'm starting to get it.  And furthermore, having RTF=
 M
 >>> I see that this is made quite clear there.  But (just to be a pain in t=
 he
 >>> pinkie) is it what you really want?  I had this mental model of empty-i=
 mage
 >>> really being the identity object on the "image algebra=E2=80=9D
 >>> >>>
 >>> >>> Yes, that=E2=80=99s the way it=E2=80=99s most commonly used.  But t=
 here=E2=80=99s no such
 >>> thing as =E2=80=9Cthe identity object=E2=80=9D on an entire algebra, on=
 ly =E2=80=9Cthe identity
 >>> object=E2=80=9D for a particular operator.  (0 is the identity for addi=
 tion, 1 for
 >>> multiplication, true for OR, false for AND, etc.)
 >>> >>>
 >>> >>> In fact, the empty image works pretty well as an identity for a
 >>> variety of image operators, as long as you only pay attention to what=
 =E2=80=99s
 >>> visible.  Unfortunately (but necessarily), the image data type also has
 >>> some invisible fields like baseline and pinhole, and there=E2=80=99s no=
  good way to
 >>> define operations like =E2=80=9Cbeside=E2=80=9D and =E2=80=9Cabove=E2=
 =80=9D so that
 >>> >>> (a) the operation is associative, and
 >>> >>> (b) the empty image is a perfect identity for it.
 >>> >>>
 >>> >>> I wonder if there should be a =E2=80=9Cvisibly-equal?=E2=80=9D func=
 tion on images
 >>> that only compares whether they look the same in their present forms.  =
 Note
 >>> that (visibly-equal? X Y) does NOT imply that X can be substituted for =
 Y in
 >>> expressions and the results will be visibly-equal?, whereas (image=3D? =
 X Y)
 >>> DOES imply that (AFAIK).
 >>> >>>
 >>> >>>
 >>> >>> Stephen Bloch
 >>> >>> sbloch@adelphi.edu
 >>> >>> GPG key at http://home.adelphi.edu/sbloch/sbloch.pubkey.asc
 >>> >>>
 >>> >>
 >>>
 >>>
 >>
 >
 
 --089e01538baadc5ddd0504add7af
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 Lots. Thanks to eq?, equal? Rarely implies obs eqv.=C2=A0<span></span><br><=
 br>On Sunday, October 5, 2014, Ron Garcia &lt;<a href=3D"mailto:rxg@cs.ubc.=
 ca">rxg@cs.ubc.ca</a>&gt; wrote:<br><blockquote class=3D"gmail_quote" style=
 =3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div sty=
 le=3D"word-wrap:break-word">Oh!=C2=A0 Are there other objects in BSL beside=
 s images for which equal? does not imply observational equality?=C2=A0 I ha=
 d been making that wrong assumption for a while now.<div><br></div><div><br=
 ><div><div>On 2014-10-04, at 7:14 PM, Robby Findler &lt;<a href=3D"javascri=
 pt:_e(%7B%7D,&#39;cvml&#39;,&#39;robby@eecs.northwestern.edu&#39;);" target=
 =3D"_blank">robby@eecs.northwestern.edu</a>&gt; wrote:</div><br><blockquote=
  type=3D"cite">No. It means they draw the same inside their bounding box (u=
 sing pixel equality) and have the same baseline (and thus the same bounding=
  box).<div><br></div><div>So if you scale two shapes small enough they will=
  be equal but they=C2=A0<span></span>will scale back up again to look diffe=
 rent.=C2=A0<br><div><br></div><div>Robby<br><br>On Saturday, October 4, 201=
 4, Ron Garcia &lt;<a href=3D"javascript:_e(%7B%7D,&#39;cvml&#39;,&#39;rxg@c=
 s.ubc.ca&#39;);" target=3D"_blank">rxg@cs.ubc.ca</a>&gt; wrote:<br><blockqu=
 ote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc s=
 olid;padding-left:1ex"><div style=3D"word-wrap:break-word"><div><br></div>D=
 oes equal? imply observational equivalence in BSL?=C2=A0 If it does, then I=
 &#39;m guessing that equal? should not ignore baseline.<div><br><div><div>O=
 n 2014-10-04, at 6:53 PM, Robby Findler &lt;<a>robby@eecs.northwestern.edu<=
 /a>&gt; wrote:</div><br><blockquote type=3D"cite">You mean equal? should ig=
 nore the baseline? It cannot ignore the width and height, or at least I don=
 &#39;t see how it can because it is defined in terms of drawing pixels and =
 you need to stop drawing somewhere.=C2=A0<div><br></div><div>Robby<span></s=
 pan><br><br>On Saturday, October 4, 2014, Matthias Felleisen &lt;<a>matthia=
 s@ccs.neu.edu</a>&gt; wrote:<br><blockquote class=3D"gmail_quote" style=3D"=
 margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><br>
 Yes, check-expect and friends should probably use visibly=3D? instead of im=
 age=3D?<br>
 <br>
 <br>
 <br>
 On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:<br>
 <br>
 &gt; I think we&#39;d need to figure out how it interacts with check-expect=
 .<br>
 &gt; Just an additional equality predicate isn&#39;t going to make much<br>
 &gt; difference in the day-to-day use of BSL programmers, I don&#39;t think=
 .<br>
 &gt;<br>
 &gt; Robby<br>
 &gt;<br>
 &gt; On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen &lt;<a>matthias@ccs=
 .neu.edu</a>&gt; wrote:<br>
 &gt;&gt;<br>
 &gt;&gt; Catching up late with this thread. I like Stephen&#39;s idea a lot=
 . I think adding<br>
 &gt;&gt;<br>
 &gt;&gt; visibly=3D?<br>
 &gt;&gt;<br>
 &gt;&gt; could help a lot of people and even better, it&#39;s sheer presenc=
 e might warn people that there&#39;s more to image representations than vis=
 ible stuff.<br>
 &gt;&gt;<br>
 &gt;&gt; Indeed, it could be a great point for HtDC -- Matthias<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt; On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:<br>
 &gt;&gt;<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; On Oct 3, 2014, at 3:48 PM, Ronald Garcia &lt;<a>rxg@cs.ubc.ca=
 </a>&gt; wrote:<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt; Okay, I think I&#39;m starting to get it.=C2=A0 And furthe=
 rmore, having RTFM I see that this is made quite clear there.=C2=A0 But (ju=
 st to be a pain in the pinkie) is it what you really want?=C2=A0 I had this=
  mental model of empty-image really being the identity object on the &quot;=
 image algebra=E2=80=9D<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; Yes, that=E2=80=99s the way it=E2=80=99s most commonly used.=
 =C2=A0 But there=E2=80=99s no such thing as =E2=80=9Cthe identity object=E2=
 =80=9D on an entire algebra, only =E2=80=9Cthe identity object=E2=80=9D for=
  a particular operator.=C2=A0 (0 is the identity for addition, 1 for multip=
 lication, true for OR, false for AND, etc.)<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; In fact, the empty image works pretty well as an identity for =
 a variety of image operators, as long as you only pay attention to what=E2=
 =80=99s visible.=C2=A0 Unfortunately (but necessarily), the image data type=
  also has some invisible fields like baseline and pinhole, and there=E2=80=
 =99s no good way to define operations like =E2=80=9Cbeside=E2=80=9D and =E2=
 =80=9Cabove=E2=80=9D so that<br>
 &gt;&gt;&gt; (a) the operation is associative, and<br>
 &gt;&gt;&gt; (b) the empty image is a perfect identity for it.<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; I wonder if there should be a =E2=80=9Cvisibly-equal?=E2=80=9D=
  function on images that only compares whether they look the same in their =
 present forms.=C2=A0 Note that (visibly-equal? X Y) does NOT imply that X c=
 an be substituted for Y in expressions and the results will be visibly-equa=
 l?, whereas (image=3D? X Y) DOES imply that (AFAIK).<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; Stephen Bloch<br>
 &gt;&gt;&gt; <a>sbloch@adelphi.edu</a><br>
 &gt;&gt;&gt; GPG key at <a href=3D"http://home.adelphi.edu/sbloch/sbloch.pu=
 bkey.asc" target=3D"_blank">http://home.adelphi.edu/sbloch/sbloch.pubkey.as=
 c</a><br>
 &gt;&gt;&gt;<br>
 &gt;&gt;<br>
 <br>
 </blockquote></div>
 </blockquote></div><br></div></div></blockquote></div></div>
 </blockquote></div><br></div></div></blockquote>
 
 --089e01538baadc5ddd0504add7af--
From: Ron Garcia <rxg@cs.ubc.ca>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: Matthias Felleisen <matthias@ccs.neu.edu>,
        Stephen Bloch <bloch@adelphi.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sun, 5 Oct 2014 07:43:52 -0700

 --Apple-Mail=_7AC25BB7-4AD6-414E-97C7-DB1F3D785C73
 Content-Transfer-Encoding: quoted-printable
 Content-Type: text/plain;
 	charset=windows-1252
 
 Ahh good point! ::smacks head!::   I've gotten so used to not using =
 equal? or eq? in BSL that I just forget about them sometimes...
 
 
 On 2014-10-05, at 7:33 AM, Robby Findler <robby@eecs.northwestern.edu> =
 wrote:
 
 > Lots. Thanks to eq?, equal? Rarely implies obs eqv.=20
 >=20
 > On Sunday, October 5, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 > Oh!  Are there other objects in BSL besides images for which equal? =
 does not imply observational equality?  I had been making that wrong =
 assumption for a while now.
 >=20
 >=20
 > On 2014-10-04, at 7:14 PM, Robby Findler <robby@eecs.northwestern.edu> =
 wrote:
 >=20
 >> No. It means they draw the same inside their bounding box (using =
 pixel equality) and have the same baseline (and thus the same bounding =
 box).
 >>=20
 >> So if you scale two shapes small enough they will be equal but they =
 will scale back up again to look different.=20
 >>=20
 >> Robby
 >>=20
 >> On Saturday, October 4, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 >>=20
 >> Does equal? imply observational equivalence in BSL?  If it does, then =
 I'm guessing that equal? should not ignore baseline.
 >>=20
 >> On 2014-10-04, at 6:53 PM, Robby Findler =
 <robby@eecs.northwestern.edu> wrote:
 >>=20
 >>> You mean equal? should ignore the baseline? It cannot ignore the =
 width and height, or at least I don't see how it can because it is =
 defined in terms of drawing pixels and you need to stop drawing =
 somewhere.=20
 >>>=20
 >>> Robby
 >>>=20
 >>> On Saturday, October 4, 2014, Matthias Felleisen =
 <matthias@ccs.neu.edu> wrote:
 >>>=20
 >>> Yes, check-expect and friends should probably use visibly=3D? =
 instead of image=3D?
 >>>=20
 >>>=20
 >>>=20
 >>> On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:
 >>>=20
 >>> > I think we'd need to figure out how it interacts with =
 check-expect.
 >>> > Just an additional equality predicate isn't going to make much
 >>> > difference in the day-to-day use of BSL programmers, I don't =
 think.
 >>> >
 >>> > Robby
 >>> >
 >>> > On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen =
 <matthias@ccs.neu.edu> wrote:
 >>> >>
 >>> >> Catching up late with this thread. I like Stephen's idea a lot. I =
 think adding
 >>> >>
 >>> >> visibly=3D?
 >>> >>
 >>> >> could help a lot of people and even better, it's sheer presence =
 might warn people that there's more to image representations than =
 visible stuff.
 >>> >>
 >>> >> Indeed, it could be a great point for HtDC -- Matthias
 >>> >>
 >>> >>
 >>> >>
 >>> >>
 >>> >>
 >>> >> On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:
 >>> >>
 >>> >>>
 >>> >>> On Oct 3, 2014, at 3:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 >>> >>>
 >>> >>>> Okay, I think I'm starting to get it.  And furthermore, having =
 RTFM I see that this is made quite clear there.  But (just to be a pain =
 in the pinkie) is it what you really want?  I had this mental model of =
 empty-image really being the identity object on the "image algebra=94
 >>> >>>
 >>> >>> Yes, that=92s the way it=92s most commonly used.  But there=92s =
 no such thing as =93the identity object=94 on an entire algebra, only =
 =93the identity object=94 for a particular operator.  (0 is the identity =
 for addition, 1 for multiplication, true for OR, false for AND, etc.)
 >>> >>>
 >>> >>> In fact, the empty image works pretty well as an identity for a =
 variety of image operators, as long as you only pay attention to what=92s =
 visible.  Unfortunately (but necessarily), the image data type also has =
 some invisible fields like baseline and pinhole, and there=92s no good =
 way to define operations like =93beside=94 and =93above=94 so that
 >>> >>> (a) the operation is associative, and
 >>> >>> (b) the empty image is a perfect identity for it.
 >>> >>>
 >>> >>> I wonder if there should be a =93visibly-equal?=94 function on =
 images that only compares whether they look the same in their present =
 forms.  Note that (visibly-equal? X Y) does NOT imply that X can be =
 substituted for Y in expressions and the results will be visibly-equal?, =
 whereas (image=3D? X Y) DOES imply that (AFAIK).
 >>> >>>
 >>> >>>
 >>> >>> Stephen Bloch
 >>> >>> sbloch@adelphi.edu
 >>> >>> GPG key at http://home.adelphi.edu/sbloch/sbloch.pubkey.asc
 >>> >>>
 >>> >>
 >>>=20
 >>=20
 >=20
 
 
 --Apple-Mail=_7AC25BB7-4AD6-414E-97C7-DB1F3D785C73
 Content-Transfer-Encoding: quoted-printable
 Content-Type: text/html;
 	charset=windows-1252
 
 <html><head><meta http-equiv=3D"Content-Type" content=3D"text/html =
 charset=3Dwindows-1252"></head><body style=3D"word-wrap: break-word; =
 -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Ahh =
 good point! ::smacks head!:: &nbsp; I've gotten so used to not using =
 equal? or eq? in BSL that I just forget about them =
 sometimes...<div><br><div><br></div><div><div><div>On 2014-10-05, at =
 7:33 AM, Robby Findler &lt;<a =
 href=3D"mailto:robby@eecs.northwestern.edu">robby@eecs.northwestern.edu</a=
 >&gt; wrote:</div><br class=3D"Apple-interchange-newline"><blockquote =
 type=3D"cite">Lots. Thanks to eq?, equal? Rarely implies obs =
 eqv.&nbsp;<span></span><br><br>On Sunday, October 5, 2014, Ron Garcia =
 &lt;<a href=3D"mailto:rxg@cs.ubc.ca">rxg@cs.ubc.ca</a>&gt; =
 wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 =
 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div =
 style=3D"word-wrap:break-word">Oh!&nbsp; Are there other objects in BSL =
 besides images for which equal? does not imply observational =
 equality?&nbsp; I had been making that wrong assumption for a while =
 now.<div><br></div><div><br><div><div>On 2014-10-04, at 7:14 PM, Robby =
 Findler &lt;<a =
 href=3D"javascript:_e(%7B%7D,'cvml','robby@eecs.northwestern.edu');" =
 target=3D"_blank">robby@eecs.northwestern.edu</a>&gt; =
 wrote:</div><br><blockquote type=3D"cite">No. It means they draw the =
 same inside their bounding box (using pixel equality) and have the same =
 baseline (and thus the same bounding box).<div><br></div><div>So if you =
 scale two shapes small enough they will be equal but =
 they&nbsp;<span></span>will scale back up again to look =
 different.&nbsp;<br><div><br></div><div>Robby<br><br>On Saturday, =
 October 4, 2014, Ron Garcia &lt;<a =
 href=3D"javascript:_e(%7B%7D,'cvml','rxg@cs.ubc.ca');" =
 target=3D"_blank">rxg@cs.ubc.ca</a>&gt; wrote:<br><blockquote =
 class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc =
 solid;padding-left:1ex"><div =
 style=3D"word-wrap:break-word"><div><br></div>Does equal? imply =
 observational equivalence in BSL?&nbsp; If it does, then I'm guessing =
 that equal? should not ignore baseline.<div><br><div><div>On 2014-10-04, =
 at 6:53 PM, Robby Findler &lt;<a>robby@eecs.northwestern.edu</a>&gt; =
 wrote:</div><br><blockquote type=3D"cite">You mean equal? should ignore =
 the baseline? It cannot ignore the width and height, or at least I don't =
 see how it can because it is defined in terms of drawing pixels and you =
 need to stop drawing =
 somewhere.&nbsp;<div><br></div><div>Robby<span></span><br><br>On =
 Saturday, October 4, 2014, Matthias Felleisen =
 &lt;<a>matthias@ccs.neu.edu</a>&gt; wrote:<br><blockquote =
 class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc =
 solid;padding-left:1ex"><br>
 Yes, check-expect and friends should probably use visibly=3D? instead of =
 image=3D?<br>
 <br>
 <br>
 <br>
 On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:<br>
 <br>
 &gt; I think we'd need to figure out how it interacts with =
 check-expect.<br>
 &gt; Just an additional equality predicate isn't going to make much<br>
 &gt; difference in the day-to-day use of BSL programmers, I don't =
 think.<br>
 &gt;<br>
 &gt; Robby<br>
 &gt;<br>
 &gt; On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen =
 &lt;<a>matthias@ccs.neu.edu</a>&gt; wrote:<br>
 &gt;&gt;<br>
 &gt;&gt; Catching up late with this thread. I like Stephen's idea a lot. =
 I think adding<br>
 &gt;&gt;<br>
 &gt;&gt; visibly=3D?<br>
 &gt;&gt;<br>
 &gt;&gt; could help a lot of people and even better, it's sheer presence =
 might warn people that there's more to image representations than =
 visible stuff.<br>
 &gt;&gt;<br>
 &gt;&gt; Indeed, it could be a great point for HtDC -- Matthias<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt; On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:<br>
 &gt;&gt;<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; On Oct 3, 2014, at 3:48 PM, Ronald Garcia =
 &lt;<a>rxg@cs.ubc.ca</a>&gt; wrote:<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt; Okay, I think I'm starting to get it.&nbsp; And =
 furthermore, having RTFM I see that this is made quite clear =
 there.&nbsp; But (just to be a pain in the pinkie) is it what you really =
 want?&nbsp; I had this mental model of empty-image really being the =
 identity object on the "image algebra=94<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; Yes, that=92s the way it=92s most commonly used.&nbsp; But =
 there=92s no such thing as =93the identity object=94 on an entire =
 algebra, only =93the identity object=94 for a particular operator.&nbsp; =
 (0 is the identity for addition, 1 for multiplication, true for OR, =
 false for AND, etc.)<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; In fact, the empty image works pretty well as an identity =
 for a variety of image operators, as long as you only pay attention to =
 what=92s visible.&nbsp; Unfortunately (but necessarily), the image data =
 type also has some invisible fields like baseline and pinhole, and =
 there=92s no good way to define operations like =93beside=94 and =93above=94=
  so that<br>
 &gt;&gt;&gt; (a) the operation is associative, and<br>
 &gt;&gt;&gt; (b) the empty image is a perfect identity for it.<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; I wonder if there should be a =93visibly-equal?=94 function =
 on images that only compares whether they look the same in their present =
 forms.&nbsp; Note that (visibly-equal? X Y) does NOT imply that X can be =
 substituted for Y in expressions and the results will be visibly-equal?, =
 whereas (image=3D? X Y) DOES imply that (AFAIK).<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; Stephen Bloch<br>
 &gt;&gt;&gt; <a>sbloch@adelphi.edu</a><br>
 &gt;&gt;&gt; GPG key at <a =
 href=3D"http://home.adelphi.edu/sbloch/sbloch.pubkey.asc" =
 target=3D"_blank">http://home.adelphi.edu/sbloch/sbloch.pubkey.asc</a><br>=
 
 &gt;&gt;&gt;<br>
 &gt;&gt;<br>
 <br>
 </blockquote></div>
 </blockquote></div><br></div></div></blockquote></div></div>
 </blockquote></div><br></div></div></blockquote>
 </blockquote></div><br></div></div></body></html>=
 
 --Apple-Mail=_7AC25BB7-4AD6-414E-97C7-DB1F3D785C73--
From: Robby Findler <robby@eecs.northwestern.edu>
To: Ron Garcia <rxg@cs.ubc.ca>
Cc: Matthias Felleisen <matthias@ccs.neu.edu>,
        Stephen Bloch <bloch@adelphi.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sun, 5 Oct 2014 10:00:57 -0500

 And actually a somewhat more subtle point wrt to equal? and
 mutability: even without eq? it won't hold for mutable stuff because
 equal? is defined to traverse mutable structures.
 
 I think if I had that design choice to do over, I might try to use
 something more like eqal? -- it behaves like equal? does on immutable
 structures, but when it hits a mutable structure, it does pointer
 equality (so checking to if one were mutated the other would change).
 
 Robby
 
 
 On Sun, Oct 5, 2014 at 9:43 AM, Ron Garcia <rxg@cs.ubc.ca> wrote:
 > Ahh good point! ::smacks head!::   I've gotten so used to not using equal?
 > or eq? in BSL that I just forget about them sometimes...
 >
 >
 > On 2014-10-05, at 7:33 AM, Robby Findler <robby@eecs.northwestern.edu>
 > wrote:
 >
 > Lots. Thanks to eq?, equal? Rarely implies obs eqv.
 >
 > On Sunday, October 5, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 >>
 >> Oh!  Are there other objects in BSL besides images for which equal? does
 >> not imply observational equality?  I had been making that wrong assumption
 >> for a while now.
 >>
 >>
 >> On 2014-10-04, at 7:14 PM, Robby Findler <robby@eecs.northwestern.edu>
 >> wrote:
 >>
 >> No. It means they draw the same inside their bounding box (using pixel
 >> equality) and have the same baseline (and thus the same bounding box).
 >>
 >> So if you scale two shapes small enough they will be equal but they will
 >> scale back up again to look different.
 >>
 >> Robby
 >>
 >> On Saturday, October 4, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 >>>
 >>>
 >>> Does equal? imply observational equivalence in BSL?  If it does, then I'm
 >>> guessing that equal? should not ignore baseline.
 >>>
 >>> On 2014-10-04, at 6:53 PM, Robby Findler <robby@eecs.northwestern.edu>
 >>> wrote:
 >>>
 >>> You mean equal? should ignore the baseline? It cannot ignore the width
 >>> and height, or at least I don't see how it can because it is defined in
 >>> terms of drawing pixels and you need to stop drawing somewhere.
 >>>
 >>> Robby
 >>>
 >>> On Saturday, October 4, 2014, Matthias Felleisen <matthias@ccs.neu.edu>
 >>> wrote:
 >>>>
 >>>>
 >>>> Yes, check-expect and friends should probably use visibly=? instead of
 >>>> image=?
 >>>>
 >>>>
 >>>>
 >>>> On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:
 >>>>
 >>>> > I think we'd need to figure out how it interacts with check-expect.
 >>>> > Just an additional equality predicate isn't going to make much
 >>>> > difference in the day-to-day use of BSL programmers, I don't think.
 >>>> >
 >>>> > Robby
 >>>> >
 >>>> > On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen
 >>>> > <matthias@ccs.neu.edu> wrote:
 >>>> >>
 >>>> >> Catching up late with this thread. I like Stephen's idea a lot. I
 >>>> >> think adding
 >>>> >>
 >>>> >> visibly=?
 >>>> >>
 >>>> >> could help a lot of people and even better, it's sheer presence might
 >>>> >> warn people that there's more to image representations than visible stuff.
 >>>> >>
 >>>> >> Indeed, it could be a great point for HtDC -- Matthias
 >>>> >>
 >>>> >>
 >>>> >>
 >>>> >>
 >>>> >>
 >>>> >> On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:
 >>>> >>
 >>>> >>>
 >>>> >>> On Oct 3, 2014, at 3:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 >>>> >>>
 >>>> >>>> Okay, I think I'm starting to get it.  And furthermore, having RTFM
 >>>> >>>> I see that this is made quite clear there.  But (just to be a pain in the
 >>>> >>>> pinkie) is it what you really want?  I had this mental model of empty-image
 >>>> >>>> really being the identity object on the "image algebraâ€
 >>>> >>>
 >>>> >>> Yes, thatâ€™s the way itâ€™s most commonly used.  But thereâ€™s no such
 >>>> >>> thing as â€œthe identity objectâ€ on an entire algebra, only â€œthe identity
 >>>> >>> objectâ€ for a particular operator.  (0 is the identity for addition, 1 for
 >>>> >>> multiplication, true for OR, false for AND, etc.)
 >>>> >>>
 >>>> >>> In fact, the empty image works pretty well as an identity for a
 >>>> >>> variety of image operators, as long as you only pay attention to whatâ€™s
 >>>> >>> visible.  Unfortunately (but necessarily), the image data type also has some
 >>>> >>> invisible fields like baseline and pinhole, and thereâ€™s no good way to
 >>>> >>> define operations like â€œbesideâ€ and â€œaboveâ€ so that
 >>>> >>> (a) the operation is associative, and
 >>>> >>> (b) the empty image is a perfect identity for it.
 >>>> >>>
 >>>> >>> I wonder if there should be a â€œvisibly-equal?â€ function on images
 >>>> >>> that only compares whether they look the same in their present forms.  Note
 >>>> >>> that (visibly-equal? X Y) does NOT imply that X can be substituted for Y in
 >>>> >>> expressions and the results will be visibly-equal?, whereas (image=? X Y)
 >>>> >>> DOES imply that (AFAIK).
 >>>> >>>
 >>>> >>>
 >>>> >>> Stephen Bloch
 >>>> >>> sbloch@adelphi.edu
 >>>> >>> GPG key at http://home.adelphi.edu/sbloch/sbloch.pubkey.asc
 >>>> >>>
 >>>> >>
 >>>>
 >>>
 >>
 >
 
From: Ron Garcia <rxg@cs.ubc.ca>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: Matthias Felleisen <matthias@ccs.neu.edu>,
        Stephen Bloch <bloch@adelphi.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sun, 5 Oct 2014 08:38:16 -0700

 Are there mutable structures in BSL?
 
 
 On 2014-10-05, at 8:00 AM, Robby Findler <robby@eecs.northwestern.edu> wrote:
 
 > And actually a somewhat more subtle point wrt to equal? and
 > mutability: even without eq? it won't hold for mutable stuff because
 > equal? is defined to traverse mutable structures.
 > 
 > I think if I had that design choice to do over, I might try to use
 > something more like eqal? -- it behaves like equal? does on immutable
 > structures, but when it hits a mutable structure, it does pointer
 > equality (so checking to if one were mutated the other would change).
 > 
 > Robby
 > 
 > 
 > On Sun, Oct 5, 2014 at 9:43 AM, Ron Garcia <rxg@cs.ubc.ca> wrote:
 >> Ahh good point! ::smacks head!::   I've gotten so used to not using equal?
 >> or eq? in BSL that I just forget about them sometimes...
 >> 
 >> 
 >> On 2014-10-05, at 7:33 AM, Robby Findler <robby@eecs.northwestern.edu>
 >> wrote:
 >> 
 >> Lots. Thanks to eq?, equal? Rarely implies obs eqv.
 >> 
 >> On Sunday, October 5, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 >>> 
 >>> Oh!  Are there other objects in BSL besides images for which equal? does
 >>> not imply observational equality?  I had been making that wrong assumption
 >>> for a while now.
 >>> 
 >>> 
 >>> On 2014-10-04, at 7:14 PM, Robby Findler <robby@eecs.northwestern.edu>
 >>> wrote:
 >>> 
 >>> No. It means they draw the same inside their bounding box (using pixel
 >>> equality) and have the same baseline (and thus the same bounding box).
 >>> 
 >>> So if you scale two shapes small enough they will be equal but they will
 >>> scale back up again to look different.
 >>> 
 >>> Robby
 >>> 
 >>> On Saturday, October 4, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 >>>> 
 >>>> 
 >>>> Does equal? imply observational equivalence in BSL?  If it does, then I'm
 >>>> guessing that equal? should not ignore baseline.
 >>>> 
 >>>> On 2014-10-04, at 6:53 PM, Robby Findler <robby@eecs.northwestern.edu>
 >>>> wrote:
 >>>> 
 >>>> You mean equal? should ignore the baseline? It cannot ignore the width
 >>>> and height, or at least I don't see how it can because it is defined in
 >>>> terms of drawing pixels and you need to stop drawing somewhere.
 >>>> 
 >>>> Robby
 >>>> 
 >>>> On Saturday, October 4, 2014, Matthias Felleisen <matthias@ccs.neu.edu>
 >>>> wrote:
 >>>>> 
 >>>>> 
 >>>>> Yes, check-expect and friends should probably use visibly=? instead of
 >>>>> image=?
 >>>>> 
 >>>>> 
 >>>>> 
 >>>>> On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:
 >>>>> 
 >>>>>> I think we'd need to figure out how it interacts with check-expect.
 >>>>>> Just an additional equality predicate isn't going to make much
 >>>>>> difference in the day-to-day use of BSL programmers, I don't think.
 >>>>>> 
 >>>>>> Robby
 >>>>>> 
 >>>>>> On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen
 >>>>>> <matthias@ccs.neu.edu> wrote:
 >>>>>>> 
 >>>>>>> Catching up late with this thread. I like Stephen's idea a lot. I
 >>>>>>> think adding
 >>>>>>> 
 >>>>>>> visibly=?
 >>>>>>> 
 >>>>>>> could help a lot of people and even better, it's sheer presence might
 >>>>>>> warn people that there's more to image representations than visible stuff.
 >>>>>>> 
 >>>>>>> Indeed, it could be a great point for HtDC -- Matthias
 >>>>>>> 
 >>>>>>> 
 >>>>>>> 
 >>>>>>> 
 >>>>>>> 
 >>>>>>> On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:
 >>>>>>> 
 >>>>>>>> 
 >>>>>>>> On Oct 3, 2014, at 3:48 PM, Ronald Garcia <rxg@cs.ubc.ca> wrote:
 >>>>>>>> 
 >>>>>>>>> Okay, I think I'm starting to get it.  And furthermore, having RTFM
 >>>>>>>>> I see that this is made quite clear there.  But (just to be a pain in the
 >>>>>>>>> pinkie) is it what you really want?  I had this mental model of empty-image
 >>>>>>>>> really being the identity object on the "image algebra”
 >>>>>>>> 
 >>>>>>>> Yes, that’s the way it’s most commonly used.  But there’s no such
 >>>>>>>> thing as “the identity object” on an entire algebra, only “the identity
 >>>>>>>> object” for a particular operator.  (0 is the identity for addition, 1 for
 >>>>>>>> multiplication, true for OR, false for AND, etc.)
 >>>>>>>> 
 >>>>>>>> In fact, the empty image works pretty well as an identity for a
 >>>>>>>> variety of image operators, as long as you only pay attention to what’s
 >>>>>>>> visible.  Unfortunately (but necessarily), the image data type also has some
 >>>>>>>> invisible fields like baseline and pinhole, and there’s no good way to
 >>>>>>>> define operations like “beside” and “above” so that
 >>>>>>>> (a) the operation is associative, and
 >>>>>>>> (b) the empty image is a perfect identity for it.
 >>>>>>>> 
 >>>>>>>> I wonder if there should be a “visibly-equal?” function on images
 >>>>>>>> that only compares whether they look the same in their present forms.  Note
 >>>>>>>> that (visibly-equal? X Y) does NOT imply that X can be substituted for Y in
 >>>>>>>> expressions and the results will be visibly-equal?, whereas (image=? X Y)
 >>>>>>>> DOES imply that (AFAIK).
 >>>>>>>> 
 >>>>>>>> 
 >>>>>>>> Stephen Bloch
 >>>>>>>> sbloch@adelphi.edu
 >>>>>>>> GPG key at http://home.adelphi.edu/sbloch/sbloch.pubkey.asc
 >>>>>>>> 
 >>>>>>> 
 >>>>> 
 >>>> 
 >>> 
 >> 
 
 
From: Robby Findler <robby@eecs.northwestern.edu>
To: Ron Garcia <rxg@cs.ubc.ca>
Cc: Matthias Felleisen <matthias@ccs.neu.edu>,
        Stephen Bloch <bloch@adelphi.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Sun, 5 Oct 2014 10:52:23 -0500

 --001a11c2029cbad9030504aef392
 Content-Type: text/plain; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 No, right. ASL only.
 
 On Sunday, October 5, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 
 > Are there mutable structures in BSL?
 >
 >
 > On 2014-10-05, at 8:00 AM, Robby Findler <robby@eecs.northwestern.edu
 > <javascript:;>> wrote:
 >
 > > And actually a somewhat more subtle point wrt to equal? and
 > > mutability: even without eq? it won't hold for mutable stuff because
 > > equal? is defined to traverse mutable structures.
 > >
 > > I think if I had that design choice to do over, I might try to use
 > > something more like eqal? -- it behaves like equal? does on immutable
 > > structures, but when it hits a mutable structure, it does pointer
 > > equality (so checking to if one were mutated the other would change).
 > >
 > > Robby
 > >
 > >
 > > On Sun, Oct 5, 2014 at 9:43 AM, Ron Garcia <rxg@cs.ubc.ca <javascript:;=
 >>
 > wrote:
 > >> Ahh good point! ::smacks head!::   I've gotten so used to not using
 > equal?
 > >> or eq? in BSL that I just forget about them sometimes...
 > >>
 > >>
 > >> On 2014-10-05, at 7:33 AM, Robby Findler <robby@eecs.northwestern.edu
 > <javascript:;>>
 > >> wrote:
 > >>
 > >> Lots. Thanks to eq?, equal? Rarely implies obs eqv.
 > >>
 > >> On Sunday, October 5, 2014, Ron Garcia <rxg@cs.ubc.ca <javascript:;>>
 > wrote:
 > >>>
 > >>> Oh!  Are there other objects in BSL besides images for which equal?
 > does
 > >>> not imply observational equality?  I had been making that wrong
 > assumption
 > >>> for a while now.
 > >>>
 > >>>
 > >>> On 2014-10-04, at 7:14 PM, Robby Findler <robby@eecs.northwestern.edu
 > <javascript:;>>
 > >>> wrote:
 > >>>
 > >>> No. It means they draw the same inside their bounding box (using pixe=
 l
 > >>> equality) and have the same baseline (and thus the same bounding box)=
 .
 > >>>
 > >>> So if you scale two shapes small enough they will be equal but they
 > will
 > >>> scale back up again to look different.
 > >>>
 > >>> Robby
 > >>>
 > >>> On Saturday, October 4, 2014, Ron Garcia <rxg@cs.ubc.ca <javascript:;=
 >>
 > wrote:
 > >>>>
 > >>>>
 > >>>> Does equal? imply observational equivalence in BSL?  If it does, the=
 n
 > I'm
 > >>>> guessing that equal? should not ignore baseline.
 > >>>>
 > >>>> On 2014-10-04, at 6:53 PM, Robby Findler <robby@eecs.northwestern.ed=
 u
 > <javascript:;>>
 > >>>> wrote:
 > >>>>
 > >>>> You mean equal? should ignore the baseline? It cannot ignore the wid=
 th
 > >>>> and height, or at least I don't see how it can because it is defined
 > in
 > >>>> terms of drawing pixels and you need to stop drawing somewhere.
 > >>>>
 > >>>> Robby
 > >>>>
 > >>>> On Saturday, October 4, 2014, Matthias Felleisen <
 > matthias@ccs.neu.edu <javascript:;>>
 > >>>> wrote:
 > >>>>>
 > >>>>>
 > >>>>> Yes, check-expect and friends should probably use visibly=3D? inste=
 ad
 > of
 > >>>>> image=3D?
 > >>>>>
 > >>>>>
 > >>>>>
 > >>>>> On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:
 > >>>>>
 > >>>>>> I think we'd need to figure out how it interacts with check-expect=
 .
 > >>>>>> Just an additional equality predicate isn't going to make much
 > >>>>>> difference in the day-to-day use of BSL programmers, I don't think=
 .
 > >>>>>>
 > >>>>>> Robby
 > >>>>>>
 > >>>>>> On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen
 > >>>>>> <matthias@ccs.neu.edu <javascript:;>> wrote:
 > >>>>>>>
 > >>>>>>> Catching up late with this thread. I like Stephen's idea a lot. I
 > >>>>>>> think adding
 > >>>>>>>
 > >>>>>>> visibly=3D?
 > >>>>>>>
 > >>>>>>> could help a lot of people and even better, it's sheer presence
 > might
 > >>>>>>> warn people that there's more to image representations than
 > visible stuff.
 > >>>>>>>
 > >>>>>>> Indeed, it could be a great point for HtDC -- Matthias
 > >>>>>>>
 > >>>>>>>
 > >>>>>>>
 > >>>>>>>
 > >>>>>>>
 > >>>>>>> On Oct 4, 2014, at 12:06 AM, Stephen Bloch wrote:
 > >>>>>>>
 > >>>>>>>>
 > >>>>>>>> On Oct 3, 2014, at 3:48 PM, Ronald Garcia <rxg@cs.ubc.ca
 > <javascript:;>> wrote:
 > >>>>>>>>
 > >>>>>>>>> Okay, I think I'm starting to get it.  And furthermore, having
 > RTFM
 > >>>>>>>>> I see that this is made quite clear there.  But (just to be a
 > pain in the
 > >>>>>>>>> pinkie) is it what you really want?  I had this mental model of
 > empty-image
 > >>>>>>>>> really being the identity object on the "image algebra=E2=80=9D
 > >>>>>>>>
 > >>>>>>>> Yes, that=E2=80=99s the way it=E2=80=99s most commonly used.  Bu=
 t there=E2=80=99s no such
 > >>>>>>>> thing as =E2=80=9Cthe identity object=E2=80=9D on an entire alge=
 bra, only =E2=80=9Cthe
 > identity
 > >>>>>>>> object=E2=80=9D for a particular operator.  (0 is the identity f=
 or
 > addition, 1 for
 > >>>>>>>> multiplication, true for OR, false for AND, etc.)
 > >>>>>>>>
 > >>>>>>>> In fact, the empty image works pretty well as an identity for a
 > >>>>>>>> variety of image operators, as long as you only pay attention to
 > what=E2=80=99s
 > >>>>>>>> visible.  Unfortunately (but necessarily), the image data type
 > also has some
 > >>>>>>>> invisible fields like baseline and pinhole, and there=E2=80=99s =
 no good
 > way to
 > >>>>>>>> define operations like =E2=80=9Cbeside=E2=80=9D and =E2=80=9Cabo=
 ve=E2=80=9D so that
 > >>>>>>>> (a) the operation is associative, and
 > >>>>>>>> (b) the empty image is a perfect identity for it.
 > >>>>>>>>
 > >>>>>>>> I wonder if there should be a =E2=80=9Cvisibly-equal?=E2=80=9D f=
 unction on images
 > >>>>>>>> that only compares whether they look the same in their present
 > forms.  Note
 > >>>>>>>> that (visibly-equal? X Y) does NOT imply that X can be
 > substituted for Y in
 > >>>>>>>> expressions and the results will be visibly-equal?, whereas
 > (image=3D? X Y)
 > >>>>>>>> DOES imply that (AFAIK).
 > >>>>>>>>
 > >>>>>>>>
 > >>>>>>>> Stephen Bloch
 > >>>>>>>> sbloch@adelphi.edu <javascript:;>
 > >>>>>>>> GPG key at http://home.adelphi.edu/sbloch/sbloch.pubkey.asc
 > >>>>>>>>
 > >>>>>>>
 > >>>>>
 > >>>>
 > >>>
 > >>
 >
 >
 
 --001a11c2029cbad9030504aef392
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 No, right. ASL only.=C2=A0<span></span><br><br>On Sunday, October 5, 2014, =
 Ron Garcia &lt;<a href=3D"mailto:rxg@cs.ubc.ca">rxg@cs.ubc.ca</a>&gt; wrote=
 :<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-le=
 ft:1px #ccc solid;padding-left:1ex">Are there mutable structures in BSL?<br=
 >
 <br>
 <br>
 On 2014-10-05, at 8:00 AM, Robby Findler &lt;<a href=3D"javascript:;" oncli=
 ck=3D"_e(event, &#39;cvml&#39;, &#39;robby@eecs.northwestern.edu&#39;)">rob=
 by@eecs.northwestern.edu</a>&gt; wrote:<br>
 <br>
 &gt; And actually a somewhat more subtle point wrt to equal? and<br>
 &gt; mutability: even without eq? it won&#39;t hold for mutable stuff becau=
 se<br>
 &gt; equal? is defined to traverse mutable structures.<br>
 &gt;<br>
 &gt; I think if I had that design choice to do over, I might try to use<br>
 &gt; something more like eqal? -- it behaves like equal? does on immutable<=
 br>
 &gt; structures, but when it hits a mutable structure, it does pointer<br>
 &gt; equality (so checking to if one were mutated the other would change).<=
 br>
 &gt;<br>
 &gt; Robby<br>
 &gt;<br>
 &gt;<br>
 &gt; On Sun, Oct 5, 2014 at 9:43 AM, Ron Garcia &lt;<a href=3D"javascript:;=
 " onclick=3D"_e(event, &#39;cvml&#39;, &#39;rxg@cs.ubc.ca&#39;)">rxg@cs.ubc=
 .ca</a>&gt; wrote:<br>
 &gt;&gt; Ahh good point! ::smacks head!::=C2=A0 =C2=A0I&#39;ve gotten so us=
 ed to not using equal?<br>
 &gt;&gt; or eq? in BSL that I just forget about them sometimes...<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt; On 2014-10-05, at 7:33 AM, Robby Findler &lt;<a href=3D"javascript=
 :;" onclick=3D"_e(event, &#39;cvml&#39;, &#39;robby@eecs.northwestern.edu&#=
 39;)">robby@eecs.northwestern.edu</a>&gt;<br>
 &gt;&gt; wrote:<br>
 &gt;&gt;<br>
 &gt;&gt; Lots. Thanks to eq?, equal? Rarely implies obs eqv.<br>
 &gt;&gt;<br>
 &gt;&gt; On Sunday, October 5, 2014, Ron Garcia &lt;<a href=3D"javascript:;=
 " onclick=3D"_e(event, &#39;cvml&#39;, &#39;rxg@cs.ubc.ca&#39;)">rxg@cs.ubc=
 .ca</a>&gt; wrote:<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; Oh!=C2=A0 Are there other objects in BSL besides images for wh=
 ich equal? does<br>
 &gt;&gt;&gt; not imply observational equality?=C2=A0 I had been making that=
  wrong assumption<br>
 &gt;&gt;&gt; for a while now.<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; On 2014-10-04, at 7:14 PM, Robby Findler &lt;<a href=3D"javasc=
 ript:;" onclick=3D"_e(event, &#39;cvml&#39;, &#39;robby@eecs.northwestern.e=
 du&#39;)">robby@eecs.northwestern.edu</a>&gt;<br>
 &gt;&gt;&gt; wrote:<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; No. It means they draw the same inside their bounding box (usi=
 ng pixel<br>
 &gt;&gt;&gt; equality) and have the same baseline (and thus the same boundi=
 ng box).<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; So if you scale two shapes small enough they will be equal but=
  they will<br>
 &gt;&gt;&gt; scale back up again to look different.<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; Robby<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;&gt; On Saturday, October 4, 2014, Ron Garcia &lt;<a href=3D"javasc=
 ript:;" onclick=3D"_e(event, &#39;cvml&#39;, &#39;rxg@cs.ubc.ca&#39;)">rxg@=
 cs.ubc.ca</a>&gt; wrote:<br>
 &gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt; Does equal? imply observational equivalence in BSL?=C2=A0 =
 If it does, then I&#39;m<br>
 &gt;&gt;&gt;&gt; guessing that equal? should not ignore baseline.<br>
 &gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt; On 2014-10-04, at 6:53 PM, Robby Findler &lt;<a href=3D"ja=
 vascript:;" onclick=3D"_e(event, &#39;cvml&#39;, &#39;robby@eecs.northweste=
 rn.edu&#39;)">robby@eecs.northwestern.edu</a>&gt;<br>
 &gt;&gt;&gt;&gt; wrote:<br>
 &gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt; You mean equal? should ignore the baseline? It cannot igno=
 re the width<br>
 &gt;&gt;&gt;&gt; and height, or at least I don&#39;t see how it can because=
  it is defined in<br>
 &gt;&gt;&gt;&gt; terms of drawing pixels and you need to stop drawing somew=
 here.<br>
 &gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt; Robby<br>
 &gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt; On Saturday, October 4, 2014, Matthias Felleisen &lt;<a hr=
 ef=3D"javascript:;" onclick=3D"_e(event, &#39;cvml&#39;, &#39;matthias@ccs.=
 neu.edu&#39;)">matthias@ccs.neu.edu</a>&gt;<br>
 &gt;&gt;&gt;&gt; wrote:<br>
 &gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt; Yes, check-expect and friends should probably use visi=
 bly=3D? instead of<br>
 &gt;&gt;&gt;&gt;&gt; image=3D?<br>
 &gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt; On Oct 4, 2014, at 9:31 PM, Robby Findler wrote:<br>
 &gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt; I think we&#39;d need to figure out how it interac=
 ts with check-expect.<br>
 &gt;&gt;&gt;&gt;&gt;&gt; Just an additional equality predicate isn&#39;t go=
 ing to make much<br>
 &gt;&gt;&gt;&gt;&gt;&gt; difference in the day-to-day use of BSL programmer=
 s, I don&#39;t think.<br>
 &gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt; Robby<br>
 &gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt; On Sat, Oct 4, 2014 at 7:49 PM, Matthias Felleisen=
 <br>
 &gt;&gt;&gt;&gt;&gt;&gt; &lt;<a href=3D"javascript:;" onclick=3D"_e(event, =
 &#39;cvml&#39;, &#39;matthias@ccs.neu.edu&#39;)">matthias@ccs.neu.edu</a>&g=
 t; wrote:<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt; Catching up late with this thread. I like Step=
 hen&#39;s idea a lot. I<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt; think adding<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt; visibly=3D?<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt; could help a lot of people and even better, it=
 &#39;s sheer presence might<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt; warn people that there&#39;s more to image rep=
 resentations than visible stuff.<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt; Indeed, it could be a great point for HtDC -- =
 Matthias<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt; On Oct 4, 2014, at 12:06 AM, Stephen Bloch wro=
 te:<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; On Oct 3, 2014, at 3:48 PM, Ronald Garcia =
 &lt;<a href=3D"javascript:;" onclick=3D"_e(event, &#39;cvml&#39;, &#39;rxg@=
 cs.ubc.ca&#39;)">rxg@cs.ubc.ca</a>&gt; wrote:<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Okay, I think I&#39;m starting to get =
 it.=C2=A0 And furthermore, having RTFM<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I see that this is made quite clear th=
 ere.=C2=A0 But (just to be a pain in the<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; pinkie) is it what you really want?=C2=
 =A0 I had this mental model of empty-image<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; really being the identity object on th=
 e &quot;image algebra=E2=80=9D<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Yes, that=E2=80=99s the way it=E2=80=99s m=
 ost commonly used.=C2=A0 But there=E2=80=99s no such<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; thing as =E2=80=9Cthe identity object=E2=
 =80=9D on an entire algebra, only =E2=80=9Cthe identity<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; object=E2=80=9D for a particular operator.=
 =C2=A0 (0 is the identity for addition, 1 for<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; multiplication, true for OR, false for AND=
 , etc.)<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; In fact, the empty image works pretty well=
  as an identity for a<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; variety of image operators, as long as you=
  only pay attention to what=E2=80=99s<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; visible.=C2=A0 Unfortunately (but necessar=
 ily), the image data type also has some<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; invisible fields like baseline and pinhole=
 , and there=E2=80=99s no good way to<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; define operations like =E2=80=9Cbeside=E2=
 =80=9D and =E2=80=9Cabove=E2=80=9D so that<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; (a) the operation is associative, and<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; (b) the empty image is a perfect identity =
 for it.<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; I wonder if there should be a =E2=80=9Cvis=
 ibly-equal?=E2=80=9D function on images<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; that only compares whether they look the s=
 ame in their present forms.=C2=A0 Note<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; that (visibly-equal? X Y) does NOT imply t=
 hat X can be substituted for Y in<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; expressions and the results will be visibl=
 y-equal?, whereas (image=3D? X Y)<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; DOES imply that (AFAIK).<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Stephen Bloch<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; <a href=3D"javascript:;" onclick=3D"_e(eve=
 nt, &#39;cvml&#39;, &#39;sbloch@adelphi.edu&#39;)">sbloch@adelphi.edu</a><b=
 r>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; GPG key at <a href=3D"http://home.adelphi.=
 edu/sbloch/sbloch.pubkey.asc" target=3D"_blank">http://home.adelphi.edu/sbl=
 och/sbloch.pubkey.asc</a><br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;&gt;<br>
 &gt;&gt;&gt;<br>
 &gt;&gt;<br>
 <br>
 </blockquote>
 
 --001a11c2029cbad9030504aef392--
From: Ron Garcia <rxg@cs.ubc.ca>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Thu, 9 Oct 2014 15:42:30 -0700

 Hi Robby,
 
 Sorry to dive back into this.  I'm designing yet another homework that uses text images and empty-image, and I think I misunderstood  the below email.
 
 It appears that:
 
 > (image=? (text "Foo" 16 "black") (above/align "left" (text "Foo" 16 "black") empty-image))
 false
 > (image=? (text "Foo" 16 "black") (above (text "Foo" 16 "black") empty-image))
 false
 
 
 I only now noticed that your examples below use empty-image as the first argument, whereas my recursive function designs most often
 use it on the right.  Is this also expected behaviour?
 
 Thanks!
 Ron
 
 
 
 
 On 2014-10-03, at 8:37 AM, Robby Findler <robby@eecs.northwestern.edu> wrote:
 
 > I'm not very happy with this response I'm about to give, but I think
 > that this is not a bug. See if you have any ideas.
 > 
 > Here's the issue: 2htdp/image images have local coordinate systems
 > (the "bounding box") that consists of two vertical lines (one on the
 > left and one on the right) and *three* horizontal lines. The one on
 > the top and bottom that you expect, but also one called the "baseline"
 > that is right underneath the bottom of a "u" (and so the descenders in
 > "q" and "y", etc don't mess up the alignment of text on a line).
 > 
 > So, when you align at the bottom these three images:
 > 
 > (beside/align
 > "bottom"
 > (text "feed me " 18 "red")
 > (text "please?" 12 "green")
 > empty-image)
 > 
 > then the question is "what is the right baseline for the resulting
 > image?". (The images are otherwise identical.)
 > 
 > The current code picks a line at the same place as the bottom of the
 > image. The general rule it is using is to pick the baseline that is
 > furthest away from the top of the image. In this case, that's the
 > empty-image's baseline, which is right at the bottom.
 > 
 > If we change this to use the baseline that's closest to the top of the
 > image (which would work for this example), then we lose a lot more
 > interesting identities, eg this one:
 > 
 > (equal?
 > (above empty-image (rectangle 10 10 "solid" "red"))
 > (beside empty-image (rectangle 10 10 "solid" "red")))
 > 
 > So I am currently thinking that the right thing to do in this case is
 > to use "baseline" as the first argument to beside/align. Does that
 > work for your larger context?
 > 
 > Robby
 > 
 > 
 > 
 > On Thu, Oct 2, 2014 at 10:32 PM,  <rxg@cs.ubc.ca> wrote:
 >> A new problem report is waiting at
 >>  http://bugs.racket-lang.org/query/?cmd=view&pr=14760
 >> 
 >> Reported by Ron Garcia for release: 6.1
 >> 
 >> *** Description:
 >> empty-image is not an identity object for the beside/align function
 >> 
 >> *** How to repeat:
 >> (require 2htdp/image)
 >> 
 >> (image=? (beside/align "bottom"
 >>                            (text "feed me " 18 "red")
 >>                            (text "please?" 12 "green") empty-image)
 >>           (beside/align "bottom"
 >>                            (text "feed me " 18 "red")
 >>                            (text "please?" 12 "green")))
 >> 
 >> *** Environment:
 >> macosx "Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" (i386-macosx/3m) (get-display-depth) = 32
 >> Human Language: english
 >> (current-memory-use) 176906352
 >> raco pkg (show):
 >> Installation-wide:
 >> Package              Checksum                                    Source
 >> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    (catalog main-distribution)
 >> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    (catalog racket-lib)
 >> [178 auto-installed packages not shown]
 >> User-specific for installation "6.1":
 >> [none]
 >> 
 >> 
 >> 
 >> Collections:
 >> ("/Users/Ron/Library/Racket/6.1/collects"
 >> (non-existent-path))
 >> ("/Applications/Racket v6.1/collects"
 >> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" "version" "xml"))
 >> 
 >> Recent Internal Errors:
 >> Computer Language: (("Teaching Languages" "How to Design Programs" "Beginning Student") (#(#t constructor repeating-decimal #f #t none) #f ()))
 >> 
 
 
From: Robby Findler <robby@eecs.northwestern.edu>
To: Ron Garcia <rxg@cs.ubc.ca>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Thu, 9 Oct 2014 20:59:16 -0500

 --001a113c1a0c80ac32050507e5c1
 Content-Type: text/plain; charset=UTF-8
 
 I believe these example will do what you want in the fixed version. There
 is a nightly snapshot if you want to try it out (easy to install).
 
 Otherwise I would say that if you stay away from text things will also work
 how you want.
 
 Sorry about all this.
 
 Robby
 
 On Thursday, October 9, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 
 > Hi Robby,
 >
 > Sorry to dive back into this.  I'm designing yet another homework that
 > uses text images and empty-image, and I think I misunderstood  the below
 > email.
 >
 > It appears that:
 >
 > > (image=? (text "Foo" 16 "black") (above/align "left" (text "Foo" 16
 > "black") empty-image))
 > false
 > > (image=? (text "Foo" 16 "black") (above (text "Foo" 16 "black")
 > empty-image))
 > false
 >
 >
 > I only now noticed that your examples below use empty-image as the first
 > argument, whereas my recursive function designs most often
 > use it on the right.  Is this also expected behaviour?
 >
 > Thanks!
 > Ron
 >
 >
 >
 >
 > On 2014-10-03, at 8:37 AM, Robby Findler <robby@eecs.northwestern.edu
 > <javascript:;>> wrote:
 >
 > > I'm not very happy with this response I'm about to give, but I think
 > > that this is not a bug. See if you have any ideas.
 > >
 > > Here's the issue: 2htdp/image images have local coordinate systems
 > > (the "bounding box") that consists of two vertical lines (one on the
 > > left and one on the right) and *three* horizontal lines. The one on
 > > the top and bottom that you expect, but also one called the "baseline"
 > > that is right underneath the bottom of a "u" (and so the descenders in
 > > "q" and "y", etc don't mess up the alignment of text on a line).
 > >
 > > So, when you align at the bottom these three images:
 > >
 > > (beside/align
 > > "bottom"
 > > (text "feed me " 18 "red")
 > > (text "please?" 12 "green")
 > > empty-image)
 > >
 > > then the question is "what is the right baseline for the resulting
 > > image?". (The images are otherwise identical.)
 > >
 > > The current code picks a line at the same place as the bottom of the
 > > image. The general rule it is using is to pick the baseline that is
 > > furthest away from the top of the image. In this case, that's the
 > > empty-image's baseline, which is right at the bottom.
 > >
 > > If we change this to use the baseline that's closest to the top of the
 > > image (which would work for this example), then we lose a lot more
 > > interesting identities, eg this one:
 > >
 > > (equal?
 > > (above empty-image (rectangle 10 10 "solid" "red"))
 > > (beside empty-image (rectangle 10 10 "solid" "red")))
 > >
 > > So I am currently thinking that the right thing to do in this case is
 > > to use "baseline" as the first argument to beside/align. Does that
 > > work for your larger context?
 > >
 > > Robby
 > >
 > >
 > >
 > > On Thu, Oct 2, 2014 at 10:32 PM,  <rxg@cs.ubc.ca <javascript:;>> wrote:
 > >> A new problem report is waiting at
 > >>  http://bugs.racket-lang.org/query/?cmd=view&pr=14760
 > >>
 > >> Reported by Ron Garcia for release: 6.1
 > >>
 > >> *** Description:
 > >> empty-image is not an identity object for the beside/align function
 > >>
 > >> *** How to repeat:
 > >> (require 2htdp/image)
 > >>
 > >> (image=? (beside/align "bottom"
 > >>                            (text "feed me " 18 "red")
 > >>                            (text "please?" 12 "green") empty-image)
 > >>           (beside/align "bottom"
 > >>                            (text "feed me " 18 "red")
 > >>                            (text "please?" 12 "green")))
 > >>
 > >> *** Environment:
 > >> macosx "Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep 29
 > 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64"
 > (i386-macosx/3m) (get-display-depth) = 32
 > >> Human Language: english
 > >> (current-memory-use) 176906352
 > >> raco pkg (show):
 > >> Installation-wide:
 > >> Package              Checksum                                    Source
 > >> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547
 > (catalog main-distribution)
 > >> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2
 > (catalog racket-lib)
 > >> [178 auto-installed packages not shown]
 > >> User-specific for installation "6.1":
 > >> [none]
 > >>
 > >>
 > >>
 > >> Collections:
 > >> ("/Users/Ron/Library/Racket/6.1/collects"
 > >> (non-existent-path))
 > >> ("/Applications/Racket v6.1/collects"
 > >> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file"
 > "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet"
 > "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable"
 > "version" "xml"))
 > >>
 > >> Recent Internal Errors:
 > >> Computer Language: (("Teaching Languages" "How to Design Programs"
 > "Beginning Student") (#(#t constructor repeating-decimal #f #t none) #f ()))
 > >>
 >
 >
 
 --001a113c1a0c80ac32050507e5c1
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 I believe these example will do what you want in the fixed version. There i=
 s a nightly snapshot if you want to try it out (easy to install).<div><br><=
 /div><div>Otherwise I would say that if you stay away from text things will=
  also work how you want.=C2=A0</div><div><br></div><div>Sorry about all thi=
 s.=C2=A0</div><div><br></div><div>Robby<span></span></div><div><br>On Thurs=
 day, October 9, 2014, Ron Garcia &lt;<a href=3D"mailto:rxg@cs.ubc.ca">rxg@c=
 s.ubc.ca</a>&gt; wrote:<br><blockquote class=3D"gmail_quote" style=3D"margi=
 n:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">Hi Robby,<br>
 <br>
 Sorry to dive back into this.=C2=A0 I&#39;m designing yet another homework =
 that uses text images and empty-image, and I think I misunderstood=C2=A0 th=
 e below email.<br>
 <br>
 It appears that:<br>
 <br>
 &gt; (image=3D? (text &quot;Foo&quot; 16 &quot;black&quot;) (above/align &q=
 uot;left&quot; (text &quot;Foo&quot; 16 &quot;black&quot;) empty-image))<br=
 >
 false<br>
 &gt; (image=3D? (text &quot;Foo&quot; 16 &quot;black&quot;) (above (text &q=
 uot;Foo&quot; 16 &quot;black&quot;) empty-image))<br>
 false<br>
 <br>
 <br>
 I only now noticed that your examples below use empty-image as the first ar=
 gument, whereas my recursive function designs most often<br>
 use it on the right.=C2=A0 Is this also expected behaviour?<br>
 <br>
 Thanks!<br>
 Ron<br>
 <br>
 <br>
 <br>
 <br>
 On 2014-10-03, at 8:37 AM, Robby Findler &lt;<a href=3D"javascript:;" oncli=
 ck=3D"_e(event, &#39;cvml&#39;, &#39;robby@eecs.northwestern.edu&#39;)">rob=
 by@eecs.northwestern.edu</a>&gt; wrote:<br>
 <br>
 &gt; I&#39;m not very happy with this response I&#39;m about to give, but I=
  think<br>
 &gt; that this is not a bug. See if you have any ideas.<br>
 &gt;<br>
 &gt; Here&#39;s the issue: 2htdp/image images have local coordinate systems=
 <br>
 &gt; (the &quot;bounding box&quot;) that consists of two vertical lines (on=
 e on the<br>
 &gt; left and one on the right) and *three* horizontal lines. The one on<br=
 >
 &gt; the top and bottom that you expect, but also one called the &quot;base=
 line&quot;<br>
 &gt; that is right underneath the bottom of a &quot;u&quot; (and so the des=
 cenders in<br>
 &gt; &quot;q&quot; and &quot;y&quot;, etc don&#39;t mess up the alignment o=
 f text on a line).<br>
 &gt;<br>
 &gt; So, when you align at the bottom these three images:<br>
 &gt;<br>
 &gt; (beside/align<br>
 &gt; &quot;bottom&quot;<br>
 &gt; (text &quot;feed me &quot; 18 &quot;red&quot;)<br>
 &gt; (text &quot;please?&quot; 12 &quot;green&quot;)<br>
 &gt; empty-image)<br>
 &gt;<br>
 &gt; then the question is &quot;what is the right baseline for the resultin=
 g<br>
 &gt; image?&quot;. (The images are otherwise identical.)<br>
 &gt;<br>
 &gt; The current code picks a line at the same place as the bottom of the<b=
 r>
 &gt; image. The general rule it is using is to pick the baseline that is<br=
 >
 &gt; furthest away from the top of the image. In this case, that&#39;s the<=
 br>
 &gt; empty-image&#39;s baseline, which is right at the bottom.<br>
 &gt;<br>
 &gt; If we change this to use the baseline that&#39;s closest to the top of=
  the<br>
 &gt; image (which would work for this example), then we lose a lot more<br>
 &gt; interesting identities, eg this one:<br>
 &gt;<br>
 &gt; (equal?<br>
 &gt; (above empty-image (rectangle 10 10 &quot;solid&quot; &quot;red&quot;)=
 )<br>
 &gt; (beside empty-image (rectangle 10 10 &quot;solid&quot; &quot;red&quot;=
 )))<br>
 &gt;<br>
 &gt; So I am currently thinking that the right thing to do in this case is<=
 br>
 &gt; to use &quot;baseline&quot; as the first argument to beside/align. Doe=
 s that<br>
 &gt; work for your larger context?<br>
 &gt;<br>
 &gt; Robby<br>
 &gt;<br>
 &gt;<br>
 &gt;<br>
 &gt; On Thu, Oct 2, 2014 at 10:32 PM,=C2=A0 &lt;<a href=3D"javascript:;" on=
 click=3D"_e(event, &#39;cvml&#39;, &#39;rxg@cs.ubc.ca&#39;)">rxg@cs.ubc.ca<=
 /a>&gt; wrote:<br>
 &gt;&gt; A new problem report is waiting at<br>
 &gt;&gt;=C2=A0 <a href=3D"http://bugs.racket-lang.org/query/?cmd=3Dview&amp=
 ;pr=3D14760" target=3D"_blank">http://bugs.racket-lang.org/query/?cmd=3Dvie=
 w&amp;pr=3D14760</a><br>
 &gt;&gt;<br>
 &gt;&gt; Reported by Ron Garcia for release: 6.1<br>
 &gt;&gt;<br>
 &gt;&gt; *** Description:<br>
 &gt;&gt; empty-image is not an identity object for the beside/align functio=
 n<br>
 &gt;&gt;<br>
 &gt;&gt; *** How to repeat:<br>
 &gt;&gt; (require 2htdp/image)<br>
 &gt;&gt;<br>
 &gt;&gt; (image=3D? (beside/align &quot;bottom&quot;<br>
 &gt;&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
 =A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 (text &quot;feed me &quot; 18 &quot;red&quo=
 t;)<br>
 &gt;&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
 =A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 (text &quot;please?&quot; 12 &quot;green&qu=
 ot;) empty-image)<br>
 &gt;&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0(beside/align &quot;bottom=
 &quot;<br>
 &gt;&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
 =A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 (text &quot;feed me &quot; 18 &quot;red&quo=
 t;)<br>
 &gt;&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
 =A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 (text &quot;please?&quot; 12 &quot;green&qu=
 ot;)))<br>
 &gt;&gt;<br>
 &gt;&gt; *** Environment:<br>
 &gt;&gt; macosx &quot;Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: =
 Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64&q=
 uot; (i386-macosx/3m) (get-display-depth) =3D 32<br>
 &gt;&gt; Human Language: english<br>
 &gt;&gt; (current-memory-use) 176906352<br>
 &gt;&gt; raco pkg (show):<br>
 &gt;&gt; Installation-wide:<br>
 &gt;&gt; Package=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Checksum=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
 =A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Source<br>
 &gt;&gt; main-distribution=C2=A0 =C2=A0 f07e2d4bf2708c1085be38eca18aa9eb675=
 5e547=C2=A0 =C2=A0 (catalog main-distribution)<br>
 &gt;&gt; racket-lib=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A041c7b3221006758=
 c5a840a18dcc0d265632f14c2=C2=A0 =C2=A0 (catalog racket-lib)<br>
 &gt;&gt; [178 auto-installed packages not shown]<br>
 &gt;&gt; User-specific for installation &quot;6.1&quot;:<br>
 &gt;&gt; [none]<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt; Collections:<br>
 &gt;&gt; (&quot;/Users/Ron/Library/Racket/6.1/collects&quot;<br>
 &gt;&gt; (non-existent-path))<br>
 &gt;&gt; (&quot;/Applications/Racket v6.1/collects&quot;<br>
 &gt;&gt; (&quot;.gitignore&quot; &quot;acks&quot; &quot;compiler&quot; &quo=
 t;data&quot; &quot;db&quot; &quot;dynext&quot; &quot;ffi&quot; &quot;file&q=
 uot; &quot;info&quot; &quot;info-domain&quot; &quot;json&quot; &quot;launch=
 er&quot; &quot;net&quot; &quot;openssl&quot; &quot;pkg&quot; &quot;planet&q=
 uot; &quot;racket&quot; &quot;raco&quot; &quot;reader&quot; &quot;realm&quo=
 t; &quot;s-exp&quot; &quot;setup&quot; &quot;syntax&quot; &quot;unstable&qu=
 ot; &quot;version&quot; &quot;xml&quot;))<br>
 &gt;&gt;<br>
 &gt;&gt; Recent Internal Errors:<br>
 &gt;&gt; Computer Language: ((&quot;Teaching Languages&quot; &quot;How to D=
 esign Programs&quot; &quot;Beginning Student&quot;) (#(#t constructor repea=
 ting-decimal #f #t none) #f ()))<br>
 &gt;&gt;<br>
 <br>
 </blockquote></div>
 
 --001a113c1a0c80ac32050507e5c1--
From: Ron Garcia <rxg@cs.ubc.ca>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Fri, 10 Oct 2014 18:25:43 -0700

 --Apple-Mail=_E1A37ED0-06EC-410C-8283-4AC85ADF35DC
 Content-Transfer-Encoding: quoted-printable
 Content-Type: text/plain;
 	charset=us-ascii
 
 Thanks Robby,
 
 I'll give it a try to verify for you.  I have to stick with the official =
 release so that I'm on the same page as my students (good luck getting =
 700 students to actually upgrade at this point!) :).
 
 Thanks again!
 
 Ron
 
 On 2014-10-09, at 6:59 PM, Robby Findler <robby@eecs.northwestern.edu> =
 wrote:
 
 > I believe these example will do what you want in the fixed version. =
 There is a nightly snapshot if you want to try it out (easy to install).
 >=20
 > Otherwise I would say that if you stay away from text things will also =
 work how you want.=20
 >=20
 > Sorry about all this.=20
 >=20
 > Robby
 >=20
 > On Thursday, October 9, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 > Hi Robby,
 >=20
 > Sorry to dive back into this.  I'm designing yet another homework that =
 uses text images and empty-image, and I think I misunderstood  the below =
 email.
 >=20
 > It appears that:
 >=20
 > > (image=3D? (text "Foo" 16 "black") (above/align "left" (text "Foo" =
 16 "black") empty-image))
 > false
 > > (image=3D? (text "Foo" 16 "black") (above (text "Foo" 16 "black") =
 empty-image))
 > false
 >=20
 >=20
 > I only now noticed that your examples below use empty-image as the =
 first argument, whereas my recursive function designs most often
 > use it on the right.  Is this also expected behaviour?
 >=20
 > Thanks!
 > Ron
 >=20
 >=20
 >=20
 >=20
 > On 2014-10-03, at 8:37 AM, Robby Findler <robby@eecs.northwestern.edu> =
 wrote:
 >=20
 > > I'm not very happy with this response I'm about to give, but I think
 > > that this is not a bug. See if you have any ideas.
 > >
 > > Here's the issue: 2htdp/image images have local coordinate systems
 > > (the "bounding box") that consists of two vertical lines (one on the
 > > left and one on the right) and *three* horizontal lines. The one on
 > > the top and bottom that you expect, but also one called the =
 "baseline"
 > > that is right underneath the bottom of a "u" (and so the descenders =
 in
 > > "q" and "y", etc don't mess up the alignment of text on a line).
 > >
 > > So, when you align at the bottom these three images:
 > >
 > > (beside/align
 > > "bottom"
 > > (text "feed me " 18 "red")
 > > (text "please?" 12 "green")
 > > empty-image)
 > >
 > > then the question is "what is the right baseline for the resulting
 > > image?". (The images are otherwise identical.)
 > >
 > > The current code picks a line at the same place as the bottom of the
 > > image. The general rule it is using is to pick the baseline that is
 > > furthest away from the top of the image. In this case, that's the
 > > empty-image's baseline, which is right at the bottom.
 > >
 > > If we change this to use the baseline that's closest to the top of =
 the
 > > image (which would work for this example), then we lose a lot more
 > > interesting identities, eg this one:
 > >
 > > (equal?
 > > (above empty-image (rectangle 10 10 "solid" "red"))
 > > (beside empty-image (rectangle 10 10 "solid" "red")))
 > >
 > > So I am currently thinking that the right thing to do in this case =
 is
 > > to use "baseline" as the first argument to beside/align. Does that
 > > work for your larger context?
 > >
 > > Robby
 > >
 > >
 > >
 > > On Thu, Oct 2, 2014 at 10:32 PM,  <rxg@cs.ubc.ca> wrote:
 > >> A new problem report is waiting at
 > >>  http://bugs.racket-lang.org/query/?cmd=3Dview&pr=3D14760
 > >>
 > >> Reported by Ron Garcia for release: 6.1
 > >>
 > >> *** Description:
 > >> empty-image is not an identity object for the beside/align function
 > >>
 > >> *** How to repeat:
 > >> (require 2htdp/image)
 > >>
 > >> (image=3D? (beside/align "bottom"
 > >>                            (text "feed me " 18 "red")
 > >>                            (text "please?" 12 "green") empty-image)
 > >>           (beside/align "bottom"
 > >>                            (text "feed me " 18 "red")
 > >>                            (text "please?" 12 "green")))
 > >>
 > >> *** Environment:
 > >> macosx "Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: Sun =
 Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" =
 (i386-macosx/3m) (get-display-depth) =3D 32
 > >> Human Language: english
 > >> (current-memory-use) 176906352
 > >> raco pkg (show):
 > >> Installation-wide:
 > >> Package              Checksum                                    =
 Source
 > >> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    =
 (catalog main-distribution)
 > >> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    =
 (catalog racket-lib)
 > >> [178 auto-installed packages not shown]
 > >> User-specific for installation "6.1":
 > >> [none]
 > >>
 > >>
 > >>
 > >> Collections:
 > >> ("/Users/Ron/Library/Racket/6.1/collects"
 > >> (non-existent-path))
 > >> ("/Applications/Racket v6.1/collects"
 > >> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" =
 "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" =
 "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" =
 "version" "xml"))
 > >>
 > >> Recent Internal Errors:
 > >> Computer Language: (("Teaching Languages" "How to Design Programs" =
 "Beginning Student") (#(#t constructor repeating-decimal #f #t none) #f =
 ()))
 > >>
 >=20
 
 
 --Apple-Mail=_E1A37ED0-06EC-410C-8283-4AC85ADF35DC
 Content-Transfer-Encoding: quoted-printable
 Content-Type: text/html;
 	charset=us-ascii
 
 <html><head><meta http-equiv=3D"Content-Type" content=3D"text/html =
 charset=3Dus-ascii"></head><body style=3D"word-wrap: break-word; =
 -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; =
 ">Thanks Robby,<div><br></div><div>I'll give it a try to verify for you. =
 &nbsp;I have to stick with the official release so that I'm on the same =
 page as my students (good luck getting 700 students to actually upgrade =
 at this point!) :).</div><div><br></div><div>Thanks =
 again!</div><div><br></div><div>Ron</div><div><br><div><div>On =
 2014-10-09, at 6:59 PM, Robby Findler &lt;<a =
 href=3D"mailto:robby@eecs.northwestern.edu">robby@eecs.northwestern.edu</a=
 >&gt; wrote:</div><br class=3D"Apple-interchange-newline"><blockquote =
 type=3D"cite">I believe these example will do what you want in the fixed =
 version. There is a nightly snapshot if you want to try it out (easy to =
 install).<div><br></div><div>Otherwise I would say that if you stay away =
 from text things will also work how you =
 want.&nbsp;</div><div><br></div><div>Sorry about all =
 this.&nbsp;</div><div><br></div><div>Robby<span></span></div><div><br>On =
 Thursday, October 9, 2014, Ron Garcia &lt;<a =
 href=3D"mailto:rxg@cs.ubc.ca">rxg@cs.ubc.ca</a>&gt; =
 wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 =
 .8ex;border-left:1px #ccc solid;padding-left:1ex">Hi Robby,<br>
 <br>
 Sorry to dive back into this.&nbsp; I'm designing yet another homework =
 that uses text images and empty-image, and I think I misunderstood&nbsp; =
 the below email.<br>
 <br>
 It appears that:<br>
 <br>
 &gt; (image=3D? (text "Foo" 16 "black") (above/align "left" (text "Foo" =
 16 "black") empty-image))<br>
 false<br>
 &gt; (image=3D? (text "Foo" 16 "black") (above (text "Foo" 16 "black") =
 empty-image))<br>
 false<br>
 <br>
 <br>
 I only now noticed that your examples below use empty-image as the first =
 argument, whereas my recursive function designs most often<br>
 use it on the right.&nbsp; Is this also expected behaviour?<br>
 <br>
 Thanks!<br>
 Ron<br>
 <br>
 <br>
 <br>
 <br>
 On 2014-10-03, at 8:37 AM, Robby Findler &lt;<a href=3D"javascript:;" =
 onclick=3D"_e(event, 'cvml', =
 'robby@eecs.northwestern.edu')">robby@eecs.northwestern.edu</a>&gt; =
 wrote:<br>
 <br>
 &gt; I'm not very happy with this response I'm about to give, but I =
 think<br>
 &gt; that this is not a bug. See if you have any ideas.<br>
 &gt;<br>
 &gt; Here's the issue: 2htdp/image images have local coordinate =
 systems<br>
 &gt; (the "bounding box") that consists of two vertical lines (one on =
 the<br>
 &gt; left and one on the right) and *three* horizontal lines. The one =
 on<br>
 &gt; the top and bottom that you expect, but also one called the =
 "baseline"<br>
 &gt; that is right underneath the bottom of a "u" (and so the descenders =
 in<br>
 &gt; "q" and "y", etc don't mess up the alignment of text on a =
 line).<br>
 &gt;<br>
 &gt; So, when you align at the bottom these three images:<br>
 &gt;<br>
 &gt; (beside/align<br>
 &gt; "bottom"<br>
 &gt; (text "feed me " 18 "red")<br>
 &gt; (text "please?" 12 "green")<br>
 &gt; empty-image)<br>
 &gt;<br>
 &gt; then the question is "what is the right baseline for the =
 resulting<br>
 &gt; image?". (The images are otherwise identical.)<br>
 &gt;<br>
 &gt; The current code picks a line at the same place as the bottom of =
 the<br>
 &gt; image. The general rule it is using is to pick the baseline that =
 is<br>
 &gt; furthest away from the top of the image. In this case, that's =
 the<br>
 &gt; empty-image's baseline, which is right at the bottom.<br>
 &gt;<br>
 &gt; If we change this to use the baseline that's closest to the top of =
 the<br>
 &gt; image (which would work for this example), then we lose a lot =
 more<br>
 &gt; interesting identities, eg this one:<br>
 &gt;<br>
 &gt; (equal?<br>
 &gt; (above empty-image (rectangle 10 10 "solid" "red"))<br>
 &gt; (beside empty-image (rectangle 10 10 "solid" "red")))<br>
 &gt;<br>
 &gt; So I am currently thinking that the right thing to do in this case =
 is<br>
 &gt; to use "baseline" as the first argument to beside/align. Does =
 that<br>
 &gt; work for your larger context?<br>
 &gt;<br>
 &gt; Robby<br>
 &gt;<br>
 &gt;<br>
 &gt;<br>
 &gt; On Thu, Oct 2, 2014 at 10:32 PM,&nbsp; &lt;<a href=3D"javascript:;" =
 onclick=3D"_e(event, 'cvml', 'rxg@cs.ubc.ca')">rxg@cs.ubc.ca</a>&gt; =
 wrote:<br>
 &gt;&gt; A new problem report is waiting at<br>
 &gt;&gt;&nbsp; <a =
 href=3D"http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=3D14760" =
 target=3D"_blank">http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=3D1=
 4760</a><br>
 &gt;&gt;<br>
 &gt;&gt; Reported by Ron Garcia for release: 6.1<br>
 &gt;&gt;<br>
 &gt;&gt; *** Description:<br>
 &gt;&gt; empty-image is not an identity object for the beside/align =
 function<br>
 &gt;&gt;<br>
 &gt;&gt; *** How to repeat:<br>
 &gt;&gt; (require 2htdp/image)<br>
 &gt;&gt;<br>
 &gt;&gt; (image=3D? (beside/align "bottom"<br>
 &gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (text "feed me " 18 "red")<br>
 &gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (text "please?" 12 "green") =
 empty-image)<br>
 &gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(beside/align =
 "bottom"<br>
 &gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (text "feed me " 18 "red")<br>
 &gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (text "please?" 12 "green")))<br>
 &gt;&gt;<br>
 &gt;&gt; *** Environment:<br>
 &gt;&gt; macosx "Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: =
 Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 =
 x86_64" (i386-macosx/3m) (get-display-depth) =3D 32<br>
 &gt;&gt; Human Language: english<br>
 &gt;&gt; (current-memory-use) 176906352<br>
 &gt;&gt; raco pkg (show):<br>
 &gt;&gt; Installation-wide:<br>
 &gt;&gt; Package&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 Checksum&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 Source<br>
 &gt;&gt; main-distribution&nbsp; &nbsp; =
 f07e2d4bf2708c1085be38eca18aa9eb6755e547&nbsp; &nbsp; (catalog =
 main-distribution)<br>
 &gt;&gt; racket-lib&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 &nbsp;41c7b3221006758c5a840a18dcc0d265632f14c2&nbsp; &nbsp; (catalog =
 racket-lib)<br>
 &gt;&gt; [178 auto-installed packages not shown]<br>
 &gt;&gt; User-specific for installation "6.1":<br>
 &gt;&gt; [none]<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt; Collections:<br>
 &gt;&gt; ("/Users/Ron/Library/Racket/6.1/collects"<br>
 &gt;&gt; (non-existent-path))<br>
 &gt;&gt; ("/Applications/Racket v6.1/collects"<br>
 &gt;&gt; (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" =
 "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" =
 "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" =
 "unstable" "version" "xml"))<br>
 &gt;&gt;<br>
 &gt;&gt; Recent Internal Errors:<br>
 &gt;&gt; Computer Language: (("Teaching Languages" "How to Design =
 Programs" "Beginning Student") (#(#t constructor repeating-decimal #f #t =
 none) #f ()))<br>
 &gt;&gt;<br>
 <br>
 </blockquote></div>
 </blockquote></div><br></div></body></html>=
 
 --Apple-Mail=_E1A37ED0-06EC-410C-8283-4AC85ADF35DC--
From: Robby Findler <robby@eecs.northwestern.edu>
To: Ron Garcia <rxg@cs.ubc.ca>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Fri, 10 Oct 2014 20:36:52 -0500

 --001a11c1dcc63918d005051bb309
 Content-Type: text/plain; charset=UTF-8
 
 Yeah I know. I am sorry that we didn't get this sorted out before this but
 I am also very happy that you helped improve racket!
 
 Robby
 
 On Friday, October 10, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 
 > Thanks Robby,
 >
 > I'll give it a try to verify for you.  I have to stick with the official
 > release so that I'm on the same page as my students (good luck getting 700
 > students to actually upgrade at this point!) :).
 >
 > Thanks again!
 >
 > Ron
 >
 > On 2014-10-09, at 6:59 PM, Robby Findler <robby@eecs.northwestern.edu
 > <javascript:_e(%7B%7D,'cvml','robby@eecs.northwestern.edu');>> wrote:
 >
 > I believe these example will do what you want in the fixed version. There
 > is a nightly snapshot if you want to try it out (easy to install).
 >
 > Otherwise I would say that if you stay away from text things will also
 > work how you want.
 >
 > Sorry about all this.
 >
 > Robby
 >
 > On Thursday, October 9, 2014, Ron Garcia <rxg@cs.ubc.ca
 > <javascript:_e(%7B%7D,'cvml','rxg@cs.ubc.ca');>> wrote:
 >
 >> Hi Robby,
 >>
 >> Sorry to dive back into this.  I'm designing yet another homework that
 >> uses text images and empty-image, and I think I misunderstood  the below
 >> email.
 >>
 >> It appears that:
 >>
 >> > (image=? (text "Foo" 16 "black") (above/align "left" (text "Foo" 16
 >> "black") empty-image))
 >> false
 >> > (image=? (text "Foo" 16 "black") (above (text "Foo" 16 "black")
 >> empty-image))
 >> false
 >>
 >>
 >> I only now noticed that your examples below use empty-image as the first
 >> argument, whereas my recursive function designs most often
 >> use it on the right.  Is this also expected behaviour?
 >>
 >> Thanks!
 >> Ron
 >>
 >>
 >>
 >>
 >> On 2014-10-03, at 8:37 AM, Robby Findler <robby@eecs.northwestern.edu>
 >> wrote:
 >>
 >> > I'm not very happy with this response I'm about to give, but I think
 >> > that this is not a bug. See if you have any ideas.
 >> >
 >> > Here's the issue: 2htdp/image images have local coordinate systems
 >> > (the "bounding box") that consists of two vertical lines (one on the
 >> > left and one on the right) and *three* horizontal lines. The one on
 >> > the top and bottom that you expect, but also one called the "baseline"
 >> > that is right underneath the bottom of a "u" (and so the descenders in
 >> > "q" and "y", etc don't mess up the alignment of text on a line).
 >> >
 >> > So, when you align at the bottom these three images:
 >> >
 >> > (beside/align
 >> > "bottom"
 >> > (text "feed me " 18 "red")
 >> > (text "please?" 12 "green")
 >> > empty-image)
 >> >
 >> > then the question is "what is the right baseline for the resulting
 >> > image?". (The images are otherwise identical.)
 >> >
 >> > The current code picks a line at the same place as the bottom of the
 >> > image. The general rule it is using is to pick the baseline that is
 >> > furthest away from the top of the image. In this case, that's the
 >> > empty-image's baseline, which is right at the bottom.
 >> >
 >> > If we change this to use the baseline that's closest to the top of the
 >> > image (which would work for this example), then we lose a lot more
 >> > interesting identities, eg this one:
 >> >
 >> > (equal?
 >> > (above empty-image (rectangle 10 10 "solid" "red"))
 >> > (beside empty-image (rectangle 10 10 "solid" "red")))
 >> >
 >> > So I am currently thinking that the right thing to do in this case is
 >> > to use "baseline" as the first argument to beside/align. Does that
 >> > work for your larger context?
 >> >
 >> > Robby
 >> >
 >> >
 >> >
 >> > On Thu, Oct 2, 2014 at 10:32 PM,  <rxg@cs.ubc.ca> wrote:
 >> >> A new problem report is waiting at
 >> >>  http://bugs.racket-lang.org/query/?cmd=view&pr=14760
 >> >>
 >> >> Reported by Ron Garcia for release: 6.1
 >> >>
 >> >> *** Description:
 >> >> empty-image is not an identity object for the beside/align function
 >> >>
 >> >> *** How to repeat:
 >> >> (require 2htdp/image)
 >> >>
 >> >> (image=? (beside/align "bottom"
 >> >>                            (text "feed me " 18 "red")
 >> >>                            (text "please?" 12 "green") empty-image)
 >> >>           (beside/align "bottom"
 >> >>                            (text "feed me " 18 "red")
 >> >>                            (text "please?" 12 "green")))
 >> >>
 >> >> *** Environment:
 >> >> macosx "Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: Sun Sep
 >> 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64"
 >> (i386-macosx/3m) (get-display-depth) = 32
 >> >> Human Language: english
 >> >> (current-memory-use) 176906352
 >> >> raco pkg (show):
 >> >> Installation-wide:
 >> >> Package              Checksum                                    Source
 >> >> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547
 >> (catalog main-distribution)
 >> >> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2
 >> (catalog racket-lib)
 >> >> [178 auto-installed packages not shown]
 >> >> User-specific for installation "6.1":
 >> >> [none]
 >> >>
 >> >>
 >> >>
 >> >> Collections:
 >> >> ("/Users/Ron/Library/Racket/6.1/collects"
 >> >> (non-existent-path))
 >> >> ("/Applications/Racket v6.1/collects"
 >> >> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file"
 >> "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet"
 >> "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable"
 >> "version" "xml"))
 >> >>
 >> >> Recent Internal Errors:
 >> >> Computer Language: (("Teaching Languages" "How to Design Programs"
 >> "Beginning Student") (#(#t constructor repeating-decimal #f #t none) #f ()))
 >> >>
 >>
 >>
 >
 
 --001a11c1dcc63918d005051bb309
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 Yeah I know. I am sorry that we didn&#39;t get this sorted out before this =
 but I am also very happy that you helped improve racket!<div><br></div><div=
 >Robby<span></span><br><br>On Friday, October 10, 2014, Ron Garcia &lt;<a h=
 ref=3D"mailto:rxg@cs.ubc.ca">rxg@cs.ubc.ca</a>&gt; wrote:<br><blockquote cl=
 ass=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;p=
 adding-left:1ex"><div style=3D"word-wrap:break-word">Thanks Robby,<div><br>=
 </div><div>I&#39;ll give it a try to verify for you.=C2=A0 I have to stick =
 with the official release so that I&#39;m on the same page as my students (=
 good luck getting 700 students to actually upgrade at this point!) :).</div=
 ><div><br></div><div>Thanks again!</div><div><br></div><div>Ron</div><div><=
 br><div><div>On 2014-10-09, at 6:59 PM, Robby Findler &lt;<a href=3D"javasc=
 ript:_e(%7B%7D,&#39;cvml&#39;,&#39;robby@eecs.northwestern.edu&#39;);" targ=
 et=3D"_blank">robby@eecs.northwestern.edu</a>&gt; wrote:</div><br><blockquo=
 te type=3D"cite">I believe these example will do what you want in the fixed=
  version. There is a nightly snapshot if you want to try it out (easy to in=
 stall).<div><br></div><div>Otherwise I would say that if you stay away from=
  text things will also work how you want.=C2=A0</div><div><br></div><div>So=
 rry about all this.=C2=A0</div><div><br></div><div>Robby<span></span></div>=
 <div><br>On Thursday, October 9, 2014, Ron Garcia &lt;<a href=3D"javascript=
 :_e(%7B%7D,&#39;cvml&#39;,&#39;rxg@cs.ubc.ca&#39;);" target=3D"_blank">rxg@=
 cs.ubc.ca</a>&gt; wrote:<br><blockquote class=3D"gmail_quote" style=3D"marg=
 in:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">Hi Robby,<br>
 <br>
 Sorry to dive back into this.=C2=A0 I&#39;m designing yet another homework =
 that uses text images and empty-image, and I think I misunderstood=C2=A0 th=
 e below email.<br>
 <br>
 It appears that:<br>
 <br>
 &gt; (image=3D? (text &quot;Foo&quot; 16 &quot;black&quot;) (above/align &q=
 uot;left&quot; (text &quot;Foo&quot; 16 &quot;black&quot;) empty-image))<br=
 >
 false<br>
 &gt; (image=3D? (text &quot;Foo&quot; 16 &quot;black&quot;) (above (text &q=
 uot;Foo&quot; 16 &quot;black&quot;) empty-image))<br>
 false<br>
 <br>
 <br>
 I only now noticed that your examples below use empty-image as the first ar=
 gument, whereas my recursive function designs most often<br>
 use it on the right.=C2=A0 Is this also expected behaviour?<br>
 <br>
 Thanks!<br>
 Ron<br>
 <br>
 <br>
 <br>
 <br>
 On 2014-10-03, at 8:37 AM, Robby Findler &lt;<a>robby@eecs.northwestern.edu=
 </a>&gt; wrote:<br>
 <br>
 &gt; I&#39;m not very happy with this response I&#39;m about to give, but I=
  think<br>
 &gt; that this is not a bug. See if you have any ideas.<br>
 &gt;<br>
 &gt; Here&#39;s the issue: 2htdp/image images have local coordinate systems=
 <br>
 &gt; (the &quot;bounding box&quot;) that consists of two vertical lines (on=
 e on the<br>
 &gt; left and one on the right) and *three* horizontal lines. The one on<br=
 >
 &gt; the top and bottom that you expect, but also one called the &quot;base=
 line&quot;<br>
 &gt; that is right underneath the bottom of a &quot;u&quot; (and so the des=
 cenders in<br>
 &gt; &quot;q&quot; and &quot;y&quot;, etc don&#39;t mess up the alignment o=
 f text on a line).<br>
 &gt;<br>
 &gt; So, when you align at the bottom these three images:<br>
 &gt;<br>
 &gt; (beside/align<br>
 &gt; &quot;bottom&quot;<br>
 &gt; (text &quot;feed me &quot; 18 &quot;red&quot;)<br>
 &gt; (text &quot;please?&quot; 12 &quot;green&quot;)<br>
 &gt; empty-image)<br>
 &gt;<br>
 &gt; then the question is &quot;what is the right baseline for the resultin=
 g<br>
 &gt; image?&quot;. (The images are otherwise identical.)<br>
 &gt;<br>
 &gt; The current code picks a line at the same place as the bottom of the<b=
 r>
 &gt; image. The general rule it is using is to pick the baseline that is<br=
 >
 &gt; furthest away from the top of the image. In this case, that&#39;s the<=
 br>
 &gt; empty-image&#39;s baseline, which is right at the bottom.<br>
 &gt;<br>
 &gt; If we change this to use the baseline that&#39;s closest to the top of=
  the<br>
 &gt; image (which would work for this example), then we lose a lot more<br>
 &gt; interesting identities, eg this one:<br>
 &gt;<br>
 &gt; (equal?<br>
 &gt; (above empty-image (rectangle 10 10 &quot;solid&quot; &quot;red&quot;)=
 )<br>
 &gt; (beside empty-image (rectangle 10 10 &quot;solid&quot; &quot;red&quot;=
 )))<br>
 &gt;<br>
 &gt; So I am currently thinking that the right thing to do in this case is<=
 br>
 &gt; to use &quot;baseline&quot; as the first argument to beside/align. Doe=
 s that<br>
 &gt; work for your larger context?<br>
 &gt;<br>
 &gt; Robby<br>
 &gt;<br>
 &gt;<br>
 &gt;<br>
 &gt; On Thu, Oct 2, 2014 at 10:32 PM,=C2=A0 &lt;<a>rxg@cs.ubc.ca</a>&gt; wr=
 ote:<br>
 &gt;&gt; A new problem report is waiting at<br>
 &gt;&gt;=C2=A0 <a href=3D"http://bugs.racket-lang.org/query/?cmd=3Dview&amp=
 ;pr=3D14760" target=3D"_blank">http://bugs.racket-lang.org/query/?cmd=3Dvie=
 w&amp;pr=3D14760</a><br>
 &gt;&gt;<br>
 &gt;&gt; Reported by Ron Garcia for release: 6.1<br>
 &gt;&gt;<br>
 &gt;&gt; *** Description:<br>
 &gt;&gt; empty-image is not an identity object for the beside/align functio=
 n<br>
 &gt;&gt;<br>
 &gt;&gt; *** How to repeat:<br>
 &gt;&gt; (require 2htdp/image)<br>
 &gt;&gt;<br>
 &gt;&gt; (image=3D? (beside/align &quot;bottom&quot;<br>
 &gt;&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
 =A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 (text &quot;feed me &quot; 18 &quot;red&quo=
 t;)<br>
 &gt;&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
 =A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 (text &quot;please?&quot; 12 &quot;green&qu=
 ot;) empty-image)<br>
 &gt;&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0(beside/align &quot;bottom=
 &quot;<br>
 &gt;&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
 =A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 (text &quot;feed me &quot; 18 &quot;red&quo=
 t;)<br>
 &gt;&gt;=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
 =A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 (text &quot;please?&quot; 12 &quot;green&qu=
 ot;)))<br>
 &gt;&gt;<br>
 &gt;&gt; *** Environment:<br>
 &gt;&gt; macosx &quot;Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: =
 Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64&q=
 uot; (i386-macosx/3m) (get-display-depth) =3D 32<br>
 &gt;&gt; Human Language: english<br>
 &gt;&gt; (current-memory-use) 176906352<br>
 &gt;&gt; raco pkg (show):<br>
 &gt;&gt; Installation-wide:<br>
 &gt;&gt; Package=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Checksum=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
 =A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Source<br>
 &gt;&gt; main-distribution=C2=A0 =C2=A0 f07e2d4bf2708c1085be38eca18aa9eb675=
 5e547=C2=A0 =C2=A0 (catalog main-distribution)<br>
 &gt;&gt; racket-lib=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A041c7b3221006758=
 c5a840a18dcc0d265632f14c2=C2=A0 =C2=A0 (catalog racket-lib)<br>
 &gt;&gt; [178 auto-installed packages not shown]<br>
 &gt;&gt; User-specific for installation &quot;6.1&quot;:<br>
 &gt;&gt; [none]<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt; Collections:<br>
 &gt;&gt; (&quot;/Users/Ron/Library/Racket/6.1/collects&quot;<br>
 &gt;&gt; (non-existent-path))<br>
 &gt;&gt; (&quot;/Applications/Racket v6.1/collects&quot;<br>
 &gt;&gt; (&quot;.gitignore&quot; &quot;acks&quot; &quot;compiler&quot; &quo=
 t;data&quot; &quot;db&quot; &quot;dynext&quot; &quot;ffi&quot; &quot;file&q=
 uot; &quot;info&quot; &quot;info-domain&quot; &quot;json&quot; &quot;launch=
 er&quot; &quot;net&quot; &quot;openssl&quot; &quot;pkg&quot; &quot;planet&q=
 uot; &quot;racket&quot; &quot;raco&quot; &quot;reader&quot; &quot;realm&quo=
 t; &quot;s-exp&quot; &quot;setup&quot; &quot;syntax&quot; &quot;unstable&qu=
 ot; &quot;version&quot; &quot;xml&quot;))<br>
 &gt;&gt;<br>
 &gt;&gt; Recent Internal Errors:<br>
 &gt;&gt; Computer Language: ((&quot;Teaching Languages&quot; &quot;How to D=
 esign Programs&quot; &quot;Beginning Student&quot;) (#(#t constructor repea=
 ting-decimal #f #t none) #f ()))<br>
 &gt;&gt;<br>
 <br>
 </blockquote></div>
 </blockquote></div><br></div></div></blockquote></div>
 
 --001a11c1dcc63918d005051bb309--
From: Ron Garcia <rxg@cs.ubc.ca>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Fri, 10 Oct 2014 18:37:36 -0700

 --Apple-Mail=_FB7D9AEF-31AA-4298-9F81-67EFFEBF1082
 Content-Transfer-Encoding: quoted-printable
 Content-Type: text/plain;
 	charset=windows-1252
 
 No problem!  That's what they pay me the big bucks for!=85.wait a =
 second=85 ;)
 
 On 2014-10-10, at 6:36 PM, Robby Findler <robby@eecs.northwestern.edu> =
 wrote:
 
 > Yeah I know. I am sorry that we didn't get this sorted out before this =
 but I am also very happy that you helped improve racket!
 >=20
 > Robby
 >=20
 > On Friday, October 10, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 > Thanks Robby,
 >=20
 > I'll give it a try to verify for you.  I have to stick with the =
 official release so that I'm on the same page as my students (good luck =
 getting 700 students to actually upgrade at this point!) :).
 >=20
 > Thanks again!
 >=20
 > Ron
 >=20
 > On 2014-10-09, at 6:59 PM, Robby Findler <robby@eecs.northwestern.edu> =
 wrote:
 >=20
 >> I believe these example will do what you want in the fixed version. =
 There is a nightly snapshot if you want to try it out (easy to install).
 >>=20
 >> Otherwise I would say that if you stay away from text things will =
 also work how you want.=20
 >>=20
 >> Sorry about all this.=20
 >>=20
 >> Robby
 >>=20
 >> On Thursday, October 9, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 >> Hi Robby,
 >>=20
 >> Sorry to dive back into this.  I'm designing yet another homework =
 that uses text images and empty-image, and I think I misunderstood  the =
 below email.
 >>=20
 >> It appears that:
 >>=20
 >> > (image=3D? (text "Foo" 16 "black") (above/align "left" (text "Foo" =
 16 "black") empty-image))
 >> false
 >> > (image=3D? (text "Foo" 16 "black") (above (text "Foo" 16 "black") =
 empty-image))
 >> false
 >>=20
 >>=20
 >> I only now noticed that your examples below use empty-image as the =
 first argument, whereas my recursive function designs most often
 >> use it on the right.  Is this also expected behaviour?
 >>=20
 >> Thanks!
 >> Ron
 >>=20
 >>=20
 >>=20
 >>=20
 >> On 2014-10-03, at 8:37 AM, Robby Findler =
 <robby@eecs.northwestern.edu> wrote:
 >>=20
 >> > I'm not very happy with this response I'm about to give, but I =
 think
 >> > that this is not a bug. See if you have any ideas.
 >> >
 >> > Here's the issue: 2htdp/image images have local coordinate systems
 >> > (the "bounding box") that consists of two vertical lines (one on =
 the
 >> > left and one on the right) and *three* horizontal lines. The one on
 >> > the top and bottom that you expect, but also one called the =
 "baseline"
 >> > that is right underneath the bottom of a "u" (and so the descenders =
 in
 >> > "q" and "y", etc don't mess up the alignment of text on a line).
 >> >
 >> > So, when you align at the bottom these three images:
 >> >
 >> > (beside/align
 >> > "bottom"
 >> > (text "feed me " 18 "red")
 >> > (text "please?" 12 "green")
 >> > empty-image)
 >> >
 >> > then the question is "what is the right baseline for the resulting
 >> > image?". (The images are otherwise identical.)
 >> >
 >> > The current code picks a line at the same place as the bottom of =
 the
 >> > image. The general rule it is using is to pick the baseline that is
 >> > furthest away from the top of the image. In this case, that's the
 >> > empty-image's baseline, which is right at the bottom.
 >> >
 >> > If we change this to use the baseline that's closest to the top of =
 the
 >> > image (which would work for this example), then we lose a lot more
 >> > interesting identities, eg this one:
 >> >
 >> > (equal?
 >> > (above empty-image (rectangle 10 10 "solid" "red"))
 >> > (beside empty-image (rectangle 10 10 "solid" "red")))
 >> >
 >> > So I am currently thinking that the right thing to do in this case =
 is
 >> > to use "baseline" as the first argument to beside/align. Does that
 >> > work for your larger context?
 >> >
 >> > Robby
 >> >
 >> >
 >> >
 >> > On Thu, Oct 2, 2014 at 10:32 PM,  <rxg@cs.ubc.ca> wrote:
 >> >> A new problem report is waiting at
 >> >>  http://bugs.racket-lang.org/query/?cmd=3Dview&pr=3D14760
 >> >>
 >> >> Reported by Ron Garcia for release: 6.1
 >> >>
 >> >> *** Description:
 >> >> empty-image is not an identity object for the beside/align =
 function
 >> >>
 >> >> *** How to repeat:
 >> >> (require 2htdp/image)
 >> >>
 >> >> (image=3D? (beside/align "bottom"
 >> >>                            (text "feed me " 18 "red")
 >> >>                            (text "please?" 12 "green") =
 empty-image)
 >> >>           (beside/align "bottom"
 >> >>                            (text "feed me " 18 "red")
 >> >>                            (text "please?" 12 "green")))
 >> >>
 >> >> *** Environment:
 >> >> macosx "Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: Sun =
 Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" =
 (i386-macosx/3m) (get-display-depth) =3D 32
 >> >> Human Language: english
 >> >> (current-memory-use) 176906352
 >> >> raco pkg (show):
 >> >> Installation-wide:
 >> >> Package              Checksum                                    =
 Source
 >> >> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    =
 (catalog main-distribution)
 >> >> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    =
 (catalog racket-lib)
 >> >> [178 auto-installed packages not shown]
 >> >> User-specific for installation "6.1":
 >> >> [none]
 >> >>
 >> >>
 >> >>
 >> >> Collections:
 >> >> ("/Users/Ron/Library/Racket/6.1/collects"
 >> >> (non-existent-path))
 >> >> ("/Applications/Racket v6.1/collects"
 >> >> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" =
 "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" =
 "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" =
 "version" "xml"))
 >> >>
 >> >> Recent Internal Errors:
 >> >> Computer Language: (("Teaching Languages" "How to Design Programs" =
 "Beginning Student") (#(#t constructor repeating-decimal #f #t none) #f =
 ()))
 >> >>
 >>=20
 >=20
 
 
 --Apple-Mail=_FB7D9AEF-31AA-4298-9F81-67EFFEBF1082
 Content-Transfer-Encoding: quoted-printable
 Content-Type: text/html;
 	charset=windows-1252
 
 <html><head><meta http-equiv=3D"Content-Type" content=3D"text/html =
 charset=3Dwindows-1252"></head><body style=3D"word-wrap: break-word; =
 -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">No =
 problem! &nbsp;That's what they pay me the big bucks for!=85.wait a =
 second=85 ;)<div><br><div><div>On 2014-10-10, at 6:36 PM, Robby Findler =
 &lt;<a =
 href=3D"mailto:robby@eecs.northwestern.edu">robby@eecs.northwestern.edu</a=
 >&gt; wrote:</div><br class=3D"Apple-interchange-newline"><blockquote =
 type=3D"cite">Yeah I know. I am sorry that we didn't get this sorted out =
 before this but I am also very happy that you helped improve =
 racket!<div><br></div><div>Robby<span></span><br><br>On Friday, October =
 10, 2014, Ron Garcia &lt;<a =
 href=3D"mailto:rxg@cs.ubc.ca">rxg@cs.ubc.ca</a>&gt; =
 wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 =
 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div =
 style=3D"word-wrap:break-word">Thanks Robby,<div><br></div><div>I'll =
 give it a try to verify for you.&nbsp; I have to stick with the official =
 release so that I'm on the same page as my students (good luck getting =
 700 students to actually upgrade at this point!) =
 :).</div><div><br></div><div>Thanks =
 again!</div><div><br></div><div>Ron</div><div><br><div><div>On =
 2014-10-09, at 6:59 PM, Robby Findler &lt;<a =
 href=3D"javascript:_e(%7B%7D,'cvml','robby@eecs.northwestern.edu');" =
 target=3D"_blank">robby@eecs.northwestern.edu</a>&gt; =
 wrote:</div><br><blockquote type=3D"cite">I believe these example will =
 do what you want in the fixed version. There is a nightly snapshot if =
 you want to try it out (easy to install).<div><br></div><div>Otherwise I =
 would say that if you stay away from text things will also work how you =
 want.&nbsp;</div><div><br></div><div>Sorry about all =
 this.&nbsp;</div><div><br></div><div>Robby<span></span></div><div><br>On =
 Thursday, October 9, 2014, Ron Garcia &lt;<a =
 href=3D"javascript:_e(%7B%7D,'cvml','rxg@cs.ubc.ca');" =
 target=3D"_blank">rxg@cs.ubc.ca</a>&gt; wrote:<br><blockquote =
 class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc =
 solid;padding-left:1ex">Hi Robby,<br>
 <br>
 Sorry to dive back into this.&nbsp; I'm designing yet another homework =
 that uses text images and empty-image, and I think I misunderstood&nbsp; =
 the below email.<br>
 <br>
 It appears that:<br>
 <br>
 &gt; (image=3D? (text "Foo" 16 "black") (above/align "left" (text "Foo" =
 16 "black") empty-image))<br>
 false<br>
 &gt; (image=3D? (text "Foo" 16 "black") (above (text "Foo" 16 "black") =
 empty-image))<br>
 false<br>
 <br>
 <br>
 I only now noticed that your examples below use empty-image as the first =
 argument, whereas my recursive function designs most often<br>
 use it on the right.&nbsp; Is this also expected behaviour?<br>
 <br>
 Thanks!<br>
 Ron<br>
 <br>
 <br>
 <br>
 <br>
 On 2014-10-03, at 8:37 AM, Robby Findler =
 &lt;<a>robby@eecs.northwestern.edu</a>&gt; wrote:<br>
 <br>
 &gt; I'm not very happy with this response I'm about to give, but I =
 think<br>
 &gt; that this is not a bug. See if you have any ideas.<br>
 &gt;<br>
 &gt; Here's the issue: 2htdp/image images have local coordinate =
 systems<br>
 &gt; (the "bounding box") that consists of two vertical lines (one on =
 the<br>
 &gt; left and one on the right) and *three* horizontal lines. The one =
 on<br>
 &gt; the top and bottom that you expect, but also one called the =
 "baseline"<br>
 &gt; that is right underneath the bottom of a "u" (and so the descenders =
 in<br>
 &gt; "q" and "y", etc don't mess up the alignment of text on a =
 line).<br>
 &gt;<br>
 &gt; So, when you align at the bottom these three images:<br>
 &gt;<br>
 &gt; (beside/align<br>
 &gt; "bottom"<br>
 &gt; (text "feed me " 18 "red")<br>
 &gt; (text "please?" 12 "green")<br>
 &gt; empty-image)<br>
 &gt;<br>
 &gt; then the question is "what is the right baseline for the =
 resulting<br>
 &gt; image?". (The images are otherwise identical.)<br>
 &gt;<br>
 &gt; The current code picks a line at the same place as the bottom of =
 the<br>
 &gt; image. The general rule it is using is to pick the baseline that =
 is<br>
 &gt; furthest away from the top of the image. In this case, that's =
 the<br>
 &gt; empty-image's baseline, which is right at the bottom.<br>
 &gt;<br>
 &gt; If we change this to use the baseline that's closest to the top of =
 the<br>
 &gt; image (which would work for this example), then we lose a lot =
 more<br>
 &gt; interesting identities, eg this one:<br>
 &gt;<br>
 &gt; (equal?<br>
 &gt; (above empty-image (rectangle 10 10 "solid" "red"))<br>
 &gt; (beside empty-image (rectangle 10 10 "solid" "red")))<br>
 &gt;<br>
 &gt; So I am currently thinking that the right thing to do in this case =
 is<br>
 &gt; to use "baseline" as the first argument to beside/align. Does =
 that<br>
 &gt; work for your larger context?<br>
 &gt;<br>
 &gt; Robby<br>
 &gt;<br>
 &gt;<br>
 &gt;<br>
 &gt; On Thu, Oct 2, 2014 at 10:32 PM,&nbsp; &lt;<a>rxg@cs.ubc.ca</a>&gt; =
 wrote:<br>
 &gt;&gt; A new problem report is waiting at<br>
 &gt;&gt;&nbsp; <a =
 href=3D"http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=3D14760" =
 target=3D"_blank">http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=3D1=
 4760</a><br>
 &gt;&gt;<br>
 &gt;&gt; Reported by Ron Garcia for release: 6.1<br>
 &gt;&gt;<br>
 &gt;&gt; *** Description:<br>
 &gt;&gt; empty-image is not an identity object for the beside/align =
 function<br>
 &gt;&gt;<br>
 &gt;&gt; *** How to repeat:<br>
 &gt;&gt; (require 2htdp/image)<br>
 &gt;&gt;<br>
 &gt;&gt; (image=3D? (beside/align "bottom"<br>
 &gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (text "feed me " 18 "red")<br>
 &gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (text "please?" 12 "green") =
 empty-image)<br>
 &gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(beside/align =
 "bottom"<br>
 &gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (text "feed me " 18 "red")<br>
 &gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (text "please?" 12 "green")))<br>
 &gt;&gt;<br>
 &gt;&gt; *** Environment:<br>
 &gt;&gt; macosx "Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: =
 Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 =
 x86_64" (i386-macosx/3m) (get-display-depth) =3D 32<br>
 &gt;&gt; Human Language: english<br>
 &gt;&gt; (current-memory-use) 176906352<br>
 &gt;&gt; raco pkg (show):<br>
 &gt;&gt; Installation-wide:<br>
 &gt;&gt; Package&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 Checksum&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 Source<br>
 &gt;&gt; main-distribution&nbsp; &nbsp; =
 f07e2d4bf2708c1085be38eca18aa9eb6755e547&nbsp; &nbsp; (catalog =
 main-distribution)<br>
 &gt;&gt; racket-lib&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 &nbsp;41c7b3221006758c5a840a18dcc0d265632f14c2&nbsp; &nbsp; (catalog =
 racket-lib)<br>
 &gt;&gt; [178 auto-installed packages not shown]<br>
 &gt;&gt; User-specific for installation "6.1":<br>
 &gt;&gt; [none]<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt; Collections:<br>
 &gt;&gt; ("/Users/Ron/Library/Racket/6.1/collects"<br>
 &gt;&gt; (non-existent-path))<br>
 &gt;&gt; ("/Applications/Racket v6.1/collects"<br>
 &gt;&gt; (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" =
 "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" =
 "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" =
 "unstable" "version" "xml"))<br>
 &gt;&gt;<br>
 &gt;&gt; Recent Internal Errors:<br>
 &gt;&gt; Computer Language: (("Teaching Languages" "How to Design =
 Programs" "Beginning Student") (#(#t constructor repeating-decimal #f #t =
 none) #f ()))<br>
 &gt;&gt;<br>
 <br>
 </blockquote></div>
 </blockquote></div><br></div></div></blockquote></div>
 </blockquote></div><br></div></body></html>=
 
 --Apple-Mail=_FB7D9AEF-31AA-4298-9F81-67EFFEBF1082--
From: Ron Garcia <rxg@cs.ubc.ca>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/14760: beside/align notices empty-image
Date: Fri, 10 Oct 2014 18:41:21 -0700

 --Apple-Mail=_F2041D38-324E-4697-946F-B4F520A751FC
 Content-Transfer-Encoding: quoted-printable
 Content-Type: text/plain;
 	charset=us-ascii
 
 Hi Robby,
 
 FYI I just download the nightly build, and tested it on my original =
 check-expects and it worked like a charm.  Thanks!
 
 Ron
 
 On 2014-10-10, at 6:36 PM, Robby Findler <robby@eecs.northwestern.edu> =
 wrote:
 
 > Yeah I know. I am sorry that we didn't get this sorted out before this =
 but I am also very happy that you helped improve racket!
 >=20
 > Robby
 >=20
 > On Friday, October 10, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 > Thanks Robby,
 >=20
 > I'll give it a try to verify for you.  I have to stick with the =
 official release so that I'm on the same page as my students (good luck =
 getting 700 students to actually upgrade at this point!) :).
 >=20
 > Thanks again!
 >=20
 > Ron
 >=20
 > On 2014-10-09, at 6:59 PM, Robby Findler <robby@eecs.northwestern.edu> =
 wrote:
 >=20
 >> I believe these example will do what you want in the fixed version. =
 There is a nightly snapshot if you want to try it out (easy to install).
 >>=20
 >> Otherwise I would say that if you stay away from text things will =
 also work how you want.=20
 >>=20
 >> Sorry about all this.=20
 >>=20
 >> Robby
 >>=20
 >> On Thursday, October 9, 2014, Ron Garcia <rxg@cs.ubc.ca> wrote:
 >> Hi Robby,
 >>=20
 >> Sorry to dive back into this.  I'm designing yet another homework =
 that uses text images and empty-image, and I think I misunderstood  the =
 below email.
 >>=20
 >> It appears that:
 >>=20
 >> > (image=3D? (text "Foo" 16 "black") (above/align "left" (text "Foo" =
 16 "black") empty-image))
 >> false
 >> > (image=3D? (text "Foo" 16 "black") (above (text "Foo" 16 "black") =
 empty-image))
 >> false
 >>=20
 >>=20
 >> I only now noticed that your examples below use empty-image as the =
 first argument, whereas my recursive function designs most often
 >> use it on the right.  Is this also expected behaviour?
 >>=20
 >> Thanks!
 >> Ron
 >>=20
 >>=20
 >>=20
 >>=20
 >> On 2014-10-03, at 8:37 AM, Robby Findler =
 <robby@eecs.northwestern.edu> wrote:
 >>=20
 >> > I'm not very happy with this response I'm about to give, but I =
 think
 >> > that this is not a bug. See if you have any ideas.
 >> >
 >> > Here's the issue: 2htdp/image images have local coordinate systems
 >> > (the "bounding box") that consists of two vertical lines (one on =
 the
 >> > left and one on the right) and *three* horizontal lines. The one on
 >> > the top and bottom that you expect, but also one called the =
 "baseline"
 >> > that is right underneath the bottom of a "u" (and so the descenders =
 in
 >> > "q" and "y", etc don't mess up the alignment of text on a line).
 >> >
 >> > So, when you align at the bottom these three images:
 >> >
 >> > (beside/align
 >> > "bottom"
 >> > (text "feed me " 18 "red")
 >> > (text "please?" 12 "green")
 >> > empty-image)
 >> >
 >> > then the question is "what is the right baseline for the resulting
 >> > image?". (The images are otherwise identical.)
 >> >
 >> > The current code picks a line at the same place as the bottom of =
 the
 >> > image. The general rule it is using is to pick the baseline that is
 >> > furthest away from the top of the image. In this case, that's the
 >> > empty-image's baseline, which is right at the bottom.
 >> >
 >> > If we change this to use the baseline that's closest to the top of =
 the
 >> > image (which would work for this example), then we lose a lot more
 >> > interesting identities, eg this one:
 >> >
 >> > (equal?
 >> > (above empty-image (rectangle 10 10 "solid" "red"))
 >> > (beside empty-image (rectangle 10 10 "solid" "red")))
 >> >
 >> > So I am currently thinking that the right thing to do in this case =
 is
 >> > to use "baseline" as the first argument to beside/align. Does that
 >> > work for your larger context?
 >> >
 >> > Robby
 >> >
 >> >
 >> >
 >> > On Thu, Oct 2, 2014 at 10:32 PM,  <rxg@cs.ubc.ca> wrote:
 >> >> A new problem report is waiting at
 >> >>  http://bugs.racket-lang.org/query/?cmd=3Dview&pr=3D14760
 >> >>
 >> >> Reported by Ron Garcia for release: 6.1
 >> >>
 >> >> *** Description:
 >> >> empty-image is not an identity object for the beside/align =
 function
 >> >>
 >> >> *** How to repeat:
 >> >> (require 2htdp/image)
 >> >>
 >> >> (image=3D? (beside/align "bottom"
 >> >>                            (text "feed me " 18 "red")
 >> >>                            (text "please?" 12 "green") =
 empty-image)
 >> >>           (beside/align "bottom"
 >> >>                            (text "feed me " 18 "red")
 >> >>                            (text "please?" 12 "green")))
 >> >>
 >> >> *** Environment:
 >> >> macosx "Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: Sun =
 Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 x86_64" =
 (i386-macosx/3m) (get-display-depth) =3D 32
 >> >> Human Language: english
 >> >> (current-memory-use) 176906352
 >> >> raco pkg (show):
 >> >> Installation-wide:
 >> >> Package              Checksum                                    =
 Source
 >> >> main-distribution    f07e2d4bf2708c1085be38eca18aa9eb6755e547    =
 (catalog main-distribution)
 >> >> racket-lib           41c7b3221006758c5a840a18dcc0d265632f14c2    =
 (catalog racket-lib)
 >> >> [178 auto-installed packages not shown]
 >> >> User-specific for installation "6.1":
 >> >> [none]
 >> >>
 >> >>
 >> >>
 >> >> Collections:
 >> >> ("/Users/Ron/Library/Racket/6.1/collects"
 >> >> (non-existent-path))
 >> >> ("/Applications/Racket v6.1/collects"
 >> >> (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" =
 "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" =
 "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" "unstable" =
 "version" "xml"))
 >> >>
 >> >> Recent Internal Errors:
 >> >> Computer Language: (("Teaching Languages" "How to Design Programs" =
 "Beginning Student") (#(#t constructor repeating-decimal #f #t none) #f =
 ()))
 >> >>
 >>=20
 >=20
 
 
 --Apple-Mail=_F2041D38-324E-4697-946F-B4F520A751FC
 Content-Transfer-Encoding: quoted-printable
 Content-Type: text/html;
 	charset=us-ascii
 
 <html><head><meta http-equiv=3D"Content-Type" content=3D"text/html =
 charset=3Dus-ascii"></head><body style=3D"word-wrap: break-word; =
 -webkit-nbsp-mode: space; -webkit-line-break: after-white-space; ">Hi =
 Robby,<div><br></div><div>FYI I just download the nightly build, and =
 tested it on my original check-expects and it worked like a charm. =
 &nbsp;Thanks!</div><div><br></div><div>Ron</div><div><br><div><div>On =
 2014-10-10, at 6:36 PM, Robby Findler &lt;<a =
 href=3D"mailto:robby@eecs.northwestern.edu">robby@eecs.northwestern.edu</a=
 >&gt; wrote:</div><br class=3D"Apple-interchange-newline"><blockquote =
 type=3D"cite">Yeah I know. I am sorry that we didn't get this sorted out =
 before this but I am also very happy that you helped improve =
 racket!<div><br></div><div>Robby<span></span><br><br>On Friday, October =
 10, 2014, Ron Garcia &lt;<a =
 href=3D"mailto:rxg@cs.ubc.ca">rxg@cs.ubc.ca</a>&gt; =
 wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 =
 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div =
 style=3D"word-wrap:break-word">Thanks Robby,<div><br></div><div>I'll =
 give it a try to verify for you.&nbsp; I have to stick with the official =
 release so that I'm on the same page as my students (good luck getting =
 700 students to actually upgrade at this point!) =
 :).</div><div><br></div><div>Thanks =
 again!</div><div><br></div><div>Ron</div><div><br><div><div>On =
 2014-10-09, at 6:59 PM, Robby Findler &lt;<a =
 href=3D"javascript:_e(%7B%7D,'cvml','robby@eecs.northwestern.edu');" =
 target=3D"_blank">robby@eecs.northwestern.edu</a>&gt; =
 wrote:</div><br><blockquote type=3D"cite">I believe these example will =
 do what you want in the fixed version. There is a nightly snapshot if =
 you want to try it out (easy to install).<div><br></div><div>Otherwise I =
 would say that if you stay away from text things will also work how you =
 want.&nbsp;</div><div><br></div><div>Sorry about all =
 this.&nbsp;</div><div><br></div><div>Robby<span></span></div><div><br>On =
 Thursday, October 9, 2014, Ron Garcia &lt;<a =
 href=3D"javascript:_e(%7B%7D,'cvml','rxg@cs.ubc.ca');" =
 target=3D"_blank">rxg@cs.ubc.ca</a>&gt; wrote:<br><blockquote =
 class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc =
 solid;padding-left:1ex">Hi Robby,<br>
 <br>
 Sorry to dive back into this.&nbsp; I'm designing yet another homework =
 that uses text images and empty-image, and I think I misunderstood&nbsp; =
 the below email.<br>
 <br>
 It appears that:<br>
 <br>
 &gt; (image=3D? (text "Foo" 16 "black") (above/align "left" (text "Foo" =
 16 "black") empty-image))<br>
 false<br>
 &gt; (image=3D? (text "Foo" 16 "black") (above (text "Foo" 16 "black") =
 empty-image))<br>
 false<br>
 <br>
 <br>
 I only now noticed that your examples below use empty-image as the first =
 argument, whereas my recursive function designs most often<br>
 use it on the right.&nbsp; Is this also expected behaviour?<br>
 <br>
 Thanks!<br>
 Ron<br>
 <br>
 <br>
 <br>
 <br>
 On 2014-10-03, at 8:37 AM, Robby Findler =
 &lt;<a>robby@eecs.northwestern.edu</a>&gt; wrote:<br>
 <br>
 &gt; I'm not very happy with this response I'm about to give, but I =
 think<br>
 &gt; that this is not a bug. See if you have any ideas.<br>
 &gt;<br>
 &gt; Here's the issue: 2htdp/image images have local coordinate =
 systems<br>
 &gt; (the "bounding box") that consists of two vertical lines (one on =
 the<br>
 &gt; left and one on the right) and *three* horizontal lines. The one =
 on<br>
 &gt; the top and bottom that you expect, but also one called the =
 "baseline"<br>
 &gt; that is right underneath the bottom of a "u" (and so the descenders =
 in<br>
 &gt; "q" and "y", etc don't mess up the alignment of text on a =
 line).<br>
 &gt;<br>
 &gt; So, when you align at the bottom these three images:<br>
 &gt;<br>
 &gt; (beside/align<br>
 &gt; "bottom"<br>
 &gt; (text "feed me " 18 "red")<br>
 &gt; (text "please?" 12 "green")<br>
 &gt; empty-image)<br>
 &gt;<br>
 &gt; then the question is "what is the right baseline for the =
 resulting<br>
 &gt; image?". (The images are otherwise identical.)<br>
 &gt;<br>
 &gt; The current code picks a line at the same place as the bottom of =
 the<br>
 &gt; image. The general rule it is using is to pick the baseline that =
 is<br>
 &gt; furthest away from the top of the image. In this case, that's =
 the<br>
 &gt; empty-image's baseline, which is right at the bottom.<br>
 &gt;<br>
 &gt; If we change this to use the baseline that's closest to the top of =
 the<br>
 &gt; image (which would work for this example), then we lose a lot =
 more<br>
 &gt; interesting identities, eg this one:<br>
 &gt;<br>
 &gt; (equal?<br>
 &gt; (above empty-image (rectangle 10 10 "solid" "red"))<br>
 &gt; (beside empty-image (rectangle 10 10 "solid" "red")))<br>
 &gt;<br>
 &gt; So I am currently thinking that the right thing to do in this case =
 is<br>
 &gt; to use "baseline" as the first argument to beside/align. Does =
 that<br>
 &gt; work for your larger context?<br>
 &gt;<br>
 &gt; Robby<br>
 &gt;<br>
 &gt;<br>
 &gt;<br>
 &gt; On Thu, Oct 2, 2014 at 10:32 PM,&nbsp; &lt;<a>rxg@cs.ubc.ca</a>&gt; =
 wrote:<br>
 &gt;&gt; A new problem report is waiting at<br>
 &gt;&gt;&nbsp; <a =
 href=3D"http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=3D14760" =
 target=3D"_blank">http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=3D1=
 4760</a><br>
 &gt;&gt;<br>
 &gt;&gt; Reported by Ron Garcia for release: 6.1<br>
 &gt;&gt;<br>
 &gt;&gt; *** Description:<br>
 &gt;&gt; empty-image is not an identity object for the beside/align =
 function<br>
 &gt;&gt;<br>
 &gt;&gt; *** How to repeat:<br>
 &gt;&gt; (require 2htdp/image)<br>
 &gt;&gt;<br>
 &gt;&gt; (image=3D? (beside/align "bottom"<br>
 &gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (text "feed me " 18 "red")<br>
 &gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (text "please?" 12 "green") =
 empty-image)<br>
 &gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(beside/align =
 "bottom"<br>
 &gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (text "feed me " 18 "red")<br>
 &gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (text "please?" 12 "green")))<br>
 &gt;&gt;<br>
 &gt;&gt; *** Environment:<br>
 &gt;&gt; macosx "Darwin isis.lan 12.5.0 Darwin Kernel Version 12.5.0: =
 Sun Sep 29 13:33:47 PDT 2013; root:xnu-2050.48.12~1/RELEASE_X86_64 =
 x86_64" (i386-macosx/3m) (get-display-depth) =3D 32<br>
 &gt;&gt; Human Language: english<br>
 &gt;&gt; (current-memory-use) 176906352<br>
 &gt;&gt; raco pkg (show):<br>
 &gt;&gt; Installation-wide:<br>
 &gt;&gt; Package&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 Checksum&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 Source<br>
 &gt;&gt; main-distribution&nbsp; &nbsp; =
 f07e2d4bf2708c1085be38eca18aa9eb6755e547&nbsp; &nbsp; (catalog =
 main-distribution)<br>
 &gt;&gt; racket-lib&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
 &nbsp;41c7b3221006758c5a840a18dcc0d265632f14c2&nbsp; &nbsp; (catalog =
 racket-lib)<br>
 &gt;&gt; [178 auto-installed packages not shown]<br>
 &gt;&gt; User-specific for installation "6.1":<br>
 &gt;&gt; [none]<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt;<br>
 &gt;&gt; Collections:<br>
 &gt;&gt; ("/Users/Ron/Library/Racket/6.1/collects"<br>
 &gt;&gt; (non-existent-path))<br>
 &gt;&gt; ("/Applications/Racket v6.1/collects"<br>
 &gt;&gt; (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" =
 "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" =
 "planet" "racket" "raco" "reader" "realm" "s-exp" "setup" "syntax" =
 "unstable" "version" "xml"))<br>
 &gt;&gt;<br>
 &gt;&gt; Recent Internal Errors:<br>
 &gt;&gt; Computer Language: (("Teaching Languages" "How to Design =
 Programs" "Beginning Student") (#(#t constructor repeating-decimal #f #t =
 none) #f ()))<br>
 &gt;&gt;<br>
 <br>
 </blockquote></div>
 </blockquote></div><br></div></div></blockquote></div>
 </blockquote></div><br></div></body></html>=
 
 --Apple-Mail=_F2041D38-324E-4697-946F-B4F520A751FC--
