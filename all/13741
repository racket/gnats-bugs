From bugs+caf_=bugs=bugs.plt-scheme.org@plt-scheme.org Wed May  8 11:02:36 2013
Received: from mail-ob0-f175.google.com (mail-ob0-f175.google.com [209.85.214.175])
	by champlain.ccs.neu.edu (8.14.4/8.14.4) with ESMTP id r48F2XrX006237
	for <bugs@bugs.plt-scheme.org>; Wed, 8 May 2013 11:02:33 -0400
Message-Id: <201305081502.r48F2UG4006231@champlain.ccs.neu.edu>
Date: Wed, 8 May 2013 11:02:30 -0400
From: soufiane.felliaui@gmail.com
To: bugs@racket-lang.org
Subject: Cannot start DrRacket

>Number:         13741
>Category:       all
>Synopsis:       Cannot start DrRacket
>Class:          sw-bug
>Responsible:    robby
>Severity:       serious
>Priority:       medium
>State:          open
>Confidential:   no
>Arrival-Date:   Wed May 08 11:04:02 -0400 2013
>Last-Modified:  Wed May 08 16:36:01 -0400 2013
>Originator:     Soufiane
>Organization:
plt
>Submitter-Id:   unknown
>Release:        racket-5.3.3-1
>Environment:
Linux x86_64 / Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.63 Safari/537.31
>Description:
Distro: Archlinux.
package: https://www.archlinux.org/packages/extra/x86_64/racket/

I can't start DrRacket.

Here is the error I get when I try to start it from the cmd:

> drracket

set-loaded-mask method in bitmap%: contract violation
 expected: (is-a?/c bitmap%)
 given: #f
 in: the 1st argument of
     the set-loaded-mask method in
      bitmap%/c
 contract from: <collects>/racket/draw.rkt
 blaming: 
      <collects>/drracket/private/frame-icon.rkt
 at: <collects>/racket/draw.rkt:58.19
  context...:
   /usr/lib/racket/collects/racket/contract/private/blame.rkt:89:0: raise-blame-error
   /usr/lib/racket/collects/drracket/private/frame-icon.rkt: [running body]
   /usr/lib/racket/collects/drracket/private/drracket-normal.rkt: [traversing imports]
   /usr/lib/racket/collects/drracket/drracket.rkt: [running body]

>How-To-Repeat:
Type drracket in the command line.
>Fix:
>Audit-Trail:
From: Robby Findler <robby@eecs.northwestern.edu>
To: soufiane.felliaui@gmail.com, bugs <bugs@racket-lang.org>
Cc: nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13741: Cannot start DrRacket
Date: Wed, 8 May 2013 13:46:01 -0500

 --089e013a0768647bdb04dc3958a7
 Content-Type: text/plain; charset=UTF-8
 
 You can probably work around this by deleting line 38 of frame-icon.rkt
 (this one):
 
 (send todays-icon set-loaded-mask todays-icon-bw-mask)
 
 I'm not sure why you are getting into that situation, tho. Do you have the
 file plt-logo-red-diffuse.png in your installation somewhere?
 
 Robby
 
 
 On Wed, May 8, 2013 at 10:04 AM, <soufiane.felliaui@gmail.com> wrote:
 
 > A new problem report is waiting at
 >   http://bugs.racket-lang.org/query/?cmd=view&pr=13741
 >
 > Reported by Soufiane for release: racket-5.3.3-1
 >
 > *** Description:
 > Distro: Archlinux.
 > package: https://www.archlinux.org/packages/extra/x86_64/racket/
 >
 > I can't start DrRacket.
 >
 > Here is the error I get when I try to start it from the cmd:
 >
 > > drracket
 >
 > set-loaded-mask method in bitmap%: contract violation
 >  expected: (is-a?/c bitmap%)
 >  given: #f
 >  in: the 1st argument of
 >      the set-loaded-mask method in
 >       bitmap%/c
 >  contract from: <collects>/racket/draw.rkt
 >  blaming:
 >       <collects>/drracket/private/frame-icon.rkt
 >  at: <collects>/racket/draw.rkt:58.19
 >   context...:
 >    /usr/lib/racket/collects/racket/contract/private/blame.rkt:89:0:
 > raise-blame-error
 >    /usr/lib/racket/collects/drracket/private/frame-icon.rkt: [running body]
 >    /usr/lib/racket/collects/drracket/private/drracket-normal.rkt:
 > [traversing imports]
 >    /usr/lib/racket/collects/drracket/drracket.rkt: [running body]
 >
 >
 > *** How to repeat:
 > Type drracket in the command line.
 >
 > *** Environment:
 > Linux x86_64 / Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.31 (KHTML,
 > like Gecko) Chrome/26.0.1410.63 Safari/537.31
 >
 >
 
 --089e013a0768647bdb04dc3958a7
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 <div dir=3D"ltr">You can probably work around this by deleting line 38 of f=
 rame-icon.rkt (this one):<div><br></div><div><div>(send todays-icon set-loa=
 ded-mask todays-icon-bw-mask)</div></div><div><br></div><div style>I&#39;m =
 not sure why you are getting into that situation, tho. Do you have the file=
  plt-logo-red-diffuse.png in your installation somewhere?</div>
 <div><br></div><div style>Robby</div></div><div class=3D"gmail_extra"><br><=
 br><div class=3D"gmail_quote">On Wed, May 8, 2013 at 10:04 AM,  <span dir=
 =3D"ltr">&lt;<a href=3D"mailto:soufiane.felliaui@gmail.com" target=3D"_blan=
 k">soufiane.felliaui@gmail.com</a>&gt;</span> wrote:<br>
 <blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
 x #ccc solid;padding-left:1ex">A new problem report is waiting at<br>
 =C2=A0 <a href=3D"http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=3D13=
 741" target=3D"_blank">http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=
 =3D13741</a><br>
 <br>
 Reported by Soufiane for release: racket-5.3.3-1<br>
 <br>
 *** Description:<br>
 Distro: Archlinux.<br>
 package: <a href=3D"https://www.archlinux.org/packages/extra/x86_64/racket/=
 " target=3D"_blank">https://www.archlinux.org/packages/extra/x86_64/racket/=
 </a><br>
 <br>
 I can&#39;t start DrRacket.<br>
 <br>
 Here is the error I get when I try to start it from the cmd:<br>
 <br>
 &gt; drracket<br>
 <br>
 set-loaded-mask method in bitmap%: contract violation<br>
 =C2=A0expected: (is-a?/c bitmap%)<br>
 =C2=A0given: #f<br>
 =C2=A0in: the 1st argument of<br>
 =C2=A0 =C2=A0 =C2=A0the set-loaded-mask method in<br>
 =C2=A0 =C2=A0 =C2=A0 bitmap%/c<br>
 =C2=A0contract from: &lt;collects&gt;/racket/draw.rkt<br>
 =C2=A0blaming:<br>
 =C2=A0 =C2=A0 =C2=A0 &lt;collects&gt;/drracket/private/frame-icon.rkt<br>
 =C2=A0at: &lt;collects&gt;/racket/draw.rkt:58.19<br>
 =C2=A0 context...:<br>
 =C2=A0 =C2=A0/usr/lib/racket/collects/racket/contract/private/blame.rkt:89:=
 0: raise-blame-error<br>
 =C2=A0 =C2=A0/usr/lib/racket/collects/drracket/private/frame-icon.rkt: [run=
 ning body]<br>
 =C2=A0 =C2=A0/usr/lib/racket/collects/drracket/private/drracket-normal.rkt:=
  [traversing imports]<br>
 =C2=A0 =C2=A0/usr/lib/racket/collects/drracket/drracket.rkt: [running body]=
 <br>
 <br>
 <br>
 *** How to repeat:<br>
 Type drracket in the command line.<br>
 <br>
 *** Environment:<br>
 Linux x86_64 / Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.31 (KHTML, l=
 ike Gecko) Chrome/26.0.1410.63 Safari/537.31<br>
 <br>
 </blockquote></div><br></div>
 
 --089e013a0768647bdb04dc3958a7--
From: Soufiane Felliaui <soufiane.felliaui@gmail.com>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: bugs <bugs@racket-lang.org>, nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13741: Cannot start DrRacket
Date: Wed, 8 May 2013 21:08:06 +0200

 --bcaec501c4ea9d677204dc39a816
 Content-Type: text/plain; charset=ISO-8859-1
 
 Thank you for replying.
 The file "plt-logo-red-diffuse.png" is present under the
  "/usr/lib/racket/collects/icons/" directory.
 I deleted the line, and i get another error.
 
 
 png_structp->C: argument is not non-null `png_structp' pointer
   argument: #f
   context...:
    /usr/lib/racket/collects/ffi/unsafe.rkt:1137:12
    /usr/lib/racket/collects/racket/draw/unsafe/png.rkt:218:0:
 create-png-reader
    /usr/lib/racket/collects/racket/draw/private/bitmap.rkt:311:4:
 do-load-bitmap method in bitmap%
    /usr/lib/racket/collects/racket/draw/private/bitmap.rkt:145:2
    /usr/lib/racket/collects/racket/private/class-internal.rkt:4024:0:
 continue-make-object
    /usr/lib/racket/collects/racket/private/class-internal.rkt:4005:0:
 do-make-object
    /usr/lib/racket/collects/drracket/private/drracket-normal.rkt: [running
 body]
    /usr/lib/racket/collects/drracket/drracket.rkt: [running body]
 
 
 
 
 On 8 May 2013 20:46, Robby Findler <robby@eecs.northwestern.edu> wrote:
 
 > You can probably work around this by deleting line 38 of frame-icon.rkt
 > (this one):
 >
 > (send todays-icon set-loaded-mask todays-icon-bw-mask)
 >
 > I'm not sure why you are getting into that situation, tho. Do you have the
 > file plt-logo-red-diffuse.png in your installation somewhere?
 >
 > Robby
 >
 >
 > On Wed, May 8, 2013 at 10:04 AM, <soufiane.felliaui@gmail.com> wrote:
 >
 >> A new problem report is waiting at
 >>   http://bugs.racket-lang.org/query/?cmd=view&pr=13741
 >>
 >> Reported by Soufiane for release: racket-5.3.3-1
 >>
 >> *** Description:
 >> Distro: Archlinux.
 >> package: https://www.archlinux.org/packages/extra/x86_64/racket/
 >>
 >> I can't start DrRacket.
 >>
 >> Here is the error I get when I try to start it from the cmd:
 >>
 >> > drracket
 >>
 >> set-loaded-mask method in bitmap%: contract violation
 >>  expected: (is-a?/c bitmap%)
 >>  given: #f
 >>  in: the 1st argument of
 >>      the set-loaded-mask method in
 >>       bitmap%/c
 >>  contract from: <collects>/racket/draw.rkt
 >>  blaming:
 >>       <collects>/drracket/private/frame-icon.rkt
 >>  at: <collects>/racket/draw.rkt:58.19
 >>   context...:
 >>    /usr/lib/racket/collects/racket/contract/private/blame.rkt:89:0:
 >> raise-blame-error
 >>    /usr/lib/racket/collects/drracket/private/frame-icon.rkt: [running
 >> body]
 >>    /usr/lib/racket/collects/drracket/private/drracket-normal.rkt:
 >> [traversing imports]
 >>    /usr/lib/racket/collects/drracket/drracket.rkt: [running body]
 >>
 >>
 >> *** How to repeat:
 >> Type drracket in the command line.
 >>
 >> *** Environment:
 >> Linux x86_64 / Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.31 (KHTML,
 >> like Gecko) Chrome/26.0.1410.63 Safari/537.31
 >>
 >>
 >
 
 --bcaec501c4ea9d677204dc39a816
 Content-Type: text/html; charset=ISO-8859-1
 Content-Transfer-Encoding: quoted-printable
 
 <div dir=3D"ltr">Thank you for replying.<div style>The file &quot;<span sty=
 le=3D"font-family:arial,sans-serif;font-size:13px">plt-logo-red-diffuse.png=
 &quot; is present under the=A0</span><font face=3D"arial, sans-serif">=A0&q=
 uot;/usr/lib/racket/collects/icons/&quot;=A0</font><span style=3D"font-fami=
 ly:arial,sans-serif;font-size:13px">directory.</span></div>
 
 <div style><span style=3D"font-family:arial,sans-serif;font-size:13px">I de=
 leted the line, and i get another error.</span></div><div style><span style=
 =3D"font-family:arial,sans-serif;font-size:13px"><br></span></div><div styl=
 e>
 
 <span style=3D"font-family:arial,sans-serif;font-size:13px"><br></span></di=
 v><div style><div><font face=3D"arial, sans-serif">png_structp-&gt;C: argum=
 ent is not non-null `png_structp&#39; pointer</font></div><div><font face=
 =3D"arial, sans-serif">=A0 argument: #f</font></div>
 
 <div><font face=3D"arial, sans-serif">=A0 context...:</font></div><div><fon=
 t face=3D"arial, sans-serif">=A0 =A0/usr/lib/racket/collects/ffi/unsafe.rkt=
 :1137:12</font></div><div><font face=3D"arial, sans-serif">=A0 =A0/usr/lib/=
 racket/collects/racket/draw/unsafe/png.rkt:218:0: create-png-reader</font><=
 /div>
 
 <div><font face=3D"arial, sans-serif">=A0 =A0/usr/lib/racket/collects/racke=
 t/draw/private/bitmap.rkt:311:4: do-load-bitmap method in bitmap%</font></d=
 iv><div><font face=3D"arial, sans-serif">=A0 =A0/usr/lib/racket/collects/ra=
 cket/draw/private/bitmap.rkt:145:2</font></div>
 
 <div><font face=3D"arial, sans-serif">=A0 =A0/usr/lib/racket/collects/racke=
 t/private/class-internal.rkt:4024:0: continue-make-object</font></div><div>=
 <font face=3D"arial, sans-serif">=A0 =A0/usr/lib/racket/collects/racket/pri=
 vate/class-internal.rkt:4005:0: do-make-object</font></div>
 
 <div><font face=3D"arial, sans-serif">=A0 =A0/usr/lib/racket/collects/drrac=
 ket/private/drracket-normal.rkt: [running body]</font></div><div><font face=
 =3D"arial, sans-serif">=A0 =A0/usr/lib/racket/collects/drracket/drracket.rk=
 t: [running body]</font></div>
 
 <div style=3D"font-family:arial,sans-serif;font-size:13px"><br></div><div s=
 tyle=3D"font-family:arial,sans-serif;font-size:13px"><br></div></div></div>=
 <div class=3D"gmail_extra"><br><br><div class=3D"gmail_quote">On 8 May 2013=
  20:46, Robby Findler <span dir=3D"ltr">&lt;<a href=3D"mailto:robby@eecs.no=
 rthwestern.edu" target=3D"_blank">robby@eecs.northwestern.edu</a>&gt;</span=
 > wrote:<br>
 
 <blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
 x #ccc solid;padding-left:1ex"><div dir=3D"ltr">You can probably work aroun=
 d this by deleting line 38 of frame-icon.rkt (this one):<div><br></div><div=
 >
 <div>
 (send todays-icon set-loaded-mask todays-icon-bw-mask)</div></div><div><br>=
 </div><div>I&#39;m not sure why you are getting into that situation, tho. D=
 o you have the file plt-logo-red-diffuse.png in your installation somewhere=
 ?</div>
 
 
 <div><br></div><div>Robby</div></div><div class=3D"gmail_extra"><br><br><di=
 v class=3D"gmail_quote">On Wed, May 8, 2013 at 10:04 AM,  <span dir=3D"ltr"=
 >&lt;<a href=3D"mailto:soufiane.felliaui@gmail.com" target=3D"_blank">soufi=
 ane.felliaui@gmail.com</a>&gt;</span> wrote:<br>
 
 
 <blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
 x #ccc solid;padding-left:1ex">A new problem report is waiting at<br>
 =A0 <a href=3D"http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=3D13741=
 " target=3D"_blank">http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=3D=
 13741</a><br>
 <br>
 Reported by Soufiane for release: racket-5.3.3-1<br>
 <br>
 *** Description:<br>
 Distro: Archlinux.<br>
 package: <a href=3D"https://www.archlinux.org/packages/extra/x86_64/racket/=
 " target=3D"_blank">https://www.archlinux.org/packages/extra/x86_64/racket/=
 </a><br>
 <br>
 I can&#39;t start DrRacket.<br>
 <br>
 Here is the error I get when I try to start it from the cmd:<br>
 <br>
 &gt; drracket<br>
 <br>
 set-loaded-mask method in bitmap%: contract violation<br>
 =A0expected: (is-a?/c bitmap%)<br>
 =A0given: #f<br>
 =A0in: the 1st argument of<br>
 =A0 =A0 =A0the set-loaded-mask method in<br>
 =A0 =A0 =A0 bitmap%/c<br>
 =A0contract from: &lt;collects&gt;/racket/draw.rkt<br>
 =A0blaming:<br>
 =A0 =A0 =A0 &lt;collects&gt;/drracket/private/frame-icon.rkt<br>
 =A0at: &lt;collects&gt;/racket/draw.rkt:58.19<br>
 =A0 context...:<br>
 =A0 =A0/usr/lib/racket/collects/racket/contract/private/blame.rkt:89:0: rai=
 se-blame-error<br>
 =A0 =A0/usr/lib/racket/collects/drracket/private/frame-icon.rkt: [running b=
 ody]<br>
 =A0 =A0/usr/lib/racket/collects/drracket/private/drracket-normal.rkt: [trav=
 ersing imports]<br>
 =A0 =A0/usr/lib/racket/collects/drracket/drracket.rkt: [running body]<br>
 <br>
 <br>
 *** How to repeat:<br>
 Type drracket in the command line.<br>
 <br>
 *** Environment:<br>
 Linux x86_64 / Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.31 (KHTML, l=
 ike Gecko) Chrome/26.0.1410.63 Safari/537.31<br>
 <br>
 </blockquote></div><br></div>
 </blockquote></div><br></div>
 
 --bcaec501c4ea9d677204dc39a816--
From: Matthew Flatt <mflatt@cs.utah.edu>
To: Soufiane Felliaui <soufiane.felliaui@gmail.com>
Cc: Robby Findler <robby@eecs.northwestern.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13741: Cannot start DrRacket
Date: Wed, 8 May 2013 16:03:00 -0400

 I wonder whether a graphics library might not be installed on your
 system --- especially "libpng12.so".
 
 Are the libraries listed on these pages installed on your system?
 
   http://docs.racket-lang.org/draw/libs.html
   http://docs.racket-lang.org/gui/libs.html
 
 Thanks!
 
 At Wed, 8 May 2013 21:08:06 +0200, Soufiane Felliaui wrote:
 > Thank you for replying.
 > The file "plt-logo-red-diffuse.png" is present under the
 >  "/usr/lib/racket/collects/icons/" directory.
 > I deleted the line, and i get another error.
 > 
 > 
 > png_structp->C: argument is not non-null `png_structp' pointer
 >   argument: #f
 >   context...:
 >    /usr/lib/racket/collects/ffi/unsafe.rkt:1137:12
 >    /usr/lib/racket/collects/racket/draw/unsafe/png.rkt:218:0:
 > create-png-reader
 >    /usr/lib/racket/collects/racket/draw/private/bitmap.rkt:311:4:
 > do-load-bitmap method in bitmap%
 >    /usr/lib/racket/collects/racket/draw/private/bitmap.rkt:145:2
 >    /usr/lib/racket/collects/racket/private/class-internal.rkt:4024:0:
 > continue-make-object
 >    /usr/lib/racket/collects/racket/private/class-internal.rkt:4005:0:
 > do-make-object
 >    /usr/lib/racket/collects/drracket/private/drracket-normal.rkt: [running
 > body]
 >    /usr/lib/racket/collects/drracket/drracket.rkt: [running body]
 > 
 > 
 > 
 > 
 > On 8 May 2013 20:46, Robby Findler <robby@eecs.northwestern.edu> wrote:
 > 
 > > You can probably work around this by deleting line 38 of frame-icon.rkt
 > > (this one):
 > >
 > > (send todays-icon set-loaded-mask todays-icon-bw-mask)
 > >
 > > I'm not sure why you are getting into that situation, tho. Do you have the
 > > file plt-logo-red-diffuse.png in your installation somewhere?
 > >
 > > Robby
 > >
 > >
 > > On Wed, May 8, 2013 at 10:04 AM, <soufiane.felliaui@gmail.com> wrote:
 > >
 > >> A new problem report is waiting at
 > >>   http://bugs.racket-lang.org/query/?cmd=view&pr=13741
 > >>
 > >> Reported by Soufiane for release: racket-5.3.3-1
 > >>
 > >> *** Description:
 > >> Distro: Archlinux.
 > >> package: https://www.archlinux.org/packages/extra/x86_64/racket/
 > >>
 > >> I can't start DrRacket.
 > >>
 > >> Here is the error I get when I try to start it from the cmd:
 > >>
 > >> > drracket
 > >>
 > >> set-loaded-mask method in bitmap%: contract violation
 > >>  expected: (is-a?/c bitmap%)
 > >>  given: #f
 > >>  in: the 1st argument of
 > >>      the set-loaded-mask method in
 > >>       bitmap%/c
 > >>  contract from: <collects>/racket/draw.rkt
 > >>  blaming:
 > >>       <collects>/drracket/private/frame-icon.rkt
 > >>  at: <collects>/racket/draw.rkt:58.19
 > >>   context...:
 > >>    /usr/lib/racket/collects/racket/contract/private/blame.rkt:89:0:
 > >> raise-blame-error
 > >>    /usr/lib/racket/collects/drracket/private/frame-icon.rkt: [running
 > >> body]
 > >>    /usr/lib/racket/collects/drracket/private/drracket-normal.rkt:
 > >> [traversing imports]
 > >>    /usr/lib/racket/collects/drracket/drracket.rkt: [running body]
 > >>
 > >>
 > >> *** How to repeat:
 > >> Type drracket in the command line.
 > >>
 > >> *** Environment:
 > >> Linux x86_64 / Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.31 (KHTML,
 > >> like Gecko) Chrome/26.0.1410.63 Safari/537.31
 > >>
 > >>
 > >
Responsible changed from "nobody" to "robby" by robby@racket-lang.org at Wed, 08 May 2013 16:15:48 -0400
Reason>>> A commit by robby@racket-lang.org was marked as relevant
  http://git.racket-lang.org/plt/commit/b9f8d699d3
  | add missing guard
  | 
  | related to PR 13741

From: Soufiane Felliaui <soufiane.felliaui@gmail.com>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: Robby Findler <robby@eecs.northwestern.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13741: Cannot start DrRacket
Date: Wed, 8 May 2013 22:14:39 +0200

 --f46d043d64af9b2b9804dc3a9645
 Content-Type: text/plain; charset=ISO-8859-1
 
 Thank you very much.
 I installed libpng12, and it worked!!
 Also thank you all for the great book "htdp".
 
 
 On 8 May 2013 22:03, Matthew Flatt <mflatt@cs.utah.edu> wrote:
 
 > I wonder whether a graphics library might not be installed on your
 > system --- especially "libpng12.so".
 >
 > Are the libraries listed on these pages installed on your system?
 >
 >   http://docs.racket-lang.org/draw/libs.html
 >   http://docs.racket-lang.org/gui/libs.html
 >
 > Thanks!
 >
 > At Wed, 8 May 2013 21:08:06 +0200, Soufiane Felliaui wrote:
 > > Thank you for replying.
 > > The file "plt-logo-red-diffuse.png" is present under the
 > >  "/usr/lib/racket/collects/icons/" directory.
 > > I deleted the line, and i get another error.
 > >
 > >
 > > png_structp->C: argument is not non-null `png_structp' pointer
 > >   argument: #f
 > >   context...:
 > >    /usr/lib/racket/collects/ffi/unsafe.rkt:1137:12
 > >    /usr/lib/racket/collects/racket/draw/unsafe/png.rkt:218:0:
 > > create-png-reader
 > >    /usr/lib/racket/collects/racket/draw/private/bitmap.rkt:311:4:
 > > do-load-bitmap method in bitmap%
 > >    /usr/lib/racket/collects/racket/draw/private/bitmap.rkt:145:2
 > >    /usr/lib/racket/collects/racket/private/class-internal.rkt:4024:0:
 > > continue-make-object
 > >    /usr/lib/racket/collects/racket/private/class-internal.rkt:4005:0:
 > > do-make-object
 > >    /usr/lib/racket/collects/drracket/private/drracket-normal.rkt:
 > [running
 > > body]
 > >    /usr/lib/racket/collects/drracket/drracket.rkt: [running body]
 > >
 > >
 > >
 > >
 > > On 8 May 2013 20:46, Robby Findler <robby@eecs.northwestern.edu> wrote:
 > >
 > > > You can probably work around this by deleting line 38 of frame-icon.rkt
 > > > (this one):
 > > >
 > > > (send todays-icon set-loaded-mask todays-icon-bw-mask)
 > > >
 > > > I'm not sure why you are getting into that situation, tho. Do you have
 > the
 > > > file plt-logo-red-diffuse.png in your installation somewhere?
 > > >
 > > > Robby
 > > >
 > > >
 > > > On Wed, May 8, 2013 at 10:04 AM, <soufiane.felliaui@gmail.com> wrote:
 > > >
 > > >> A new problem report is waiting at
 > > >>   http://bugs.racket-lang.org/query/?cmd=view&pr=13741
 > > >>
 > > >> Reported by Soufiane for release: racket-5.3.3-1
 > > >>
 > > >> *** Description:
 > > >> Distro: Archlinux.
 > > >> package: https://www.archlinux.org/packages/extra/x86_64/racket/
 > > >>
 > > >> I can't start DrRacket.
 > > >>
 > > >> Here is the error I get when I try to start it from the cmd:
 > > >>
 > > >> > drracket
 > > >>
 > > >> set-loaded-mask method in bitmap%: contract violation
 > > >>  expected: (is-a?/c bitmap%)
 > > >>  given: #f
 > > >>  in: the 1st argument of
 > > >>      the set-loaded-mask method in
 > > >>       bitmap%/c
 > > >>  contract from: <collects>/racket/draw.rkt
 > > >>  blaming:
 > > >>       <collects>/drracket/private/frame-icon.rkt
 > > >>  at: <collects>/racket/draw.rkt:58.19
 > > >>   context...:
 > > >>    /usr/lib/racket/collects/racket/contract/private/blame.rkt:89:0:
 > > >> raise-blame-error
 > > >>    /usr/lib/racket/collects/drracket/private/frame-icon.rkt: [running
 > > >> body]
 > > >>    /usr/lib/racket/collects/drracket/private/drracket-normal.rkt:
 > > >> [traversing imports]
 > > >>    /usr/lib/racket/collects/drracket/drracket.rkt: [running body]
 > > >>
 > > >>
 > > >> *** How to repeat:
 > > >> Type drracket in the command line.
 > > >>
 > > >> *** Environment:
 > > >> Linux x86_64 / Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.31
 > (KHTML,
 > > >> like Gecko) Chrome/26.0.1410.63 Safari/537.31
 > > >>
 > > >>
 > > >
 >
 
 --f46d043d64af9b2b9804dc3a9645
 Content-Type: text/html; charset=ISO-8859-1
 Content-Transfer-Encoding: quoted-printable
 
 <div dir=3D"ltr">Thank you very much.<div style>I installed libpng12, and i=
 t worked!!</div><div style>Also thank you all for the great book &quot;htdp=
 &quot;.</div></div><div class=3D"gmail_extra"><br><br><div class=3D"gmail_q=
 uote">
 
 On 8 May 2013 22:03, Matthew Flatt <span dir=3D"ltr">&lt;<a href=3D"mailto:=
 mflatt@cs.utah.edu" target=3D"_blank">mflatt@cs.utah.edu</a>&gt;</span> wro=
 te:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-=
 left:1px #ccc solid;padding-left:1ex">
 
 I wonder whether a graphics library might not be installed on your<br>
 system --- especially &quot;libpng12.so&quot;.<br>
 <br>
 Are the libraries listed on these pages installed on your system?<br>
 <br>
 =A0 <a href=3D"http://docs.racket-lang.org/draw/libs.html" target=3D"_blank=
 ">http://docs.racket-lang.org/draw/libs.html</a><br>
 =A0 <a href=3D"http://docs.racket-lang.org/gui/libs.html" target=3D"_blank"=
 >http://docs.racket-lang.org/gui/libs.html</a><br>
 <br>
 Thanks!<br>
 <div class=3D"HOEnZb"><div class=3D"h5"><br>
 At Wed, 8 May 2013 21:08:06 +0200, Soufiane Felliaui wrote:<br>
 &gt; Thank you for replying.<br>
 &gt; The file &quot;plt-logo-red-diffuse.png&quot; is present under the<br>
 &gt; =A0&quot;/usr/lib/racket/collects/icons/&quot; directory.<br>
 &gt; I deleted the line, and i get another error.<br>
 &gt;<br>
 &gt;<br>
 &gt; png_structp-&gt;C: argument is not non-null `png_structp&#39; pointer<=
 br>
 &gt; =A0 argument: #f<br>
 &gt; =A0 context...:<br>
 &gt; =A0 =A0/usr/lib/racket/collects/ffi/unsafe.rkt:1137:12<br>
 &gt; =A0 =A0/usr/lib/racket/collects/racket/draw/unsafe/png.rkt:218:0:<br>
 &gt; create-png-reader<br>
 &gt; =A0 =A0/usr/lib/racket/collects/racket/draw/private/bitmap.rkt:311:4:<=
 br>
 &gt; do-load-bitmap method in bitmap%<br>
 &gt; =A0 =A0/usr/lib/racket/collects/racket/draw/private/bitmap.rkt:145:2<b=
 r>
 &gt; =A0 =A0/usr/lib/racket/collects/racket/private/class-internal.rkt:4024=
 :0:<br>
 &gt; continue-make-object<br>
 &gt; =A0 =A0/usr/lib/racket/collects/racket/private/class-internal.rkt:4005=
 :0:<br>
 &gt; do-make-object<br>
 &gt; =A0 =A0/usr/lib/racket/collects/drracket/private/drracket-normal.rkt: =
 [running<br>
 &gt; body]<br>
 &gt; =A0 =A0/usr/lib/racket/collects/drracket/drracket.rkt: [running body]<=
 br>
 &gt;<br>
 &gt;<br>
 &gt;<br>
 &gt;<br>
 &gt; On 8 May 2013 20:46, Robby Findler &lt;<a href=3D"mailto:robby@eecs.no=
 rthwestern.edu">robby@eecs.northwestern.edu</a>&gt; wrote:<br>
 &gt;<br>
 &gt; &gt; You can probably work around this by deleting line 38 of frame-ic=
 on.rkt<br>
 &gt; &gt; (this one):<br>
 &gt; &gt;<br>
 &gt; &gt; (send todays-icon set-loaded-mask todays-icon-bw-mask)<br>
 &gt; &gt;<br>
 &gt; &gt; I&#39;m not sure why you are getting into that situation, tho. Do=
  you have the<br>
 &gt; &gt; file plt-logo-red-diffuse.png in your installation somewhere?<br>
 &gt; &gt;<br>
 &gt; &gt; Robby<br>
 &gt; &gt;<br>
 &gt; &gt;<br>
 &gt; &gt; On Wed, May 8, 2013 at 10:04 AM, &lt;<a href=3D"mailto:soufiane.f=
 elliaui@gmail.com">soufiane.felliaui@gmail.com</a>&gt; wrote:<br>
 &gt; &gt;<br>
 &gt; &gt;&gt; A new problem report is waiting at<br>
 &gt; &gt;&gt; =A0 <a href=3D"http://bugs.racket-lang.org/query/?cmd=3Dview&=
 amp;pr=3D13741" target=3D"_blank">http://bugs.racket-lang.org/query/?cmd=3D=
 view&amp;pr=3D13741</a><br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; Reported by Soufiane for release: racket-5.3.3-1<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; *** Description:<br>
 &gt; &gt;&gt; Distro: Archlinux.<br>
 &gt; &gt;&gt; package: <a href=3D"https://www.archlinux.org/packages/extra/=
 x86_64/racket/" target=3D"_blank">https://www.archlinux.org/packages/extra/=
 x86_64/racket/</a><br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; I can&#39;t start DrRacket.<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; Here is the error I get when I try to start it from the cmd:<=
 br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; &gt; drracket<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; set-loaded-mask method in bitmap%: contract violation<br>
 &gt; &gt;&gt; =A0expected: (is-a?/c bitmap%)<br>
 &gt; &gt;&gt; =A0given: #f<br>
 &gt; &gt;&gt; =A0in: the 1st argument of<br>
 &gt; &gt;&gt; =A0 =A0 =A0the set-loaded-mask method in<br>
 &gt; &gt;&gt; =A0 =A0 =A0 bitmap%/c<br>
 &gt; &gt;&gt; =A0contract from: &lt;collects&gt;/racket/draw.rkt<br>
 &gt; &gt;&gt; =A0blaming:<br>
 &gt; &gt;&gt; =A0 =A0 =A0 &lt;collects&gt;/drracket/private/frame-icon.rkt<=
 br>
 &gt; &gt;&gt; =A0at: &lt;collects&gt;/racket/draw.rkt:58.19<br>
 &gt; &gt;&gt; =A0 context...:<br>
 &gt; &gt;&gt; =A0 =A0/usr/lib/racket/collects/racket/contract/private/blame=
 .rkt:89:0:<br>
 &gt; &gt;&gt; raise-blame-error<br>
 &gt; &gt;&gt; =A0 =A0/usr/lib/racket/collects/drracket/private/frame-icon.r=
 kt: [running<br>
 &gt; &gt;&gt; body]<br>
 &gt; &gt;&gt; =A0 =A0/usr/lib/racket/collects/drracket/private/drracket-nor=
 mal.rkt:<br>
 &gt; &gt;&gt; [traversing imports]<br>
 &gt; &gt;&gt; =A0 =A0/usr/lib/racket/collects/drracket/drracket.rkt: [runni=
 ng body]<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; *** How to repeat:<br>
 &gt; &gt;&gt; Type drracket in the command line.<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; *** Environment:<br>
 &gt; &gt;&gt; Linux x86_64 / Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/53=
 7.31 (KHTML,<br>
 &gt; &gt;&gt; like Gecko) Chrome/26.0.1410.63 Safari/537.31<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;<br>
 </div></div></blockquote></div><br></div>
 
 --f46d043d64af9b2b9804dc3a9645--
From: Robby Findler <robby@eecs.northwestern.edu>
To: Soufiane Felliaui <soufiane.felliaui@gmail.com>
Cc: Matthew Flatt <mflatt@cs.utah.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13741: Cannot start DrRacket
Date: Wed, 8 May 2013 15:19:54 -0500

 --089e01229c302c76d404dc3aa823
 Content-Type: text/plain; charset=UTF-8
 
 So should we consider this a bug in the archlinux distribution that doesn't
 add a dependency on libpng? Or should things fail more gracefully?
 
 Robby
 
 
 On Wed, May 8, 2013 at 3:14 PM, Soufiane Felliaui <
 soufiane.felliaui@gmail.com> wrote:
 
 > Thank you very much.
 > I installed libpng12, and it worked!!
 > Also thank you all for the great book "htdp".
 >
 >
 > On 8 May 2013 22:03, Matthew Flatt <mflatt@cs.utah.edu> wrote:
 >
 >> I wonder whether a graphics library might not be installed on your
 >> system --- especially "libpng12.so".
 >>
 >> Are the libraries listed on these pages installed on your system?
 >>
 >>   http://docs.racket-lang.org/draw/libs.html
 >>   http://docs.racket-lang.org/gui/libs.html
 >>
 >> Thanks!
 >>
 >> At Wed, 8 May 2013 21:08:06 +0200, Soufiane Felliaui wrote:
 >> > Thank you for replying.
 >> > The file "plt-logo-red-diffuse.png" is present under the
 >> >  "/usr/lib/racket/collects/icons/" directory.
 >> > I deleted the line, and i get another error.
 >> >
 >> >
 >> > png_structp->C: argument is not non-null `png_structp' pointer
 >> >   argument: #f
 >> >   context...:
 >> >    /usr/lib/racket/collects/ffi/unsafe.rkt:1137:12
 >> >    /usr/lib/racket/collects/racket/draw/unsafe/png.rkt:218:0:
 >> > create-png-reader
 >> >    /usr/lib/racket/collects/racket/draw/private/bitmap.rkt:311:4:
 >> > do-load-bitmap method in bitmap%
 >> >    /usr/lib/racket/collects/racket/draw/private/bitmap.rkt:145:2
 >> >    /usr/lib/racket/collects/racket/private/class-internal.rkt:4024:0:
 >> > continue-make-object
 >> >    /usr/lib/racket/collects/racket/private/class-internal.rkt:4005:0:
 >> > do-make-object
 >> >    /usr/lib/racket/collects/drracket/private/drracket-normal.rkt:
 >> [running
 >> > body]
 >> >    /usr/lib/racket/collects/drracket/drracket.rkt: [running body]
 >> >
 >> >
 >> >
 >> >
 >> > On 8 May 2013 20:46, Robby Findler <robby@eecs.northwestern.edu> wrote:
 >> >
 >> > > You can probably work around this by deleting line 38 of
 >> frame-icon.rkt
 >> > > (this one):
 >> > >
 >> > > (send todays-icon set-loaded-mask todays-icon-bw-mask)
 >> > >
 >> > > I'm not sure why you are getting into that situation, tho. Do you
 >> have the
 >> > > file plt-logo-red-diffuse.png in your installation somewhere?
 >> > >
 >> > > Robby
 >> > >
 >> > >
 >> > > On Wed, May 8, 2013 at 10:04 AM, <soufiane.felliaui@gmail.com> wrote:
 >> > >
 >> > >> A new problem report is waiting at
 >> > >>   http://bugs.racket-lang.org/query/?cmd=view&pr=13741
 >> > >>
 >> > >> Reported by Soufiane for release: racket-5.3.3-1
 >> > >>
 >> > >> *** Description:
 >> > >> Distro: Archlinux.
 >> > >> package: https://www.archlinux.org/packages/extra/x86_64/racket/
 >> > >>
 >> > >> I can't start DrRacket.
 >> > >>
 >> > >> Here is the error I get when I try to start it from the cmd:
 >> > >>
 >> > >> > drracket
 >> > >>
 >> > >> set-loaded-mask method in bitmap%: contract violation
 >> > >>  expected: (is-a?/c bitmap%)
 >> > >>  given: #f
 >> > >>  in: the 1st argument of
 >> > >>      the set-loaded-mask method in
 >> > >>       bitmap%/c
 >> > >>  contract from: <collects>/racket/draw.rkt
 >> > >>  blaming:
 >> > >>       <collects>/drracket/private/frame-icon.rkt
 >> > >>  at: <collects>/racket/draw.rkt:58.19
 >> > >>   context...:
 >> > >>    /usr/lib/racket/collects/racket/contract/private/blame.rkt:89:0:
 >> > >> raise-blame-error
 >> > >>    /usr/lib/racket/collects/drracket/private/frame-icon.rkt: [running
 >> > >> body]
 >> > >>    /usr/lib/racket/collects/drracket/private/drracket-normal.rkt:
 >> > >> [traversing imports]
 >> > >>    /usr/lib/racket/collects/drracket/drracket.rkt: [running body]
 >> > >>
 >> > >>
 >> > >> *** How to repeat:
 >> > >> Type drracket in the command line.
 >> > >>
 >> > >> *** Environment:
 >> > >> Linux x86_64 / Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.31
 >> (KHTML,
 >> > >> like Gecko) Chrome/26.0.1410.63 Safari/537.31
 >> > >>
 >> > >>
 >> > >
 >>
 >
 >
 
 --089e01229c302c76d404dc3aa823
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 <div dir=3D"ltr">So should we consider this a bug in the archlinux distribu=
 tion that doesn&#39;t add a dependency on libpng? Or should things fail mor=
 e gracefully?<div><br></div><div>Robby</div></div><div class=3D"gmail_extra=
 ">
 <br><br><div class=3D"gmail_quote">On Wed, May 8, 2013 at 3:14 PM, Soufiane=
  Felliaui <span dir=3D"ltr">&lt;<a href=3D"mailto:soufiane.felliaui@gmail.c=
 om" target=3D"_blank">soufiane.felliaui@gmail.com</a>&gt;</span> wrote:<br>=
 <blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
 x #ccc solid;padding-left:1ex">
 <div dir=3D"ltr">Thank you very much.<div>I installed libpng12, and it work=
 ed!!</div><div>Also thank you all for the great book &quot;htdp&quot;.</div=
 ></div><div class=3D"HOEnZb"><div class=3D"h5"><div class=3D"gmail_extra"><=
 br><br>
 <div class=3D"gmail_quote">
 
 On 8 May 2013 22:03, Matthew Flatt <span dir=3D"ltr">&lt;<a href=3D"mailto:=
 mflatt@cs.utah.edu" target=3D"_blank">mflatt@cs.utah.edu</a>&gt;</span> wro=
 te:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-=
 left:1px #ccc solid;padding-left:1ex">
 
 
 I wonder whether a graphics library might not be installed on your<br>
 system --- especially &quot;libpng12.so&quot;.<br>
 <br>
 Are the libraries listed on these pages installed on your system?<br>
 <br>
 =C2=A0 <a href=3D"http://docs.racket-lang.org/draw/libs.html" target=3D"_bl=
 ank">http://docs.racket-lang.org/draw/libs.html</a><br>
 =C2=A0 <a href=3D"http://docs.racket-lang.org/gui/libs.html" target=3D"_bla=
 nk">http://docs.racket-lang.org/gui/libs.html</a><br>
 <br>
 Thanks!<br>
 <div><div><br>
 At Wed, 8 May 2013 21:08:06 +0200, Soufiane Felliaui wrote:<br>
 &gt; Thank you for replying.<br>
 &gt; The file &quot;plt-logo-red-diffuse.png&quot; is present under the<br>
 &gt; =C2=A0&quot;/usr/lib/racket/collects/icons/&quot; directory.<br>
 &gt; I deleted the line, and i get another error.<br>
 &gt;<br>
 &gt;<br>
 &gt; png_structp-&gt;C: argument is not non-null `png_structp&#39; pointer<=
 br>
 &gt; =C2=A0 argument: #f<br>
 &gt; =C2=A0 context...:<br>
 &gt; =C2=A0 =C2=A0/usr/lib/racket/collects/ffi/unsafe.rkt:1137:12<br>
 &gt; =C2=A0 =C2=A0/usr/lib/racket/collects/racket/draw/unsafe/png.rkt:218:0=
 :<br>
 &gt; create-png-reader<br>
 &gt; =C2=A0 =C2=A0/usr/lib/racket/collects/racket/draw/private/bitmap.rkt:3=
 11:4:<br>
 &gt; do-load-bitmap method in bitmap%<br>
 &gt; =C2=A0 =C2=A0/usr/lib/racket/collects/racket/draw/private/bitmap.rkt:1=
 45:2<br>
 &gt; =C2=A0 =C2=A0/usr/lib/racket/collects/racket/private/class-internal.rk=
 t:4024:0:<br>
 &gt; continue-make-object<br>
 &gt; =C2=A0 =C2=A0/usr/lib/racket/collects/racket/private/class-internal.rk=
 t:4005:0:<br>
 &gt; do-make-object<br>
 &gt; =C2=A0 =C2=A0/usr/lib/racket/collects/drracket/private/drracket-normal=
 .rkt: [running<br>
 &gt; body]<br>
 &gt; =C2=A0 =C2=A0/usr/lib/racket/collects/drracket/drracket.rkt: [running =
 body]<br>
 &gt;<br>
 &gt;<br>
 &gt;<br>
 &gt;<br>
 &gt; On 8 May 2013 20:46, Robby Findler &lt;<a href=3D"mailto:robby@eecs.no=
 rthwestern.edu" target=3D"_blank">robby@eecs.northwestern.edu</a>&gt; wrote=
 :<br>
 &gt;<br>
 &gt; &gt; You can probably work around this by deleting line 38 of frame-ic=
 on.rkt<br>
 &gt; &gt; (this one):<br>
 &gt; &gt;<br>
 &gt; &gt; (send todays-icon set-loaded-mask todays-icon-bw-mask)<br>
 &gt; &gt;<br>
 &gt; &gt; I&#39;m not sure why you are getting into that situation, tho. Do=
  you have the<br>
 &gt; &gt; file plt-logo-red-diffuse.png in your installation somewhere?<br>
 &gt; &gt;<br>
 &gt; &gt; Robby<br>
 &gt; &gt;<br>
 &gt; &gt;<br>
 &gt; &gt; On Wed, May 8, 2013 at 10:04 AM, &lt;<a href=3D"mailto:soufiane.f=
 elliaui@gmail.com" target=3D"_blank">soufiane.felliaui@gmail.com</a>&gt; wr=
 ote:<br>
 &gt; &gt;<br>
 &gt; &gt;&gt; A new problem report is waiting at<br>
 &gt; &gt;&gt; =C2=A0 <a href=3D"http://bugs.racket-lang.org/query/?cmd=3Dvi=
 ew&amp;pr=3D13741" target=3D"_blank">http://bugs.racket-lang.org/query/?cmd=
 =3Dview&amp;pr=3D13741</a><br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; Reported by Soufiane for release: racket-5.3.3-1<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; *** Description:<br>
 &gt; &gt;&gt; Distro: Archlinux.<br>
 &gt; &gt;&gt; package: <a href=3D"https://www.archlinux.org/packages/extra/=
 x86_64/racket/" target=3D"_blank">https://www.archlinux.org/packages/extra/=
 x86_64/racket/</a><br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; I can&#39;t start DrRacket.<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; Here is the error I get when I try to start it from the cmd:<=
 br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; &gt; drracket<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; set-loaded-mask method in bitmap%: contract violation<br>
 &gt; &gt;&gt; =C2=A0expected: (is-a?/c bitmap%)<br>
 &gt; &gt;&gt; =C2=A0given: #f<br>
 &gt; &gt;&gt; =C2=A0in: the 1st argument of<br>
 &gt; &gt;&gt; =C2=A0 =C2=A0 =C2=A0the set-loaded-mask method in<br>
 &gt; &gt;&gt; =C2=A0 =C2=A0 =C2=A0 bitmap%/c<br>
 &gt; &gt;&gt; =C2=A0contract from: &lt;collects&gt;/racket/draw.rkt<br>
 &gt; &gt;&gt; =C2=A0blaming:<br>
 &gt; &gt;&gt; =C2=A0 =C2=A0 =C2=A0 &lt;collects&gt;/drracket/private/frame-=
 icon.rkt<br>
 &gt; &gt;&gt; =C2=A0at: &lt;collects&gt;/racket/draw.rkt:58.19<br>
 &gt; &gt;&gt; =C2=A0 context...:<br>
 &gt; &gt;&gt; =C2=A0 =C2=A0/usr/lib/racket/collects/racket/contract/private=
 /blame.rkt:89:0:<br>
 &gt; &gt;&gt; raise-blame-error<br>
 &gt; &gt;&gt; =C2=A0 =C2=A0/usr/lib/racket/collects/drracket/private/frame-=
 icon.rkt: [running<br>
 &gt; &gt;&gt; body]<br>
 &gt; &gt;&gt; =C2=A0 =C2=A0/usr/lib/racket/collects/drracket/private/drrack=
 et-normal.rkt:<br>
 &gt; &gt;&gt; [traversing imports]<br>
 &gt; &gt;&gt; =C2=A0 =C2=A0/usr/lib/racket/collects/drracket/drracket.rkt: =
 [running body]<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; *** How to repeat:<br>
 &gt; &gt;&gt; Type drracket in the command line.<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; *** Environment:<br>
 &gt; &gt;&gt; Linux x86_64 / Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/53=
 7.31 (KHTML,<br>
 &gt; &gt;&gt; like Gecko) Chrome/26.0.1410.63 Safari/537.31<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;<br>
 </div></div></blockquote></div><br></div>
 </div></div></blockquote></div><br></div>
 
 --089e01229c302c76d404dc3aa823--
From: Soufiane Felliaui <soufiane.felliaui@gmail.com>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: Matthew Flatt <mflatt@cs.utah.edu>, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13741: Cannot start DrRacket
Date: Wed, 8 May 2013 22:31:58 +0200

 --bcaec50163c38db9e604dc3ad4c3
 Content-Type: text/plain; charset=ISO-8859-1
 
 FYI libpng.so and libpng16.so were installed on my system, but it looks
 like the arch package requires libpng12 specifically.
 
 Before installing libpng12.
 
 > ls /usr/lib/libpng*
 
 /usr/lib/libpng.a
 /usr/lib/libpng.so
 /usr/lib/libpng.so.3
 /usr/lib/libpng.so.3.50.0
 /usr/lib/libpng16.a
 /usr/lib/libpng16.so
 /usr/lib/libpng16.so.16
 /usr/lib/libpng16.so.16.2.0
 
 after installing libpng12
 
  > ls /usr/lib/libpng*
 /usr/lib/libpng.a
 /usr/lib/libpng.so
 /usr/lib/libpng.so.3
 /usr/lib/libpng.so.3.50.0
 /usr/lib/libpng12.a
 /usr/lib/libpng12.so
 /usr/lib/libpng12.so.0
 /usr/lib/libpng12.so.0.50.0
 /usr/lib/libpng16.a
 /usr/lib/libpng16.so
 /usr/lib/libpng16.so.16
 /usr/lib/libpng16.so.16.2.0
 
 I also flagged the arch package as out-of-date, it will be updated soon to
 the latest version "5.3.4".
 
 
 
 On 8 May 2013 22:19, Robby Findler <robby@eecs.northwestern.edu> wrote:
 
 > So should we consider this a bug in the archlinux distribution that
 > doesn't add a dependency on libpng? Or should things fail more gracefully?
 >
 > Robby
 >
 >
 > On Wed, May 8, 2013 at 3:14 PM, Soufiane Felliaui <
 > soufiane.felliaui@gmail.com> wrote:
 >
 >> Thank you very much.
 >> I installed libpng12, and it worked!!
 >> Also thank you all for the great book "htdp".
 >>
 >>
 >>  On 8 May 2013 22:03, Matthew Flatt <mflatt@cs.utah.edu> wrote:
 >>
 >>> I wonder whether a graphics library might not be installed on your
 >>> system --- especially "libpng12.so".
 >>>
 >>> Are the libraries listed on these pages installed on your system?
 >>>
 >>>   http://docs.racket-lang.org/draw/libs.html
 >>>   http://docs.racket-lang.org/gui/libs.html
 >>>
 >>> Thanks!
 >>>
 >>> At Wed, 8 May 2013 21:08:06 +0200, Soufiane Felliaui wrote:
 >>> > Thank you for replying.
 >>> > The file "plt-logo-red-diffuse.png" is present under the
 >>> >  "/usr/lib/racket/collects/icons/" directory.
 >>> > I deleted the line, and i get another error.
 >>> >
 >>> >
 >>> > png_structp->C: argument is not non-null `png_structp' pointer
 >>> >   argument: #f
 >>> >   context...:
 >>> >    /usr/lib/racket/collects/ffi/unsafe.rkt:1137:12
 >>> >    /usr/lib/racket/collects/racket/draw/unsafe/png.rkt:218:0:
 >>> > create-png-reader
 >>> >    /usr/lib/racket/collects/racket/draw/private/bitmap.rkt:311:4:
 >>> > do-load-bitmap method in bitmap%
 >>> >    /usr/lib/racket/collects/racket/draw/private/bitmap.rkt:145:2
 >>> >    /usr/lib/racket/collects/racket/private/class-internal.rkt:4024:0:
 >>> > continue-make-object
 >>> >    /usr/lib/racket/collects/racket/private/class-internal.rkt:4005:0:
 >>> > do-make-object
 >>> >    /usr/lib/racket/collects/drracket/private/drracket-normal.rkt:
 >>> [running
 >>> > body]
 >>> >    /usr/lib/racket/collects/drracket/drracket.rkt: [running body]
 >>> >
 >>> >
 >>> >
 >>> >
 >>> > On 8 May 2013 20:46, Robby Findler <robby@eecs.northwestern.edu>
 >>> wrote:
 >>> >
 >>> > > You can probably work around this by deleting line 38 of
 >>> frame-icon.rkt
 >>> > > (this one):
 >>> > >
 >>> > > (send todays-icon set-loaded-mask todays-icon-bw-mask)
 >>> > >
 >>> > > I'm not sure why you are getting into that situation, tho. Do you
 >>> have the
 >>> > > file plt-logo-red-diffuse.png in your installation somewhere?
 >>> > >
 >>> > > Robby
 >>> > >
 >>> > >
 >>> > > On Wed, May 8, 2013 at 10:04 AM, <soufiane.felliaui@gmail.com>
 >>> wrote:
 >>> > >
 >>> > >> A new problem report is waiting at
 >>> > >>   http://bugs.racket-lang.org/query/?cmd=view&pr=13741
 >>> > >>
 >>> > >> Reported by Soufiane for release: racket-5.3.3-1
 >>> > >>
 >>> > >> *** Description:
 >>> > >> Distro: Archlinux.
 >>> > >> package: https://www.archlinux.org/packages/extra/x86_64/racket/
 >>> > >>
 >>> > >> I can't start DrRacket.
 >>> > >>
 >>> > >> Here is the error I get when I try to start it from the cmd:
 >>> > >>
 >>> > >> > drracket
 >>> > >>
 >>> > >> set-loaded-mask method in bitmap%: contract violation
 >>> > >>  expected: (is-a?/c bitmap%)
 >>> > >>  given: #f
 >>> > >>  in: the 1st argument of
 >>> > >>      the set-loaded-mask method in
 >>> > >>       bitmap%/c
 >>> > >>  contract from: <collects>/racket/draw.rkt
 >>> > >>  blaming:
 >>> > >>       <collects>/drracket/private/frame-icon.rkt
 >>> > >>  at: <collects>/racket/draw.rkt:58.19
 >>> > >>   context...:
 >>> > >>    /usr/lib/racket/collects/racket/contract/private/blame.rkt:89:0:
 >>> > >> raise-blame-error
 >>> > >>    /usr/lib/racket/collects/drracket/private/frame-icon.rkt:
 >>> [running
 >>> > >> body]
 >>> > >>    /usr/lib/racket/collects/drracket/private/drracket-normal.rkt:
 >>> > >> [traversing imports]
 >>> > >>    /usr/lib/racket/collects/drracket/drracket.rkt: [running body]
 >>> > >>
 >>> > >>
 >>> > >> *** How to repeat:
 >>> > >> Type drracket in the command line.
 >>> > >>
 >>> > >> *** Environment:
 >>> > >> Linux x86_64 / Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.31
 >>> (KHTML,
 >>> > >> like Gecko) Chrome/26.0.1410.63 Safari/537.31
 >>> > >>
 >>> > >>
 >>> > >
 >>>
 >>
 >>
 >
 
 --bcaec50163c38db9e604dc3ad4c3
 Content-Type: text/html; charset=ISO-8859-1
 Content-Transfer-Encoding: quoted-printable
 
 <div dir=3D"ltr"><div style>FYI libpng.so and libpng16.so were installed on=
  my system, but it looks like the arch package requires libpng12 specifical=
 ly.<br></div><div><br></div><div style>Before installing libpng12.<br></div=
 >
 
 <div style><br></div><div style>&gt; ls /usr/lib/libpng*</div><div style><b=
 r></div><div style><div>/usr/lib/libpng.a</div><div>/usr/lib/libpng.so</div=
 ><div>/usr/lib/libpng.so.3</div><div>/usr/lib/libpng.so.3.50.0</div><div>
 
 /usr/lib/libpng16.a</div><div>/usr/lib/libpng16.so</div><div>/usr/lib/libpn=
 g16.so.16</div><div>/usr/lib/libpng16.so.16.2.0</div><div><br></div></div><=
 div style>after installing libpng12</div><div style><br></div><div style>
 
 <div>=A0&gt; ls /usr/lib/libpng*</div><div><div>/usr/lib/libpng.a</div><div=
 >/usr/lib/libpng.so</div><div>/usr/lib/libpng.so.3</div><div>/usr/lib/libpn=
 g.so.3.50.0</div><div>/usr/lib/libpng12.a</div><div>/usr/lib/libpng12.so</d=
 iv>
 
 <div>/usr/lib/libpng12.so.0</div><div>/usr/lib/libpng12.so.0.50.0</div><div=
 >/usr/lib/libpng16.a</div><div>/usr/lib/libpng16.so</div><div>/usr/lib/libp=
 ng16.so.16</div><div>/usr/lib/libpng16.so.16.2.0</div></div><div><br></div>
 
 </div><div style>I also flagged the arch package as out-of-date, it will be=
  updated soon to the latest version &quot;5.3.4&quot;.</div><div style><br>=
 </div></div><div class=3D"gmail_extra"><br><br><div class=3D"gmail_quote">
 On 8 May 2013 22:19, Robby Findler <span dir=3D"ltr">&lt;<a href=3D"mailto:=
 robby@eecs.northwestern.edu" target=3D"_blank">robby@eecs.northwestern.edu<=
 /a>&gt;</span> wrote:<br>
 <blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
 x #ccc solid;padding-left:1ex"><div dir=3D"ltr">So should we consider this =
 a bug in the archlinux distribution that doesn&#39;t add a dependency on li=
 bpng? Or should things fail more gracefully?<span class=3D"HOEnZb"><font co=
 lor=3D"#888888"><div>
 
 <br></div><div>Robby</div></font></span></div><div class=3D"HOEnZb"><div cl=
 ass=3D"h5"><div class=3D"gmail_extra">
 <br><br><div class=3D"gmail_quote">On Wed, May 8, 2013 at 3:14 PM, Soufiane=
  Felliaui <span dir=3D"ltr">&lt;<a href=3D"mailto:soufiane.felliaui@gmail.c=
 om" target=3D"_blank">soufiane.felliaui@gmail.com</a>&gt;</span> wrote:<br>=
 <blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
 x #ccc solid;padding-left:1ex">
 
 
 <div dir=3D"ltr">Thank you very much.<div>I installed libpng12, and it work=
 ed!!</div><div>Also thank you all for the great book &quot;htdp&quot;.</div=
 ></div><div><div><div class=3D"gmail_extra"><br><br>
 <div class=3D"gmail_quote">
 
 On 8 May 2013 22:03, Matthew Flatt <span dir=3D"ltr">&lt;<a href=3D"mailto:=
 mflatt@cs.utah.edu" target=3D"_blank">mflatt@cs.utah.edu</a>&gt;</span> wro=
 te:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-=
 left:1px #ccc solid;padding-left:1ex">
 
 
 
 
 I wonder whether a graphics library might not be installed on your<br>
 system --- especially &quot;libpng12.so&quot;.<br>
 <br>
 Are the libraries listed on these pages installed on your system?<br>
 <br>
 =A0 <a href=3D"http://docs.racket-lang.org/draw/libs.html" target=3D"_blank=
 ">http://docs.racket-lang.org/draw/libs.html</a><br>
 =A0 <a href=3D"http://docs.racket-lang.org/gui/libs.html" target=3D"_blank"=
 >http://docs.racket-lang.org/gui/libs.html</a><br>
 <br>
 Thanks!<br>
 <div><div><br>
 At Wed, 8 May 2013 21:08:06 +0200, Soufiane Felliaui wrote:<br>
 &gt; Thank you for replying.<br>
 &gt; The file &quot;plt-logo-red-diffuse.png&quot; is present under the<br>
 &gt; =A0&quot;/usr/lib/racket/collects/icons/&quot; directory.<br>
 &gt; I deleted the line, and i get another error.<br>
 &gt;<br>
 &gt;<br>
 &gt; png_structp-&gt;C: argument is not non-null `png_structp&#39; pointer<=
 br>
 &gt; =A0 argument: #f<br>
 &gt; =A0 context...:<br>
 &gt; =A0 =A0/usr/lib/racket/collects/ffi/unsafe.rkt:1137:12<br>
 &gt; =A0 =A0/usr/lib/racket/collects/racket/draw/unsafe/png.rkt:218:0:<br>
 &gt; create-png-reader<br>
 &gt; =A0 =A0/usr/lib/racket/collects/racket/draw/private/bitmap.rkt:311:4:<=
 br>
 &gt; do-load-bitmap method in bitmap%<br>
 &gt; =A0 =A0/usr/lib/racket/collects/racket/draw/private/bitmap.rkt:145:2<b=
 r>
 &gt; =A0 =A0/usr/lib/racket/collects/racket/private/class-internal.rkt:4024=
 :0:<br>
 &gt; continue-make-object<br>
 &gt; =A0 =A0/usr/lib/racket/collects/racket/private/class-internal.rkt:4005=
 :0:<br>
 &gt; do-make-object<br>
 &gt; =A0 =A0/usr/lib/racket/collects/drracket/private/drracket-normal.rkt: =
 [running<br>
 &gt; body]<br>
 &gt; =A0 =A0/usr/lib/racket/collects/drracket/drracket.rkt: [running body]<=
 br>
 &gt;<br>
 &gt;<br>
 &gt;<br>
 &gt;<br>
 &gt; On 8 May 2013 20:46, Robby Findler &lt;<a href=3D"mailto:robby@eecs.no=
 rthwestern.edu" target=3D"_blank">robby@eecs.northwestern.edu</a>&gt; wrote=
 :<br>
 &gt;<br>
 &gt; &gt; You can probably work around this by deleting line 38 of frame-ic=
 on.rkt<br>
 &gt; &gt; (this one):<br>
 &gt; &gt;<br>
 &gt; &gt; (send todays-icon set-loaded-mask todays-icon-bw-mask)<br>
 &gt; &gt;<br>
 &gt; &gt; I&#39;m not sure why you are getting into that situation, tho. Do=
  you have the<br>
 &gt; &gt; file plt-logo-red-diffuse.png in your installation somewhere?<br>
 &gt; &gt;<br>
 &gt; &gt; Robby<br>
 &gt; &gt;<br>
 &gt; &gt;<br>
 &gt; &gt; On Wed, May 8, 2013 at 10:04 AM, &lt;<a href=3D"mailto:soufiane.f=
 elliaui@gmail.com" target=3D"_blank">soufiane.felliaui@gmail.com</a>&gt; wr=
 ote:<br>
 &gt; &gt;<br>
 &gt; &gt;&gt; A new problem report is waiting at<br>
 &gt; &gt;&gt; =A0 <a href=3D"http://bugs.racket-lang.org/query/?cmd=3Dview&=
 amp;pr=3D13741" target=3D"_blank">http://bugs.racket-lang.org/query/?cmd=3D=
 view&amp;pr=3D13741</a><br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; Reported by Soufiane for release: racket-5.3.3-1<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; *** Description:<br>
 &gt; &gt;&gt; Distro: Archlinux.<br>
 &gt; &gt;&gt; package: <a href=3D"https://www.archlinux.org/packages/extra/=
 x86_64/racket/" target=3D"_blank">https://www.archlinux.org/packages/extra/=
 x86_64/racket/</a><br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; I can&#39;t start DrRacket.<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; Here is the error I get when I try to start it from the cmd:<=
 br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; &gt; drracket<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; set-loaded-mask method in bitmap%: contract violation<br>
 &gt; &gt;&gt; =A0expected: (is-a?/c bitmap%)<br>
 &gt; &gt;&gt; =A0given: #f<br>
 &gt; &gt;&gt; =A0in: the 1st argument of<br>
 &gt; &gt;&gt; =A0 =A0 =A0the set-loaded-mask method in<br>
 &gt; &gt;&gt; =A0 =A0 =A0 bitmap%/c<br>
 &gt; &gt;&gt; =A0contract from: &lt;collects&gt;/racket/draw.rkt<br>
 &gt; &gt;&gt; =A0blaming:<br>
 &gt; &gt;&gt; =A0 =A0 =A0 &lt;collects&gt;/drracket/private/frame-icon.rkt<=
 br>
 &gt; &gt;&gt; =A0at: &lt;collects&gt;/racket/draw.rkt:58.19<br>
 &gt; &gt;&gt; =A0 context...:<br>
 &gt; &gt;&gt; =A0 =A0/usr/lib/racket/collects/racket/contract/private/blame=
 .rkt:89:0:<br>
 &gt; &gt;&gt; raise-blame-error<br>
 &gt; &gt;&gt; =A0 =A0/usr/lib/racket/collects/drracket/private/frame-icon.r=
 kt: [running<br>
 &gt; &gt;&gt; body]<br>
 &gt; &gt;&gt; =A0 =A0/usr/lib/racket/collects/drracket/private/drracket-nor=
 mal.rkt:<br>
 &gt; &gt;&gt; [traversing imports]<br>
 &gt; &gt;&gt; =A0 =A0/usr/lib/racket/collects/drracket/drracket.rkt: [runni=
 ng body]<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; *** How to repeat:<br>
 &gt; &gt;&gt; Type drracket in the command line.<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt; *** Environment:<br>
 &gt; &gt;&gt; Linux x86_64 / Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/53=
 7.31 (KHTML,<br>
 &gt; &gt;&gt; like Gecko) Chrome/26.0.1410.63 Safari/537.31<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;&gt;<br>
 &gt; &gt;<br>
 </div></div></blockquote></div><br></div>
 </div></div></blockquote></div><br></div>
 </div></div></blockquote></div><br></div>
 
 --bcaec50163c38db9e604dc3ad4c3--
