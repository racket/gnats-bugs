From bugs+caf_=bugs=bugs.plt-scheme.org@plt-scheme.org Tue Feb 13 08:47:46 2007
Received: from ug-out-1314.google.com (ug-out-1314.google.com [66.249.92.168])
	by champlain.ccs.neu.edu (8.13.8/8.13.7) with ESMTP id l1DDljBL016060
	for <bugs@bugs.plt-scheme.org>; Tue, 13 Feb 2007 08:47:46 -0500
Message-Id: <200702131347.l1DDlc12016053@champlain.ccs.neu.edu>
Date: Tue, 13 Feb 2007 08:47:38 -0500
From: b.ghose@gnu.org
To: bugs@plt-scheme.org
Subject: DrScheme & MrEd segfault on Ubuntu Linux 6.10

>Number:         8525
>Category:       mred
>Synopsis:       DrScheme & MrEd segfault on Ubuntu Linux 6.10
>Class:          sw-bug
>Responsible:    mflatt
>Severity:       serious
>Priority:       medium
>State:          closed
>Confidential:   no
>Arrival-Date:   Tue Feb 13 08:50:01 -0500 2007
>Closed-Date:    Sun Mar 04 16:49:19 -0500 2007
>Last-Modified:  Sun Mar 04 16:49:19 -0500 2007
>Originator:     Baishampayan Ghose
>Organization:
plt
>Submitter-Id:   unknown
>Release:        360
>Environment:
linux-debian
>Description:
DrScheme and MrEd promptly segfault on launch here on my Ubuntu 6.10 machine (x86).
I tried both the Ubuntu packages, and then compiled release 360 from source. Both crash in similar ways --

ghoseb@trinka:~$ /opt/plt/bin/drscheme 
Warning: Unable to load any usable ISO8859 font
Segmentation fault (core dumped)
ghoseb@trinka:~$ 

I can attach a full strace if you want. I am clueless as to how I can debug it and get to the root of the cause. It used to work fine in the earlier Ubuntu version.
>How-To-Repeat:
Launch drscheme or mred from the terminal.
>Fix:
>Audit-Trail:
From: Matthew Flatt <mflatt@cs.utah.edu>
To: b.ghose@gnu.org, bugs@plt-scheme.org
Cc: 
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux 6.10
Date: Wed, 14 Feb 2007 11:10:03 +0800

 At Tue, 13 Feb 2007 08:50:01 -0500, b.ghose@gnu.org wrote:
 > ghoseb@trinka:~$ /opt/plt/bin/drscheme 
 > Warning: Unable to load any usable ISO8859 font
 > Segmentation fault (core dumped)
 > ghoseb@trinka:~$ 
 
 The "Warning" line isn't directly from DrScheme. It looks like there's
 some font-configuration issue, where DrScheme is asking for a font that
 can't be provided, and DrScheme can't survive without it.
 
 When you built your own version, was Xft support enabled (i.e., did
 `configure' report that it's using Xft)?
 
 Matthew
 
From: Baishampayan Ghose <b.ghose@gnu.org>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Wed, 14 Feb 2007 16:02:45 +0530

 -----BEGIN PGP SIGNED MESSAGE-----
 Hash: SHA1
 
 On Wednesday 14 February 2007 08:40 AM, Matthew Flatt cobbled together
 some glyphs to say:
 >> ghoseb@trinka:~$ /opt/plt/bin/drscheme 
 >> Warning: Unable to load any usable ISO8859 font
 >> Segmentation fault (core dumped)
 >> ghoseb@trinka:~$ 
 > 
 > The "Warning" line isn't directly from DrScheme. It looks like there's
 > some font-configuration issue, where DrScheme is asking for a font that
 > can't be provided, and DrScheme can't survive without it.
 > 
 > When you built your own version, was Xft support enabled (i.e., did
 > `configure' report that it's using Xft)?
 
 It seems Xft support was enabled just fine. I am attaching a complete
 configure log with this mail.
 
 - ---
 checking for gcc... gcc
 checking for C compiler default output file name... a.out
 checking whether the C compiler works... yes
 checking whether we are cross compiling... no
 checking for suffix of executables...
 checking for suffix of object files... o
 checking whether we are using the GNU C compiler... yes
 checking whether gcc accepts -g... yes
 checking for gcc option to accept ANSI C... none needed
 checking how to run the C preprocessor... gcc -E
 checking for g++... g++
 checking whether we are using the GNU C++ compiler... yes
 checking whether g++ accepts -g... yes
 checking how to run the C++ preprocessor... g++ -E
 checking for ranlib... ranlib
 checking for X... libraries , headers
 checking for gethostbyname... yes
 checking for connect... yes
 checking for remove... yes
 checking for shmat... yes
 checking for IceConnectionNumber in -lICE... yes
 checking for cos in -lm... yes
 checking for dlopen in -ldl... yes
 checking for inline keyword... yes
 checking for nl_langinfo (CODESET)... yes
 checking for getaddrinfo... yes
 checking for egrep... grep -E
 checking for ANSI C header files... yes
 checking for sys/types.h... yes
 checking for sys/stat.h... yes
 checking for stdlib.h... yes
 checking for string.h... yes
 checking for memory.h... yes
 checking for strings.h... yes
 checking for inttypes.h... yes
 checking for stdint.h... yes
 checking for unistd.h... yes
 checking iconv.h usability... yes
 checking iconv.h presence... yes
 checking for iconv.h... yes
 checking iconv is usable... yes
 checking for mbsrtowcs... yes
 checking for char... yes
 checking size of char... 1
 checking for short... yes
 checking size of short... 2
 checking for int... yes
 checking size of int... 4
 checking for long... yes
 checking size of long... 4
 checking for long long... yes
 checking size of long long... 8
 checking for stack direction... down
 checking whether byte ordering is bigendian... no
 checking whether C++ compiler works... yes
 checking whether new and new[] are different... yes
 checking whether need to use -fpermissive... no
 checking X11/Xlib.h usability... yes
 checking X11/Xlib.h presence... yes
 checking for X11/Xlib.h... yes
 checking X11/Intrinsic.h usability... yes
 checking X11/Intrinsic.h presence... yes
 checking for X11/Intrinsic.h... yes
 checking for XFlush in -lX11... yes
 checking for XSyncQueryExtension in -lXext... yes
 checking for XtDestroyWidget in -lXt... yes
 checking for XmuInternAtom in -lXmu... yes
 checking for vendorShellClassRec in -lXaw... yes
 checking whether X11/XKBlib.h is available... yes
 checking GL/glx.h usability... yes
 checking GL/glx.h presence... yes
 checking for GL/glx.h... yes
 checking for glXChooseVisual in -lGL... yes
 checking X11/extensions/Xrender.h usability... yes
 checking X11/extensions/Xrender.h presence... yes
 checking for X11/extensions/Xrender.h... yes
 checking for XRenderQueryExtension in -lXrender... yes
 Using pkg-config xft...
 Xft flags: -I/usr/include/freetype2
 Xft libs: -lXft -lfontconfig
 Using pkg-config for Cairo...
 Cairo flags: -I/usr/include/cairo
 Cairo libs: -lcairo
 checking for cairo_create in -lcairo... yes
 checking cairo-xlib.h usability... yes
 checking cairo-xlib.h presence... yes
 checking for cairo-xlib.h... yes
 checking png.h usability... yes
 checking png.h presence... yes
 checking for png.h... yes
 checking for png_read_info in -lpng... yes
 checking jpeglib.h usability... yes
 checking jpeglib.h presence... yes
 checking for jpeglib.h... yes
 checking for jpeg_start_decompress in -ljpeg... yes
 configure: creating ./config.status
 config.status: creating Makefile
 config.status: creating mzscheme/Makefile
 config.status: creating mzscheme/src/Makefile
 config.status: creating mzscheme/dynsrc/Makefile
 config.status: creating mzscheme/gc/Makefile
 config.status: creating mzscheme/sgc/Makefile
 config.status: creating mzscheme/gc2/Makefile
 config.status: creating foreign/Makefile
 config.status: creating mred/Makefile
 config.status: creating mred/wxs/Makefile
 config.status: creating mred/wxme/Makefile
 config.status: creating mred/gc2/Makefile
 config.status: creating wxcommon/libpng/Makefile
 config.status: creating wxcommon/zlib/Makefile
 config.status: creating wxxt/src/Makefile
 config.status: creating wxxt/src/x/Makefile
 config.status: creating wxxt/utils/image/src/Makefile
 config.status: creating wxxt/contrib/xpm/lib/Makefile
 config.status: creating mzscheme/mzconfig.h
 configure: configuring in foreign/gcc/libffi
 configure: running /bin/bash './configure' --prefix=/opt/plt
 '--prefix=/opt/plt' --disable-multilib --cache-file=/dev/null --srcdir=.
 checking build system type... i686-pc-linux-gnu
 checking host system type... i686-pc-linux-gnu
 checking target system type... i686-pc-linux-gnu
 checking for a BSD-compatible install... /usr/bin/install -c
 checking whether build environment is sane... yes
 checking for gawk... gawk
 checking whether make sets $(MAKE)... yes
 checking for gcc... gcc
 checking for C compiler default output file name... a.out
 checking whether the C compiler works... yes
 checking whether we are cross compiling... no
 checking for suffix of executables...
 checking for suffix of object files... o
 checking whether we are using the GNU C compiler... yes
 checking whether gcc accepts -g... yes
 checking for gcc option to accept ANSI C... none needed
 checking for style of include used by make... GNU
 checking dependency style of gcc... gcc3
 checking whether gcc and cc understand -c and -o together... yes
 checking for ld used by GCC... /usr/bin/ld
 checking if the linker (/usr/bin/ld) is GNU ld... yes
 checking for /usr/bin/ld option to reload object files... -r
 checking for BSD-compatible nm... /usr/bin/nm -B
 checking whether ln -s works... yes
 checking how to recognise dependant libraries... pass_all
 checking the maximum length of command line arguments... none
 checking for ranlib... ranlib
 checking for strip... strip
 checking whether -lc should be explicitly linked in... no
 checking for objdir... .libs
 checking for gcc option to produce PIC... -fPIC -DPIC
 checking if gcc PIC flag -fPIC -DPIC works... yes
 checking if gcc static flag -static works... yes
 finding the maximum length of command line arguments... 49153
 checking if gcc supports -c -o file.o... yes
 checking if gcc supports -fno-rtti -fno-exceptions ... no
 checking whether the linker (/usr/bin/ld) supports shared libraries... yes
 checking how to hardcode library paths into programs... immediate
 checking whether stripping libraries is possible... yes
 checking dynamic linker characteristics... GNU/Linux ld.so
 checking command to parse /usr/bin/nm -B output... ok
 checking if libtool supports shared libraries... yes
 checking whether to build shared libraries... yes
 checking whether to build static libraries... yes
 creating libtool
 updating cache /dev/null
 checking whether to enable maintainer-specific portions of Makefiles... no
 checking how to run the C preprocessor... gcc -E
 checking for egrep... grep -E
 checking for ANSI C header files... yes
 checking for sys/types.h... yes
 checking for sys/stat.h... yes
 checking for stdlib.h... yes
 checking for string.h... yes
 checking for memory.h... yes
 checking for strings.h... yes
 checking for inttypes.h... yes
 checking for stdint.h... yes
 checking for unistd.h... yes
 checking sys/mman.h usability... yes
 checking sys/mman.h presence... yes
 checking for sys/mman.h... yes
 checking for mmap... yes
 checking for sys/mman.h... (cached) yes
 checking for mmap... (cached) yes
 checking whether read-only mmap of a plain file works... yes
 checking whether mmap from /dev/zero works... yes
 checking for MAP_ANON(YMOUS)... yes
 checking whether mmap with MAP_ANON(YMOUS) works... yes
 checking for ANSI C header files... (cached) yes
 checking for memcpy... yes
 checking for working alloca.h... yes
 checking for alloca... yes
 checking for double... yes
 checking size of double... 8
 checking for long double... yes
 checking size of long double... 12
 checking whether byte ordering is bigendian... no
 checking whether .eh_frame section should be read-only... yes
 checking for __attribute__((visibility("hidden")))... yes
 configure: creating ./config.status
 config.status: creating include/Makefile
 config.status: creating include/ffi.h
 config.status: creating Makefile
 config.status: creating fficonfig.h
 config.status: linking ./src/x86/ffitarget.h to include/ffitarget.h
 config.status: executing default-1 commands
 config.status: executing depfiles commands
 config.status: executing include commands
 config.status: executing src commands
 >>> Installation targets:
  executables  : ${exec_prefix}/bin/...
  Scheme code  : ${exec_prefix}/lib/plt/collects/...
  core docs    : ${prefix}/share/plt/doc/...
  C libraries  : ${exec_prefix}/lib/...
  C headers    : ${prefix}/include/plt/...
  extra C objs : ${exec_prefix}/lib/plt/...
  man pages    : ${prefix}/man/...
   where prefix = /opt/plt
     and exec_prefix = ${prefix}
 
 - ---
 
 
 Regards,
 BG
 
 - --
 Baishampayan Ghose <b.ghose@gnu.org>
 The GNU Project
 http://www.gnu.org/
 
 1024D/86361B74
 BB2C E244 15AD 05C5 523A  90E7 4249 3494 8636 1B74
 
 -----BEGIN PGP SIGNATURE-----
 Version: GnuPG v1.4.3 (GNU/Linux)
 
 iD8DBQFF0uVNQkk0lIY2G3QRAvM3AJ4/YeCeZnFcR+6lDgN/MUHf3B+AXwCfZxFn
 Lv2w8Xppc7nzpAikoaJYRyU=
 =/GTK
 -----END PGP SIGNATURE-----
From: Matthew Flatt <mflatt@cs.utah.edu>
To: b.ghose@gnu.org
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Wed, 14 Feb 2007 20:33:10 +0800

 At Wed, 14 Feb 2007 16:02:45 +0530, Baishampayan Ghose wrote:
 > On Wednesday 14 February 2007 08:40 AM, Matthew Flatt cobbled together
 > some glyphs to say:
 > >> ghoseb@trinka:~$ /opt/plt/bin/drscheme 
 > >> Warning: Unable to load any usable ISO8859 font
 > >> Segmentation fault (core dumped)
 > >> ghoseb@trinka:~$ 
 > > 
 > > The "Warning" line isn't directly from DrScheme. It looks like there's
 > > some font-configuration issue, where DrScheme is asking for a font that
 > > can't be provided, and DrScheme can't survive without it.
 > > 
 > > When you built your own version, was Xft support enabled (i.e., did
 > > `configure' report that it's using Xft)?
 > 
 > It seems Xft support was enabled just fine. I am attaching a complete
 > configure log with this mail.
 
 I guess there's nothing unusual about your Xft/fontconfig
 configuration?
 
 I imagine that you could get a working DrScheme by configuring with
 --disable-xft. Even uf that works, though, I'd like to understand the
 Xft issue better.
 
 Thanks,
 Matthew
 
From: Baishampayan Ghose <b.ghose@gnu.org>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Wed, 14 Feb 2007 20:02:40 +0530

 -----BEGIN PGP SIGNED MESSAGE-----
 Hash: SHA1
 
 On Wednesday 14 February 2007 06:03 PM, Matthew Flatt cobbled together
 some glyphs to say:
 Matt,
 
 > I guess there's nothing unusual about your Xft/fontconfig 
 > configuration?
 
 Everything is normal. It used to work fine on Dapper. It started
 crashing with Edgy. Other Edgy users can run it just fine. Must be some
 breakage on my side.
 
 > I imagine that you could get a working DrScheme by configuring with 
 > --disable-xft. Even uf that works, though, I'd like to understand the
 >  Xft issue better.
 
 Well, that too didn't work :( Compiled without Xft and it still
 segfaults. So it's obviously not an Xft issue.
 
 Regards,
 BG
 
 - --
 Baishampayan Ghose <b.ghose@gnu.org>
 The GNU Project
 http://www.gnu.org/
 
 1024D/86361B74
 BB2C E244 15AD 05C5 523A  90E7 4249 3494 8636 1B74
 
 -----BEGIN PGP SIGNATURE-----
 Version: GnuPG v1.4.3 (GNU/Linux)
 
 iD8DBQFF0x2IQkk0lIY2G3QRAtm/AJ9G2hInKyWqFF1lUcFmfaddstctlQCfWnS2
 QVkUkDrtkSr+G1kXe5Wu8Dw=
 =1EzF
 -----END PGP SIGNATURE-----
From: Matthew Flatt <mflatt@cs.utah.edu>
To: b.ghose@gnu.org
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Thu, 15 Feb 2007 05:59:00 +0800

 At Wed, 14 Feb 2007 20:02:40 +0530, Baishampayan Ghose wrote:
 > > I imagine that you could get a working DrScheme by configuring with 
 > > --disable-xft. Even uf that works, though, I'd like to understand the
 > >  Xft issue better.
 > 
 > Well, that too didn't work :( Compiled without Xft and it still
 > segfaults. So it's obviously not an Xft issue.
 
 Ah - that's useful information.
 
 I suppose the next step is to get a stack trace. Can you run inside
 gdb, and then print a stack track when it crashes?:
 
  % gdb mred
  (gdb) run
  <crash>
  (gdb) where
 
 
 Thanks,
 Matthew
 
From: Baishampayan Ghose <b.ghose@gnu.org>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Thu, 15 Feb 2007 04:02:54 +0530

 -----BEGIN PGP SIGNED MESSAGE-----
 Hash: SHA1
 
 On Thursday 15 February 2007 03:29 AM, Matthew Flatt cobbled together
 some glyphs to say:
 Matthew,
 
 > I suppose the next step is to get a stack trace. Can you run inside
 > gdb, and then print a stack track when it crashes?:
 
 Many thanks for all your help. Here is the whole interaction with gdb --
 
 ghoseb@trinka:~$ gdb --quiet /opt/plt/bin/mred
 
 Using host libthread_db library "/lib/tls/i686/cmov/libthread_db.so.1".
 (gdb) r
 Starting program: /opt/plt/bin/mred
 [Thread debugging using libthread_db enabled]
 [New Thread -1214605648 (LWP 13991)]
 Warning: Unable to load any usable ISO8859 font
 
 Program received signal SIGSEGV, Segmentation fault.
 [Switching to Thread -1214605648 (LWP 13991)]
 0x082a1dd8 in initialize (request=0xbfdeea1c, self=0x85157b0,
 args=0xbfdee960, num_args=0xbfdee950) at ./XWidgets/xwSlider2.c:127
 127         values.font = ((XfwfSlider2Widget)self)->xfwfLabel.font->fid;
 Current language:  auto; currently c
 (gdb) bt
 #0  0x082a1dd8 in initialize (request=0xbfdeea1c, self=0x85157b0,
 args=0xbfdee960, num_args=0xbfdee950) at ./XWidgets/xwSlider2.c:127
 #1  0xb7f08202 in XtCvtStringToBoolean () from /usr/lib/libXt.so.6
 #2  0xb7f08c34 in _XtCreateHookObj () from /usr/lib/libXt.so.6
 #3  0xb7f094f7 in _XtCreateWidget () from /usr/lib/libXt.so.6
 #4  0xb7f36c35 in _XtVaAppInitialize () from /usr/lib/libXt.so.6
 #5  0xb7f36d2c in XtVaCreateManagedWidget () from /usr/lib/libXt.so.6
 #6  0x082a6458 in initialize (request=0xbfdef09c, self=0x8597ae8,
 args=0xbfdef020, num_args=0xbfdeefe0) at ./XWidgets/xwScrollbar.c:372
 #7  0xb7f08202 in XtCvtStringToBoolean () from /usr/lib/libXt.so.6
 #8  0xb7f081c2 in XtCvtStringToBoolean () from /usr/lib/libXt.so.6
 #9  0xb7f08c34 in _XtCreateHookObj () from /usr/lib/libXt.so.6
 #10 0xb7f094f7 in _XtCreateWidget () from /usr/lib/libXt.so.6
 #11 0xb7f36c35 in _XtVaAppInitialize () from /usr/lib/libXt.so.6
 #12 0xb7f36e10 in XtVaCreateWidget () from /usr/lib/libXt.so.6
 #13 0x082a3641 in initialize (request=0xbfdef6dc, self=0x8597228,
 args=0xbfdef610, num_args=0xbfdef600) at ./XWidgets/xwScrollWin.c:409
 #14 0xb7f08202 in XtCvtStringToBoolean () from /usr/lib/libXt.so.6
 #15 0xb7f08c34 in _XtCreateHookObj () from /usr/lib/libXt.so.6
 #16 0xb7f094f7 in _XtCreateWidget () from /usr/lib/libXt.so.6
 #17 0xb7f36c35 in _XtVaAppInitialize () from /usr/lib/libXt.so.6
 #18 0xb7f36d2c in XtVaCreateManagedWidget () from /usr/lib/libXt.so.6
 #19 0x0828028b in wxCanvas::Create (this=0x9164270, panel=0x904ced8,
 x=-1, y=-1, width=30, height=30, style=131200, name=0x8d01e44 "",
 gl_cfg=0x0)
     at ./Windows/Canvas.cc:108
 #20 0x082803bd in wxCanvas (this=0x9164270, parent=0x904ced8, x=-1,
 y=-1, width=30, height=30, style=131200, name=0x8d01e44 "", gl_cfg=0x0)
     at ./Windows/Canvas.cc:59
 #21 0x08248b45 in wxMediaCanvas (this=0x9164270, parent=0x904ced8, x=-1,
 y=-1, width=30, height=30, name=0x8d01e44 "", style=16777216,
 scrollsPP=100,
     m=0x0, gl_cfg=0x0) at ./wx_medad.cxx:182
 #22 0x081d0378 in os_wxMediaCanvas (this=0x9164270, x0=0x904ced8, x1=-1,
 x2=-1, x3=30, x4=30, x5=0x8d01e44 "", x6=16777216, x7=100, x8=0x0, x9=0x0)
     at ./wxs_madm.cxx:277
 #23 0x081d0af6 in os_wxMediaCanvas_ConstructScheme (n=10, p=0x92ab8a0)
 at ./wxs_madm.cxx:1454
 #24 0x080bdca2 in scheme_do_eval (obj=0x92ab8a0, num_rands=10,
 rands=0x92ab8a0, get_value=1) at ./eval.c:5801
 #25 0x0819ab6b in init_prim_obj (argc=10, argv=0x92ab8a0) at
 ./../../mzscheme/utils/xcglue.c:155
 #26 0x080bf0ab in _scheme_apply_multi_from_native (rator=0x8515a48,
 argc=139521044, argv=0x0) at ./schnapp.inc:24
 #27 0x08589d7e in ?? ()
 #28 0x08674390 in ?? ()
 #29 0x0000000a in ?? ()
 #30 0x092ab8a0 in ?? ()
 #31 0x0900361e in ?? ()
 #32 0x084e1840 in ?? ()
 #33 0x092ab8f0 in ?? ()
 #34 0x092ab950 in ?? ()
 - ---Type <return> to continue, or q <return> to quit---
 #35 0x00000009 in ?? ()
 #36 0x092ab8f0 in ?? ()
 #37 0xbfdeff10 in ?? ()
 #38 0x08589c32 in ?? ()
 #39 0x09112bb2 in ?? ()
 #40 0x080e9742 in scheme_box (v=0x9112bb2) at ./list.c:1295
 Previous frame inner to this frame (corrupt stack?)
 (gdb)
 
 
 Regards,
 BG
 
 - --
 Baishampayan Ghose <b.ghose@gnu.org>
 The GNU Project
 http://www.gnu.org/
 
 1024D/86361B74
 BB2C E244 15AD 05C5 523A  90E7 4249 3494 8636 1B74
 
 -----BEGIN PGP SIGNATURE-----
 Version: GnuPG v1.4.3 (GNU/Linux)
 
 iD8DBQFF044VQkk0lIY2G3QRAiX6AJ9GtMPKBkIWP8cXYIZbsmWiNW1ffgCfb+d7
 UUQPjPSmF3DoMJ0FXiOFIpU=
 =Vvwc
 -----END PGP SIGNATURE-----
From: Matthew Flatt <mflatt@cs.utah.edu>
To: b.ghose@gnu.org
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Thu, 15 Feb 2007 07:19:08 +0800

 At Thu, 15 Feb 2007 04:02:54 +0530, Baishampayan Ghose wrote:
 > Here is the whole interaction with gdb --
 
 Hm... maybe the problem is that Xft fonts work fine, and traditional
 X11 fonts don't work.
 
 The crash occurs in a place that is always trying to use a non-Xft
 font, even when Xft fonts are enabled at build time. (It doesn't
 actually use the font for anything, as it turns out.)
 
 I'll try setting up an environment where traditional X11 fonts are
 completely disabled, and I'll see what it takes to get everything to
 run correctly in that environment.
 
 Thanks,
 Matthew
 
From: Matthew Flatt <mflatt@cs.utah.edu>
To: b.ghose@gnu.org
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Mon, 26 Feb 2007 11:05:42 -0600

 I finally got around to making MrEd/DrScheme work when non-Xft fonts
 are unavailable. I had to make several small changes.
 
 The improved version is available via SVN, and it should become
 available here by Tuesday morning U.S. time:
 
    http://pre.plt-scheme.org/installers/
 
 If you get a chance to try the latest, I'll be interested to hear
 whether you're able to start DrScheme.
 
 Thanks,
 Matthew
 
From: Baishampayan Ghose <b.ghose@gnu.org>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Tue, 27 Feb 2007 00:43:36 +0530

 -----BEGIN PGP SIGNED MESSAGE-----
 Hash: SHA1
 
 On Monday 26 February 2007 10:35 PM, Matthew Flatt cobbled together some
 glyphs to say:
 Matt,
 
 > I finally got around to making MrEd/DrScheme work when non-Xft fonts
 > are unavailable. I had to make several small changes.
 > 
 > The improved version is available via SVN, and it should become
 > available here by Tuesday morning U.S. time:
 > 
 >    http://pre.plt-scheme.org/installers/
 > 
 > If you get a chance to try the latest, I'll be interested to hear
 > whether you're able to start DrScheme.
 
 I built everything from SVN and yahoo! it works :) Thanks a lot for
 fixing this very odd bug. Your help is very highly appreciated.
 Thanks again.
 
 Regards,
 BG
 
 - --
 Baishampayan Ghose <b.ghose@gnu.org>
 The GNU Project
 http://www.gnu.org/
 
 1024D/86361B74
 BB2C E244 15AD 05C5 523A  90E7 4249 3494 8636 1B74
 
 -----BEGIN PGP SIGNATURE-----
 Version: GnuPG v1.4.3 (GNU/Linux)
 
 iD8DBQFF4zFgQkk0lIY2G3QRArFmAJ46qD0vxHeYCNFi7SaYMxaftmp3NQCgm1MS
 y89uSmwBSV5LgkzBIscW8hY=
 =N7vW
 -----END PGP SIGNATURE-----
From: Baishampayan Ghose <b.ghose@gnu.org>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Tue, 27 Feb 2007 02:11:44 +0530

 -----BEGIN PGP SIGNED MESSAGE-----
 Hash: SHA1
 
 By the way, it still crashes when I try opening the Preferences window
 on DrScheme. Can you kindly look into the matter ?
 
 Thanks in advance.
 
 Regards,
 BG
 
 - --
 Baishampayan Ghose <b.ghose@gnu.org>
 The GNU Project
 http://www.gnu.org/
 
 1024D/86361B74
 BB2C E244 15AD 05C5 523A  90E7 4249 3494 8636 1B74
 
 -----BEGIN PGP SIGNATURE-----
 Version: GnuPG v1.4.3 (GNU/Linux)
 
 iD8DBQFF40YIQkk0lIY2G3QRAtY7AKCzvChZkaCSs0WekhhLpSG4t/2JqQCeLvcp
 8SORJImjaIbJjKNn+v4uWgA=
 =HNrG
 -----END PGP SIGNATURE-----
From: Matthew Flatt <mflatt@cs.utah.edu>
To: b.ghose@gnu.org
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Mon, 26 Feb 2007 15:40:29 -0600

 At Tue, 27 Feb 2007 02:11:44 +0530, Baishampayan Ghose wrote:
 > By the way, it still crashes when I try opening the Preferences window
 > on DrScheme. Can you kindly look into the matter ?
 
 I don't see that crash. Can you send me another stack trace?
 
 Now that the 3m variant of MrEd is the default, this may be slightly
 more tricky than before:
 
   cd <build-dir>/mred
   gdb mred3m
   (gdb) handle SIGSENV nostop noprint
   (gdb) run -mvqM drscheme
   ... crash ...
   (gdb) where
 
 Thanks,
 Matthew
 
From: Baishampayan Ghose <b.ghose@gnu.org>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Tue, 27 Feb 2007 13:04:03 +0530

 This is a multi-part message in MIME format.
 --------------000507030203040605030107
 Content-Type: text/plain; charset=UTF-8
 Content-Transfer-Encoding: 7bit
 
 -----BEGIN PGP SIGNED MESSAGE-----
 Hash: SHA1
 
 On Tuesday 27 February 2007 03:10 AM, Matthew Flatt cobbled together
 some glyphs to say:
 >> By the way, it still crashes when I try opening the Preferences window
 >> on DrScheme. Can you kindly look into the matter ?
 > 
 > I don't see that crash. Can you send me another stack trace?
 
 OK, it seems to choke when it tries to draw some radio buttons on the
 screen. It crashes when I select Language > Choose Language > Show
 Details too with a very similar back-trace.
 
 I am attaching the back-trace with this mail.
 
 Regards,
 BG
 
 - --
 Baishampayan Ghose <b.ghose@gnu.org>
 The GNU Project
 http://www.gnu.org/
 
 1024D/86361B74
 BB2C E244 15AD 05C5 523A  90E7 4249 3494 8636 1B74
 
 -----BEGIN PGP SIGNATURE-----
 Version: GnuPG v1.4.3 (GNU/Linux)
 
 iD8DBQFF497rQkk0lIY2G3QRAsr0AKCy5g2ahNNz+tRDz/D/VMGiCf0AiACcCpT8
 BnOE4nK670amFVgDhIT5KiY=
 =xG1e
 -----END PGP SIGNATURE-----
 
 --------------000507030203040605030107
 Content-Type: text/plain;
  name="trace2.txt"
 Content-Transfer-Encoding: base64
 Content-Disposition: inline;
  filename="trace2.txt"
 
 Z2hvc2ViQHRyaW5rYTp+L3NyYy9wbHQvc3JjL21yZWQkIGdkYiAtcSAuL21yZWQzbSAKCihn
 ZGIpIGhhbmRsZSBTSUdTRUdWIG5vc3RvcCBub3ByaW50ClNpZ25hbCAgICAgICAgU3RvcCAg
 ICAgIFByaW50ICAgUGFzcyB0byBwcm9ncmFtIERlc2NyaXB0aW9uClNJR1NFR1YgICAgICAg
 Tm8gICAgICAgIE5vICAgICAgWWVzICAgICAgICAgICAgIFNlZ21lbnRhdGlvbiBmYXVsdAoo
 Z2RiKSBydW4gLW12cU0gZHJzY2hlbWUKU3RhcnRpbmcgcHJvZ3JhbTogL2hvbWUvZ2hvc2Vi
 L3NyYy9wbHQvc3JjL21yZWQvbXJlZDNtIC1tdnFNIGRyc2NoZW1lCltUaHJlYWQgZGVidWdn
 aW5nIHVzaW5nIGxpYnRocmVhZF9kYiBlbmFibGVkXQpbTmV3IFRocmVhZCAtMTIxNTU2MDAx
 NiAoTFdQIDU0ODIpXQpXYXJuaW5nOiBVbmFibGUgdG8gbG9hZCBhbnkgdXNhYmxlIElTTzg4
 NTkgZm9udApTZWcgZmF1bHQgKGludGVybmFsIGVycm9yKSBhdCAweDQKClByb2dyYW0gcmVj
 ZWl2ZWQgc2lnbmFsIFNJR0FCUlQsIEFib3J0ZWQuCltTd2l0Y2hpbmcgdG8gVGhyZWFkIC0x
 MjE1NTYwMDE2IChMV1AgNTQ4MildCjB4ZmZmZmU0MTAgaW4gX19rZXJuZWxfdnN5c2NhbGwg
 KCkKKGdkYikgd2hlcmUKIzAgIDB4ZmZmZmU0MTAgaW4gX19rZXJuZWxfdnN5c2NhbGwgKCkK
 IzEgIDB4Yjc5YWM3NzAgaW4gcmFpc2UgKCkgZnJvbSAvbGliL3Rscy9pNjg2L2Ntb3YvbGli
 Yy5zby42CiMyICAweGI3OWFkZWYzIGluIGFib3J0ICgpIGZyb20gL2xpYi90bHMvaTY4Ni9j
 bW92L2xpYmMuc28uNgojMyAgMHgwODM0M2I0NSBpbiBmYXVsdF9oYW5kbGVyIChzbj0xMSwg
 c2k9MHhiZmU1YjZhYywgY3R4PTB4YmZlNWI3MmMpIGF0IC4vc2lnaGFuZC5jOjIwCiM0ICA8
 c2lnbmFsIGhhbmRsZXIgY2FsbGVkPgojNSAgMHgwODIxNTQ3NCBpbiBtYWtlX3RleHRnYyAo
 c2VsZj08dmFsdWUgb3B0aW1pemVkIG91dD4pIGF0IC4vWFdpZGdldHMveHdHcm91cC5jOjEw
 NgojNiAgMHgwODIxNTY0YSBpbiBpbml0aWFsaXplIChyZXF1ZXN0PTB4YmZlNWJiOTQsIHNl
 bGY9MHg4ZTJmYjE4LCBhcmdzPTB4YmZlNWJiMTAsIG51bV9hcmdzPTB4YmZlNWJhZjgpIGF0
 IC4vWFdpZGdldHMveHdHcm91cC5jOjM3MQojNyAgMHhiN2UxZjIwMiBpbiBYdEN2dFN0cmlu
 Z1RvQm9vbGVhbiAoKSBmcm9tIC91c3IvbGliL2xpYlh0LnNvLjYKIzggIDB4YjdlMWZjMzQg
 aW4gX1h0Q3JlYXRlSG9va09iaiAoKSBmcm9tIC91c3IvbGliL2xpYlh0LnNvLjYKIzkgIDB4
 YjdlMjA0ZjcgaW4gX1h0Q3JlYXRlV2lkZ2V0ICgpIGZyb20gL3Vzci9saWIvbGliWHQuc28u
 NgojMTAgMHhiN2U0ZGMzNSBpbiBfWHRWYUFwcEluaXRpYWxpemUgKCkgZnJvbSAvdXNyL2xp
 Yi9saWJYdC5zby42CiMxMSAweGI3ZTRkZDJjIGluIFh0VmFDcmVhdGVNYW5hZ2VkV2lkZ2V0
 ICgpIGZyb20gL3Vzci9saWIvbGliWHQuc28uNgojMTIgMHgwODIwYTg1ZCBpbiB3eFJhZGlv
 Qm94OjpDcmVhdGUgKHRoaXM9MHhiNmQ1ZjNjYywgcGFuZWw9MHhiNmQ0ZTkyMCwgZnVuYz0w
 eDgxY2MwNDAgPHd4UmFkaW9Cb3hDYWxsYmFja1RvU2NoZW1lPiwgCiAgICBsYWJlbD0weGI2
 ZDVmMzM4ICJQcm9maWxpbmcgQ29sb3IgU2NhbGUiLCB4PS0xLCB5PS0xLCB3aWR0aD0tMSwg
 aGVpZ2h0PS0xLCBuPTMsIGNob2ljZXM9MHhiNmQ1ZjM2NCwgbnVtX3Jvd3M9Mywgc3R5bGU9
 MCwgbmFtZT0weDgzNzdjMWIgInJhZGlvQm94IikKICAgIGF0IHhzcmMvUmFkaW9Cb3guY2M6
 MzczNAojMTMgMHgwODIwYWU4ZSBpbiB3eFJhZGlvQm94OjpnY0luaXRfd3hSYWRpb0JveCAo
 dGhpcz0weGI2ZDVmM2NjLCBwYW5lbD0weGI2ZDRlOTIwLCBmdW5jPTB4ODFjYzA0MCA8d3hS
 YWRpb0JveENhbGxiYWNrVG9TY2hlbWU+LCAKICAgIGxhYmVsPTB4YjZkNWYzMzggIlByb2Zp
 bGluZyBDb2xvciBTY2FsZSIsIHg9LTEsIHk9LTEsIHdpZHRoPS0xLCBoZWlnaHQ9LTEsIG49
 MywgY2hvaWNlcz0weGI2ZDVmMzY0LCBudW1fcm93cz0wLCBzdHlsZT00LCBfZm9udD0weDAs
 IAogICAgbmFtZT0weDgzNzdjMWIgInJhZGlvQm94IikgYXQgeHNyYy9SYWRpb0JveC5jYzoz
 NjUyCiMxNCAweDA4MWNkMjRmIGluIG9zX3d4UmFkaW9Cb3hfQ29uc3RydWN0U2NoZW1lIChu
 PTEyLCBwPTB4YjYwYTQ3MjApIGF0IHhzcmMvd3hzX3JhZG8uY2M6MzU5OAojMTUgMHgwODIz
 ODUyZSBpbiBzY2hlbWVfZG9fZXZhbCAob2JqPTB4Yjc0Mjk5ZjAsIG51bV9yYW5kcz0xMiwg
 cmFuZHM9MHhiNjBhNDcyMCwgZ2V0X3ZhbHVlPTEpIGF0IHhzcmMvZXZhbC5jOjcxMjkKIzE2
 IDB4MDgxMjZiNmIgaW4gaW5pdF9wcmltX29iaiAoYXJnYz0xMiwgYXJndj0weGI2MGE0NzIw
 KSBhdCB4c3JjL3hjZ2x1ZS5jOjEwOTAKIzE3IDB4MDgyMzk2NWIgaW4gX3NjaGVtZV9hcHBs
 eV9tdWx0aV9mcm9tX25hdGl2ZSAocmF0b3I9MHg4ZTJmYjE4LCBhcmdjPTAsIGFyZ3Y9MHgw
 KSBhdCB4c3JjL2V2YWwuYzo2NTE2CiMxOCAweDA4NWQ3NThlIGluID8/ICgpCiMxOSAweGI3
 NDEzNDcwIGluID8/ICgpCiMyMCAweDAwMDAwMDBjIGluID8/ICgpCiMyMSAweGI2MGE0NzIw
 IGluID8/ICgpCiMyMiAweDA4N2JmN2VlIGluID8/ICgpCiMyMyAweGIzMGIzN2QwIGluID8/
 ICgpCiMyNCAweGI2MGE0Nzc0IGluID8/ICgpCiMyNSAweGI2MGE0N2UwIGluID8/ICgpCiMy
 NiAweDAwMDAwMDBiIGluID8/ICgpCiMyNyAweGI2MGE0Nzc0IGluID8/ICgpCiMyOCAweGJm
 ZTVjNDU4IGluID8/ICgpCiMyOSAweDA4NWQ3NDQyIGluID8/ICgpCiMzMCAweDA4ODJlOWFh
 IGluID8/ICgpCiMzMSAweGJmZTVjNDU4IGluID8/ICgpCiMzMiAweGI2MGE0N2M4IGluID8/
 ICgpCiMzMyAweGI2MGE0ODE4IGluID8/ICgpCiMzNCAweGI2MzMwNGM0IGluID8/ICgpCiMz
 NSAweGI2MGE0N2M4IGluID8/ICgpCiMzNiAweGJmZTVjNDc4IGluID8/ICgpCiMzNyAweDA4
 NjkwNTYyIGluID8/ICgpCiMzOCAweDA4N2JmN2VlIGluID8/ICgpCiMzOSAweDAwMDAwMDBl
 IGluID8/ICgpCiM0MCAweGI2MGE0ODE4IGluID8/ICgpCiM0MSAweDAwMDAwMDBiIGluID8/
 ICgpCiM0MiAweGI2ZDVlZDU0IGluID8/ICgpCiM0MyAweDAwMDAwMDAxIGluID8/ICgpCiM0
 NCAweGJmZTVjNTU4IGluID8/ICgpCiM0NSAweDA4MjM4MTc0IGluIHNjaGVtZV9kb19ldmFs
 IChvYmo9MHg4ODJlOWFhLCBudW1fcmFuZHM9LTEwNzU0NjEwMzIsIHJhbmRzPTB4YjYwYTQ3
 YzgsIGdldF92YWx1ZT0tMTI0MDg0MDE2OCkgYXQgeHNyYy9ldmFsLmM6NzQwMApQcmV2aW91
 cyBmcmFtZSBpbm5lciB0byB0aGlzIGZyYW1lIChjb3JydXB0IHN0YWNrPykK
 --------------000507030203040605030107--
From: Baishampayan Ghose <b.ghose@gnu.org>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Tue, 27 Feb 2007 13:29:22 +0530

 -----BEGIN PGP SIGNED MESSAGE-----
 Hash: SHA1
 
 It seems the back-trace didn't get attached properly. I am sending it again.
 
 - --- BEGIN ---
 ghoseb@trinka:~/src/plt/src/mred$ gdb -q ./mred3m
 
 (gdb) handle SIGSEGV nostop noprint
 Signal        Stop      Print   Pass to program Description
 SIGSEGV       No        No      Yes             Segmentation fault
 (gdb) run -mvqM drscheme
 Starting program: /home/ghoseb/src/plt/src/mred/mred3m -mvqM drscheme
 [Thread debugging using libthread_db enabled]
 [New Thread -1215560016 (LWP 5482)]
 Warning: Unable to load any usable ISO8859 font
 Seg fault (internal error) at 0x4
 
 Program received signal SIGABRT, Aborted.
 [Switching to Thread -1215560016 (LWP 5482)]
 0xffffe410 in __kernel_vsyscall ()
 (gdb) where
 #0  0xffffe410 in __kernel_vsyscall ()
 #1  0xb79ac770 in raise () from /lib/tls/i686/cmov/libc.so.6
 #2  0xb79adef3 in abort () from /lib/tls/i686/cmov/libc.so.6
 #3  0x08343b45 in fault_handler (sn=11, si=0xbfe5b6ac, ctx=0xbfe5b72c)
 at ./sighand.c:20
 #4  <signal handler called>
 #5  0x08215474 in make_textgc (self=<value optimized out>) at
 ./XWidgets/xwGroup.c:106
 #6  0x0821564a in initialize (request=0xbfe5bb94, self=0x8e2fb18,
 args=0xbfe5bb10, num_args=0xbfe5baf8) at ./XWidgets/xwGroup.c:371
 #7  0xb7e1f202 in XtCvtStringToBoolean () from /usr/lib/libXt.so.6
 #8  0xb7e1fc34 in _XtCreateHookObj () from /usr/lib/libXt.so.6
 #9  0xb7e204f7 in _XtCreateWidget () from /usr/lib/libXt.so.6
 #10 0xb7e4dc35 in _XtVaAppInitialize () from /usr/lib/libXt.so.6
 #11 0xb7e4dd2c in XtVaCreateManagedWidget () from /usr/lib/libXt.so.6
 #12 0x0820a85d in wxRadioBox::Create (this=0xb6d5f3cc, panel=0xb6d4e920,
 func=0x81cc040 <wxRadioBoxCallbackToScheme>,
     label=0xb6d5f338 "Profiling Color Scale", x=-1, y=-1, width=-1,
 height=-1, n=3, choices=0xb6d5f364, num_rows=3, style=0, name=0x8377c1b
 "radioBox")
     at xsrc/RadioBox.cc:3734
 #13 0x0820ae8e in wxRadioBox::gcInit_wxRadioBox (this=0xb6d5f3cc,
 panel=0xb6d4e920, func=0x81cc040 <wxRadioBoxCallbackToScheme>,
     label=0xb6d5f338 "Profiling Color Scale", x=-1, y=-1, width=-1,
 height=-1, n=3, choices=0xb6d5f364, num_rows=0, style=4, _font=0x0,
     name=0x8377c1b "radioBox") at xsrc/RadioBox.cc:3652
 #14 0x081cd24f in os_wxRadioBox_ConstructScheme (n=12, p=0xb60a4720) at
 xsrc/wxs_rado.cc:3598
 #15 0x0823852e in scheme_do_eval (obj=0xb74299f0, num_rands=12,
 rands=0xb60a4720, get_value=1) at xsrc/eval.c:7129
 #16 0x08126b6b in init_prim_obj (argc=12, argv=0xb60a4720) at
 xsrc/xcglue.c:1090
 #17 0x0823965b in _scheme_apply_multi_from_native (rator=0x8e2fb18,
 argc=0, argv=0x0) at xsrc/eval.c:6516
 #18 0x085d758e in ?? ()
 #19 0xb7413470 in ?? ()
 #20 0x0000000c in ?? ()
 #21 0xb60a4720 in ?? ()
 #22 0x087bf7ee in ?? ()
 #23 0xb30b37d0 in ?? ()
 #24 0xb60a4774 in ?? ()
 #25 0xb60a47e0 in ?? ()
 #26 0x0000000b in ?? ()
 #27 0xb60a4774 in ?? ()
 #28 0xbfe5c458 in ?? ()
 #29 0x085d7442 in ?? ()
 #30 0x0882e9aa in ?? ()
 #31 0xbfe5c458 in ?? ()
 #32 0xb60a47c8 in ?? ()
 #33 0xb60a4818 in ?? ()
 #34 0xb63304c4 in ?? ()
 #35 0xb60a47c8 in ?? ()
 #36 0xbfe5c478 in ?? ()
 #37 0x08690562 in ?? ()
 #38 0x087bf7ee in ?? ()
 #39 0x0000000e in ?? ()
 #40 0xb60a4818 in ?? ()
 #41 0x0000000b in ?? ()
 #42 0xb6d5ed54 in ?? ()
 #43 0x00000001 in ?? ()
 #44 0xbfe5c558 in ?? ()
 #45 0x08238174 in scheme_do_eval (obj=0x882e9aa, num_rands=-1075461032,
 rands=0xb60a47c8, get_value=-1240840168) at xsrc/eval.c:7400
 Previous frame inner to this frame (corrupt stack?)
 - --- END ---
 
 Regards,
 BG
 
 - --
 Baishampayan Ghose <b.ghose@gnu.org>
 The GNU Project
 http://www.gnu.org/
 
 1024D/86361B74
 BB2C E244 15AD 05C5 523A  90E7 4249 3494 8636 1B74
 
 -----BEGIN PGP SIGNATURE-----
 Version: GnuPG v1.4.3 (GNU/Linux)
 
 iD8DBQFF4+TaQkk0lIY2G3QRAnjCAJ9wOtvDkfNO2vYzxBqi96YMKiuDFQCfYxbv
 I8s9W4MMVJAtz44sxjggJZ8=
 =SJ1h
 -----END PGP SIGNATURE-----
From: Matthew Flatt <mflatt@cs.utah.edu>
To: b.ghose@gnu.org
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Tue, 27 Feb 2007 22:50:01 -0600

 At Tue, 27 Feb 2007 13:04:03 +0530, Baishampayan Ghose wrote:
 > On Tuesday 27 February 2007 03:10 AM, Matthew Flatt cobbled together
 > some glyphs to say:
 > >> By the way, it still crashes when I try opening the Preferences window
 > >> on DrScheme. Can you kindly look into the matter ?
 > > 
 > > I don't see that crash. Can you send me another stack trace?
 > 
 > OK, it seems to choke when it tries to draw some radio buttons on the
 > screen. It crashes when I select Language > Choose Language > Show
 > Details too with a very similar back-trace.
 
 I'm puzzled that I can't reproduce the crash, but the backtrace you
 sent points to a clear problem. I think it's fixed with the latest
 changes in SVN.
 
 Thanks,
 Matthew
 
From: Baishampayan Ghose <b.ghose@gnu.org>
To: Matthew Flatt <mflatt@cs.utah.edu>, bugs@plt-scheme.org
Cc: 
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Thu, 01 Mar 2007 21:45:35 +0530

 -----BEGIN PGP SIGNED MESSAGE-----
 Hash: SHA1
 
 On Wednesday 28 February 2007 10:20 AM, Matthew Flatt cobbled together
 some glyphs to say:
 
 Matthew,
 
 > I'm puzzled that I can't reproduce the crash, but the backtrace you
 > sent points to a clear problem. I think it's fixed with the latest
 > changes in SVN.
 
 I built the source from the current SVN. The problem still persists, but
 the nature of the crash has changed considerably with the latest
 changes. GDB output is attached below.
 
 ghoseb@trinka:~/src/plt/src/mred$ gdb -q ./mred3m
 This GDB was configured as "i486-linux-gnu"...Using host libthread_db
 library "/lib/tls/i686/cmov/libthread_db.so.1".
 
 (gdb) handle SIGSEGV nostop noprint
 Signal        Stop      Print   Pass to program Description
 SIGSEGV       No        No      Yes             Segmentation fault
 (gdb) run -mvqM drscheme
 Starting program: /home/ghoseb/src/plt/src/mred/mred3m -mvqM drscheme
 [Thread debugging using libthread_db enabled]
 [New Thread -1215326544 (LWP 14388)]
 Warning: Unable to load any usable ISO8859 font
 libGL warning: 3D driver claims to not support visual 0x5b
 X Error of failed request:  BadFont (invalid Font parameter)
   Major opcode of failed request:  55 (X_CreateGC)
   Resource id in failed request:  0x3600850
   Serial number of failed request:  14415
   Current serial number in output stream:  14477
 
 Program exited with code 01.
 (gdb) where
 No stack.
 (gdb)
 
 Regards,
 BG
 
 - --
 Baishampayan Ghose <b.ghose@gnu.org>
 The GNU Project
 http://www.gnu.org/
 
 1024D/86361B74
 BB2C E244 15AD 05C5 523A  90E7 4249 3494 8636 1B74
 
 -----BEGIN PGP SIGNATURE-----
 Version: GnuPG v1.4.3 (GNU/Linux)
 
 iD8DBQFF5vwnQkk0lIY2G3QRAnS8AJ97+t2Wv3xZJA+L2v/nlWvrNtmAiACfVpeW
 2ygEH5m6QEbgVUd/JCcLIXY=
 =rldM
 -----END PGP SIGNATURE-----
From: Matthew Flatt <mflatt@cs.utah.edu>
To: b.ghose@gnu.org
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Thu, 1 Mar 2007 13:52:26 -0500

 At Thu, 01 Mar 2007 21:45:35 +0530, Baishampayan Ghose wrote:
 > I built the source from the current SVN. The problem still persists, but
 > the nature of the crash has changed considerably with the latest
 > changes.
 
 Yep, I got the fix wrong (which is a result of not being able to see
 the crash in the first place).
 
 The latest should take us a step closer, at least.
 
 Thanks,
 Matthew
 
From: Baishampayan Ghose <b.ghose@gnu.org>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Fri, 02 Mar 2007 01:12:52 +0530

 -----BEGIN PGP SIGNED MESSAGE-----
 Hash: SHA1
 
 On Friday 02 March 2007 12:22 AM, Matthew Flatt cobbled together some
 glyphs to say:
 
 Matthew,
 
 > Yep, I got the fix wrong (which is a result of not being able to see
 > the crash in the first place).
 > 
 > The latest should take us a step closer, at least.
 
 Many thanks for the fixes. The bugs are seemingly gone :) By the way, I
 don't get the red/white/blue logo on start-up any more. Instead a black
 and white lambda logo is shown.
 Is it because of some recent changes? Is there any way to get the old
 logo back?
 
 Regards,
 BG
 
 - --
 Baishampayan Ghose <b.ghose@gnu.org>
 The GNU Project
 http://www.gnu.org/
 
 1024D/86361B74
 BB2C E244 15AD 05C5 523A  90E7 4249 3494 8636 1B74
 
 -----BEGIN PGP SIGNATURE-----
 Version: GnuPG v1.4.3 (GNU/Linux)
 
 iD8DBQFF5yy8Qkk0lIY2G3QRArSrAKCTePELKAliGbl40nCtW95SzbgJNwCfc1i1
 HvK0DWMe9CUpA3ZZeHms6cQ=
 =K2bC
 -----END PGP SIGNATURE-----
From: Matthew Flatt <mflatt@cs.utah.edu>
To: b.ghose@gnu.org
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Thu, 1 Mar 2007 17:26:23 -0500

 At Fri, 02 Mar 2007 01:12:52 +0530, Baishampayan Ghose wrote:
 > By the way, I
 > don't get the red/white/blue logo on start-up any more. Instead a black
 > and white lambda logo is shown.
 > Is it because of some recent changes? Is there any way to get the old
 > logo back?
 
 What does `(get-display-depth)' produce (using the MrEd language)?
 
 My guess is that it will be less than 32, and that will be why the
 other logo is not used. It may also explain why I didn't see the last
 bug, because radio buttons are drawn a different way when fewer colors
 are available.
 
 If the result is not the right number, of course, that will merit
 further investigation.
 
 Thanks,
 Matthew
 
From: Baishampayan Ghose <b.ghose@gnu.org>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Fri, 02 Mar 2007 09:59:52 +0530

 -----BEGIN PGP SIGNED MESSAGE-----
 Hash: SHA1
 
 On Friday 02 March 2007 03:56 AM, Matthew Flatt cobbled together some
 glyphs to say:
 
 Matthew,
 
 > What does `(get-display-depth)' produce (using the MrEd language)?
 > 
 > My guess is that it will be less than 32, and that will be why the
 > other logo is not used. It may also explain why I didn't see the last
 > bug, because radio buttons are drawn a different way when fewer colors
 > are available.
 > 
 > If the result is not the right number, of course, that will merit
 > further investigation.
 
 The output is 24. Now to debug this problem :)
 
 Regards,
 BG
 
 - --
 Baishampayan Ghose <b.ghose@gnu.org>
 The GNU Project
 http://www.gnu.org/
 
 1024D/86361B74
 BB2C E244 15AD 05C5 523A  90E7 4249 3494 8636 1B74
 
 -----BEGIN PGP SIGNATURE-----
 Version: GnuPG v1.4.3 (GNU/Linux)
 
 iD8DBQFF56hAQkk0lIY2G3QRAsUWAJ9TUOPbYGjFIWyt7StvanACDgXFgACgt9nv
 5KCLiHEt96Jkojt2jU8Taxc=
 =KER3
 -----END PGP SIGNATURE-----
From: Matthew Flatt <mflatt@cs.utah.edu>
To: b.ghose@gnu.org
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Fri, 2 Mar 2007 08:48:37 -0500

 At Fri, 02 Mar 2007 01:12:52 +0530, Baishampayan Ghose wrote:
 > Many thanks for the fixes. The bugs are seemingly gone :) By the way, I
 > don't get the red/white/blue logo on start-up any more. Instead a black
 > and white lambda logo is shown.
 
 Now that it's March 2 in my current timezone, I see what you're seeing.
 Happy Texas Independence Day! The normal logo returns on March 3.
 
 Matthew
 
From: Baishampayan Ghose <b.ghose@gnu.org>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: bugs@plt-scheme.org
Subject: Re: [plt-bug] all/8525: DrScheme & MrEd segfault on Ubuntu Linux
 6.10
Date: Sat, 03 Mar 2007 03:15:03 +0530

 -----BEGIN PGP SIGNED MESSAGE-----
 Hash: SHA1
 
 On Friday 02 March 2007 07:18 PM, Matthew Flatt cobbled together some
 glyphs to say:
 
 Matthew,
 
 >> Many thanks for the fixes. The bugs are seemingly gone :) By the way, I
 >> don't get the red/white/blue logo on start-up any more. Instead a black
 >> and white lambda logo is shown.
 > 
 > Now that it's March 2 in my current timezone, I see what you're seeing.
 > Happy Texas Independence Day! The normal logo returns on March 3.
 
 Woah! Great Easter egg, that :)
 In any case, Happy Texas Independence Day to you too and thanks a lot
 for all the support.
 
 Regards,
 BG
 
 - --
 Baishampayan Ghose <b.ghose@gnu.org>
 The GNU Project
 http://www.gnu.org/
 
 1024D/86361B74
 BB2C E244 15AD 05C5 523A  90E7 4249 3494 8636 1B74
 
 -----BEGIN PGP SIGNATURE-----
 Version: GnuPG v1.4.3 (GNU/Linux)
 
 iD8DBQFF6JreQkk0lIY2G3QRAnGhAKC9xKM4GivTRKb3NYuoOCk9Gf/fgACdE5zg
 8JTY/HM6Wg+OsyY3GnyZi2I=
 =qF9x
 -----END PGP SIGNATURE-----

State changed from "open" to "closed" by mflatt at Sun, 04 Mar 2007 16:49:19 -0500
Reason>>> MrEd did not gracefully handle the situation where
traditional X11 fonts are unavailable, even though MrEd
draws all text with Xft-based fonts (when Xft is enabled,
etc.). Thanks to Baishampayan Ghose's patient help, we
were able to track down teh problem spots and fix them.

