From bugs+caf_=bugs=bugs.plt-scheme.org@plt-scheme.org Fri Feb 11 17:32:26 2011
Received: from mail-fx0-f44.google.com (mail-fx0-f44.google.com [209.85.161.44])
	by champlain.ccs.neu.edu (8.14.4/8.14.4) with ESMTP id p1BMWNBU028083
	for <bugs@bugs.plt-scheme.org>; Fri, 11 Feb 2011 17:32:23 -0500
Message-Id: <201102112232.p1BMWJFQ028078@champlain.ccs.neu.edu>
Date: Fri, 11 Feb 2011 17:32:19 -0500
From: matthias@ccs.neu.edu
To: bugs@racket-lang.org
Subject: keyboard shortcuts for switching languages don't work 

>Number:         11729
>Category:       drscheme
>Synopsis:       keyboard shortcuts for switching languages don't work
>Class:          sw-bug
>Responsible:    mflatt
>Severity:       serious
>Priority:       medium
>State:          closed
>Confidential:   no
>Arrival-Date:   Fri Feb 11 17:36:01 -0500 2011
>Closed-Date:    Sun Nov 27 13:58:55 -0500 2011
>Last-Modified:  Sun Nov 27 13:58:55 -0500 2011
>Originator:     matthias
>Organization:
plt
>Submitter-Id:   unknown
>Release:        5.1
>Environment:
macosx "Darwin antarctica.ccs.neu.edu 10.6.0 Darwin Kernel Version 10.6.0: Wed Nov 10 18:13:17 PST 2010; root:xnu-1504.9.26~3/RELEASE_I386 i386 i386" (i386-macosx/3m) (get-display-depth) = 32
Human Language: english
(current-memory-use) 183850720

Collections:
("/Users/matthias/Unison/collects/"
 (non-existent-path))
("/Users/matthias/Library/Racket/5.1/collects"
 (non-existent-path))
("/Users/matthias/Desktop/Racket v5.1/collects"
 ("2htdp" "algol60" "at-exp" "browser" "combinator-parser" "compiler" "config" "data" "datalog" "defaults" "deinprogramm" "drracket" "drscheme" "dynext" "embedded-gui" "eopl" "errortrace" "ffi" "file" "framework" "frtime" "games" "graphics" "gui-debugger" "help" "hierlist" "htdp" "html" "icons" "info-domain" "lang" "launcher" "lazy" "macro-debugger" "make" "mred" "mrlib" "mysterx" "mzcom" "mzlib" "mzscheme" "net" "openssl" "parser-tools" "picturing-programs" "plai" "planet" "plot" "preprocessor" "profile" "r5rs" "r6rs" "racket" "racklog" "rackunit" "raco" "reader" "readline" "redex" "rnrs" "s-exp" "scheme" "schemeunit" "scribble" "scribblings" "scriblib" "setup" "sgl" "slatex" "slideshow" "srfi" "stepper" "string-constants" "swindle" "syntax" "syntax-color" "teachpack" "test-box-recovery" "test-engine" "tex2page" "texpict" "trace" "typed" "typed-scheme" "unstable" "version" "web-server" "wxme" "xml"))

Computer Language: (("Teaching Languages" "How to Design Programs" "Intermediate Student") (#(#t constructor repeating-decimal #f #t none) #f ()))
>Description:
The keyboard shortcuts for switching languages in the
language choice dialog no longer work (that is, cmd u
and cmd c don't have a visible effect). 
>How-To-Repeat:
>Fix:
>Audit-Trail:
From: Robby Findler <robby@eecs.northwestern.edu>
To: matthias@ccs.neu.edu, bugs@racket-lang.org
Cc: nobody@racket-lang.org, bug-notification@racket-lang.org
Subject: Re: [racket-bug] all/11729: keyboard shortcuts for switching
 languages don't work
Date: Fri, 11 Feb 2011 19:10:32 -0600

 I'm seeing slightly different effect: they "work" in that they select
 the right thing, but the radio buttons don't draw differently.
 
 Robby
 
 On Fri, Feb 11, 2011 at 4:36 PM,  <matthias@ccs.neu.edu> wrote:
 > A new problem report is waiting at
 >  http://bugs.racket-lang.org/query/?cmd=view&pr=11729
 >
 > Reported by matthias for release: 5.1
 >
 > *** Description:
 > The keyboard shortcuts for switching languages in the
 > language choice dialog no longer work (that is, cmd u
 > and cmd c don't have a visible effect).
 >
 > *** How to repeat:
 >
 >
 > *** Environment:
 > macosx "Darwin antarctica.ccs.neu.edu 10.6.0 Darwin Kernel Version 10.6.0: Wed Nov 10 18:13:17 PST 2010; root:xnu-1504.9.26~3/RELEASE_I386 i386 i386" (i386-macosx/3m) (get-display-depth) = 32
 > Human Language: english
 > (current-memory-use) 183850720
 >
 > Collections:
 > ("/Users/matthias/Unison/collects/"
 >  (non-existent-path))
 > ("/Users/matthias/Library/Racket/5.1/collects"
 >  (non-existent-path))
 > ("/Users/matthias/Desktop/Racket v5.1/collects"
 >  ("2htdp" "algol60" "at-exp" "browser" "combinator-parser" "compiler" "config" "data" "datalog" "defaults" "deinprogramm" "drracket" "drscheme" "dynext" "embedded-gui" "eopl" "errortrace" "ffi" "file" "framework" "frtime" "games" "graphics" "gui-debugger" "help" "hierlist" "htdp" "html" "icons" "info-domain" "lang" "launcher" "lazy" "macro-debugger" "make" "mred" "mrlib" "mysterx" "mzcom" "mzlib" "mzscheme" "net" "openssl" "parser-tools" "picturing-programs" "plai" "planet" "plot" "preprocessor" "profile" "r5rs" "r6rs" "racket" "racklog" "rackunit" "raco" "reader" "readline" "redex" "rnrs" "s-exp" "scheme" "schemeunit" "scribble" "scribblings" "scriblib" "setup" "sgl" "slatex" "slideshow" "srfi" "stepper" "string-constants" "swindle" "syntax" "syntax-color" "teachpack" "test-box-recovery" "test-engine" "tex2page" "texpict" "trace" "typed" "typed-scheme" "unstable" "version" "web-server" "wxme" "xml"))
 >
 > Computer Language: (("Teaching Languages" "How to Design Programs" "Intermediate Student") (#(#t constructor repeating-decimal #f #t none) #f ()))
 >
 >
 
From: Robby Findler <robby@eecs.northwestern.edu>
To: matthias@ccs.neu.edu, bugs@racket-lang.org
Cc: nobody@racket-lang.org, bug-notification@racket-lang.org
Subject: Re: [racket-bug] all/11729: keyboard shortcuts for switching
 languages don't work
Date: Fri, 11 Feb 2011 19:12:37 -0600

 Interestingly, they work in a recent trunk version.
 
 Robby
 
 On Fri, Feb 11, 2011 at 7:10 PM, Robby Findler
 <robby@eecs.northwestern.edu> wrote:
 > I'm seeing slightly different effect: they "work" in that they select
 > the right thing, but the radio buttons don't draw differently.
 >
 > Robby
 >
 > On Fri, Feb 11, 2011 at 4:36 PM,  <matthias@ccs.neu.edu> wrote:
 >> A new problem report is waiting at
 >>  http://bugs.racket-lang.org/query/?cmd=view&pr=11729
 >>
 >> Reported by matthias for release: 5.1
 >>
 >> *** Description:
 >> The keyboard shortcuts for switching languages in the
 >> language choice dialog no longer work (that is, cmd u
 >> and cmd c don't have a visible effect).
 >>
 >> *** How to repeat:
 >>
 >>
 >> *** Environment:
 >> macosx "Darwin antarctica.ccs.neu.edu 10.6.0 Darwin Kernel Version 10.6.0: Wed Nov 10 18:13:17 PST 2010; root:xnu-1504.9.26~3/RELEASE_I386 i386 i386" (i386-macosx/3m) (get-display-depth) = 32
 >> Human Language: english
 >> (current-memory-use) 183850720
 >>
 >> Collections:
 >> ("/Users/matthias/Unison/collects/"
 >>  (non-existent-path))
 >> ("/Users/matthias/Library/Racket/5.1/collects"
 >>  (non-existent-path))
 >> ("/Users/matthias/Desktop/Racket v5.1/collects"
 >>  ("2htdp" "algol60" "at-exp" "browser" "combinator-parser" "compiler" "config" "data" "datalog" "defaults" "deinprogramm" "drracket" "drscheme" "dynext" "embedded-gui" "eopl" "errortrace" "ffi" "file" "framework" "frtime" "games" "graphics" "gui-debugger" "help" "hierlist" "htdp" "html" "icons" "info-domain" "lang" "launcher" "lazy" "macro-debugger" "make" "mred" "mrlib" "mysterx" "mzcom" "mzlib" "mzscheme" "net" "openssl" "parser-tools" "picturing-programs" "plai" "planet" "plot" "preprocessor" "profile" "r5rs" "r6rs" "racket" "racklog" "rackunit" "raco" "reader" "readline" "redex" "rnrs" "s-exp" "scheme" "schemeunit" "scribble" "scribblings" "scriblib" "setup" "sgl" "slatex" "slideshow" "srfi" "stepper" "string-constants" "swindle" "syntax" "syntax-color" "teachpack" "test-box-recovery" "test-engine" "tex2page" "texpict" "trace" "typed" "typed-scheme" "unstable" "version" "web-server" "wxme" "xml"))
 >>
 >> Computer Language: (("Teaching Languages" "How to Design Programs" "Intermediate Student") (#(#t constructor repeating-decimal #f #t none) #f ()))
 >>
 >>
 >
 

Responsible changed from "robby" to "mflatt" by robby at Fri, 11 Feb 2011 20:22:15 -0500
Reason>>> mrf

From: Robby Findler <robby@eecs.northwestern.edu>
To: matthias@ccs.neu.edu, bugs@racket-lang.org
Cc: nobody@racket-lang.org, bug-notification@racket-lang.org
Subject: Re: [racket-bug] all/11729: keyboard shortcuts for switching
 languages don't work
Date: Fri, 11 Feb 2011 19:22:00 -0600

 The following code works (in the sense that cmd-u and cmd-c (on a mac)
 do the right thing) under the trunk, but not on the 5.1 release
 candidate.
 
 #lang racket/gui
 
 
 (define (mouse-event-uses-shortcut-prefix? evt)
   (andmap (λ (prefix)
             (case prefix
               [(alt) (case (system-type)
                        [(windows) (send evt get-meta-down)]
                        [else (send evt get-alt-down)])]
               [(cmd) (send evt get-meta-down)]
               [(meta) (send evt get-meta-down)]
               [(ctl) (send evt get-control-down)]
               [(shift) (send evt get-shiftdown)]
               [(option) (send evt get-alt-down)]))
           (get-default-shortcut-prefix)))
 
 (define f (new (class frame%
                  (define/override (on-subwindow-char receiver evt)
                    (case (send evt get-key-code)
                      [(#\u)
                       (if (mouse-event-uses-shortcut-prefix? evt)
                           (begin (send rb1 set-selection #f)
                                  (send rb2 set-selection 0)
                                  #t)
                           #f)]
                      [(#\c)
                       (if (mouse-event-uses-shortcut-prefix? evt)
                           (begin (send rb2 set-selection #f)
                                  (send rb1 set-selection 0)
                                  #t)
                           #f)]
                      [else #f]))
                  (super-new [label ""]))))
 (define rb1 (new radio-box% [parent f] [choices '("<menukey>-c")] [label #f]))
 (define rb2 (new radio-box% [parent f] [choices '("<menukey>-u")] [label #f]))
 (send rb1 set-selection #f)
 (send f show #t)
 
From: Matthew Flatt <mflatt@cs.utah.edu>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: matthias@ccs.neu.edu, bugs@racket-lang.org, nobody@racket-lang.org,
        bug-notification@racket-lang.org
Subject: Re: [racket-bug] all/11729: keyboard shortcuts for switching
 languages don't work
Date: Fri, 11 Feb 2011 20:02:32 -0700

 I expect that the difference is commit
 e1303dc4006951d7c9e1ebee31d0f5a76ab3c40e.
 
 At Fri, 11 Feb 2011 19:22:00 -0600, Robby Findler wrote:
 > The following code works (in the sense that cmd-u and cmd-c (on a mac)
 > do the right thing) under the trunk, but not on the 5.1 release
 > candidate.
 > 
 > #lang racket/gui
 > 
 > 
 > (define (mouse-event-uses-shortcut-prefix? evt)
 >   (andmap (λ (prefix)
 >             (case prefix
 >               [(alt) (case (system-type)
 >                        [(windows) (send evt get-meta-down)]
 >                        [else (send evt get-alt-down)])]
 >               [(cmd) (send evt get-meta-down)]
 >               [(meta) (send evt get-meta-down)]
 >               [(ctl) (send evt get-control-down)]
 >               [(shift) (send evt get-shiftdown)]
 >               [(option) (send evt get-alt-down)]))
 >           (get-default-shortcut-prefix)))
 > 
 > (define f (new (class frame%
 >                  (define/override (on-subwindow-char receiver evt)
 >                    (case (send evt get-key-code)
 >                      [(#\u)
 >                       (if (mouse-event-uses-shortcut-prefix? evt)
 >                           (begin (send rb1 set-selection #f)
 >                                  (send rb2 set-selection 0)
 >                                  #t)
 >                           #f)]
 >                      [(#\c)
 >                       (if (mouse-event-uses-shortcut-prefix? evt)
 >                           (begin (send rb2 set-selection #f)
 >                                  (send rb1 set-selection 0)
 >                                  #t)
 >                           #f)]
 >                      [else #f]))
 >                  (super-new [label ""]))))
 > (define rb1 (new radio-box% [parent f] [choices '("<menukey>-c")] [label #f]))
 > (define rb2 (new radio-box% [parent f] [choices '("<menukey>-u")] [label #f]))
 > (send rb1 set-selection #f)
 > (send f show #t)
 
From: Robby Findler <robby@eecs.northwestern.edu>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: matthias@ccs.neu.edu, bugs@racket-lang.org, nobody@racket-lang.org,
        bug-notification@racket-lang.org
Subject: Re: [racket-bug] all/11729: keyboard shortcuts for switching
 languages don't work
Date: Fri, 11 Feb 2011 21:31:46 -0600

 I don't recall them not working before Feb 4th, tho. Were they always
 just not working and I didn't notice because I was using Windows at
 the time?
 
 Robby
 
 On Fri, Feb 11, 2011 at 9:02 PM, Matthew Flatt <mflatt@cs.utah.edu> wrote:
 > I expect that the difference is commit
 > e1303dc4006951d7c9e1ebee31d0f5a76ab3c40e.
 >
 > At Fri, 11 Feb 2011 19:22:00 -0600, Robby Findler wrote:
 >> The following code works (in the sense that cmd-u and cmd-c (on a mac)
 >> do the right thing) under the trunk, but not on the 5.1 release
 >> candidate.
 >>
 >> #lang racket/gui
 >>
 >>
 >> (define (mouse-event-uses-shortcut-prefix? evt)
 >>   (andmap (λ (prefix)
 >>             (case prefix
 >>               [(alt) (case (system-type)
 >>                        [(windows) (send evt get-meta-down)]
 >>                        [else (send evt get-alt-down)])]
 >>               [(cmd) (send evt get-meta-down)]
 >>               [(meta) (send evt get-meta-down)]
 >>               [(ctl) (send evt get-control-down)]
 >>               [(shift) (send evt get-shiftdown)]
 >>               [(option) (send evt get-alt-down)]))
 >>           (get-default-shortcut-prefix)))
 >>
 >> (define f (new (class frame%
 >>                  (define/override (on-subwindow-char receiver evt)
 >>                    (case (send evt get-key-code)
 >>                      [(#\u)
 >>                       (if (mouse-event-uses-shortcut-prefix? evt)
 >>                           (begin (send rb1 set-selection #f)
 >>                                  (send rb2 set-selection 0)
 >>                                  #t)
 >>                           #f)]
 >>                      [(#\c)
 >>                       (if (mouse-event-uses-shortcut-prefix? evt)
 >>                           (begin (send rb2 set-selection #f)
 >>                                  (send rb1 set-selection 0)
 >>                                  #t)
 >>                           #f)]
 >>                      [else #f]))
 >>                  (super-new [label ""]))))
 >> (define rb1 (new radio-box% [parent f] [choices '("<menukey>-c")] [label #f]))
 >> (define rb2 (new radio-box% [parent f] [choices '("<menukey>-u")] [label #f]))
 >> (send rb1 set-selection #f)
 >> (send f show #t)
 >
 

State changed from "open" to "closed" by mflatt at Sun, 27 Nov 2011 13:58:55 -0500
Reason>>> fixed

