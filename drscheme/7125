From jensaxel@soegaard.net Fri Nov 26 15:51:18 2004
Received: from localhost (0x503e5363.hrnxx3.adsl-dhcp.tele.dk [80.62.83.99])
	by champlain.ccs.neu.edu (8.12.10/8.12.10) with ESMTP id iAQKpGnA007306
	for <bugs>; Fri, 26 Nov 2004 15:51:17 -0500
Message-Id: <200411262051.iAQKpGnA007306@champlain.ccs.neu.edu>
Date: Fri, 26 Nov 2004 15:51:16 -0500
From: Jens Axel Søgaard <jensaxel@soegaard.net>
To: bugs@plt-scheme.org
Subject: Danish characters show up as question marks in DrScheme

>Number:         7125
>Category:       drscheme
>Synopsis:       Danish characters show up as question marks in DrScheme
>Class:          sw-bug
>Responsible:    robby
>Severity:       serious
>Priority:       medium
>State:          closed
>Confidential:   no
>Arrival-Date:   Fri Nov 26 15:55:01 -0500 2004
>Last-Modified:  Sat Feb 05 18:10:00 -0500 2005
>Originator:     Jens Axel Søgaard
>Organization:
titan
>Submitter-Id:   unknown
>Release:        299.22-cvs25nov2004
>Environment:
windows "Windows NT 5.1 (Build 2600) Service Pack 2" (win32\i386) (get-display-depth) = 16
Docs Installed:
(#<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\web-server> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\tour> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\tools> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\tex2page> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\teachpack> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\t-y-scheme> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\swindle> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\srfi> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\r5rs> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\profj-intermediate> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\profj-beginner> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\profj-advanced> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\plot> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\mzscheme> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\mzlib> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\mzc> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\mred> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\misclib> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\intermediate-lambda> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\intermediate> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\insidemz> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\help> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\framework> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\foreign> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\drscheme> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\beginning-abbr> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\beginning> #<path:C:\Programmer\PLT-FULLCVS-299.22\collects\doc\advanced>)
Collections: 
((#<path:C:\Documents and Settings\js\Application Data\PLT Scheme\299.22\collects> "non-existent path") (#<path:C:\Programmer\PLT-FULLCVS-299.22\collects> (#<path:afm> #<path:algol60> #<path:browser> #<path:compiler> #<path:cvs-time-stamp> #<path:defaults> #<path:doc> #<path:drscheme> #<path:dynext> #<path:embedded-gui> #<path:eopl> #<path:errortrace> #<path:ffi> #<path:finish-install> #<path:framework> #<path:frtime> #<path:games> #<path:graphics> #<path:guibuilder> #<path:handin-client> #<path:handin-server> #<path:help> #<path:hierlist> #<path:htdp> #<path:html> #<path:icons> #<path:info-domain> #<path:lang> #<path:launcher> #<path:make> #<path:mrdemo> #<path:mred> #<path:mrlib> #<path:mysterx> #<path:mzcom> #<path:mzlib> #<path:mzscheme> #<path:net> #<path:openssl> #<path:parser-tools> #<path:plot> #<path:preprocessor> #<path:profj> #<path:profjBoxes> #<path:readline> #<path:reduction-semantics> #<path:setup> #<path:sgl> #<path:sirmail> #<path:slatex> #<path:slibinit> #<path:slideshow> #<path:srfi> #<path:srpersist> #<path:ssax> #<path:stepper> #<path:string-constants> #<path:swindle> #<path:syntax> #<path:syntax-color> #<path:test-suite> #<path:tests> #<path:tex2page> #<path:texpict> #<path:trace> #<path:version> #<path:waterworld> #<path:web-server> #<path:xelda> #<path:xml>)))
 
Human Language: danish
 
Teachpack filenames: ()
Computer Language: (("Professionelle sprog" "PLT" "Temmelig omfattende Scheme (inklusiv MrEd og Avanceret)") #6(#t write mixed-fraction-e #f #t debug))
>Description:
The Danish characters show up as questions marks 
in DrScheme.

Note: 
  Opening collects/string-constants/danish-string-constants.scm
  in DrScheme shows the question marks.

  Opening the same file en Emacs shows the proper danish characters.



>How-To-Repeat:
1. Chose (human) language Danish.
2. Watch the menus.


>Fix:
>Audit-Trail:
From: Matthew Flatt <mflatt@cs.utah.edu>
To: Jens Axel =?ISO-8859-1?Q?S=C3=B8gaard?= <jensaxel@soegaard.net>
Cc: bugs@plt-scheme.org, robby@cs.uchicago.edu
Subject: Re: all/7125: Danish characters show up as question marks in DrScheme
Date: Fri, 26 Nov 2004 14:02:37 -0700

 At Fri, 26 Nov 2004 15:55:02 -0500, Jens Axel Søgaard wrote:
 > The Danish characters show up as questions marks 
 > in DrScheme.
 > 
 > Note: 
 >   Opening collects/string-constants/danish-string-constants.scm
 >   in DrScheme shows the question marks.
 > 
 >   Opening the same file en Emacs shows the proper danish characters.
 
 v299 needs the file to be encoded with UTF-8. (It looks like Latin-1.)
 
 Thanks,
 Matthew
 
From: Robby Findler <robby@cs.uchicago.edu>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: Jens Axel =?ISO-8859-1?Q?S=C3=B8gaard?= <jensaxel@soegaard.net>,
        bugs@plt-scheme.org
Subject: Re: all/7125: Danish characters show up as question marks in DrScheme
Date: Fri, 26 Nov 2004 15:59:54 -0600

 Looking over the cvs log, it seems that maybe revision 1.24 is the one
 that changed it from utf-8 to Latin-1? That was my commit, but I'm not
 sure how it happened.
 
 Robby
 
 At Fri, 26 Nov 2004 14:02:37 -0700, Matthew Flatt wrote:
 > At Fri, 26 Nov 2004 15:55:02 -0500, Jens Axel Søgaard wrote:
 > > The Danish characters show up as questions marks 
 > > in DrScheme.
 > > 
 > > Note: 
 > >   Opening collects/string-constants/danish-string-constants.scm
 > >   in DrScheme shows the question marks.
 > > 
 > >   Opening the same file en Emacs shows the proper danish characters.
 > 
 > v299 needs the file to be encoded with UTF-8. (It looks like Latin-1.)
 > 
 > Thanks,
 > Matthew

Responsible changed from "nobody" to "robby" by eli at Fri, 21 Jan 2005 23:11:16 -0500
Reason>>> drscheme (Robby, it seems like you're the one who handles 
these files).
I fixed this thing, and it seems like almost everything is 
fine, but I saw that the "Edit" menu appears on the left 
of the "File" menu.  I don't suppose that this is some 
feature of Danish applications...  In any case, I'm 
leaving it open for this to be fixed.  (Maybe it's better 
to close and open a new bug?)

From: Robby Findler <robby@cs.uchicago.edu>
To: bugs@plt-scheme.org
Cc: nobody@plt-scheme.org, eli@plt-scheme.org,
        Jens Axel SXXgaard <jensaxel@soegaard.net>
Subject: Re: drscheme/7125 Danish characters show up as question marks in DrScheme
Date: Fri, 21 Jan 2005 23:05:52 -0600

 At Fri, 21 Jan 2005 23:11:17 -0500, eli@plt-scheme.org wrote:
 > 
 > I fixed this thing, and it seems like almost everything is 
 > fine, but I saw that the "Edit" menu appears on the left 
 > of the "File" menu.  I don't suppose that this is some 
 > feature of Danish applications...  In any case, I'm 
 > leaving it open for this to be fixed.  (Maybe it's better 
 > to close and open a new bug?)
 
 There was a bug in the danish-string-constants.ss file. The file-menu
 string constant and the file-menu-label string-constant have to match
 up (the first has to be the same as the second, but without the &
 annotations).
 
 I've fixed it. Thanks for spotting it!
 
 Robby
From: Eli Barzilay <eli@barzilay.org>
To: Robby Findler <robby@cs.uchicago.edu>
Cc: bugs@plt-scheme.org, nobody@plt-scheme.org,
        Jens Axel SXXgaard <jensaxel@soegaard.net>
Subject: Re: drscheme/7125 Danish characters show up as question marks in DrScheme
Date: Sat, 22 Jan 2005 00:10:08 -0500

 On Jan 21, Robby Findler wrote:
 > There was a bug in the danish-string-constants.ss file. The file-menu
 > string constant and the file-menu-label string-constant have to match
 > up (the first has to be the same as the second, but without the &
 > annotations).
 > 
 > I've fixed it. Thanks for spotting it!
 
 Well, trying to quit a Danish application works best through the menu,
 and then I noticed that the keybindings of the "File" menu look
 weird...
 
 (Should I close this now?)
 
 -- 
           ((lambda (x) (x x)) (lambda (x) (x x)))          Eli Barzilay:
                   http://www.barzilay.org/                 Maze is Life!
From: Robby Findler <robby@cs.uchicago.edu>
To: Eli Barzilay <eli@barzilay.org>
Cc: bugs@plt-scheme.org, nobody@plt-scheme.org,
        Jens Axel SXXgaard <jensaxel@soegaard.net>
Subject: Re: drscheme/7125 Danish characters show up as question marks in DrScheme
Date: Sat, 22 Jan 2005 01:06:14 -0600

 At Sat, 22 Jan 2005 00:10:08 -0500, Eli Barzilay wrote:
 > (Should I close this now?)
 
 I didn't close it because I wasn't sure if the utf-8/Latin1 issues were
 resolved, but if they are, please go ahead.
 
 Robby

State changed from "open" to "closed" by eli at Sat, 22 Jan 2005 02:59:53 -0500
Reason>>> .

From: Eli Barzilay <eli@barzilay.org>
To: Robby Findler <robby@cs.uchicago.edu>
Cc: bugs@plt-scheme.org, nobody@plt-scheme.org,
        Jens Axel SXXgaard <jensaxel@soegaard.net>
Subject: Re: drscheme/7125 Danish characters show up as question marks in DrScheme
Date: Sat, 22 Jan 2005 02:59:12 -0500

 On Jan 22, Robby Findler wrote:
 > At Sat, 22 Jan 2005 00:10:08 -0500, Eli Barzilay wrote:
 > > (Should I close this now?)
 > 
 > I didn't close it because I wasn't sure if the utf-8/Latin1 issues
 > were resolved, but if they are, please go ahead.
 
 Well, I did it with Emacs -- and tested it by removing all compiled
 files and running DrScheme.  It seems fine so there's no way for some
 parts to be wrong now...  I'll close it.
 
 -- 
           ((lambda (x) (x x)) (lambda (x) (x x)))          Eli Barzilay:
                   http://www.barzilay.org/                 Maze is Life!
From: =?ISO-8859-1?Q?Jens_Axel_S=F8gaard?= <jensaxel@soegaard.net>
To: bugs@plt-scheme.org
Cc: robby@cs.uchicago.edu
Subject: Re: drscheme/7125 Danish characters show up as question marks in
 DrScheme
Date: Sat, 22 Jan 2005 12:00:45 +0100

 eli@plt-scheme.org wrote:
 
 > Responsible changed from "nobody" to "robby" by eli at Fri, 21 Jan 2005 23:11:16 -0500
 > Reason>>> drscheme (Robby, it seems like you're the one who handles 
 > these files).
 > I fixed this thing, and it seems like almost everything is 
 > fine, but I saw that the "Edit" menu appears on the left 
 > of the "File" menu.  I don't suppose that this is some 
 > feature of Danish applications...  In any case, I'm 
 > leaving it open for this to be fixed.  (Maybe it's better 
 > to close and open a new bug?)
 
 You are right, the File menu (Filer) is always on the left of the
 Edit menu (Rediger) also in Danish applications.
 
 /Jens Axel
 
From: Robby Findler <robby@cs.uchicago.edu>
To: Eli Barzilay <eli@barzilay.org>
Cc: bugs@plt-scheme.org, nobody@plt-scheme.org,
        Jens Axel SXXgaard <jensaxel@soegaard.net>
Subject: Re: drscheme/7125 Danish characters show up as question marks in DrScheme
Date: Sat, 22 Jan 2005 08:38:50 -0600

 At Sat, 22 Jan 2005 02:59:12 -0500, Eli Barzilay wrote:
 > Well, I did it with Emacs -- and tested it by removing all compiled
 > files and running DrScheme.  It seems fine so there's no way for some
 > parts to be wrong now...  I'll close it.
 
 This conversion has been done before, so there's also the question of
 how it got unconverted. ...
 
 Robby
From: =?UTF-8?B?SmVucyBBeGVsIFPDuGdhYXJk?= <jensaxel@soegaard.net>
To: Robby Findler <robby@cs.uchicago.edu>
Cc: Eli Barzilay <eli@barzilay.org>, bugs@plt-scheme.org
Subject: Re: drscheme/7125 Danish characters show up as question marks in
 DrScheme
Date: Sat, 22 Jan 2005 16:25:34 +0100

 Robby Findler wrote:
 
 > At Sat, 22 Jan 2005 02:59:12 -0500, Eli Barzilay wrote:
 > 
 >>Well, I did it with Emacs -- and tested it by removing all compiled
 >>files and running DrScheme.  It seems fine so there's no way for some
 >>parts to be wrong now...  I'll close it.
 > 
 > 
 > This conversion has been done before, so there's also the question of
 > how it got unconverted. ...
 
 Did I do it the last time, I updated the translations?
 
 If I understand correct, danish characters in utf8-files now display
 correctly. But what about old source files written in iso-8859-1?
 Is it impossible to get both kind of files to display correctly?
 
 E.g. when I open source files from Galore the ø in my name
 is displayed as a question mark.
 
 That the name is displayed incorrectly is a minor issue, however I
 have used danish characters in identifiers in source files used
 for teaching.
 
 /Jens Axel
 
 
 
From: Robby Findler <robby@cs.uchicago.edu>
To: Jens Axel =?ISO-8859-1?Q?S=F8gaard?= <jensaxel@soegaard.net>
Cc: Eli Barzilay <eli@barzilay.org>, bugs@plt-scheme.org
Subject: Re: drscheme/7125 Danish characters show up as question marks in
 DrScheme
Date: Sat, 22 Jan 2005 10:44:15 -0600

 At Sat, 22 Jan 2005 16:25:34 +0100, Jens Axel Søgaard wrote:
 > Did I do it the last time, I updated the translations?
 
 No idea!
 
 > If I understand correct, danish characters in utf8-files now display
 > correctly. But what about old source files written in iso-8859-1?
 > Is it impossible to get both kind of files to display correctly?
 
 It is possible, with a mzscheme script (or other things, presumably).
 
 > E.g. when I open source files from Galore the ø in my name
 > is displayed as a question mark.
 
 Yes, that's because Galore is (presumably) using a different encoding
 than drscheme is. In 20x DrScheme used latin1 and now it uses utf-8.
 
 > That the name is displayed incorrectly is a minor issue, however I
 > have used danish characters in identifiers in source files used
 > for teaching.
 
 I think we can help there by adding support to drscheme to read those
 other locales, but the support isn't there yet. I'll look into it.
 
 Robby
From: Robby Findler <robby@cs.uchicago.edu>
To: mflatt@cs.utah.edu
Cc: Eli Barzilay <eli@barzilay.org>, bugs@plt-scheme.org
Subject: Re: drscheme/7125 Danish characters show up as question marks in
 DrScheme
Date: Sat, 22 Jan 2005 10:47:25 -0600

 Matthew, as a result of the discussion on this PR, I started to think
 that it would be a good idea to support something like Safari (and
 other browser's) "View | Text Encoding" menu. Looking around in mz and
 mred, it seems like two things are missing. I can't seem to figure out
 how to get a list of the available converters and I can't seem to find
 a way to get a text% to go re-interpret the bytes it read in (with a
 new encoding).
 
 I'm guessing that the second is not a simple operation, at least in
 memory, since the bytes from the file are probably discarded after
 load-file completes. 
 
 Is there anything to be done?
 
 Robby
From: Matthew Flatt <mflatt@cs.utah.edu>
To: Robby Findler <robby@cs.uchicago.edu>
Cc: Eli Barzilay <eli@barzilay.org>, bugs@plt-scheme.org
Subject: Re: drscheme/7125 Danish characters show up as question marks in
 DrScheme
Date: Fri, 4 Feb 2005 13:39:00 -0700

 At Sat, 22 Jan 2005 10:47:25 -0600, Robby Findler wrote:
 > Matthew, as a result of the discussion on this PR, I started to think
 > that it would be a good idea to support something like Safari (and
 > other browser's) "View | Text Encoding" menu. Looking around in mz and
 > mred, it seems like two things are missing. I can't seem to figure out
 > how to get a list of the available converters 
 
 I can't find a way to get a list of encodings. You certainly don't want
 a list as long as `iconv -l', though, even if I knew how to get that
 list.
 
 > and I can't seem to find
 > a way to get a text% to go re-interpret the bytes it read in (with a
 > new encoding).
 >
 > I'm guessing that the second is not a simple operation, at least in
 > memory, since the bytes from the file are probably discarded after
 > load-file completes. 
 
 Right --- there aren't any bytes in an editor, just characters, so it's
 too late at that point. You'd need to convert a stream of bytes before
 it gets into the editor, which might mean re-loading a file.
 
 Matthew
 
From: Robby Findler <robby@cs.uchicago.edu>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: Eli Barzilay <eli@barzilay.org>, bugs@plt-scheme.org
Subject: Re: drscheme/7125 Danish characters show up as question marks in
 DrScheme
Date: Fri, 4 Feb 2005 20:06:25 -0600

 At Fri, 4 Feb 2005 13:39:00 -0700, Matthew Flatt wrote:
 > I can't find a way to get a list of encodings. You certainly don't
 > want a list as long as `iconv -l', though, even if I knew how to get
 > that list.
 
 Is there a way that, given a name, you could tell if was legal?
 
 > You'd need to convert a stream of bytes before it gets into the
 > editor, which might mean re-loading a file.
 
 Any ideas on this, then? Should we try to other encodings in editors? 
 
 Maybe best to have an "open with encoding" which loads the file in, but
 doesn't set the editor's filename? (just in case they save ...)
 
 Robby
From: Matthew Flatt <mflatt@cs.utah.edu>
To: Robby Findler <robby@cs.uchicago.edu>
Cc: Eli Barzilay <eli@barzilay.org>, bugs@plt-scheme.org
Subject: Re: drscheme/7125 Danish characters show up as question marks in
 DrScheme
Date: Fri, 4 Feb 2005 19:27:25 -0700

 At Fri, 4 Feb 2005 20:06:25 -0600, Robby Findler wrote:
 > At Fri, 4 Feb 2005 13:39:00 -0700, Matthew Flatt wrote:
 > > I can't find a way to get a list of encodings. You certainly don't
 > > want a list as long as `iconv -l', though, even if I knew how to get
 > > that list.
 > 
 > Is there a way that, given a name, you could tell if was legal?
 
 Try to create a converter to or from "UTF-8". (That's the only iterface
 I have at the C level.)
 
 > > You'd need to convert a stream of bytes before it gets into the
 > > editor, which might mean re-loading a file.
 > 
 > Any ideas on this, then? Should we try to other encodings in editors? 
 > 
 > Maybe best to have an "open with encoding" which loads the file in, but
 > doesn't set the editor's filename? (just in case they save ...)
 
 I don't see any problem with the "Encodings" menu in the case that the
 editor has a filename. Treat the encoding change as a reload (including
 asking the user whether to forget changes.)
 
 Matthew
 
From: Robby Findler <robby@cs.uchicago.edu>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: Eli Barzilay <eli@barzilay.org>, bugs@plt-scheme.org
Subject: Re: drscheme/7125 Danish characters show up as question marks in
 DrScheme
Date: Fri, 4 Feb 2005 20:29:05 -0600

 At Fri, 4 Feb 2005 19:27:25 -0700, Matthew Flatt wrote:
 > At Fri, 4 Feb 2005 20:06:25 -0600, Robby Findler wrote:
 > > At Fri, 4 Feb 2005 13:39:00 -0700, Matthew Flatt wrote:
 > > > I can't find a way to get a list of encodings. You certainly don't
 > > > want a list as long as `iconv -l', though, even if I knew how to get
 > > > that list.
 > > 
 > > Is there a way that, given a name, you could tell if was legal?
 > 
 > Try to create a converter to or from "UTF-8". (That's the only iterface
 > I have at the C level.)
 
 Okay. So I can make a list similar to what I see in safari and then let
 user's type in new names?
 
 > > > You'd need to convert a stream of bytes before it gets into the
 > > > editor, which might mean re-loading a file.
 > > 
 > > Any ideas on this, then? Should we try to other encodings in editors? 
 > > 
 > > Maybe best to have an "open with encoding" which loads the file in, but
 > > doesn't set the editor's filename? (just in case they save ...)
 > 
 > I don't see any problem with the "Encodings" menu in the case that the
 > editor has a filename. Treat the encoding change as a reload (including
 > asking the user whether to forget changes.)
 
 If they open the file, make a change and save the file, we'll have
 changed the encoding on the disk, which seems like it would be
 confusing.
 
 Unless you're thinking of some way to avoid that?
 
 Robby
From: Matthew Flatt <mflatt@cs.utah.edu>
To: Robby Findler <robby@cs.uchicago.edu>
Cc: Eli Barzilay <eli@barzilay.org>, bugs@plt-scheme.org
Subject: Re: drscheme/7125 Danish characters show up as question marks in
 DrScheme
Date: Fri, 4 Feb 2005 19:41:54 -0700

 At Fri, 4 Feb 2005 20:29:05 -0600, Robby Findler wrote:
 > > I don't see any problem with the "Encodings" menu in the case that the
 > > editor has a filename. Treat the encoding change as a reload (including
 > > asking the user whether to forget changes.)
 > 
 > If they open the file, make a change and save the file, we'll have
 > changed the encoding on the disk, which seems like it would be
 > confusing.
 > 
 > Unless you're thinking of some way to avoid that?
 
 I imagined that the encoding would stick. In other words, a file would
 be saved using whatever encoding was in the menu.
 
 But then if wouldn't work with MrEd/MzScheme... so I guess that's why
 we shouldn't have an encodings menu.
 
 Matthew
 
From: Robby Findler <robby@cs.uchicago.edu>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: Eli Barzilay <eli@barzilay.org>, bugs@plt-scheme.org
Subject: Re: drscheme/7125 Danish characters show up as question marks in
 DrScheme
Date: Fri, 4 Feb 2005 20:43:49 -0600

 At Fri, 4 Feb 2005 19:41:54 -0700, Matthew Flatt wrote:
 > At Fri, 4 Feb 2005 20:29:05 -0600, Robby Findler wrote:
 > > > I don't see any problem with the "Encodings" menu in the case that the
 > > > editor has a filename. Treat the encoding change as a reload (including
 > > > asking the user whether to forget changes.)
 > > 
 > > If they open the file, make a change and save the file, we'll have
 > > changed the encoding on the disk, which seems like it would be
 > > confusing.
 > > 
 > > Unless you're thinking of some way to avoid that?
 > 
 > I imagined that the encoding would stick. In other words, a file would
 > be saved using whatever encoding was in the menu.
 > 
 > But then if wouldn't work with MrEd/MzScheme... so I guess that's why
 > we shouldn't have an encodings menu.
 
 Why not have a flag on the editor saying what encodings was using on
 save-file and load-file and drscheme would (as usual) stick some menus
 and the like onto so people can use it more easily?
 
 Robb
 y
From: Matthew Flatt <mflatt@cs.utah.edu>
To: Robby Findler <robby@cs.uchicago.edu>
Cc: Eli Barzilay <eli@barzilay.org>, bugs@plt-scheme.org
Subject: Re: drscheme/7125 Danish characters show up as question marks in
 DrScheme
Date: Fri, 4 Feb 2005 19:46:07 -0700

 At Fri, 4 Feb 2005 20:43:49 -0600, Robby Findler wrote:
 > At Fri, 4 Feb 2005 19:41:54 -0700, Matthew Flatt wrote:
 > > At Fri, 4 Feb 2005 20:29:05 -0600, Robby Findler wrote:
 > > > > I don't see any problem with the "Encodings" menu in the case that the
 > > > > editor has a filename. Treat the encoding change as a reload (including
 > > > > asking the user whether to forget changes.)
 > > > 
 > > > If they open the file, make a change and save the file, we'll have
 > > > changed the encoding on the disk, which seems like it would be
 > > > confusing.
 > > > 
 > > > Unless you're thinking of some way to avoid that?
 > > 
 > > I imagined that the encoding would stick. In other words, a file would
 > > be saved using whatever encoding was in the menu.
 > > 
 > > But then if wouldn't work with MrEd/MzScheme... so I guess that's why
 > > we shouldn't have an encodings menu.
 > 
 > Why not have a flag on the editor saying what encodings was using on
 > save-file and load-file and drscheme would (as usual) stick some menus
 > and the like onto so people can use it more easily?
 
 I'm lost again, so probably I should call it a day.
 
 Matthew
 
From: Robby Findler <robby@cs.uchicago.edu>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: Eli Barzilay <eli@barzilay.org>, bugs@plt-scheme.org
Subject: Re: drscheme/7125 Danish characters show up as question marks in
 DrScheme
Date: Fri, 4 Feb 2005 20:54:54 -0600

 At Fri, 4 Feb 2005 19:46:07 -0700, Matthew Flatt wrote:
 > At Fri, 4 Feb 2005 20:43:49 -0600, Robby Findler wrote:
 > > At Fri, 4 Feb 2005 19:41:54 -0700, Matthew Flatt wrote:
 > > > At Fri, 4 Feb 2005 20:29:05 -0600, Robby Findler wrote:
 > > > > > I don't see any problem with the "Encodings" menu in the case that the
 > > > > > editor has a filename. Treat the encoding change as a reload (including
 > > > > > asking the user whether to forget changes.)
 > > > > 
 > > > > If they open the file, make a change and save the file, we'll have
 > > > > changed the encoding on the disk, which seems like it would be
 > > > > confusing.
 > > > > 
 > > > > Unless you're thinking of some way to avoid that?
 > > > 
 > > > I imagined that the encoding would stick. In other words, a file would
 > > > be saved using whatever encoding was in the menu.
 > > > 
 > > > But then if wouldn't work with MrEd/MzScheme... so I guess that's why
 > > > we shouldn't have an encodings menu.
 > > 
 > > Why not have a flag on the editor saying what encodings was using on
 > > save-file and load-file and drscheme would (as usual) stick some menus
 > > and the like onto so people can use it more easily?
 > 
 > I'm lost again, so probably I should call it a day.
 
 Maybe it doesn't work? 
 
 I'm thinking of a method of editor called set-encoding (accepting a
 string, I guess) that affects the behavior of save-file and load-file
 (forcing them to use that encoding instead of utf-8). We'd also have a
 get-encoding method so I can build the GUI around it.
 
 Robby
From: Matthew Flatt <mflatt@cs.utah.edu>
To: Robby Findler <robby@cs.uchicago.edu>
Cc: Eli Barzilay <eli@barzilay.org>, bugs@plt-scheme.org
Subject: Re: drscheme/7125 Danish characters show up as question marks in
 DrScheme
Date: Sat, 5 Feb 2005 06:06:03 -0700

 At Fri, 4 Feb 2005 20:43:49 -0600, Robby Findler wrote:
 > At Fri, 4 Feb 2005 19:41:54 -0700, Matthew Flatt wrote:
 > > At Fri, 4 Feb 2005 20:29:05 -0600, Robby Findler wrote:
 > > > > I don't see any problem with the "Encodings" menu in the case that the
 > > > > editor has a filename. Treat the encoding change as a reload (including
 > > > > asking the user whether to forget changes.)
 > > > 
 > > > If they open the file, make a change and save the file, we'll have
 > > > changed the encoding on the disk, which seems like it would be
 > > > confusing.
 > > > 
 > > > Unless you're thinking of some way to avoid that?
 > > 
 > > I imagined that the encoding would stick. In other words, a file would
 > > be saved using whatever encoding was in the menu.
 > > 
 > > But then if wouldn't work with MrEd/MzScheme... so I guess that's why
 > > we shouldn't have an encodings menu.
 > 
 > Why not have a flag on the editor saying what encodings was using on
 > save-file and load-file and drscheme would (as usual) stick some menus
 > and the like onto so people can use it more easily?
 
 One problem is that someone might edit a Scheme file using the Latin-1
 encoding, and then try to load it with MzScheme or MrEd. It won't work,
 even though the file can be loaded into DrScheme and then executed.
 
 So maybe DrScheme should support loading and saving in various
 encodings, but also offer a warning (one of those with a "don't tell me
 again checkbox") that most PLT tools work with UTF-8 only?
 
 Matthew
 
From: Robby Findler <robby@cs.uchicago.edu>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: Eli Barzilay <eli@barzilay.org>, bugs@plt-scheme.org
Subject: Re: drscheme/7125 Danish characters show up as question marks in
 DrScheme
Date: Sat, 5 Feb 2005 17:09:16 -0600

 At Sat, 5 Feb 2005 06:06:03 -0700, Matthew Flatt wrote:
 > At Fri, 4 Feb 2005 20:43:49 -0600, Robby Findler wrote:
 > > At Fri, 4 Feb 2005 19:41:54 -0700, Matthew Flatt wrote:
 > > > At Fri, 4 Feb 2005 20:29:05 -0600, Robby Findler wrote:
 > > > > > I don't see any problem with the "Encodings" menu in the case that the
 > > > > > editor has a filename. Treat the encoding change as a reload (including
 > > > > > asking the user whether to forget changes.)
 > > > > 
 > > > > If they open the file, make a change and save the file, we'll have
 > > > > changed the encoding on the disk, which seems like it would be
 > > > > confusing.
 > > > > 
 > > > > Unless you're thinking of some way to avoid that?
 > > > 
 > > > I imagined that the encoding would stick. In other words, a file would
 > > > be saved using whatever encoding was in the menu.
 > > > 
 > > > But then if wouldn't work with MrEd/MzScheme... so I guess that's why
 > > > we shouldn't have an encodings menu.
 > > 
 > > Why not have a flag on the editor saying what encodings was using on
 > > save-file and load-file and drscheme would (as usual) stick some menus
 > > and the like onto so people can use it more easily?
 > 
 > One problem is that someone might edit a Scheme file using the Latin-1
 > encoding, and then try to load it with MzScheme or MrEd. It won't work,
 > even though the file can be loaded into DrScheme and then executed.
 > 
 > So maybe DrScheme should support loading and saving in various
 > encodings, but also offer a warning (one of those with a "don't tell me
 > again checkbox") that most PLT tools work with UTF-8 only?
 
 Oh, I see.
 
 Lets not go down this road.
 
 Robby
