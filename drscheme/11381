From bugs+caf_=bugs=bugs.plt-scheme.org@plt-scheme.org Tue Nov  2 21:14:11 2010
Received: from mail-gw0-f44.google.com (mail-gw0-f44.google.com [74.125.83.44])
	by champlain.ccs.neu.edu (8.14.3/8.14.3) with ESMTP id oA31E9J0024281
	for <bugs@bugs.plt-scheme.org>; Tue, 2 Nov 2010 21:14:09 -0400
Message-Id: <201011030114.oA31E7dt024273@champlain.ccs.neu.edu>
Date: Tue, 2 Nov 2010 21:14:07 -0400
From: chlorf@yahoo.com
To: bugs@racket-lang.org
Subject: Racket stopped displaying text in colors

>Number:         11381
>Category:       drscheme
>Synopsis:       Racket stopped displaying text in colors
>Class:          sw-bug
>Responsible:    robby
>Severity:       serious
>Priority:       medium
>State:          closed
>Confidential:   no
>Arrival-Date:   Tue Nov 02 21:16:01 -0400 2010
>Closed-Date:    Wed Feb 09 16:27:39 -0500 2011
>Last-Modified:  Wed Feb 09 16:27:39 -0500 2011
>Originator:     Alex Canales
>Organization:
plt
>Submitter-Id:   unknown
>Release:        5.0.1
>Environment:
windows "Windows NT 5.1 (Build 2600) Service Pack 3" (win32\i386\3m) (get-display-depth) = 32
Human Language: english
(current-memory-use) 121452140

Collections:
(("C:\\Documents and Settings\\Lex\\Application Data\\Racket\\5.0.1\\collects" non-existent-path) ("C:\\Racket\\collects" "2htdp" "afm" "algol60" "at-exp" "browser" "combinator-parser" "compiler" "config" "datalog" "defaults" "deinprogramm" "drracket" "drscheme" "dynext" "embedded-gui" "eopl" "errortrace" "ffi" "file" "framework" "frtime" "games" "graphics" "gui-debugger" "help" "hierlist" "htdp" "html" "icons" "info-domain" "lang" "launcher" "lazy" "macro-debugger" "make" "mred" "mrlib" "mysterx" "mzcom" "mzlib" "mzscheme" "net" "openssl" "parser-tools" "plai" "planet" "plot" "preprocessor" "profile" "r5rs" "r6rs" "racket" "racklog" "rackunit" "raco" "reader" "readline" "redex" "rnrs" "s-exp" "scheme" "schemeunit" "scribble" "scribblings" "scriblib" "setup" "sgl" "slatex" "slideshow" "srfi" "stepper" "string-constants" "swindle" "syntax" "syntax-color" "teachpack" "test-box-recovery" "test-engine" "tex2page" "texpict" "trace" "typed" "typed-scheme" "unstable" "version" "web!
 -server" "wxme" "xml"))
Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default) #() "#lang racket\n" #t))
>Description:
Racket displayed colors until today, now all text is in black. The option for colors is still enabled in preferences.
>How-To-Repeat:
>Fix:
>Audit-Trail:
From: Alejandro Canales <chlorf@yahoo.com>
To: bugs@racket-lang.org, bug-notification@racket-lang.org
Cc: 
Subject: Re: [racket-bug] all/11381: Racket stopped displaying text in colors
Date: Tue, 2 Nov 2010 18:18:25 -0700 (PDT)

 --0-1592511056-1288747105=:61075
 Content-Type: text/plain; charset=iso-8859-1
 Content-Transfer-Encoding: quoted-printable
 
 Wait, text displays in color normally, just comments are black. All color s=
 ettings are still default though, so the comments should be a brownish yell=
 ow. I checked the settings, the comments should definitely be in yellow.
 I am using Windows XP.
 
 --- On Tue, 11/2/10, bugs@racket-lang.org <bugs@racket-lang.org> wrote:
 
 From: bugs@racket-lang.org <bugs@racket-lang.org>
 Subject: Re: [racket-bug] all/11381: Racket stopped displaying text in colo=
 rs
 To: chlorf@yahoo.com
 Date: Tuesday, November 2, 2010, 8:16 PM
 
 Thank you very much for your problem report.
 It has the internal identification `all/11381'.
 You can check on the status of your problem report at
 =A0 http://bugs.racket-lang.org/query/?cmd=3Dview&pr=3D11381
 
 If you wish to provide further information regarding this problem
 you can do so as a reply to this message.=A0 (But please make sure
 that your mailer replies to both "bugs" and "bug-notification".)
 
 =0A=0A=0A      
 --0-1592511056-1288747105=:61075
 Content-Type: text/html; charset=iso-8859-1
 Content-Transfer-Encoding: quoted-printable
 
 <table cellspacing=3D"0" cellpadding=3D"0" border=3D"0" ><tr><td valign=3D"=
 top" style=3D"font: inherit;"><P>Wait, text displays in color normally, jus=
 t comments are black. All color settings are still default though, so the c=
 omments should be a brownish yellow. I checked the settings, the comments s=
 hould definitely be in yellow.</P><P><BR></P><P>I am using Windows XP.<BR><=
 /P><BR>--- On <B>Tue, 11/2/10, bugs@racket-lang.org <I>&lt;bugs@racket-lang=
 .org&gt;</I></B> wrote:<BR><BLOCKQUOTE style=3D"border-left: 2px solid rgb(=
 16, 16, 255); margin-left: 5px; padding-left: 5px;"><BR>From: bugs@racket-l=
 ang.org &lt;bugs@racket-lang.org&gt;<BR>Subject: Re: [racket-bug] all/11381=
 : Racket stopped displaying text in colors<BR>To: chlorf@yahoo.com<BR>Date:=
  Tuesday, November 2, 2010, 8:16 PM<BR><BR><DIV class=3D"plainMail">Thank y=
 ou very much for your problem report.<BR>It has the internal identification=
  `all/11381'.<BR>You can check on the status of your problem report at<BR>=
 =A0 <A
  href=3D"http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=3D11381" targ=
 et=3D"_blank">http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=3D11381<=
 /A><BR><BR>If you wish to provide further information regarding this proble=
 m<BR>you can do so as a reply to this message.=A0 (But please make sure<BR>=
 that your mailer replies to both "bugs" and "bug-notification".)<BR><BR></D=
 IV></BLOCKQUOTE></td></tr></table><br>=0A=0A=0A=0A=0A=0A=0A=0A      
 --0-1592511056-1288747105=:61075--
From: Robby Findler <robby@eecs.northwestern.edu>
To: Alejandro Canales <chlorf@yahoo.com>
Cc: bugs@racket-lang.org, bug-notification@racket-lang.org
Subject: Re: [racket-bug] all/11381: Racket stopped displaying text in colors
Date: Tue, 2 Nov 2010 20:46:03 -0500

 --001636c5983f3f397304941c34cd
 Content-Type: text/plain; charset=UTF-8
 
 What happens if you click the "white on black" and then click the "black on
 white" button in the color section of the preferences dialog?
 
 Robby
 
 On Tue, Nov 2, 2010 at 8:18 PM, Alejandro Canales <chlorf@yahoo.com> wrote:
 
 > Wait, text displays in color normally, just comments are black. All color
 > settings are still default though, so the comments should be a brownish
 > yellow. I checked the settings, the comments should definitely be in yellow.
 >
 >
 > I am using Windows XP.
 >
 > --- On *Tue, 11/2/10, bugs@racket-lang.org <bugs@racket-lang.org>* wrote:
 >
 >
 > From: bugs@racket-lang.org <bugs@racket-lang.org>
 > Subject: Re: [racket-bug] all/11381: Racket stopped displaying text in
 > colors
 > To: chlorf@yahoo.com
 > Date: Tuesday, November 2, 2010, 8:16 PM
 >
 > Thank you very much for your problem report.
 > It has the internal identification `all/11381'.
 > You can check on the status of your problem report at
 >
 >   http://bugs.racket-lang.org/query/?cmd=view&pr=11381
 >
 > If you wish to provide further information regarding this problem
 > you can do so as a reply to this message.  (But please make sure
 > that your mailer replies to both "bugs" and "bug-notification".)
 >
 >
 >
 
 --001636c5983f3f397304941c34cd
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 What happens if you click the &quot;white on black&quot; and then click the=
  &quot;black on white&quot; button in the color section of the preferences =
 dialog?<div><br></div><div>Robby<br><br><div class=3D"gmail_quote">On Tue, =
 Nov 2, 2010 at 8:18 PM, Alejandro Canales <span dir=3D"ltr">&lt;<a href=3D"=
 mailto:chlorf@yahoo.com">chlorf@yahoo.com</a>&gt;</span> wrote:<br>
 <blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
 x #ccc solid;padding-left:1ex;"><table cellspacing=3D"0" cellpadding=3D"0" =
 border=3D"0"><tbody><tr><td valign=3D"top" style=3D"font:inherit"><p>Wait, =
 text displays in color normally, just comments are black. All color setting=
 s are still default though, so the comments should be a brownish yellow. I =
 checked the settings, the comments should definitely be in yellow.</p>
 <p><br></p><p>I am using Windows XP.<br></p><br>--- On <b>Tue, 11/2/10, <a =
 href=3D"mailto:bugs@racket-lang.org" target=3D"_blank">bugs@racket-lang.org=
 </a> <i>&lt;<a href=3D"mailto:bugs@racket-lang.org" target=3D"_blank">bugs@=
 racket-lang.org</a>&gt;</i></b> wrote:<br>
 <blockquote style=3D"border-left:2px solid rgb(16, 16, 255);margin-left:5px=
 ;padding-left:5px"><br>From: <a href=3D"mailto:bugs@racket-lang.org" target=
 =3D"_blank">bugs@racket-lang.org</a> &lt;<a href=3D"mailto:bugs@racket-lang=
 .org" target=3D"_blank">bugs@racket-lang.org</a>&gt;<br>
 Subject: Re: [racket-bug] all/11381: Racket stopped displaying text in colo=
 rs<br>To: <a href=3D"mailto:chlorf@yahoo.com" target=3D"_blank">chlorf@yaho=
 o.com</a><br>Date: Tuesday, November 2, 2010, 8:16 PM<br><br><div>Thank you=
  very much for your problem report.<br>
 It has the internal identification `all/11381&#39;.<br>You can check on the=
  status of your problem report at<div class=3D"im"><br>=C2=A0 <a href=3D"ht=
 tp://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=3D11381" target=3D"_blan=
 k">http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=3D11381</a><br>
 <br></div>If you wish to provide further information regarding this problem=
 <br>you can do so as a reply to this message.=C2=A0 (But please make sure<b=
 r>that your mailer replies to both &quot;bugs&quot; and &quot;bug-notificat=
 ion&quot;.)<br>
 <br></div></blockquote></td></tr></tbody></table><br>
 
 
 
 
 
 
 
       </blockquote></div><br></div>
 
 --001636c5983f3f397304941c34cd--
From: Robby Findler <robby@eecs.northwestern.edu>
To: Alejandro Canales <chlorf@yahoo.com>
Cc: bugs <bugs@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/11381: Racket stopped displaying text in colors
Date: Wed, 3 Nov 2010 06:36:19 -0500

 --001636c5983f3188290494247312
 Content-Type: text/plain; charset=UTF-8
 
 Okay. That tells us that the preferences in drracket are set properly. I'm
 not sure what to test next, tho.
 
 Maybe you can send us a screenshot?
 
 Robby
 
 On Tue, Nov 2, 2010 at 11:49 PM, Alejandro Canales <chlorf@yahoo.com> wrote:
 
 > Wait, I reread your email and found out you actually asked me to press both
 > the 'white on black' and 'black on white' buttons in succession. Now I did
 > that, the text just turns from black to white and back again. It doesn't
 > turn orange.
 >
 >
 > The color for comments is still orange in the settings.
 >
 > --- On *Tue, 11/2/10, Robby Findler <robby@eecs.northwestern.edu>* wrote:
 >
 >
 > From: Robby Findler <robby@eecs.northwestern.edu>
 > Subject: Re: [racket-bug] all/11381: Racket stopped displaying text in
 > colors
 > To: "Alejandro Canales" <chlorf@yahoo.com>
 > Cc: bugs@racket-lang.org, bug-notification@racket-lang.org
 > Date: Tuesday, November 2, 2010, 8:46 PM
 >
 >
 > What happens if you click the "white on black" and then click the "black on
 > white" button in the color section of the preferences dialog?
 >
 > Robby
 >
 > On Tue, Nov 2, 2010 at 8:18 PM, Alejandro Canales <chlorf@yahoo.com<http://mc/compose?to=chlorf@yahoo.com>
 > > wrote:
 >
 > Wait, text displays in color normally, just comments are black. All color
 > settings are still default though, so the comments should be a brownish
 > yellow. I checked the settings, the comments should definitely be in yellow.
 >
 >
 > I am using Windows XP.
 >
 > --- On *Tue, 11/2/10, bugs@racket-lang.org<http://mc/compose?to=bugs@racket-lang.org>
 > <bugs@racket-lang.org <http://mc/compose?to=bugs@racket-lang.org>>* wrote:
 >
 >
 > From: bugs@racket-lang.org <http://mc/compose?to=bugs@racket-lang.org> <
 > bugs@racket-lang.org <http://mc/compose?to=bugs@racket-lang.org>>
 > Subject: Re: [racket-bug] all/11381: Racket stopped displaying text in
 > colors
 > To: chlorf@yahoo.com <http://mc/compose?to=chlorf@yahoo.com>
 > Date: Tuesday, November 2, 2010, 8:16 PM
 >
 > Thank you very much for your problem report.
 > It has the internal identification `all/11381'.
 > You can check on the status of your problem report at
 >
 >   http://bugs.racket-lang.org/query/?cmd=view&pr=11381
 >
 > If you wish to provide further information regarding this problem
 > you can do so as a reply to this message.  (But please make sure
 > that your mailer replies to both "bugs" and "bug-notification".)
 >
 >
 >
 >
 >
 
 --001636c5983f3188290494247312
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 Okay. That tells us that the preferences in drracket are set properly. I&#3=
 9;m not sure what to test next, tho.<div><br></div><div>Maybe you can send =
 us a screenshot?<br><div><br></div><div>Robby<br><br><div class=3D"gmail_qu=
 ote">
 On Tue, Nov 2, 2010 at 11:49 PM, Alejandro Canales <span dir=3D"ltr">&lt;<a=
  href=3D"mailto:chlorf@yahoo.com">chlorf@yahoo.com</a>&gt;</span> wrote:<br=
 ><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1=
 px #ccc solid;padding-left:1ex;">
 <table cellspacing=3D"0" cellpadding=3D"0" border=3D"0"><tbody><tr><td vali=
 gn=3D"top" style=3D"font:inherit"><p>Wait, I reread your email and found ou=
 t you actually asked me to press both the &#39;white on black&#39; and &#39=
 ;black on white&#39; buttons in succession. Now I did that, the text just t=
 urns from black to white and back again. It doesn&#39;t turn orange.</p>
 <div class=3D"im"><p><br></p><p>The color for comments is still orange in t=
 he settings.<br></p><br>--- On <b>Tue, 11/2/10, Robby Findler <i>&lt;<a hre=
 f=3D"mailto:robby@eecs.northwestern.edu" target=3D"_blank">robby@eecs.north=
 western.edu</a>&gt;</i></b> wrote:<br>
 </div><blockquote style=3D"border-left:2px solid rgb(16, 16, 255);margin-le=
 ft:5px;padding-left:5px"><div class=3D"im"><br>From: Robby Findler &lt;<a h=
 ref=3D"mailto:robby@eecs.northwestern.edu" target=3D"_blank">robby@eecs.nor=
 thwestern.edu</a>&gt;<br>
 </div><div class=3D"im">Subject: Re: [racket-bug] all/11381: Racket stopped=
  displaying text in colors<br></div><div class=3D"im">To: &quot;Alejandro C=
 anales&quot; &lt;<a href=3D"mailto:chlorf@yahoo.com" target=3D"_blank">chlo=
 rf@yahoo.com</a>&gt;<br>
 Cc: <a href=3D"mailto:bugs@racket-lang.org" target=3D"_blank">bugs@racket-l=
 ang.org</a>, <a href=3D"mailto:bug-notification@racket-lang.org" target=3D"=
 _blank">bug-notification@racket-lang.org</a><br></div>Date: Tuesday, Novemb=
 er 2, 2010, 8:46 PM<div>
 <div></div><div class=3D"h5"><br><br><div>What happens if you click
  the &quot;white on black&quot; and then click the &quot;black on white&quo=
 t; button in the color section of the preferences dialog?<div><br></div><di=
 v>Robby<br><br><div>On Tue, Nov 2, 2010 at 8:18 PM, Alejandro Canales <span=
  dir=3D"ltr">&lt;<a rel=3D"nofollow" href=3D"http://mc/compose?to=3Dchlorf@=
 yahoo.com" target=3D"_blank">chlorf@yahoo.com</a>&gt;</span> wrote:<br>
 
 <blockquote style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-l=
 eft:1ex"><table cellspacing=3D"0" cellpadding=3D"0" border=3D"0"><tbody><tr=
 ><td valign=3D"top" style=3D"font:inherit"><p>Wait, text displays in color =
 normally, just comments are black. All color settings are still default tho=
 ugh, so the comments should be a brownish yellow. I checked the settings, t=
 he comments should definitely be in yellow.</p>
 
 <p><br></p><p>I am using Windows XP.<br></p><br>--- On <b>Tue, 11/2/10, <a =
 rel=3D"nofollow" href=3D"http://mc/compose?to=3Dbugs@racket-lang.org" targe=
 t=3D"_blank">bugs@racket-lang.org</a> <i>&lt;<a rel=3D"nofollow" href=3D"ht=
 tp://mc/compose?to=3Dbugs@racket-lang.org" target=3D"_blank">bugs@racket-la=
 ng.org</a>&gt;</i></b> wrote:<br>
 
 <blockquote style=3D"border-left:2px solid rgb(16, 16, 255);margin-left:5px=
 ;padding-left:5px"><br>From: <a rel=3D"nofollow" href=3D"http://mc/compose?=
 to=3Dbugs@racket-lang.org" target=3D"_blank">bugs@racket-lang.org</a> &lt;<=
 a rel=3D"nofollow" href=3D"http://mc/compose?to=3Dbugs@racket-lang.org" tar=
 get=3D"_blank">bugs@racket-lang.org</a>&gt;<br>
 
 Subject: Re: [racket-bug] all/11381: Racket stopped displaying text in colo=
 rs<br>To: <a rel=3D"nofollow" href=3D"http://mc/compose?to=3Dchlorf@yahoo.c=
 om" target=3D"_blank">chlorf@yahoo.com</a><br>Date: Tuesday, November 2, 20=
 10, 8:16 PM<br>
 <br><div>Thank you very much for your problem report.<br>
 It has the internal identification `all/11381&#39;.<br>You can check on the=
  status of your problem report at<div><br>=C2=A0 <a rel=3D"nofollow" href=
 =3D"http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=3D11381" target=3D=
 "_blank">http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=3D11381</a><b=
 r>
 
 <br></div>If you wish to provide further information regarding this problem=
 <br>you can do so as a reply to this message.=C2=A0 (But please make sure<b=
 r>that your mailer replies to both &quot;bugs&quot; and &quot;bug-notificat=
 ion&quot;.)<br>
 
 <br></div></blockquote></td></tr></tbody></table><br>
 
 
 
 
 
 
 
       </blockquote></div><br></div>
 </div></div></div></blockquote></td></tr></tbody></table><br>
 
       </blockquote></div><br></div></div>
 
 --001636c5983f3188290494247312--
From: Robby Findler <robby@eecs.northwestern.edu>
To: Alejandro Canales <chlorf@yahoo.com>
Cc: bugs <bugs@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/11381: Racket stopped displaying text in colors
Date: Wed, 3 Nov 2010 07:29:38 -0500

 Ah. Comments above the #lang line are probably not handled properly.
 That's likely the issue.
 
 Robby
 
 On Wednesday, November 3, 2010, Alejandro Canales <chlorf@yahoo.com> wrote:
 > Well I fixed it. I pasted some code from the Guide to show how the colors=
  do work for everything else but comments, and noticed that the comment in =
 the code I pasted was actually orange like it should be. Then I tried delet=
 ing the ;; from one of the lines of my commented notes, and they all became=
  orange again.
 >
 > Here's a screenshot, it's working properly (well actually I've attached a=
  screenshot). I don't know what caused it but I opened the program several =
 times and the text still wasn't in color. Actually I just noticed I have a =
 screenshot from before it was working, I will attach both.
 > The commented text is notes I took because I was learning Racket as my fi=
 rst language.
 > --- On Wed, 11/3/10, Robby Findler <robby@eecs.northwestern.edu> wrote:
 >
 > From: Robby Findler <robby@eecs.northwestern.edu>
 > Subject: Re: [racket-bug] all/11381: Racket stopped displaying text in co=
 lors
 > To: "Alejandro Canales" <chlorf@yahoo.com>
 > Cc: "bugs" <bugs@racket-lang.org>, "bug-notification" <bug-notification@r=
 acket-lang.org>
 > Date: Wednesday, November 3, 2010, 6:36 AM
 >
 > Okay. That tells us that the preferences in drracket are set properly. I'=
 m not sure what to test next, tho.
 > Maybe you can send us a screenshot?
 >
 > Robby
 >
 >
 > On Tue, Nov 2, 2010 at 11:49 PM, Alejandro Canales <chlorf@yahoo.com=C2=
 =A0<http://mc/compose?to=3Dchlorf@yahoo.com>> wrote:
 >
 > Wait, I reread your email and found out you actually asked me to press bo=
 th the 'white on black' and 'black on white' buttons in succession. Now I d=
 id that, the text just turns from black to white and back again. It doesn't=
  turn orange.
 >
 > The color for comments is still orange in the settings.
 >
 > --- On Tue, 11/2/10, Robby Findler <robby@eecs.northwestern.edu=C2=A0<htt=
 p://mc/compose?to=3Drobby@eecs.northwestern.edu>> wrote:
 >
 > From: Robby Findler <robby@eecs.northwestern.edu=C2=A0<http://mc/compose?=
 to=3Drobby@eecs.northwestern.edu>>
 > Subject: Re: [racket-bug] all/11381: Racket stopped displaying text in co=
 lors
 > To: "Alejandro Canales" <chlorf@yahoo.com=C2=A0<http://mc/compose?to=3Dch=
 lorf@yahoo.com>>
 > Cc: bugs@racket-lang.org=C2=A0<http://mc/compose?to=3Dbugs@racket-lang.or=
 g>, bug-notification@racket-lang.org
 > Date: Tuesday, November 2, 2010, 8:46 PM
 >
 >
 > What happens if you click
 >  the "white on black" and then click the "black on white" button in the c=
 olor section of the preferences dialog?
 > Robby
 >
 > On Tue, Nov 2, 2010 at 8:18 PM, Alejandro Canales <chlorf@yahoo.com=C2=A0=
 <http://mc/compose?to=3Dchlorf@yahoo.com>> wrote:
 > Wait, text displays in color normally, just comments are black. All color=
  settings are still default though, so the comments should be a brownish ye=
 llow. I checked the settings, the comments should definitely be in yellow.
 >
 >
 > I am using Windows XP.
 >
 > --- On Tue, 11/2/10, bugs@racket-lang.org=C2=A0<http://mc/compose?to=3Dbu=
 gs@racket-lang.org> <bugs@racket-lang.org=C2=A0<http://mc/compose?to=3Dbugs=
 @racket-lang.org>> wrote:
 >
 > From: bugs@racket-lang.org=C2=A0<http://mc/compose?to=3Dbugs@racket-lang.=
 org> <bugs@racket-lang.org=C2=A0<http://mc/compose?to=3Dbugs@racket-lang.or=
 g>>
 > Subject: Re: [racket-bug] all/11381: Racket stopped displaying text in co=
 lors
 > To: chlorf@yahoo.com=C2=A0<http://mc/compose?to=3Dchlorf@yahoo.com>
 > Date: Tuesday, November 2, 2010, 8:16 PM
 >
 > Thank you very much for your problem report.
 > It has the internal identification `all/11381'.
 > You can check on the status of your problem report at
 > =C2=A0 http://bugs.racket-lang.org/query/?cmd=3Dview&pr=3D11381
 >
 > If you wish to provide further information regarding this problem
 > you can do so as a reply to this message.=C2=A0 (But please make sure
 > that your mailer replies to both "bugs" and "bug-notification".)
 >
 >
 >
 >
 >
 >
 >
 >
 >

From: Robby Findler <robby@eecs.northwestern.edu>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: bugs <bugs@racket-lang.org>
Subject: Re: [racket-bug] all/11381: Racket stopped displaying text in colors
Date: Mon, 24 Jan 2011 14:24:03 -0600

 http://bugs.racket-lang.org/query/?cmd=view&pr=11381
From: Robby Findler <robby@eecs.northwestern.edu>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: bugs <bugs@racket-lang.org>
Subject: Re: [racket-bug] all/11381: Racket stopped displaying text in colors
Date: Mon, 24 Jan 2011 14:33:08 -0600

 Argh. Sorry. I meant to actually write a message in that last message...
 
 On Mon, Jan 24, 2011 at 2:24 PM, Robby Findler
 <robby@eecs.northwestern.edu> wrote:
 > http://bugs.racket-lang.org/query/?cmd=view&pr=11381
 >
 
 The PR above seems to boil down to the module-lexer not respecting the
 invariant documented in third bullet in the second set of bullets
 (some might call that the 8th bullet) in the docs for start-colorer:
 
 http://docs.racket-lang.org/framework/Color.html?q=color-text#%28meth._%28%28%28lib._framework/main..rkt%29._color~3atext~3c~25~3e%29._start-colorer%29%29
 
 In particular, consider this sequence of edits. Say the contents of
 the definitions window was the same as the contents of this string
 (ie, display the string to get the contents of the editor):
 
   ";; abc\n#lang racket\n;; def"
 
 things are fine here. Now add a semicolon to get this:
 
 
   ";; abc\n;#lang racket\n;; def"
 
 at this point, the colorer gives up and starts using the scheme-lexer
 (the case on line 42 in syntax-color/module-lexer.rkt). The
 scheme-lexer says that there are two tokens in the first two lines,
 both comments, the second one starting on line 6.
 
 Now remove that semicolon, going back to the original.
 
 At this point, the module lexer would have to be called with position
 0, but it is instead called with position 6 and the buffer is colored
 incorrectly (the comment above the #lang line stays yellow instead of
 turning back to black).
 
 I don't see a particularly good way to fix this, since a fix would
 seem to require that calling read-language on any change to the editor
 when it is in "give up" mode... well, maybe that's not so bad, after
 all this is the module language we're talking about so there really
 should be a #lang line there. ... well, what about (module ..)? Maybe
 if the module-lexer knew about "(module" too, then it could avoid
 calling read-language all the time.
 
 Opinions?
 
 Robby
From: Robby Findler <robby@eecs.northwestern.edu>
To: Matthew Flatt <mflatt@cs.utah.edu>
Cc: bugs <bugs@racket-lang.org>
Subject: Re: [racket-bug] all/11381: Racket stopped displaying text in colors
Date: Mon, 24 Jan 2011 16:52:08 -0600

 Maybe the right thing is for the module-lexer to explicit track all of
 the initial comments (that has the bonus that they can all be colored
 comment color, instead of black) and then defer to the scheme lexer
 after that. That way it can manage the backing-up information
 properly.
 
 I'll think about that more and, if it sounds ok to you, give it a try.
 
 Robby
 
 On Mon, Jan 24, 2011 at 2:33 PM, Robby Findler
 <robby@eecs.northwestern.edu> wrote:
 > Argh. Sorry. I meant to actually write a message in that last message...
 >
 > On Mon, Jan 24, 2011 at 2:24 PM, Robby Findler
 > <robby@eecs.northwestern.edu> wrote:
 >> http://bugs.racket-lang.org/query/?cmd=3Dview&pr=3D11381
 >>
 >
 > The PR above seems to boil down to the module-lexer not respecting the
 > invariant documented in third bullet in the second set of bullets
 > (some might call that the 8th bullet) in the docs for start-colorer:
 >
 > http://docs.racket-lang.org/framework/Color.html?q=3Dcolor-text#%28meth._=
 %28%28%28lib._framework/main..rkt%29._color~3atext~3c~25~3e%29._start-color=
 er%29%29
 >
 > In particular, consider this sequence of edits. Say the contents of
 > the definitions window was the same as the contents of this string
 > (ie, display the string to get the contents of the editor):
 >
 > =C2=A0";; abc\n#lang racket\n;; def"
 >
 > things are fine here. Now add a semicolon to get this:
 >
 >
 > =C2=A0";; abc\n;#lang racket\n;; def"
 >
 > at this point, the colorer gives up and starts using the scheme-lexer
 > (the case on line 42 in syntax-color/module-lexer.rkt). The
 > scheme-lexer says that there are two tokens in the first two lines,
 > both comments, the second one starting on line 6.
 >
 > Now remove that semicolon, going back to the original.
 >
 > At this point, the module lexer would have to be called with position
 > 0, but it is instead called with position 6 and the buffer is colored
 > incorrectly (the comment above the #lang line stays yellow instead of
 > turning back to black).
 >
 > I don't see a particularly good way to fix this, since a fix would
 > seem to require that calling read-language on any change to the editor
 > when it is in "give up" mode... well, maybe that's not so bad, after
 > all this is the module language we're talking about so there really
 > should be a #lang line there. ... well, what about (module ..)? Maybe
 > if the module-lexer knew about "(module" too, then it could avoid
 > calling read-language all the time.
 >
 > Opinions?
 >
 > Robby
 >
State changed from "open" to "closed" by robby@racket-lang.org at Wed, 09 Feb 2011 16:27:39 -0500
Reason>>> A commit by robby@racket-lang.org has resolved this report
  http://git.racket-lang.org/plt/commit/d659d2f0af
