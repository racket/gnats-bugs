From bugs+caf_=bugs=bugs.plt-scheme.org@plt-scheme.org Fri Nov 13 15:53:03 2009
Received: from mail-yw0-f183.google.com (mail-yw0-f183.google.com [209.85.211.183])
	by champlain.ccs.neu.edu (8.14.2/8.14.2) with ESMTP id nADKqxPv016680
	for <bugs@bugs.plt-scheme.org>; Fri, 13 Nov 2009 15:52:59 -0500
Message-Id: <200911132052.nADKqvB8016674@champlain.ccs.neu.edu>
Date: Fri, 13 Nov 2009 15:52:57 -0500
From: cce@ccs.neu.edu
To: bugs@plt-scheme.org
Subject: REPL does not display results of multiple terms inside begin

>Number:         10575
>Category:       mzscheme
>Synopsis:       REPL does not display results of multiple terms inside begin
>Class:          sw-bug
>Responsible:    mflatt
>Severity:       serious
>Priority:       medium
>State:          open
>Confidential:   no
>Arrival-Date:   Fri Nov 13 15:56:01 -0500 2009
>Last-Modified:  Thu May 12 17:17:42 -0400 2011
>Originator:     Carl Eastlund
>Organization:
plt
>Submitter-Id:   unknown
>Release:        4.2.2.6-svn11nov2009
>Environment:
macosx "Darwin Kauai.ccs.neu.edu 9.7.0 Darwin Kernel Version 9.7.0: Tue Mar 31 22:54:29 PDT 2009; root:xnu-1228.12.14~1/RELEASE_PPC Power Macintosh" (ppc-macosx/3m) (get-display-depth) = 32
Human Language: english
(current-memory-use) 111275120

Collections:
(("/Users/cce/Library/PLT Scheme/4.2.2.6/collects" non-existent-path) ("/Users/cce/plt/2009-11-11/collects" ".svn" "2htdp" "afm" "algol60" "at-exp" "browser" "combinator-parser" "compiler" "config" "defaults" "deinprogramm" "drscheme" "dynext" "embedded-gui" "eopl" "errortrace" "ffi" "file" "framework" "frtime" "games" "graphics" "gui-debugger" "guibuilder" "handin-client" "handin-server" "help" "hierlist" "honu" "htdp" "html" "icons" "info-domain" "lang" "launcher" "lazy" "macro-debugger" "make" "mred" "mrlib" "mysterx" "mzcom" "mzlib" "mzscheme" "net" "openssl" "parser-tools" "planet" "plot" "preprocessor" "profile" "r5rs" "r6rs" "reader" "readline" "redex" "repos-time-stamp" "rnrs" "s-exp" "scheme" "schemeunit" "scribble" "scribblings" "scriblib" "setup" "sgl" "sirmail" "slatex" "slideshow" "srfi" "srpersist" "stepper" "string-constants" "swindle" "syntax" "syntax-color" "teachpack" "test-box-recovery" "test-engine" "tests" "tex2page" "texpict" "trace" "typed" "typed-sche!
 me" "unstable" "version" "waterworld" "web-server" "wxme" "xml"))
Computer Language: (("Module") (#(#t write mixed-fraction-e #f #t debug) (default) #() "#lang scheme\n" #f))
>Description:
If I write the following in the definitions window:

#lang scheme
(begin 1 (define x 2) 3)

...then at the repl I see:

1
3

Both results get printed out.  But if I write at the repl:

(begin 4 (define y 5) 6)

...the 4 gets dropped and I only see:

6

I have included the `define' forms to make it clear this is not expression-begin, which discards results.  This is an issue of the definitions window and the interactions window being inconsistent about what values are printed and what values are not.  I would prefer to see the interactions window change to print out all values generated by a given term, so that (begin 4 6) should print out "4\n6\n".

As a side effect, this would make manual transformation of sequences of expressions easier to write -- for instance, (begin 1 (begin 2 (begin))) would be equivalent to (begin 1 2).  Currently this is not the case at the REPL; even though the final (begin) is "spliced away", it "swallows up" the result of the 2.  Transformers have to be careful to identify the final term and treat it specially, which is at the very least annoying.
>How-To-Repeat:
>Fix:
>Audit-Trail:
From: Robby Findler <robby@eecs.northwestern.edu>
To: cce@ccs.neu.edu, bugs@plt-scheme.org
Cc: nobody@plt-scheme.org, bug-notification@plt-scheme.org
Subject: Re: [plt-bug] all/10575: REPL does not display results of multiple 
	terms inside begin
Date: Tue, 16 Feb 2010 14:40:27 -0600

 I'm not sure where in the particular chain of handlers splicing isn't
 happening, but I'll note that drscheme follows mzscheme, so I won't
 make changes to drs until mz changes.
 
 $ mzscheme
 Welcome to MzScheme v4.2.4.2 [3m], Copyright (c) 2004-2010 PLT Scheme Inc.
 > (begin 1 (define x 2) 3)
 3
 > ^D
 
 Robby
 
 On Fri, Nov 13, 2009 at 2:56 PM,  <cce@ccs.neu.edu> wrote:
 > A new problem report is waiting at
 > =C2=A0http://bugs.plt-scheme.org/query/?cmd=3Dview&pr=3D10575
 >
 > Reported by Carl Eastlund for release: 4.2.2.6-svn11nov2009
 >
 > *** Description:
 > If I write the following in the definitions window:
 >
 > #lang scheme
 > (begin 1 (define x 2) 3)
 >
 > ...then at the repl I see:
 >
 > 1
 > 3
 >
 > Both results get printed out. =C2=A0But if I write at the repl:
 >
 > (begin 4 (define y 5) 6)
 >
 > ...the 4 gets dropped and I only see:
 >
 > 6
 >
 > I have included the `define' forms to make it clear this is not expressio=
 n-begin, which discards results. =C2=A0This is an issue of the definitions =
 window and the interactions window being inconsistent about what values are=
  printed and what values are not. =C2=A0I would prefer to see the interacti=
 ons window change to print out all values generated by a given term, so tha=
 t (begin 4 6) should print out "4\n6\n".
 >
 > As a side effect, this would make manual transformation of sequences of e=
 xpressions easier to write -- for instance, (begin 1 (begin 2 (begin))) wou=
 ld be equivalent to (begin 1 2). =C2=A0Currently this is not the case at th=
 e REPL; even though the final (begin) is "spliced away", it "swallows up" t=
 he result of the 2. =C2=A0Transformers have to be careful to identify the f=
 inal term and treat it specially, which is at the very least annoying.
 >
 > *** How to repeat:
 >
 >
 > *** Environment:
 > macosx "Darwin Kauai.ccs.neu.edu 9.7.0 Darwin Kernel Version 9.7.0: Tue M=
 ar 31 22:54:29 PDT 2009; root:xnu-1228.12.14~1/RELEASE_PPC Power Macintosh"=
  (ppc-macosx/3m) (get-display-depth) =3D 32
 > Human Language: english
 > (current-memory-use) 111275120
 >
 > Collections:
 > (("/Users/cce/Library/PLT Scheme/4.2.2.6/collects" non-existent-path) ("/=
 Users/cce/plt/2009-11-11/collects" ".svn" "2htdp" "afm" "algol60" "at-exp" =
 "browser" "combinator-parser" "compiler" "config" "defaults" "deinprogramm"=
  "drscheme" "dynext" "embedded-gui" "eopl" "errortrace" "ffi" "file" "frame=
 work" "frtime" "games" "graphics" "gui-debugger" "guibuilder" "handin-clien=
 t" "handin-server" "help" "hierlist" "honu" "htdp" "html" "icons" "info-dom=
 ain" "lang" "launcher" "lazy" "macro-debugger" "make" "mred" "mrlib" "myste=
 rx" "mzcom" "mzlib" "mzscheme" "net" "openssl" "parser-tools" "planet" "plo=
 t" "preprocessor" "profile" "r5rs" "r6rs" "reader" "readline" "redex" "repo=
 s-time-stamp" "rnrs" "s-exp" "scheme" "schemeunit" "scribble" "scribblings"=
  "scriblib" "setup" "sgl" "sirmail" "slatex" "slideshow" "srfi" "srpersist"=
  "stepper" "string-constants" "swindle" "syntax" "syntax-color" "teachpack"=
  "test-box-recovery" "test-engine" "tests" "tex2page" "texpict" "trace" "ty=
 ped" "typed-sche!
 > =C2=A0me" "unstable" "version" "waterworld" "web-server" "wxme" "xml"))
 > Computer Language: (("Module") (#(#t write mixed-fraction-e #f #t debug) =
 (default) #() "#lang scheme\n" #f))
 >
 >

