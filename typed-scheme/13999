From bugs+caf_=bugs=bugs.plt-scheme.org@plt-scheme.org Wed Sep  4 17:19:39 2013
Received: from mail-ob0-f180.google.com (mail-ob0-f180.google.com [209.85.214.180])
	by champlain.ccs.neu.edu (8.14.4/8.14.4) with ESMTP id r84LJYWv017139
	for <bugs@bugs.plt-scheme.org>; Wed, 4 Sep 2013 17:19:34 -0400
Message-Id: <201309042119.r84LJW5n017133@champlain.ccs.neu.edu>
Date: Wed, 4 Sep 2013 17:19:32 -0400
From: greghendershott@gmail.com
To: bugs@racket-lang.org
Subject: opt-lambda: doesn't seem to permit optional arguments

>Number:         13999
>Category:       typed-scheme
>Synopsis:       opt-lambda: doesn't seem to permit optional arguments
>Class:          sw-bug
>Responsible:    samth
>Severity:       serious
>Priority:       medium
>State:          closed
>Confidential:   no
>Arrival-Date:   Wed Sep 04 17:20:01 -0400 2013
>Closed-Date:    Wed Feb 19 21:01:53 -0500 2014
>Last-Modified:  Wed Feb 19 21:04:01 -0500 2014
>Originator:     Greg Hendershott
>Organization:
plt
>Submitter-Id:   unknown
>Release:        5.90.0.7--2013-08-19(a212241/a)
>Environment:
macosx "Darwin mbp.local 11.4.2 Darwin Kernel Version 11.4.2: Thu Aug 23 16:25:48 PDT 2012; root:xnu-1699.32.7~1/RELEASE_X86_64 x86_64" (x86_64-macosx/3m) (get-display-depth) = 32
Human Language: english
(current-memory-use) 566810328
Links: (links) = (); (links #:user? #f) = ("contract-profile" "math" "mysterx" "sgl" "datalog" "shell-completion" "algol60" "icons" "frtime" "unstable" "slatex" "realm" "games" "plot" "trace" "eopl" "lazy" "preprocessor" "db" "images" "mzcom" "racklog" "swindle" "schemeunit" "plai" "ds-store" "deinprogramm" "make"); (links #:root? #t) = (); (links #:user? #f #:root? #t) = (#<path:/Applications/Racket_v5.90.0.7/share/pkgs/main-distribution> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/racket-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/at-exp-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/compatibility> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/data-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/draw> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/draw-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/draw-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/drracket> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/errortrace> #<path:!
 /Applications/Racket_v5.90.0.7/share/pkgs/future-visualizer> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/future-visualizer-typed> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/gui> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/htdp> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/html> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/macro-debugger> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/macro-debugger-text-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/mzscheme> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/parser-tools> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/pconvert-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/pict> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/picturing-programs> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/profile> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/r5rs> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/r6rs> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/racket-doc> #<path:/Appl!
 ications/Racket_v5.90.0.7/share/pkgs/distributed-places-doc> #!
 <path:/Applications/Racket_v5.90.0.7/share/pkgs/racket-index> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/rackunit> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/readline> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/redex> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/sandbox-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/scribble> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/slideshow> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/snip> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/srfi> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/string-constants-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/syntax-color> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/typed-racket> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/typed-racket-more> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-contract-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-latent-!
 contract-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-list-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-options-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-parameter-group-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/web-server> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/wxme> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/xrepl> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/base> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/compatibility-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/drracket-plugin-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/errortrace-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/gui-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/parser-tools-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/rackunit-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/scribble-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/scribble-lib> #<path:/Appl!
 ications/Racket_v5.90.0.7/share/pkgs/compatibility-doc> #<path:/Applica!
 tions/Racket_v5.90.0.7/share/pkgs/profile-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/db-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/db-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/srfi-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/wxme-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/gui-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/pict-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/pict-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/draw-x86_64-macosx> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/compiler-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/planet-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/snip-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/typed-racket-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/html-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/net-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/srfi-doc> #<path:/Applications/Racket_v5.90.0.7/!
 share/pkgs/gui-pkg-manager-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/errortrace-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/profile-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/r5rs-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/htdp-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/htdp-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/html-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/slideshow-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/typed-racket-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/slideshow-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/eli-tester> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/r6rs-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/math-x86_64-macosx> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/parser-tools-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/web-server-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/web-server-doc> #<path:/Appl!
 ications/Racket_v5.90.0.7/share/pkgs/unstable-flonum-lib> #<path:/Appli!
 cations/Racket_v5.90.0.7/share/pkgs/r5rs-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/r6rs-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/distributed-places-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/rackunit-plugin-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/readline-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/readline-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/redex-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/redex-examples> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/redex-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/slideshow-exe> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/slideshow-plugin> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/syntax-color-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/syntax-color-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/xrepl-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/xrepl-doc> #<path:/Applications/Racket_v5.90.0.7/share/!
 pkgs/gui-x86_64-macosx> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/scribble-text-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-debug-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-macro-testing-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-pretty-lib>)
raco pkg (show):
Installation-wide:
 Package              Checksum                                    Source
 main-distribution    87da68f0fd76d01bfd3877e25484c7cb473f5dc7    (catalog main-distribution)
 racket-lib           ab97208a7cbba149b212fe92bbdbe7cf318492a7    (catalog racket-lib)
 [143 auto-installed packages not shown]
User-specific for installation "snapshot":
 [none]



Collections:
("/Users/greg/Library/Racket/snapshot/collects"
 (non-existent-path))
("/Applications/Racket_v5.90.0.7/collects"
 (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "rackunit" "raco" "reader" "s-exp" "scheme" "setup" "srfi" "syntax" "unstable" "version" "xml"))

Recent Internal Errors: 
Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default "/Users/greg/src/scheme/collects") #() "#lang racket\n" #f #t ((main) (test)) #t))
>Description:
Using `opt-lambda:` without optional arguments type-checks and runs correctly:

#lang typed/racket
(define mult
  (opt-lambda: ([x : Number][y : Number]) 
    (* x y)))
(mult 1 2)
=> 2

But using `opt-lambda:` to define, well, optional arguments does not -- let's add a default value of `1` for the last argument, `y`:

#lang typed/racket
(define mult
  (opt-lambda: ([x : Number][y : Number 1]) 
    (* x y)))
(mult 1 2)
=>
Type Checker: No function domains matched in function application:
Domains: Number False False
         Number Number True
Arguments: Number Any True
 in: (opt-lambda: ((x : Number) (y : Number 1)) (* x y))

If this is expected behavior not a bug, then I'd like this PR to be, "Please include an example of how to use `opt-lambda:` to do this".
>How-To-Repeat:
>Fix:
>Audit-Trail:
From: Robby Findler <robby@eecs.northwestern.edu>
To: Sam Tobin-Hochstadt <samth@cs.indiana.edu>
Cc: greghendershott@email.com, bugs <bugs@racket-lang.org>,
        nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13999: opt-lambda: doesn't seem to permit
 optional arguments
Date: Wed, 4 Sep 2013 16:27:01 -0500

 --047d7b33d4a850d31b04e5957792
 Content-Type: text/plain; charset=UTF-8
 
 It seems hard to get from the given program and its error message to one
 that works, tho.
 
 Robby
 
 
 On Wed, Sep 4, 2013 at 4:25 PM, Sam Tobin-Hochstadt <samth@cs.indiana.edu>wrote:
 
 > This example seems to work for me:
 >
 > https://github.com/plt/racket/blob/master/pkgs/typed-racket-pkgs/typed-racket-test/tests/typed-racket/succeed/opt-lambda.rkt
 >
 > It may be that you need the additional case-> annotation.
 >
 > Sam
 >
 > On Wed, Sep 4, 2013 at 5:20 PM,  <greghendershott@email.com> wrote:
 > > A new problem report is waiting at
 > >   http://bugs.racket-lang.org/query/?cmd=view&pr=13999
 > >
 > > Reported by Greg Hendershott for release: 5.90.0.7--2013-08-19(a212241/a)
 > >
 > > *** Description:
 > > Using `opt-lambda:` without optional arguments type-checks and runs
 > correctly:
 > >
 > > #lang typed/racket
 > > (define mult
 > >   (opt-lambda: ([x : Number][y : Number])
 > >     (* x y)))
 > > (mult 1 2)
 > > => 2
 > >
 > > But using `opt-lambda:` to define, well, optional arguments does not --
 > let's add a default value of `1` for the last argument, `y`:
 > >
 > > #lang typed/racket
 > > (define mult
 > >   (opt-lambda: ([x : Number][y : Number 1])
 > >     (* x y)))
 > > (mult 1 2)
 > > =>
 > > Type Checker: No function domains matched in function application:
 > > Domains: Number False False
 > >          Number Number True
 > > Arguments: Number Any True
 > >  in: (opt-lambda: ((x : Number) (y : Number 1)) (* x y))
 > >
 > > If this is expected behavior not a bug, then I'd like this PR to be,
 > "Please include an example of how to use `opt-lambda:` to do this".
 > >
 > > *** How to repeat:
 > >
 > >
 > > *** Environment:
 > > macosx "Darwin mbp.local 11.4.2 Darwin Kernel Version 11.4.2: Thu Aug 23
 > 16:25:48 PDT 2012; root:xnu-1699.32.7~1/RELEASE_X86_64 x86_64"
 > (x86_64-macosx/3m) (get-display-depth) = 32
 > > Human Language: english
 > > (current-memory-use) 566810328
 > > Links: (links) = (); (links #:user? #f) = ("contract-profile" "math"
 > "mysterx" "sgl" "datalog" "shell-completion" "algol60" "icons" "frtime"
 > "unstable" "slatex" "realm" "games" "plot" "trace" "eopl" "lazy"
 > "preprocessor" "db" "images" "mzcom" "racklog" "swindle" "schemeunit"
 > "plai" "ds-store" "deinprogramm" "make"); (links #:root? #t) = (); (links
 > #:user? #f #:root? #t) =
 > (#<path:/Applications/Racket_v5.90.0.7/share/pkgs/main-distribution>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/racket-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/at-exp-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/compatibility>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/data-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/draw>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/draw-doc>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/draw-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/drracket>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/errortrace> #<path:!
 > >  /Applications/Racket_v5.90.0.7/share/pkgs/future-visualizer>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/future-visualizer-typed>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/gui>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/htdp>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/html>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/macro-debugger>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/macro-debugger-text-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/mzscheme>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/parser-tools>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/pconvert-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/pict>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/picturing-programs>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/profile>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/r5rs>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/r6rs>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/racket-doc> #<path:/Appl!
 > >  ications/Racket_v5.90.0.7/share/pkgs/distributed-places-doc> #!
 > >  <path:/Applications/Racket_v5.90.0.7/share/pkgs/racket-index>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/rackunit>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/readline>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/redex>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/sandbox-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/scribble>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/slideshow>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/snip>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/srfi>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/string-constants-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/syntax-color>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/typed-racket>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/typed-racket-more>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-contract-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-latent-!
 > >  contract-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-list-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-options-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-parameter-group-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/web-server>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/wxme>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/xrepl>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/base>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/compatibility-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/drracket-plugin-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/errortrace-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/gui-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/parser-tools-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/rackunit-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/scribble-doc>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/scribble-lib> #<path:/Appl!
 > >  ications/Racket_v5.90.0.7/share/pkgs/compatibility-doc> #<path:/Applica!
 > >  tions/Racket_v5.90.0.7/share/pkgs/profile-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/db-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/db-doc>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/srfi-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/wxme-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/gui-doc>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/pict-doc>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/pict-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/draw-x86_64-macosx>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/compiler-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/planet-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/snip-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/typed-racket-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/html-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/net-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/srfi-doc>
 > #<path:/Applications/Racket_v5.90.0.7/!
 > >  share/pkgs/gui-pkg-manager-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/errortrace-doc>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/profile-doc>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/r5rs-doc>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/htdp-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/htdp-doc>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/html-doc>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/slideshow-doc>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/typed-racket-doc>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/slideshow-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/eli-tester>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/r6rs-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/math-x86_64-macosx>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/parser-tools-doc>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/web-server-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/web-server-doc>
 > #<path:/Appl!
 > >  ications/Racket_v5.90.0.7/share/pkgs/unstable-flonum-lib> #<path:/Appli!
 > >  cations/Racket_v5.90.0.7/share/pkgs/r5rs-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/r6rs-doc>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/distributed-places-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/rackunit-plugin-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/readline-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/readline-doc>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/redex-doc>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/redex-examples>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/redex-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/slideshow-exe>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/slideshow-plugin>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/syntax-color-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/syntax-color-doc>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/xrepl-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/xrepl-doc>
 > #<path:/Applications/Racket_v5.90.0.7/share/!
 > >  pkgs/gui-x86_64-macosx>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/scribble-text-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-debug-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-macro-testing-lib>
 > #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-pretty-lib>)
 > > raco pkg (show):
 > > Installation-wide:
 > >  Package              Checksum                                    Source
 > >  main-distribution    87da68f0fd76d01bfd3877e25484c7cb473f5dc7
 >  (catalog main-distribution)
 > >  racket-lib           ab97208a7cbba149b212fe92bbdbe7cf318492a7
 >  (catalog racket-lib)
 > >  [143 auto-installed packages not shown]
 > > User-specific for installation "snapshot":
 > >  [none]
 > >
 > >
 > >
 > > Collections:
 > > ("/Users/greg/Library/Racket/snapshot/collects"
 > >  (non-existent-path))
 > > ("/Applications/Racket_v5.90.0.7/collects"
 > >  (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file"
 > "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet"
 > "racket" "rackunit" "raco" "reader" "s-exp" "scheme" "setup" "srfi"
 > "syntax" "unstable" "version" "xml"))
 > >
 > > Recent Internal Errors:
 > > Computer Language: (("Determine language from source") (#(#t print
 > mixed-fraction-e #f #t debug) (default "/Users/greg/src/scheme/collects")
 > #() "#lang racket\n" #f #t ((main) (test)) #t))
 > >
 >
 
 --047d7b33d4a850d31b04e5957792
 Content-Type: text/html; charset=UTF-8
 Content-Transfer-Encoding: quoted-printable
 
 <div dir=3D"ltr">It seems hard to get from the given program and its error =
 message to one that works, tho.<div><br></div><div>Robby</div></div><div cl=
 ass=3D"gmail_extra"><br><br><div class=3D"gmail_quote">On Wed, Sep 4, 2013 =
 at 4:25 PM, Sam Tobin-Hochstadt <span dir=3D"ltr">&lt;<a href=3D"mailto:sam=
 th@cs.indiana.edu" target=3D"_blank">samth@cs.indiana.edu</a>&gt;</span> wr=
 ote:<br>
 <blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
 x #ccc solid;padding-left:1ex">This example seems to work for me:<br>
 <a href=3D"https://github.com/plt/racket/blob/master/pkgs/typed-racket-pkgs=
 /typed-racket-test/tests/typed-racket/succeed/opt-lambda.rkt" target=3D"_bl=
 ank">https://github.com/plt/racket/blob/master/pkgs/typed-racket-pkgs/typed=
 -racket-test/tests/typed-racket/succeed/opt-lambda.rkt</a><br>
 
 <br>
 It may be that you need the additional case-&gt; annotation.<br>
 <span class=3D"HOEnZb"><font color=3D"#888888"><br>
 Sam<br>
 </font></span><div class=3D"HOEnZb"><div class=3D"h5"><br>
 On Wed, Sep 4, 2013 at 5:20 PM, =C2=A0&lt;<a href=3D"mailto:greghendershott=
 @email.com">greghendershott@email.com</a>&gt; wrote:<br>
 &gt; A new problem report is waiting at<br>
 &gt; =C2=A0 <a href=3D"http://bugs.racket-lang.org/query/?cmd=3Dview&amp;pr=
 =3D13999" target=3D"_blank">http://bugs.racket-lang.org/query/?cmd=3Dview&a=
 mp;pr=3D13999</a><br>
 &gt;<br>
 &gt; Reported by Greg Hendershott for release: 5.90.0.7--2013-08-19(a212241=
 /a)<br>
 &gt;<br>
 &gt; *** Description:<br>
 &gt; Using `opt-lambda:` without optional arguments type-checks and runs co=
 rrectly:<br>
 &gt;<br>
 &gt; #lang typed/racket<br>
 &gt; (define mult<br>
 &gt; =C2=A0 (opt-lambda: ([x : Number][y : Number])<br>
 &gt; =C2=A0 =C2=A0 (* x y)))<br>
 &gt; (mult 1 2)<br>
 &gt; =3D&gt; 2<br>
 &gt;<br>
 &gt; But using `opt-lambda:` to define, well, optional arguments does not -=
 - let&#39;s add a default value of `1` for the last argument, `y`:<br>
 &gt;<br>
 &gt; #lang typed/racket<br>
 &gt; (define mult<br>
 &gt; =C2=A0 (opt-lambda: ([x : Number][y : Number 1])<br>
 &gt; =C2=A0 =C2=A0 (* x y)))<br>
 &gt; (mult 1 2)<br>
 &gt; =3D&gt;<br>
 &gt; Type Checker: No function domains matched in function application:<br>
 &gt; Domains: Number False False<br>
 &gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Number Number True<br>
 &gt; Arguments: Number Any True<br>
 &gt; =C2=A0in: (opt-lambda: ((x : Number) (y : Number 1)) (* x y))<br>
 &gt;<br>
 &gt; If this is expected behavior not a bug, then I&#39;d like this PR to b=
 e, &quot;Please include an example of how to use `opt-lambda:` to do this&q=
 uot;.<br>
 &gt;<br>
 &gt; *** How to repeat:<br>
 &gt;<br>
 &gt;<br>
 &gt; *** Environment:<br>
 &gt; macosx &quot;Darwin mbp.local 11.4.2 Darwin Kernel Version 11.4.2: Thu=
  Aug 23 16:25:48 PDT 2012; root:xnu-1699.32.7~1/RELEASE_X86_64 x86_64&quot;=
  (x86_64-macosx/3m) (get-display-depth) =3D 32<br>
 &gt; Human Language: english<br>
 &gt; (current-memory-use) 566810328<br>
 &gt; Links: (links) =3D (); (links #:user? #f) =3D (&quot;contract-profile&=
 quot; &quot;math&quot; &quot;mysterx&quot; &quot;sgl&quot; &quot;datalog&qu=
 ot; &quot;shell-completion&quot; &quot;algol60&quot; &quot;icons&quot; &quo=
 t;frtime&quot; &quot;unstable&quot; &quot;slatex&quot; &quot;realm&quot; &q=
 uot;games&quot; &quot;plot&quot; &quot;trace&quot; &quot;eopl&quot; &quot;l=
 azy&quot; &quot;preprocessor&quot; &quot;db&quot; &quot;images&quot; &quot;=
 mzcom&quot; &quot;racklog&quot; &quot;swindle&quot; &quot;schemeunit&quot; =
 &quot;plai&quot; &quot;ds-store&quot; &quot;deinprogramm&quot; &quot;make&q=
 uot;); (links #:root? #t) =3D (); (links #:user? #f #:root? #t) =3D (#&lt;p=
 ath:/Applications/Racket_v5.90.0.7/share/pkgs/main-distribution&gt; #&lt;pa=
 th:/Applications/Racket_v5.90.0.7/share/pkgs/racket-lib&gt; #&lt;path:/Appl=
 ications/Racket_v5.90.0.7/share/pkgs/at-exp-lib&gt; #&lt;path:/Applications=
 /Racket_v5.90.0.7/share/pkgs/compatibility&gt; #&lt;path:/Applications/Rack=
 et_v5.90.0.7/share/pkgs/data-lib&gt; #&lt;path:/Applications/Racket_v5.90.0=
 .7/share/pkgs/draw&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/=
 draw-doc&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/draw-lib&g=
 t; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/drracket&gt; #&lt;pa=
 th:/Applications/Racket_v5.90.0.7/share/pkgs/errortrace&gt; #&lt;path:!<br>
 
 &gt; =C2=A0/Applications/Racket_v5.90.0.7/share/pkgs/future-visualizer&gt; =
 #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/future-visualizer-typed=
 &gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/gui&gt; #&lt;path:=
 /Applications/Racket_v5.90.0.7/share/pkgs/htdp&gt; #&lt;path:/Applications/=
 Racket_v5.90.0.7/share/pkgs/html&gt; #&lt;path:/Applications/Racket_v5.90.0=
 .7/share/pkgs/macro-debugger&gt; #&lt;path:/Applications/Racket_v5.90.0.7/s=
 hare/pkgs/macro-debugger-text-lib&gt; #&lt;path:/Applications/Racket_v5.90.=
 0.7/share/pkgs/mzscheme&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/=
 pkgs/parser-tools&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/p=
 convert-lib&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/pict&gt=
 ; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/picturing-programs&gt=
 ; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/profile&gt; #&lt;path=
 :/Applications/Racket_v5.90.0.7/share/pkgs/r5rs&gt; #&lt;path:/Applications=
 /Racket_v5.90.0.7/share/pkgs/r6rs&gt; #&lt;path:/Applications/Racket_v5.90.=
 0.7/share/pkgs/racket-doc&gt; #&lt;path:/Appl!<br>
 
 &gt; =C2=A0ications/Racket_v5.90.0.7/share/pkgs/distributed-places-doc&gt; =
 #!<br>
 &gt; =C2=A0&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/racket-index&=
 gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/rackunit&gt; #&lt;p=
 ath:/Applications/Racket_v5.90.0.7/share/pkgs/readline&gt; #&lt;path:/Appli=
 cations/Racket_v5.90.0.7/share/pkgs/redex&gt; #&lt;path:/Applications/Racke=
 t_v5.90.0.7/share/pkgs/sandbox-lib&gt; #&lt;path:/Applications/Racket_v5.90=
 .0.7/share/pkgs/scribble&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share=
 /pkgs/slideshow&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/sni=
 p&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/srfi&gt; #&lt;pat=
 h:/Applications/Racket_v5.90.0.7/share/pkgs/string-constants-lib&gt; #&lt;p=
 ath:/Applications/Racket_v5.90.0.7/share/pkgs/syntax-color&gt; #&lt;path:/A=
 pplications/Racket_v5.90.0.7/share/pkgs/typed-racket&gt; #&lt;path:/Applica=
 tions/Racket_v5.90.0.7/share/pkgs/typed-racket-more&gt; #&lt;path:/Applicat=
 ions/Racket_v5.90.0.7/share/pkgs/unstable&gt; #&lt;path:/Applications/Racke=
 t_v5.90.0.7/share/pkgs/unstable-contract-lib&gt; #&lt;path:/Applications/Ra=
 cket_v5.90.0.7/share/pkgs/unstable-latent-!<br>
 
 &gt; =C2=A0contract-lib&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/=
 pkgs/unstable-list-lib&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/p=
 kgs/unstable-options-lib&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share=
 /pkgs/unstable-parameter-group-lib&gt; #&lt;path:/Applications/Racket_v5.90=
 .0.7/share/pkgs/web-server&gt; #&lt;path:/Applications/Racket_v5.90.0.7/sha=
 re/pkgs/wxme&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/xrepl&=
 gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/base&gt; #&lt;path:=
 /Applications/Racket_v5.90.0.7/share/pkgs/compatibility-lib&gt; #&lt;path:/=
 Applications/Racket_v5.90.0.7/share/pkgs/drracket-plugin-lib&gt; #&lt;path:=
 /Applications/Racket_v5.90.0.7/share/pkgs/errortrace-lib&gt; #&lt;path:/App=
 lications/Racket_v5.90.0.7/share/pkgs/gui-lib&gt; #&lt;path:/Applications/R=
 acket_v5.90.0.7/share/pkgs/parser-tools-lib&gt; #&lt;path:/Applications/Rac=
 ket_v5.90.0.7/share/pkgs/rackunit-lib&gt; #&lt;path:/Applications/Racket_v5=
 .90.0.7/share/pkgs/scribble-doc&gt; #&lt;path:/Applications/Racket_v5.90.0.=
 7/share/pkgs/scribble-lib&gt; #&lt;path:/Appl!<br>
 
 &gt; =C2=A0ications/Racket_v5.90.0.7/share/pkgs/compatibility-doc&gt; #&lt;=
 path:/Applica!<br>
 &gt; =C2=A0tions/Racket_v5.90.0.7/share/pkgs/profile-lib&gt; #&lt;path:/App=
 lications/Racket_v5.90.0.7/share/pkgs/db-lib&gt; #&lt;path:/Applications/Ra=
 cket_v5.90.0.7/share/pkgs/db-doc&gt; #&lt;path:/Applications/Racket_v5.90.0=
 .7/share/pkgs/srfi-lib&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/p=
 kgs/wxme-lib&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/gui-do=
 c&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/pict-doc&gt; #&lt=
 ;path:/Applications/Racket_v5.90.0.7/share/pkgs/pict-lib&gt; #&lt;path:/App=
 lications/Racket_v5.90.0.7/share/pkgs/draw-x86_64-macosx&gt; #&lt;path:/App=
 lications/Racket_v5.90.0.7/share/pkgs/compiler-lib&gt; #&lt;path:/Applicati=
 ons/Racket_v5.90.0.7/share/pkgs/planet-lib&gt; #&lt;path:/Applications/Rack=
 et_v5.90.0.7/share/pkgs/snip-lib&gt; #&lt;path:/Applications/Racket_v5.90.0=
 .7/share/pkgs/typed-racket-lib&gt; #&lt;path:/Applications/Racket_v5.90.0.7=
 /share/pkgs/html-lib&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkg=
 s/net-lib&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/srfi-doc&=
 gt; #&lt;path:/Applications/Racket_v5.90.0.7/!<br>
 
 &gt; =C2=A0share/pkgs/gui-pkg-manager-lib&gt; #&lt;path:/Applications/Racke=
 t_v5.90.0.7/share/pkgs/errortrace-doc&gt; #&lt;path:/Applications/Racket_v5=
 .90.0.7/share/pkgs/profile-doc&gt; #&lt;path:/Applications/Racket_v5.90.0.7=
 /share/pkgs/r5rs-doc&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkg=
 s/htdp-lib&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/htdp-doc=
 &gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/html-doc&gt; #&lt;=
 path:/Applications/Racket_v5.90.0.7/share/pkgs/slideshow-doc&gt; #&lt;path:=
 /Applications/Racket_v5.90.0.7/share/pkgs/typed-racket-doc&gt; #&lt;path:/A=
 pplications/Racket_v5.90.0.7/share/pkgs/slideshow-lib&gt; #&lt;path:/Applic=
 ations/Racket_v5.90.0.7/share/pkgs/eli-tester&gt; #&lt;path:/Applications/R=
 acket_v5.90.0.7/share/pkgs/r6rs-lib&gt; #&lt;path:/Applications/Racket_v5.9=
 0.0.7/share/pkgs/math-x86_64-macosx&gt; #&lt;path:/Applications/Racket_v5.9=
 0.0.7/share/pkgs/parser-tools-doc&gt; #&lt;path:/Applications/Racket_v5.90.=
 0.7/share/pkgs/web-server-lib&gt; #&lt;path:/Applications/Racket_v5.90.0.7/=
 share/pkgs/web-server-doc&gt; #&lt;path:/Appl!<br>
 
 &gt; =C2=A0ications/Racket_v5.90.0.7/share/pkgs/unstable-flonum-lib&gt; #&l=
 t;path:/Appli!<br>
 &gt; =C2=A0cations/Racket_v5.90.0.7/share/pkgs/r5rs-lib&gt; #&lt;path:/Appl=
 ications/Racket_v5.90.0.7/share/pkgs/r6rs-doc&gt; #&lt;path:/Applications/R=
 acket_v5.90.0.7/share/pkgs/distributed-places-lib&gt; #&lt;path:/Applicatio=
 ns/Racket_v5.90.0.7/share/pkgs/rackunit-plugin-lib&gt; #&lt;path:/Applicati=
 ons/Racket_v5.90.0.7/share/pkgs/readline-lib&gt; #&lt;path:/Applications/Ra=
 cket_v5.90.0.7/share/pkgs/readline-doc&gt; #&lt;path:/Applications/Racket_v=
 5.90.0.7/share/pkgs/redex-doc&gt; #&lt;path:/Applications/Racket_v5.90.0.7/=
 share/pkgs/redex-examples&gt; #&lt;path:/Applications/Racket_v5.90.0.7/shar=
 e/pkgs/redex-lib&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/sl=
 ideshow-exe&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/slidesh=
 ow-plugin&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/syntax-co=
 lor-lib&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/syntax-colo=
 r-doc&gt; #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/xrepl-lib&gt;=
  #&lt;path:/Applications/Racket_v5.90.0.7/share/pkgs/xrepl-doc&gt; #&lt;pat=
 h:/Applications/Racket_v5.90.0.7/share/!<br>
 
 &gt; =C2=A0pkgs/gui-x86_64-macosx&gt; #&lt;path:/Applications/Racket_v5.90.=
 0.7/share/pkgs/scribble-text-lib&gt; #&lt;path:/Applications/Racket_v5.90.0=
 .7/share/pkgs/unstable-debug-lib&gt; #&lt;path:/Applications/Racket_v5.90.0=
 .7/share/pkgs/unstable-macro-testing-lib&gt; #&lt;path:/Applications/Racket=
 _v5.90.0.7/share/pkgs/unstable-pretty-lib&gt;)<br>
 
 &gt; raco pkg (show):<br>
 &gt; Installation-wide:<br>
 &gt; =C2=A0Package =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Checksum=
  =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
 =A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Source<br>
 &gt; =C2=A0main-distribution =C2=A0 =C2=A087da68f0fd76d01bfd3877e25484c7cb4=
 73f5dc7 =C2=A0 =C2=A0(catalog main-distribution)<br>
 &gt; =C2=A0racket-lib =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 ab97208a7cbba149b2=
 12fe92bbdbe7cf318492a7 =C2=A0 =C2=A0(catalog racket-lib)<br>
 &gt; =C2=A0[143 auto-installed packages not shown]<br>
 &gt; User-specific for installation &quot;snapshot&quot;:<br>
 &gt; =C2=A0[none]<br>
 &gt;<br>
 &gt;<br>
 &gt;<br>
 &gt; Collections:<br>
 &gt; (&quot;/Users/greg/Library/Racket/snapshot/collects&quot;<br>
 &gt; =C2=A0(non-existent-path))<br>
 &gt; (&quot;/Applications/Racket_v5.90.0.7/collects&quot;<br>
 &gt; =C2=A0(&quot;.gitignore&quot; &quot;acks&quot; &quot;compiler&quot; &q=
 uot;data&quot; &quot;db&quot; &quot;dynext&quot; &quot;ffi&quot; &quot;file=
 &quot; &quot;info&quot; &quot;info-domain&quot; &quot;json&quot; &quot;laun=
 cher&quot; &quot;net&quot; &quot;openssl&quot; &quot;pkg&quot; &quot;planet=
 &quot; &quot;racket&quot; &quot;rackunit&quot; &quot;raco&quot; &quot;reade=
 r&quot; &quot;s-exp&quot; &quot;scheme&quot; &quot;setup&quot; &quot;srfi&q=
 uot; &quot;syntax&quot; &quot;unstable&quot; &quot;version&quot; &quot;xml&=
 quot;))<br>
 
 &gt;<br>
 &gt; Recent Internal Errors:<br>
 &gt; Computer Language: ((&quot;Determine language from source&quot;) (#(#t=
  print mixed-fraction-e #f #t debug) (default &quot;/Users/greg/src/scheme/=
 collects&quot;) #() &quot;#lang racket\n&quot; #f #t ((main) (test)) #t))<b=
 r>
 
 &gt;<br>
 </div></div></blockquote></div><br></div>
 
 --047d7b33d4a850d31b04e5957792--
From: Sam Tobin-Hochstadt <samth@cs.indiana.edu>
To: greghendershott@email.com, bugs <bugs@racket-lang.org>
Cc: nobody <nobody@racket-lang.org>,
        bug-notification <bug-notification@racket-lang.org>
Subject: Re: [racket-bug] all/13999: opt-lambda: doesn't seem to permit
 optional arguments
Date: Wed, 4 Sep 2013 17:25:30 -0400

 This example seems to work for me:
 https://github.com/plt/racket/blob/master/pkgs/typed-racket-pkgs/typed-racket-test/tests/typed-racket/succeed/opt-lambda.rkt
 
 It may be that you need the additional case-> annotation.
 
 Sam
 
 On Wed, Sep 4, 2013 at 5:20 PM,  <greghendershott@email.com> wrote:
 > A new problem report is waiting at
 >   http://bugs.racket-lang.org/query/?cmd=view&pr=13999
 >
 > Reported by Greg Hendershott for release: 5.90.0.7--2013-08-19(a212241/a)
 >
 > *** Description:
 > Using `opt-lambda:` without optional arguments type-checks and runs correctly:
 >
 > #lang typed/racket
 > (define mult
 >   (opt-lambda: ([x : Number][y : Number])
 >     (* x y)))
 > (mult 1 2)
 > => 2
 >
 > But using `opt-lambda:` to define, well, optional arguments does not -- let's add a default value of `1` for the last argument, `y`:
 >
 > #lang typed/racket
 > (define mult
 >   (opt-lambda: ([x : Number][y : Number 1])
 >     (* x y)))
 > (mult 1 2)
 > =>
 > Type Checker: No function domains matched in function application:
 > Domains: Number False False
 >          Number Number True
 > Arguments: Number Any True
 >  in: (opt-lambda: ((x : Number) (y : Number 1)) (* x y))
 >
 > If this is expected behavior not a bug, then I'd like this PR to be, "Please include an example of how to use `opt-lambda:` to do this".
 >
 > *** How to repeat:
 >
 >
 > *** Environment:
 > macosx "Darwin mbp.local 11.4.2 Darwin Kernel Version 11.4.2: Thu Aug 23 16:25:48 PDT 2012; root:xnu-1699.32.7~1/RELEASE_X86_64 x86_64" (x86_64-macosx/3m) (get-display-depth) = 32
 > Human Language: english
 > (current-memory-use) 566810328
 > Links: (links) = (); (links #:user? #f) = ("contract-profile" "math" "mysterx" "sgl" "datalog" "shell-completion" "algol60" "icons" "frtime" "unstable" "slatex" "realm" "games" "plot" "trace" "eopl" "lazy" "preprocessor" "db" "images" "mzcom" "racklog" "swindle" "schemeunit" "plai" "ds-store" "deinprogramm" "make"); (links #:root? #t) = (); (links #:user? #f #:root? #t) = (#<path:/Applications/Racket_v5.90.0.7/share/pkgs/main-distribution> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/racket-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/at-exp-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/compatibility> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/data-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/draw> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/draw-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/draw-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/drracket> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/errortrace> #<path:!
 >  /Applications/Racket_v5.90.0.7/share/pkgs/future-visualizer> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/future-visualizer-typed> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/gui> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/htdp> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/html> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/macro-debugger> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/macro-debugger-text-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/mzscheme> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/parser-tools> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/pconvert-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/pict> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/picturing-programs> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/profile> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/r5rs> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/r6rs> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/racket-doc> #<path:/Appl!
 >  ications/Racket_v5.90.0.7/share/pkgs/distributed-places-doc> #!
 >  <path:/Applications/Racket_v5.90.0.7/share/pkgs/racket-index> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/rackunit> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/readline> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/redex> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/sandbox-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/scribble> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/slideshow> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/snip> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/srfi> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/string-constants-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/syntax-color> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/typed-racket> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/typed-racket-more> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-contract-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-latent-!
 >  contract-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-list-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-options-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-parameter-group-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/web-server> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/wxme> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/xrepl> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/base> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/compatibility-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/drracket-plugin-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/errortrace-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/gui-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/parser-tools-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/rackunit-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/scribble-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/scribble-lib> #<path:/Appl!
 >  ications/Racket_v5.90.0.7/share/pkgs/compatibility-doc> #<path:/Applica!
 >  tions/Racket_v5.90.0.7/share/pkgs/profile-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/db-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/db-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/srfi-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/wxme-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/gui-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/pict-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/pict-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/draw-x86_64-macosx> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/compiler-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/planet-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/snip-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/typed-racket-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/html-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/net-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/srfi-doc> #<path:/Applications/Racket_v5.90.0.7/!
 >  share/pkgs/gui-pkg-manager-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/errortrace-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/profile-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/r5rs-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/htdp-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/htdp-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/html-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/slideshow-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/typed-racket-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/slideshow-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/eli-tester> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/r6rs-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/math-x86_64-macosx> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/parser-tools-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/web-server-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/web-server-doc> #<path:/Appl!
 >  ications/Racket_v5.90.0.7/share/pkgs/unstable-flonum-lib> #<path:/Appli!
 >  cations/Racket_v5.90.0.7/share/pkgs/r5rs-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/r6rs-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/distributed-places-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/rackunit-plugin-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/readline-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/readline-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/redex-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/redex-examples> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/redex-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/slideshow-exe> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/slideshow-plugin> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/syntax-color-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/syntax-color-doc> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/xrepl-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/xrepl-doc> #<path:/Applications/Racket_v5.90.0.7/share/!
 >  pkgs/gui-x86_64-macosx> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/scribble-text-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-debug-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-macro-testing-lib> #<path:/Applications/Racket_v5.90.0.7/share/pkgs/unstable-pretty-lib>)
 > raco pkg (show):
 > Installation-wide:
 >  Package              Checksum                                    Source
 >  main-distribution    87da68f0fd76d01bfd3877e25484c7cb473f5dc7    (catalog main-distribution)
 >  racket-lib           ab97208a7cbba149b212fe92bbdbe7cf318492a7    (catalog racket-lib)
 >  [143 auto-installed packages not shown]
 > User-specific for installation "snapshot":
 >  [none]
 >
 >
 >
 > Collections:
 > ("/Users/greg/Library/Racket/snapshot/collects"
 >  (non-existent-path))
 > ("/Applications/Racket_v5.90.0.7/collects"
 >  (".gitignore" "acks" "compiler" "data" "db" "dynext" "ffi" "file" "info" "info-domain" "json" "launcher" "net" "openssl" "pkg" "planet" "racket" "rackunit" "raco" "reader" "s-exp" "scheme" "setup" "srfi" "syntax" "unstable" "version" "xml"))
 >
 > Recent Internal Errors:
 > Computer Language: (("Determine language from source") (#(#t print mixed-fraction-e #f #t debug) (default "/Users/greg/src/scheme/collects") #() "#lang racket\n" #f #t ((main) (test)) #t))
 >
 
From: Greg Hendershott <greghendershott@gmail.com>
To: bugs@racket-lang.org, greghendershott@email.com
Cc: 
Subject: Re: all/13999: opt-lambda: doesn't seem to permit optional arguments
Date: Thu, 5 Sep 2013 21:39:27 -0400

 By the way, the reason I tried `opt-lambda:` is only because `define:`
 seems to lack any way to supply optional arguments with default
 values.
 
 Perhaps that's "as-intended" for `define:` and not a bug per se.
 However it would also be nice for `define:` to support that.
From: Greg Hendershott <greghendershott@gmail.com>
To: bugs@racket-lang.org
Cc: 
Subject: Re: all/13999: opt-lambda: doesn't seem to permit optional arguments
Date: Thu, 5 Sep 2013 22:06:18 -0400

 Huh. Somehow my email address ended up as @email.com when it should
 have been @gmail.com.
 
 On Thu, Sep 5, 2013 at 9:39 PM, Greg Hendershott
 <greghendershott@gmail.com> wrote:
 > By the way, the reason I tried `opt-lambda:` is only because `define:`
 > seems to lack any way to supply optional arguments with default
 > values.
 >
 > Perhaps that's "as-intended" for `define:` and not a bug per se.
 > However it would also be nice for `define:` to support that.


State changed from "open" to "closed" by asumu at Wed, 19 Feb 2014 21:01:53 -0500
Reason>>> Fixed recently in v6.0.0.2.

From: Asumu Takikawa <asumu@ccs.neu.edu>
To: greghendershott@email.com, bugs@racket-lang.org
Cc: nobody@racket-lang.org, bug-notification@racket-lang.org
Subject: Re: [racket-bug] all/13999: opt-lambda: doesn't seem to permit
 optional arguments
Date: Wed, 19 Feb 2014 21:00:59 -0500

 On 2013-09-04 17:20:02 -0400, greghendershott@email.com wrote:
 > But using `opt-lambda:` to define, well, optional arguments does not -- let's add a default value of `1` for the last argument, `y`:
 >
 > #lang typed/racket
 > (define mult
 >   (opt-lambda: ([x : Number][y : Number 1])
 >     (* x y)))
 > (mult 1 2)
 > =>
 > Type Checker: No function domains matched in function application:
 > Domains: Number False False
 >          Number Number True
 > Arguments: Number Any True
 >  in: (opt-lambda: ((x : Number) (y : Number 1)) (* x y))
 
 This bug has now been fixed in HEAD. Additionally, there's now a better
 way to write this:
 
   -> (define mult
        (lambda ([x : Number] [y : Number 1])
          (* x y)))
   -> (define (mult [x : Number] [y : Number 1])
        (* x y))
   -> mult
   - : (->* (Number) (Number) Number)
   #<procedure:mult>
 
 Cheers,
 Asumu
