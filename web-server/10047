From bugs+caf_=bugs=bugs.plt-scheme.org@plt-scheme.org Thu Jan 29 05:44:05 2009
Received: from yx-out-2324.google.com (yx-out-2324.google.com [74.125.44.29])
	by champlain.ccs.neu.edu (8.14.2/8.14.2) with ESMTP id n0TAht7L008721
	for <bugs@bugs.plt-scheme.org>; Thu, 29 Jan 2009 05:43:55 -0500
Message-Id: <200901291043.n0TAhqD9008714@champlain.ccs.neu.edu>
Date: Thu, 29 Jan 2009 05:43:52 -0500
From: spdegabrielle@gmail.com
To: bugs@plt-scheme.org
Subject: 'Create executable' fails to bundle 'web-server' collection in executable

>Number:         10047
>Category:       web-server
>Synopsis:       'Create executable' fails to bundle 'web-server' collection in executable
>Class:          sw-bug
>Responsible:    jay
>Severity:       serious
>Priority:       medium
>State:          closed
>Confidential:   no
>Arrival-Date:   Thu Jan 29 05:48:01 -0500 2009
>Closed-Date:    Mon Mar 16 15:32:22 -0400 2009
>Last-Modified:  Mon Mar 16 15:32:22 -0400 2009
>Originator:     Stephen De Gabrielle
>Organization:
plt
>Submitter-Id:   unknown
>Release:        4.1.4.2-svn27jan2009
>Environment:
macosx "Darwin uclic36.uclic.ucl.ac.uk 8.11.1 Darwin Kernel Version 8.11.1: Wed Oct 10 18:23:28 PDT 2007; root:xnu-792.25.20~1/RELEASE_I386 i386 i386" (i386-macosx/3m) (get-display-depth) = 32
Human Language: english
(current-memory-use) 168825568

Collections:
(("/Users/stephen/Library/PLT Scheme/4.1.4.2/collects" non-existent-path) ("/Applications/PLT Scheme Full v4.1.4.2/collects" "2htdp" "afm" "algol60" "browser" "combinator-parser" "compiler" "config" "defaults" "drscheme" "dynext" "embedded-gui" "eopl" "errortrace" "ffi" "file" "framework" "frtime" "games" "graphics" "gui-debugger" "guibuilder" "handin-client" "handin-server" "help" "hierlist" "honu" "htdch" "htdp" "html" "icons" "info-domain" "lang" "launcher" "lazy" "macro-debugger" "make" "mred" "mrlib" "mysterx" "mzcom" "mzlib" "mzscheme" "net" "openssl" "parser-tools" "planet" "plot" "preprocessor" "profj" "profjWizard" "r5rs" "r6rs" "readline" "redex" "repos-time-stamp" "rnrs" "s-exp" "scheme" "scribble" "scribblings" "setup" "sgl" "sirmail" "slatex" "slideshow" "srfi" "srpersist" "stepper" "string-constants" "stxclass" "swindle" "syntax" "syntax-color" "teachpack" "test-box-recovery" "test-engine" "tests" "tex2page" "texpict" "trace" "typed" "typed-scheme" "version" "w!
 aterworld" "web-server" "wxme" "xml"))
Computer Language: (("Module") (#(#t quasiquote repeating-decimal-e #f #t debug) (default) #() "#lang scheme\n" #t))
>Description:
I'm not sure if I'm doing something wrong, but the webserver collection isn't being included. (nor is a '/Users/stephen/Library/PLT Scheme/4.1.4.2/' copy turning up [2])

II'm wondering if my use of the following to bundle my includes is part of the problem; I 'require' a module that requires a bunch of modules so I only have to require one module in my main file. eg
#lang scheme
(require  [a bunch of files])

(provide (all-from-out
         [the same bunch]
           ))
the caveat is I didn't use this for the web server - I required those libraries(collects?) directly.

--
[1]
collection-path: collection not found: "web-server" in any of: (#<path:/Users/stephen/Library/PLT Scheme/4.1.4.2/collects> #<path:/Users/stephen/Desktop/threads-vi.app/Contents/Resources/collects>)

 === context ===
loop


[Exited]

---
[2]
uclic36:~/Library/PLT Scheme stephen$ pwd
/Users/stephen/Library/PLT Scheme
uclic36:~/Library/PLT Scheme stephen$ ls
4.1.0.3 4.1.2.1 4.1.2.4 4.1.3.3 planet
>How-To-Repeat:
Create stand alone executable for MrEd that calls web server. (stand alone servlets)
(require  web-server/servlet
          web-server/templates)

a constructed example - create stand-alone MrEd executable and run.
;
#lang scheme
(require  web-server/servlet
          web-server/templates
          web-server/dispatchers/dispatch-log
          scheme/date
          scheme/gui
          )
(provide/contract (start (request? . -> . response?)))

(define (get-logfile-path)  
  (build-path 
   (get-directory "Specify the log folder" #f (current-directory)  '() )
   (string->path (string-append "thread-" 
                                                                (number->string (date-year (seconds->date (current-seconds)))) "-"
                                                                (number->string (date-month (seconds->date (current-seconds)))) "-"
                                                                (number->string (date-day (seconds->date (current-seconds)))) "_"
                                                                (number->string (date-hour (seconds->date (current-seconds)))) "-"
                                                                (number->string (date-minute (seconds->date (current-seconds)))) "-"
                                                                (number->string (date-second (seconds->date (current-seconds)))) ".log"
                                                                
                                                                ))))

(define logfile-path (get-logfile-path)  )
  
  
  (define (start request)
    `(html (head (title "Hello world!"))
           (body (p "Hey out there!"))))
  
  
  
  (require web-server/servlet-env)
  (serve/servlet start
                 #:launch-browser? #t
                 #:quit? #f
                 #:listen-ip #f
                 #:port 8000
                 #:extra-files-paths
                 (list (current-directory))
                 #:servlet-path "/test-logging.ss"
                 #:mime-types-path "data/mime.types"
                 #:log-file logfile-path  
                 #:log-format 'parenthesized-default 
                 )
  
  ;---
>Fix:
>Audit-Trail:
From: Robby Findler <robby@eecs.northwestern.edu>
To: spdegabrielle@gmail.com, bugs@plt-scheme.org
Cc: nobody@plt-scheme.org, eli@plt-scheme.org, matthias@plt-scheme.org,
        sk@plt-scheme.org, mflatt@plt-scheme.org, clements@plt-scheme.org,
        jay@plt-scheme.org, meunier@plt-scheme.org, kathyg@plt-scheme.org,
        jacobm@plt-scheme.org, cce@plt-scheme.org, samth@plt-scheme.org,
        ryanc@plt-scheme.org, gcooper@plt-scheme.org, sstrickl@plt-scheme.org
Subject: Re: [plt-bug] all/10047: 'Create executable' fails to bundle 
	'web-server' collection in executable
Date: Thu, 29 Jan 2009 07:18:32 -0600

 This looks like there is some dynamic dependency on the webserver. Is
 that right?
 
 On 1/29/09, spdegabrielle@gmail.com <spdegabrielle@gmail.com> wrote:
 > A new problem report is waiting at
 >   http://bugs.plt-scheme.org/query/?cmd=view&pr=10047
 >
 > Reported by Stephen De Gabrielle for release: 4.1.4.2-svn27jan2009
 >
 > *** Description:
 > I'm not sure if I'm doing something wrong, but the webserver collection
 > isn't being included. (nor is a '/Users/stephen/Library/PLT Scheme/4.1.4.2/'
 > copy turning up [2])
 >
 > II'm wondering if my use of the following to bundle my includes is part of
 > the problem; I 'require' a module that requires a bunch of modules so I only
 > have to require one module in my main file. eg
 > #lang scheme
 > (require  [a bunch of files])
 >
 > (provide (all-from-out
 >          [the same bunch]
 >            ))
 > the caveat is I didn't use this for the web server - I required those
 > libraries(collects?) directly.
 >
 > --
 > [1]
 > collection-path: collection not found: "web-server" in any of:
 > (#<path:/Users/stephen/Library/PLT Scheme/4.1.4.2/collects>
 > #<path:/Users/stephen/Desktop/threads-vi.app/Contents/Resources/collects>)
 >
 >  === context ===
 > loop
 >
 >
 > [Exited]
 >
 > ---
 > [2]
 > uclic36:~/Library/PLT Scheme stephen$ pwd
 > /Users/stephen/Library/PLT Scheme
 > uclic36:~/Library/PLT Scheme stephen$ ls
 > 4.1.0.3 4.1.2.1 4.1.2.4 4.1.3.3 planet
 >
 > *** How to repeat:
 > Create stand alone executable for MrEd that calls web server. (stand alone
 > servlets)
 > (require  web-server/servlet
 >           web-server/templates)
 >
 > a constructed example - create stand-alone MrEd executable and run.
 > ;
 > #lang scheme
 > (require  web-server/servlet
 >           web-server/templates
 >           web-server/dispatchers/dispatch-log
 >           scheme/date
 >           scheme/gui
 >           )
 > (provide/contract (start (request? . -> . response?)))
 >
 > (define (get-logfile-path)
 >   (build-path
 >    (get-directory "Specify the log folder" #f (current-directory)  '() )
 >    (string->path (string-append "thread-"
 >
 > (number->string (date-year (seconds->date (current-seconds)))) "-"
 >
 > (number->string (date-month (seconds->date (current-seconds)))) "-"
 >
 > (number->string (date-day (seconds->date (current-seconds)))) "_"
 >
 > (number->string (date-hour (seconds->date (current-seconds)))) "-"
 >
 > (number->string (date-minute (seconds->date (current-seconds)))) "-"
 >
 > (number->string (date-second (seconds->date (current-seconds)))) ".log"
 >
 >                                                                 ))))
 >
 > (define logfile-path (get-logfile-path)  )
 >
 >
 >   (define (start request)
 >     `(html (head (title "Hello world!"))
 >            (body (p "Hey out there!"))))
 >
 >
 >
 >   (require web-server/servlet-env)
 >   (serve/servlet start
 >                  #:launch-browser? #t
 >                  #:quit? #f
 >                  #:listen-ip #f
 >                  #:port 8000
 >                  #:extra-files-paths
 >                  (list (current-directory))
 >                  #:servlet-path "/test-logging.ss"
 >                  #:mime-types-path "data/mime.types"
 >                  #:log-file logfile-path
 >                  #:log-format 'parenthesized-default
 >                  )
 >
 >   ;---
 >
 > *** Environment:
 > macosx "Darwin uclic36.uclic.ucl.ac.uk 8.11.1 Darwin Kernel Version 8.11.1:
 > Wed Oct 10 18:23:28 PDT 2007; root:xnu-792.25.20~1/RELEASE_I386 i386 i386"
 > (i386-macosx/3m) (get-display-depth) = 32
 > Human Language: english
 > (current-memory-use) 168825568
 >
 > Collections:
 > (("/Users/stephen/Library/PLT Scheme/4.1.4.2/collects" non-existent-path)
 > ("/Applications/PLT Scheme Full v4.1.4.2/collects" "2htdp" "afm" "algol60"
 > "browser" "combinator-parser" "compiler" "config" "defaults" "drscheme"
 > "dynext" "embedded-gui" "eopl" "errortrace" "ffi" "file" "framework"
 > "frtime" "games" "graphics" "gui-debugger" "guibuilder" "handin-client"
 > "handin-server" "help" "hierlist" "honu" "htdch" "htdp" "html" "icons"
 > "info-domain" "lang" "launcher" "lazy" "macro-debugger" "make" "mred"
 > "mrlib" "mysterx" "mzcom" "mzlib" "mzscheme" "net" "openssl" "parser-tools"
 > "planet" "plot" "preprocessor" "profj" "profjWizard" "r5rs" "r6rs"
 > "readline" "redex" "repos-time-stamp" "rnrs" "s-exp" "scheme" "scribble"
 > "scribblings" "setup" "sgl" "sirmail" "slatex" "slideshow" "srfi"
 > "srpersist" "stepper" "string-constants" "stxclass" "swindle" "syntax"
 > "syntax-color" "teachpack" "test-box-recovery" "test-engine" "tests"
 > "tex2page" "texpict" "trace" "typed" "typed-scheme" "version" "w!
 >  aterworld" "web-server" "wxme" "xml"))
 > Computer Language: (("Module") (#(#t quasiquote repeating-decimal-e #f #t
 > debug) (default) #() "#lang scheme\n" #t))
 >
 >
From: Stephen De Gabrielle <spdegabrielle@gmail.com>
To: bugs@plt-scheme.org
Cc: 
Subject: Fwd: [plt-bug] all/10047: 'Create executable' fails to bundle 
	'web-server' collection in executable
Date: Thu, 29 Jan 2009 14:30:05 +0000

 --000e0cd1382ac45a6104619fecdd
 Content-Type: text/plain; charset=UTF-8
 Content-Transfer-Encoding: 7bit
 
 for bug tracker
 ---------- Forwarded message ----------
 From: Stephen De Gabrielle <spdegabrielle@gmail.com>
 Date: Thu, Jan 29, 2009 at 1:36 PM
 Subject: Re: [plt-bug] all/10047: 'Create executable' fails to bundle
 'web-server' collection in executable
 To: Robby Findler <robby@eecs.northwestern.edu>
 
 
 I'm not aware of one, I just require  web-server/servlet and
 web-server/templates as per usual.
 [and   (require web-server/servlet-env) just before calling
 (serve/servlet start ...]
 
 Didn't my example reproduce the error?
 
 I've attached the source and the executable.
 
 Thanks,
 
 Stephen
 
 
 On Thu, Jan 29, 2009 at 1:18 PM, Robby Findler
 <robby@eecs.northwestern.edu> wrote:
 > This looks like there is some dynamic dependency on the webserver. Is
 > that right?
 >
 > On 1/29/09, spdegabrielle@gmail.com <spdegabrielle@gmail.com> wrote:
 >> A new problem report is waiting at
 >>   http://bugs.plt-scheme.org/query/?cmd=view&pr=10047
 >>
 >> Reported by Stephen De Gabrielle for release: 4.1.4.2-svn27jan2009
 >>
 >> *** Description:
 >> I'm not sure if I'm doing something wrong, but the webserver collection
 >> isn't being included. (nor is a '/Users/stephen/Library/PLT Scheme/4.1.4.2/'
 >> copy turning up [2])
 >>
 >> II'm wondering if my use of the following to bundle my includes is part of
 >> the problem; I 'require' a module that requires a bunch of modules so I only
 >> have to require one module in my main file. eg
 >> #lang scheme
 >> (require  [a bunch of files])
 >>
 >> (provide (all-from-out
 >>          [the same bunch]
 >>            ))
 >> the caveat is I didn't use this for the web server - I required those
 >> libraries(collects?) directly.
 >>
 >> --
 >> [1]
 >> collection-path: collection not found: "web-server" in any of:
 >> (#<path:/Users/stephen/Library/PLT Scheme/4.1.4.2/collects>
 >> #<path:/Users/stephen/Desktop/threads-vi.app/Contents/Resources/collects>)
 >>
 >>  === context ===
 >> loop
 >>
 >>
 >> [Exited]
 >>
 >> ---
 >> [2]
 >> uclic36:~/Library/PLT Scheme stephen$ pwd
 >> /Users/stephen/Library/PLT Scheme
 >> uclic36:~/Library/PLT Scheme stephen$ ls
 >> 4.1.0.3 4.1.2.1 4.1.2.4 4.1.3.3 planet
 >>
 >> *** How to repeat:
 >> Create stand alone executable for MrEd that calls web server. (stand alone
 >> servlets)
 >> (require  web-server/servlet
 >>           web-server/templates)
 >>
 >> a constructed example - create stand-alone MrEd executable and run.
 >> ;
 >> #lang scheme
 >> (require  web-server/servlet
 >>           web-server/templates
 >>           web-server/dispatchers/dispatch-log
 >>           scheme/date
 >>           scheme/gui
 >>           )
 >> (provide/contract (start (request? . -> . response?)))
 >>
 >> (define (get-logfile-path)
 >>   (build-path
 >>    (get-directory "Specify the log folder" #f (current-directory)  '() )
 >>    (string->path (string-append "thread-"
 >>
 >> (number->string (date-year (seconds->date (current-seconds)))) "-"
 >>
 >> (number->string (date-month (seconds->date (current-seconds)))) "-"
 >>
 >> (number->string (date-day (seconds->date (current-seconds)))) "_"
 >>
 >> (number->string (date-hour (seconds->date (current-seconds)))) "-"
 >>
 >> (number->string (date-minute (seconds->date (current-seconds)))) "-"
 >>
 >> (number->string (date-second (seconds->date (current-seconds)))) ".log"
 >>
 >>                                                                 ))))
 >>
 >> (define logfile-path (get-logfile-path)  )
 >>
 >>
 >>   (define (start request)
 >>     `(html (head (title "Hello world!"))
 >>            (body (p "Hey out there!"))))
 >>
 >>
 >>
 >>   (require web-server/servlet-env)
 >>   (serve/servlet start
 >>                  #:launch-browser? #t
 >>                  #:quit? #f
 >>                  #:listen-ip #f
 >>                  #:port 8000
 >>                  #:extra-files-paths
 >>                  (list (current-directory))
 >>                  #:servlet-path "/test-logging.ss"
 >>                  #:mime-types-path "data/mime.types"
 >>                  #:log-file logfile-path
 >>                  #:log-format 'parenthesized-default
 >>                  )
 >>
 >>   ;---
 >>
 >> *** Environment:
 >> macosx "Darwin uclic36.uclic.ucl.ac.uk 8.11.1 Darwin Kernel Version 8.11.1:
 >> Wed Oct 10 18:23:28 PDT 2007; root:xnu-792.25.20~1/RELEASE_I386 i386 i386"
 >> (i386-macosx/3m) (get-display-depth) = 32
 >> Human Language: english
 >> (current-memory-use) 168825568
 >>
 >> Collections:
 >> (("/Users/stephen/Library/PLT Scheme/4.1.4.2/collects" non-existent-path)
 >> ("/Applications/PLT Scheme Full v4.1.4.2/collects" "2htdp" "afm" "algol60"
 >> "browser" "combinator-parser" "compiler" "config" "defaults" "drscheme"
 >> "dynext" "embedded-gui" "eopl" "errortrace" "ffi" "file" "framework"
 >> "frtime" "games" "graphics" "gui-debugger" "guibuilder" "handin-client"
 >> "handin-server" "help" "hierlist" "honu" "htdch" "htdp" "html" "icons"
 >> "info-domain" "lang" "launcher" "lazy" "macro-debugger" "make" "mred"
 >> "mrlib" "mysterx" "mzcom" "mzlib" "mzscheme" "net" "openssl" "parser-tools"
 >> "planet" "plot" "preprocessor" "profj" "profjWizard" "r5rs" "r6rs"
 >> "readline" "redex" "repos-time-stamp" "rnrs" "s-exp" "scheme" "scribble"
 >> "scribblings" "setup" "sgl" "sirmail" "slatex" "slideshow" "srfi"
 >> "srpersist" "stepper" "string-constants" "stxclass" "swindle" "syntax"
 >> "syntax-color" "teachpack" "test-box-recovery" "test-engine" "tests"
 >> "tex2page" "texpict" "trace" "typed" "typed-scheme" "version" "w!
 >>  aterworld" "web-server" "wxme" "xml"))
 >> Computer Language: (("Module") (#(#t quasiquote repeating-decimal-e #f #t
 >> debug) (default) #() "#lang scheme\n" #t))
 >>
 >>
 >
 
 
 
 --
 Cheers,
 
 Stephen
 
 --
 Stephen De Gabrielle
 s.degabrielle@cs.ucl.ac.uk
 Telephone +44 (0)20 7679 0693 (x30693)
 Mobile                  079 851 890 45
 Project: Making Sense of Information (MaSI)
 Work:http://www.uclic.ucl.ac.uk/annb/MaSI.html
 Home:http://www.degabrielle.name/stephen
 
 
 UCL Interaction Centre
 MPEB 8th floor
 University College London
 Gower Street
 London WC1E 6BT
 
 
 
 -- 
 Cheers,
 
 Stephen
 
 --
 Stephen De Gabrielle
 s.degabrielle@cs.ucl.ac.uk
 Telephone +44 (0)20 7679 0693 (x30693)
 Mobile                  079 851 890 45
 Project: Making Sense of Information (MaSI)
 Work:http://www.uclic.ucl.ac.uk/annb/MaSI.html
 Home:http://www.degabrielle.name/stephen
 
 
 UCL Interaction Centre
 MPEB 8th floor
 University College London
 Gower Street
 London WC1E 6BT
 
 [snipped]

From: Robby Findler <robby@eecs.northwestern.edu>
To: Stephen De Gabrielle <spdegabrielle@gmail.com>
Cc: jay@plt-scheme.org, "bugs@plt-scheme.org" <bugs@plt-scheme.org>
Subject: Re: [plt-bug] all/10047: 'Create executable' fails to bundle 
	'web-server' collection in executable
Date: Thu, 29 Jan 2009 09:04:25 -0600

 Sorry -- that was a comment aimed at the web-server implementors
 (Jay!), not you. I agree that there wasn't one in the code you sent.
 
 Thanks,
 Robby
 
 On Thu, Jan 29, 2009 at 7:36 AM, Stephen De Gabrielle
 <spdegabrielle@gmail.com> wrote:
 > I'm not aware of one, I just require  web-server/servlet and
 > web-server/templates as per usual.
 > [and   (require web-server/servlet-env) just before calling
 > (serve/servlet start ...]
 >
 > Didn't my example reproduce the error?
 >
 > I've attached the source and the executable.
 >
 > Thanks,
 >
 > Stephen
 >
 >
 > On Thu, Jan 29, 2009 at 1:18 PM, Robby Findler
 > <robby@eecs.northwestern.edu> wrote:
 >> This looks like there is some dynamic dependency on the webserver. Is
 >> that right?
 >>
 >> On 1/29/09, spdegabrielle@gmail.com <spdegabrielle@gmail.com> wrote:
 >>> A new problem report is waiting at
 >>>   http://bugs.plt-scheme.org/query/?cmd=view&pr=10047
 >>>
 >>> Reported by Stephen De Gabrielle for release: 4.1.4.2-svn27jan2009
 >>>
 >>> *** Description:
 >>> I'm not sure if I'm doing something wrong, but the webserver collection
 >>> isn't being included. (nor is a '/Users/stephen/Library/PLT Scheme/4.1.4.2/'
 >>> copy turning up [2])
 >>>
 >>> II'm wondering if my use of the following to bundle my includes is part of
 >>> the problem; I 'require' a module that requires a bunch of modules so I only
 >>> have to require one module in my main file. eg
 >>> #lang scheme
 >>> (require  [a bunch of files])
 >>>
 >>> (provide (all-from-out
 >>>          [the same bunch]
 >>>            ))
 >>> the caveat is I didn't use this for the web server - I required those
 >>> libraries(collects?) directly.
 >>>
 >>> --
 >>> [1]
 >>> collection-path: collection not found: "web-server" in any of:
 >>> (#<path:/Users/stephen/Library/PLT Scheme/4.1.4.2/collects>
 >>> #<path:/Users/stephen/Desktop/threads-vi.app/Contents/Resources/collects>)
 >>>
 >>>  === context ===
 >>> loop
 >>>
 >>>
 >>> [Exited]
 >>>
 >>> ---
 >>> [2]
 >>> uclic36:~/Library/PLT Scheme stephen$ pwd
 >>> /Users/stephen/Library/PLT Scheme
 >>> uclic36:~/Library/PLT Scheme stephen$ ls
 >>> 4.1.0.3 4.1.2.1 4.1.2.4 4.1.3.3 planet
 >>>
 >>> *** How to repeat:
 >>> Create stand alone executable for MrEd that calls web server. (stand alone
 >>> servlets)
 >>> (require  web-server/servlet
 >>>           web-server/templates)
 >>>
 >>> a constructed example - create stand-alone MrEd executable and run.
 >>> ;
 >>> #lang scheme
 >>> (require  web-server/servlet
 >>>           web-server/templates
 >>>           web-server/dispatchers/dispatch-log
 >>>           scheme/date
 >>>           scheme/gui
 >>>           )
 >>> (provide/contract (start (request? . -> . response?)))
 >>>
 >>> (define (get-logfile-path)
 >>>   (build-path
 >>>    (get-directory "Specify the log folder" #f (current-directory)  '() )
 >>>    (string->path (string-append "thread-"
 >>>
 >>> (number->string (date-year (seconds->date (current-seconds)))) "-"
 >>>
 >>> (number->string (date-month (seconds->date (current-seconds)))) "-"
 >>>
 >>> (number->string (date-day (seconds->date (current-seconds)))) "_"
 >>>
 >>> (number->string (date-hour (seconds->date (current-seconds)))) "-"
 >>>
 >>> (number->string (date-minute (seconds->date (current-seconds)))) "-"
 >>>
 >>> (number->string (date-second (seconds->date (current-seconds)))) ".log"
 >>>
 >>>                                                                 ))))
 >>>
 >>> (define logfile-path (get-logfile-path)  )
 >>>
 >>>
 >>>   (define (start request)
 >>>     `(html (head (title "Hello world!"))
 >>>            (body (p "Hey out there!"))))
 >>>
 >>>
 >>>
 >>>   (require web-server/servlet-env)
 >>>   (serve/servlet start
 >>>                  #:launch-browser? #t
 >>>                  #:quit? #f
 >>>                  #:listen-ip #f
 >>>                  #:port 8000
 >>>                  #:extra-files-paths
 >>>                  (list (current-directory))
 >>>                  #:servlet-path "/test-logging.ss"
 >>>                  #:mime-types-path "data/mime.types"
 >>>                  #:log-file logfile-path
 >>>                  #:log-format 'parenthesized-default
 >>>                  )
 >>>
 >>>   ;---
 >>>
 >>> *** Environment:
 >>> macosx "Darwin uclic36.uclic.ucl.ac.uk 8.11.1 Darwin Kernel Version 8.11.1:
 >>> Wed Oct 10 18:23:28 PDT 2007; root:xnu-792.25.20~1/RELEASE_I386 i386 i386"
 >>> (i386-macosx/3m) (get-display-depth) = 32
 >>> Human Language: english
 >>> (current-memory-use) 168825568
 >>>
 >>> Collections:
 >>> (("/Users/stephen/Library/PLT Scheme/4.1.4.2/collects" non-existent-path)
 >>> ("/Applications/PLT Scheme Full v4.1.4.2/collects" "2htdp" "afm" "algol60"
 >>> "browser" "combinator-parser" "compiler" "config" "defaults" "drscheme"
 >>> "dynext" "embedded-gui" "eopl" "errortrace" "ffi" "file" "framework"
 >>> "frtime" "games" "graphics" "gui-debugger" "guibuilder" "handin-client"
 >>> "handin-server" "help" "hierlist" "honu" "htdch" "htdp" "html" "icons"
 >>> "info-domain" "lang" "launcher" "lazy" "macro-debugger" "make" "mred"
 >>> "mrlib" "mysterx" "mzcom" "mzlib" "mzscheme" "net" "openssl" "parser-tools"
 >>> "planet" "plot" "preprocessor" "profj" "profjWizard" "r5rs" "r6rs"
 >>> "readline" "redex" "repos-time-stamp" "rnrs" "s-exp" "scheme" "scribble"
 >>> "scribblings" "setup" "sgl" "sirmail" "slatex" "slideshow" "srfi"
 >>> "srpersist" "stepper" "string-constants" "stxclass" "swindle" "syntax"
 >>> "syntax-color" "teachpack" "test-box-recovery" "test-engine" "tests"
 >>> "tex2page" "texpict" "trace" "typed" "typed-scheme" "version" "w!
 >>>  aterworld" "web-server" "wxme" "xml"))
 >>> Computer Language: (("Module") (#(#t quasiquote repeating-decimal-e #f #t
 >>> debug) (default) #() "#lang scheme\n" #t))
 >>>
 >>>
 >>
 >
 >
 >
 > --
 > Cheers,
 >
 > Stephen
 >
 > --
 > Stephen De Gabrielle
 > s.degabrielle@cs.ucl.ac.uk
 > Telephone +44 (0)20 7679 0693 (x30693)
 > Mobile                  079 851 890 45
 > Project: Making Sense of Information (MaSI)
 > Work:http://www.uclic.ucl.ac.uk/annb/MaSI.html
 > Home:http://www.degabrielle.name/stephen
 >
 >
 > UCL Interaction Centre
 > MPEB 8th floor
 > University College London
 > Gower Street
 > London WC1E 6BT
 >
From: Jay McCarthy <jay.mccarthy@gmail.com>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: spdegabrielle@gmail.com, bugs@plt-scheme.org, nobody@plt-scheme.org,
        eli@plt-scheme.org, matthias@plt-scheme.org, sk@plt-scheme.org,
        mflatt@plt-scheme.org, clements@plt-scheme.org, jay@plt-scheme.org,
        meunier@plt-scheme.org, kathyg@plt-scheme.org, jacobm@plt-scheme.org,
        cce@plt-scheme.org, samth@plt-scheme.org, ryanc@plt-scheme.org,
        gcooper@plt-scheme.org, sstrickl@plt-scheme.org
Subject: Re: [plt-bug] all/10047: 'Create executable' fails to bundle 
	'web-server' collection in executable
Date: Thu, 29 Jan 2009 08:10:43 -0700

 There is one but I don't think it is implicated in his example.
 dispatchers/dispatch-servlets will use dynamic-require to get at other
 servlets, but it doesn't need to to run his. How exactly does 'Create
 executable' work? What sorts of things will it error on?
 
 Jay
 
 On Thu, Jan 29, 2009 at 6:18 AM, Robby Findler
 <robby@eecs.northwestern.edu> wrote:
 > This looks like there is some dynamic dependency on the webserver. Is
 > that right?
 >
 > On 1/29/09, spdegabrielle@gmail.com <spdegabrielle@gmail.com> wrote:
 >> A new problem report is waiting at
 >>   http://bugs.plt-scheme.org/query/?cmd=view&pr=10047
 >>
 >> Reported by Stephen De Gabrielle for release: 4.1.4.2-svn27jan2009
 >>
 >> *** Description:
 >> I'm not sure if I'm doing something wrong, but the webserver collection
 >> isn't being included. (nor is a '/Users/stephen/Library/PLT Scheme/4.1.4.2/'
 >> copy turning up [2])
 >>
 >> II'm wondering if my use of the following to bundle my includes is part of
 >> the problem; I 'require' a module that requires a bunch of modules so I only
 >> have to require one module in my main file. eg
 >> #lang scheme
 >> (require  [a bunch of files])
 >>
 >> (provide (all-from-out
 >>          [the same bunch]
 >>            ))
 >> the caveat is I didn't use this for the web server - I required those
 >> libraries(collects?) directly.
 >>
 >> --
 >> [1]
 >> collection-path: collection not found: "web-server" in any of:
 >> (#<path:/Users/stephen/Library/PLT Scheme/4.1.4.2/collects>
 >> #<path:/Users/stephen/Desktop/threads-vi.app/Contents/Resources/collects>)
 >>
 >>  === context ===
 >> loop
 >>
 >>
 >> [Exited]
 >>
 >> ---
 >> [2]
 >> uclic36:~/Library/PLT Scheme stephen$ pwd
 >> /Users/stephen/Library/PLT Scheme
 >> uclic36:~/Library/PLT Scheme stephen$ ls
 >> 4.1.0.3 4.1.2.1 4.1.2.4 4.1.3.3 planet
 >>
 >> *** How to repeat:
 >> Create stand alone executable for MrEd that calls web server. (stand alone
 >> servlets)
 >> (require  web-server/servlet
 >>           web-server/templates)
 >>
 >> a constructed example - create stand-alone MrEd executable and run.
 >> ;
 >> #lang scheme
 >> (require  web-server/servlet
 >>           web-server/templates
 >>           web-server/dispatchers/dispatch-log
 >>           scheme/date
 >>           scheme/gui
 >>           )
 >> (provide/contract (start (request? . -> . response?)))
 >>
 >> (define (get-logfile-path)
 >>   (build-path
 >>    (get-directory "Specify the log folder" #f (current-directory)  '() )
 >>    (string->path (string-append "thread-"
 >>
 >> (number->string (date-year (seconds->date (current-seconds)))) "-"
 >>
 >> (number->string (date-month (seconds->date (current-seconds)))) "-"
 >>
 >> (number->string (date-day (seconds->date (current-seconds)))) "_"
 >>
 >> (number->string (date-hour (seconds->date (current-seconds)))) "-"
 >>
 >> (number->string (date-minute (seconds->date (current-seconds)))) "-"
 >>
 >> (number->string (date-second (seconds->date (current-seconds)))) ".log"
 >>
 >>                                                                 ))))
 >>
 >> (define logfile-path (get-logfile-path)  )
 >>
 >>
 >>   (define (start request)
 >>     `(html (head (title "Hello world!"))
 >>            (body (p "Hey out there!"))))
 >>
 >>
 >>
 >>   (require web-server/servlet-env)
 >>   (serve/servlet start
 >>                  #:launch-browser? #t
 >>                  #:quit? #f
 >>                  #:listen-ip #f
 >>                  #:port 8000
 >>                  #:extra-files-paths
 >>                  (list (current-directory))
 >>                  #:servlet-path "/test-logging.ss"
 >>                  #:mime-types-path "data/mime.types"
 >>                  #:log-file logfile-path
 >>                  #:log-format 'parenthesized-default
 >>                  )
 >>
 >>   ;---
 >>
 >> *** Environment:
 >> macosx "Darwin uclic36.uclic.ucl.ac.uk 8.11.1 Darwin Kernel Version 8.11.1:
 >> Wed Oct 10 18:23:28 PDT 2007; root:xnu-792.25.20~1/RELEASE_I386 i386 i386"
 >> (i386-macosx/3m) (get-display-depth) = 32
 >> Human Language: english
 >> (current-memory-use) 168825568
 >>
 >> Collections:
 >> (("/Users/stephen/Library/PLT Scheme/4.1.4.2/collects" non-existent-path)
 >> ("/Applications/PLT Scheme Full v4.1.4.2/collects" "2htdp" "afm" "algol60"
 >> "browser" "combinator-parser" "compiler" "config" "defaults" "drscheme"
 >> "dynext" "embedded-gui" "eopl" "errortrace" "ffi" "file" "framework"
 >> "frtime" "games" "graphics" "gui-debugger" "guibuilder" "handin-client"
 >> "handin-server" "help" "hierlist" "honu" "htdch" "htdp" "html" "icons"
 >> "info-domain" "lang" "launcher" "lazy" "macro-debugger" "make" "mred"
 >> "mrlib" "mysterx" "mzcom" "mzlib" "mzscheme" "net" "openssl" "parser-tools"
 >> "planet" "plot" "preprocessor" "profj" "profjWizard" "r5rs" "r6rs"
 >> "readline" "redex" "repos-time-stamp" "rnrs" "s-exp" "scheme" "scribble"
 >> "scribblings" "setup" "sgl" "sirmail" "slatex" "slideshow" "srfi"
 >> "srpersist" "stepper" "string-constants" "stxclass" "swindle" "syntax"
 >> "syntax-color" "teachpack" "test-box-recovery" "test-engine" "tests"
 >> "tex2page" "texpict" "trace" "typed" "typed-scheme" "version" "w!
 >>  aterworld" "web-server" "wxme" "xml"))
 >> Computer Language: (("Module") (#(#t quasiquote repeating-decimal-e #f #t
 >> debug) (default) #() "#lang scheme\n" #t))
 >>
 >>
 >
 
 
 
 -- 
 Jay McCarthy <jay@cs.byu.edu>
 Assistant Professor / Brigham Young University
 http://teammccarthy.org/jay
 
 "The glory of God is Intelligence" - D&C 93
From: Robby Findler <robby@eecs.northwestern.edu>
To: Jay McCarthy <jay.mccarthy@gmail.com>
Cc: spdegabrielle@gmail.com, bugs@plt-scheme.org,
        Matthew Flatt <mflatt@cs.utah.edu>
Subject: Re: [plt-bug] all/10047: 'Create executable' fails to bundle 
	'web-server' collection in executable
Date: Thu, 29 Jan 2009 09:15:15 -0600

 On Thu, Jan 29, 2009 at 9:10 AM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 > There is one but I don't think it is implicated in his example.
 > dispatchers/dispatch-servlets will use dynamic-require to get at other
 > servlets, but it doesn't need to to run his. How exactly does 'Create
 > executable' work? What sorts of things will it error on?
 
 Create executable collects all of the statically visible references to
 files (including require, but also define-runtime-path) into the
 executable and then it somehow disables other requires (something like
 setting current-library-collection-paths to null) when running the
 executable, but still points require & co. to the embedded files. So
 if there is a dynamic link somewhere, the file just won't be included
 and you get an error like the below.
 
 There is a mzscheme-level interface to this stuff that drscheme uses.
 I think you want to look at the compiler/embed library, IIRC.
 
 Robby
From: Jay McCarthy <jay.mccarthy@gmail.com>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: spdegabrielle@gmail.com, bugs@plt-scheme.org,
        Matthew Flatt <mflatt@cs.utah.edu>
Subject: Re: [plt-bug] all/10047: 'Create executable' fails to bundle 
	'web-server' collection in executable
Date: Thu, 29 Jan 2009 14:50:23 -0700

 Hmm, maybe because the web server uses files like mime.types it is
 breaking. It seems strange though that it wouldn't find the web-server
 collects at all.
 
 Jay
 
 On Thu, Jan 29, 2009 at 8:15 AM, Robby Findler
 <robby@eecs.northwestern.edu> wrote:
 > On Thu, Jan 29, 2009 at 9:10 AM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >> There is one but I don't think it is implicated in his example.
 >> dispatchers/dispatch-servlets will use dynamic-require to get at other
 >> servlets, but it doesn't need to to run his. How exactly does 'Create
 >> executable' work? What sorts of things will it error on?
 >
 > Create executable collects all of the statically visible references to
 > files (including require, but also define-runtime-path) into the
 > executable and then it somehow disables other requires (something like
 > setting current-library-collection-paths to null) when running the
 > executable, but still points require & co. to the embedded files. So
 > if there is a dynamic link somewhere, the file just won't be included
 > and you get an error like the below.
 >
 > There is a mzscheme-level interface to this stuff that drscheme uses.
 > I think you want to look at the compiler/embed library, IIRC.
 >
 > Robby
 >
 
 
 
 -- 
 Jay McCarthy <jay@cs.byu.edu>
 Assistant Professor / Brigham Young University
 http://teammccarthy.org/jay
 
 "The glory of God is Intelligence" - D&C 93
From: Robby Findler <robby@eecs.northwestern.edu>
To: Jay McCarthy <jay.mccarthy@gmail.com>
Cc: spdegabrielle@gmail.com, bugs@plt-scheme.org,
        Matthew Flatt <mflatt@cs.utah.edu>
Subject: Re: [plt-bug] all/10047: 'Create executable' fails to bundle 
	'web-server' collection in executable
Date: Thu, 29 Jan 2009 19:05:56 -0600

 There is no web server collects anymore! That's the whole point of an
 embedding executable.
 
 Robby
 
 On Thu, Jan 29, 2009 at 3:50 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 > Hmm, maybe because the web server uses files like mime.types it is
 > breaking. It seems strange though that it wouldn't find the web-server
 > collects at all.
 >
 > Jay
 >
 > On Thu, Jan 29, 2009 at 8:15 AM, Robby Findler
 > <robby@eecs.northwestern.edu> wrote:
 >> On Thu, Jan 29, 2009 at 9:10 AM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >>> There is one but I don't think it is implicated in his example.
 >>> dispatchers/dispatch-servlets will use dynamic-require to get at other
 >>> servlets, but it doesn't need to to run his. How exactly does 'Create
 >>> executable' work? What sorts of things will it error on?
 >>
 >> Create executable collects all of the statically visible references to
 >> files (including require, but also define-runtime-path) into the
 >> executable and then it somehow disables other requires (something like
 >> setting current-library-collection-paths to null) when running the
 >> executable, but still points require & co. to the embedded files. So
 >> if there is a dynamic link somewhere, the file just won't be included
 >> and you get an error like the below.
 >>
 >> There is a mzscheme-level interface to this stuff that drscheme uses.
 >> I think you want to look at the compiler/embed library, IIRC.
 >>
 >> Robby
 >>
 >
 >
 >
 > --
 > Jay McCarthy <jay@cs.byu.edu>
 > Assistant Professor / Brigham Young University
 > http://teammccarthy.org/jay
 >
 > "The glory of God is Intelligence" - D&C 93
 >
From: Jay McCarthy <jay.mccarthy@gmail.com>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: spdegabrielle@gmail.com, bugs@plt-scheme.org,
        Matthew Flatt <mflatt@cs.utah.edu>
Subject: Re: [plt-bug] all/10047: 'Create executable' fails to bundle 
	'web-server' collection in executable
Date: Thu, 29 Jan 2009 18:46:55 -0700

 Ooooh, I see. I thought it packaged them up into something hidden
 inside the .app folder.
 
 Stephen, I'll try to recreate your problem and see if I can locate the
 code that breaks it. I probably need some runtime-paths.
 
 Jay
 
 On Thu, Jan 29, 2009 at 6:05 PM, Robby Findler
 <robby@eecs.northwestern.edu> wrote:
 > There is no web server collects anymore! That's the whole point of an
 > embedding executable.
 >
 > Robby
 >
 > On Thu, Jan 29, 2009 at 3:50 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >> Hmm, maybe because the web server uses files like mime.types it is
 >> breaking. It seems strange though that it wouldn't find the web-server
 >> collects at all.
 >>
 >> Jay
 >>
 >> On Thu, Jan 29, 2009 at 8:15 AM, Robby Findler
 >> <robby@eecs.northwestern.edu> wrote:
 >>> On Thu, Jan 29, 2009 at 9:10 AM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >>>> There is one but I don't think it is implicated in his example.
 >>>> dispatchers/dispatch-servlets will use dynamic-require to get at other
 >>>> servlets, but it doesn't need to to run his. How exactly does 'Create
 >>>> executable' work? What sorts of things will it error on?
 >>>
 >>> Create executable collects all of the statically visible references to
 >>> files (including require, but also define-runtime-path) into the
 >>> executable and then it somehow disables other requires (something like
 >>> setting current-library-collection-paths to null) when running the
 >>> executable, but still points require & co. to the embedded files. So
 >>> if there is a dynamic link somewhere, the file just won't be included
 >>> and you get an error like the below.
 >>>
 >>> There is a mzscheme-level interface to this stuff that drscheme uses.
 >>> I think you want to look at the compiler/embed library, IIRC.
 >>>
 >>> Robby
 >>>
 >>
 >>
 >>
 >> --
 >> Jay McCarthy <jay@cs.byu.edu>
 >> Assistant Professor / Brigham Young University
 >> http://teammccarthy.org/jay
 >>
 >> "The glory of God is Intelligence" - D&C 93
 >>
 >
 
 
 
 -- 
 Jay McCarthy <jay@cs.byu.edu>
 Assistant Professor / Brigham Young University
 http://teammccarthy.org/jay
 
 "The glory of God is Intelligence" - D&C 93
From: Robby Findler <robby@eecs.northwestern.edu>
To: Jay McCarthy <jay.mccarthy@gmail.com>
Cc: spdegabrielle@gmail.com, bugs@plt-scheme.org,
        Matthew Flatt <mflatt@cs.utah.edu>
Subject: Re: [plt-bug] all/10047: 'Create executable' fails to bundle 
	'web-server' collection in executable
Date: Thu, 29 Jan 2009 19:53:02 -0600

 It does package things up and things do end up in the .app folder
 under mac os x, but it does that by following the links I was
 describing earlier. It doesn't just package up any old thing in a
 directory that holds code, but instead only follows links that show up
 in the source code.
 
 Robby
 
 On Thu, Jan 29, 2009 at 7:46 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 > Ooooh, I see. I thought it packaged them up into something hidden
 > inside the .app folder.
 >
 > Stephen, I'll try to recreate your problem and see if I can locate the
 > code that breaks it. I probably need some runtime-paths.
 >
 > Jay
 >
 > On Thu, Jan 29, 2009 at 6:05 PM, Robby Findler
 > <robby@eecs.northwestern.edu> wrote:
 >> There is no web server collects anymore! That's the whole point of an
 >> embedding executable.
 >>
 >> Robby
 >>
 >> On Thu, Jan 29, 2009 at 3:50 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >>> Hmm, maybe because the web server uses files like mime.types it is
 >>> breaking. It seems strange though that it wouldn't find the web-server
 >>> collects at all.
 >>>
 >>> Jay
 >>>
 >>> On Thu, Jan 29, 2009 at 8:15 AM, Robby Findler
 >>> <robby@eecs.northwestern.edu> wrote:
 >>>> On Thu, Jan 29, 2009 at 9:10 AM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >>>>> There is one but I don't think it is implicated in his example.
 >>>>> dispatchers/dispatch-servlets will use dynamic-require to get at other
 >>>>> servlets, but it doesn't need to to run his. How exactly does 'Create
 >>>>> executable' work? What sorts of things will it error on?
 >>>>
 >>>> Create executable collects all of the statically visible references to
 >>>> files (including require, but also define-runtime-path) into the
 >>>> executable and then it somehow disables other requires (something like
 >>>> setting current-library-collection-paths to null) when running the
 >>>> executable, but still points require & co. to the embedded files. So
 >>>> if there is a dynamic link somewhere, the file just won't be included
 >>>> and you get an error like the below.
 >>>>
 >>>> There is a mzscheme-level interface to this stuff that drscheme uses.
 >>>> I think you want to look at the compiler/embed library, IIRC.
 >>>>
 >>>> Robby
 >>>>
 >>>
 >>>
 >>>
 >>> --
 >>> Jay McCarthy <jay@cs.byu.edu>
 >>> Assistant Professor / Brigham Young University
 >>> http://teammccarthy.org/jay
 >>>
 >>> "The glory of God is Intelligence" - D&C 93
 >>>
 >>
 >
 >
 >
 > --
 > Jay McCarthy <jay@cs.byu.edu>
 > Assistant Professor / Brigham Young University
 > http://teammccarthy.org/jay
 >
 > "The glory of God is Intelligence" - D&C 93
 >
From: Jay McCarthy <jay.mccarthy@gmail.com>
To: Robby Findler <robby@eecs.northwestern.edu>
Cc: spdegabrielle@gmail.com, bugs@plt-scheme.org,
        Matthew Flatt <mflatt@cs.utah.edu>
Subject: Re: [plt-bug] all/10047: 'Create executable' fails to bundle 
	'web-server' collection in executable
Date: Fri, 30 Jan 2009 13:57:45 -0700

 I found a few places where I can easily use runtime-path. There are a
 few that are more complicated:
 
 In configuration/namespace.ss -- when I replace the references to
 modules that get put in servlets' namespaces to use
 define-runtime-module-path, (I assume that's the right thing to use
 because namespace-require and namespace-attach-module is similar to
 dynamic-require.) I get an error that says it cannot find files that
 exist.  For example, collects/scheme/main.ss. Is part of the problem
 that d-r-m-p resolves the name "early" but it needs to be resolved
 "later" when the new namespace is created?
 
 In servlet-env.ss, I use the default web root to get a lot of files. I
 can greatly change the code to compensate and use a lot of different
 runtime-paths, but I would really like the ability to have
 "runtime-path" that allows me to capture a whole directory. Is that
 possible?
 
 I think I might have similar problems getting the standard error style
 sheet to display.
 
 Jay
 
 On Thu, Jan 29, 2009 at 6:53 PM, Robby Findler
 <robby@eecs.northwestern.edu> wrote:
 > It does package things up and things do end up in the .app folder
 > under mac os x, but it does that by following the links I was
 > describing earlier. It doesn't just package up any old thing in a
 > directory that holds code, but instead only follows links that show up
 > in the source code.
 >
 > Robby
 >
 > On Thu, Jan 29, 2009 at 7:46 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >> Ooooh, I see. I thought it packaged them up into something hidden
 >> inside the .app folder.
 >>
 >> Stephen, I'll try to recreate your problem and see if I can locate the
 >> code that breaks it. I probably need some runtime-paths.
 >>
 >> Jay
 >>
 >> On Thu, Jan 29, 2009 at 6:05 PM, Robby Findler
 >> <robby@eecs.northwestern.edu> wrote:
 >>> There is no web server collects anymore! That's the whole point of an
 >>> embedding executable.
 >>>
 >>> Robby
 >>>
 >>> On Thu, Jan 29, 2009 at 3:50 PM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >>>> Hmm, maybe because the web server uses files like mime.types it is
 >>>> breaking. It seems strange though that it wouldn't find the web-server
 >>>> collects at all.
 >>>>
 >>>> Jay
 >>>>
 >>>> On Thu, Jan 29, 2009 at 8:15 AM, Robby Findler
 >>>> <robby@eecs.northwestern.edu> wrote:
 >>>>> On Thu, Jan 29, 2009 at 9:10 AM, Jay McCarthy <jay.mccarthy@gmail.com> wrote:
 >>>>>> There is one but I don't think it is implicated in his example.
 >>>>>> dispatchers/dispatch-servlets will use dynamic-require to get at other
 >>>>>> servlets, but it doesn't need to to run his. How exactly does 'Create
 >>>>>> executable' work? What sorts of things will it error on?
 >>>>>
 >>>>> Create executable collects all of the statically visible references to
 >>>>> files (including require, but also define-runtime-path) into the
 >>>>> executable and then it somehow disables other requires (something like
 >>>>> setting current-library-collection-paths to null) when running the
 >>>>> executable, but still points require & co. to the embedded files. So
 >>>>> if there is a dynamic link somewhere, the file just won't be included
 >>>>> and you get an error like the below.
 >>>>>
 >>>>> There is a mzscheme-level interface to this stuff that drscheme uses.
 >>>>> I think you want to look at the compiler/embed library, IIRC.
 >>>>>
 >>>>> Robby
 >>>>>
 >>>>
 >>>>
 >>>>
 >>>> --
 >>>> Jay McCarthy <jay@cs.byu.edu>
 >>>> Assistant Professor / Brigham Young University
 >>>> http://teammccarthy.org/jay
 >>>>
 >>>> "The glory of God is Intelligence" - D&C 93
 >>>>
 >>>
 >>
 >>
 >>
 >> --
 >> Jay McCarthy <jay@cs.byu.edu>
 >> Assistant Professor / Brigham Young University
 >> http://teammccarthy.org/jay
 >>
 >> "The glory of God is Intelligence" - D&C 93
 >>
 >
 
 
 
 -- 
 Jay McCarthy <jay@cs.byu.edu>
 Assistant Professor / Brigham Young University
 http://teammccarthy.org/jay
 
 "The glory of God is Intelligence" - D&C 93
From: Matthew Flatt <mflatt@cs.utah.edu>
To: Jay McCarthy <jay.mccarthy@gmail.com>
Cc: Robby Findler <robby@eecs.northwestern.edu>, spdegabrielle@gmail.com,
        bugs@plt-scheme.org
Subject: Re: [plt-bug] all/10047: 'Create executable' fails to bundle 
	'web-server' collection in executable
Date: Fri, 30 Jan 2009 14:01:21 -0700

 At Fri, 30 Jan 2009 13:57:45 -0700, Jay McCarthy wrote:
 > I found a few places where I can easily use runtime-path. There are a
 > few that are more complicated:
 > 
 > In configuration/namespace.ss -- when I replace the references to
 > modules that get put in servlets' namespaces to use
 > define-runtime-module-path, (I assume that's the right thing to use
 > because namespace-require and namespace-attach-module is similar to
 > dynamic-require.) I get an error that says it cannot find files that
 > exist.  For example, collects/scheme/main.ss. Is part of the problem
 > that d-r-m-p resolves the name "early" but it needs to be resolved
 > "later" when the new namespace is created?
 
 When does the error happen: when compiling, when building the
 executable, or running the executable?
 
 > In servlet-env.ss, I use the default web root to get a lot of files. I
 > can greatly change the code to compensate and use a lot of different
 > runtime-paths, but I would really like the ability to have
 > "runtime-path" that allows me to capture a whole directory. Is that
 > possible?
 
 Yes, that's what `define-runtime-path' does if the path refers (at
 executable-creation time) to a directory.
 


State changed from "open" to "closed" by jay at Mon, 16 Mar 2009 15:32:22 -0400
Reason>>> Fixed in SVN, by adding runtime paths

